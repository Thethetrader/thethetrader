(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function MC(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function OC(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var a=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return s[n]}})}),t}var Rp={exports:{}},ju={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function PC(){if(rw)return ju;rw=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:s,type:n,key:u,ref:a!==void 0?a:null,props:l}}return ju.Fragment=e,ju.jsx=t,ju.jsxs=t,ju}var iw;function LC(){return iw||(iw=1,Rp.exports=PC()),Rp.exports}var r=LC(),Ip={exports:{}},dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw;function UC(){if(aw)return dt;aw=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function v(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,z={};function q(O,le,Re){this.props=O,this.context=le,this.refs=z,this.updater=Re||A}q.prototype.isReactComponent={},q.prototype.setState=function(O,le){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,le,"setState")},q.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Q(){}Q.prototype=q.prototype;function pe(O,le,Re){this.props=O,this.context=le,this.refs=z,this.updater=Re||A}var ee=pe.prototype=new Q;ee.constructor=pe,R(ee,q.prototype),ee.isPureReactComponent=!0;var fe=Array.isArray,be={H:null,A:null,T:null,S:null},Ee=Object.prototype.hasOwnProperty;function L(O,le,Re,je,Te,Ye){return Re=Ye.ref,{$$typeof:s,type:O,key:le,ref:Re!==void 0?Re:null,props:Ye}}function D(O,le){return L(O.type,le,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function U(O){var le={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Re){return le[Re]})}var $=/\/+/g;function X(O,le){return typeof O=="object"&&O!==null&&O.key!=null?U(""+O.key):le.toString(36)}function P(){}function zt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(P,P):(O.status="pending",O.then(function(le){O.status==="pending"&&(O.status="fulfilled",O.value=le)},function(le){O.status==="pending"&&(O.status="rejected",O.reason=le)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Rt(O,le,Re,je,Te){var Ye=typeof O;(Ye==="undefined"||Ye==="boolean")&&(O=null);var Pe=!1;if(O===null)Pe=!0;else switch(Ye){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(O.$$typeof){case s:case e:Pe=!0;break;case y:return Pe=O._init,Rt(Pe(O._payload),le,Re,je,Te)}}if(Pe)return Te=Te(O),Pe=je===""?"."+X(O,0):je,fe(Te)?(Re="",Pe!=null&&(Re=Pe.replace($,"$&/")+"/"),Rt(Te,le,Re,"",function(qt){return qt})):Te!=null&&(I(Te)&&(Te=D(Te,Re+(Te.key==null||O&&O.key===Te.key?"":(""+Te.key).replace($,"$&/")+"/")+Pe)),le.push(Te)),1;Pe=0;var hs=je===""?".":je+":";if(fe(O))for(var _t=0;_t<O.length;_t++)je=O[_t],Ye=hs+X(je,_t),Pe+=Rt(je,le,Re,Ye,Te);else if(_t=v(O),typeof _t=="function")for(O=_t.call(O),_t=0;!(je=O.next()).done;)je=je.value,Ye=hs+X(je,_t++),Pe+=Rt(je,le,Re,Ye,Te);else if(Ye==="object"){if(typeof O.then=="function")return Rt(zt(O),le,Re,je,Te);throw le=String(O),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function oe(O,le,Re){if(O==null)return O;var je=[],Te=0;return Rt(O,je,"","",function(Ye){return le.call(Re,Ye,Te++)}),je}function Ce(O){if(O._status===-1){var le=O._result;le=le(),le.then(function(Re){(O._status===0||O._status===-1)&&(O._status=1,O._result=Re)},function(Re){(O._status===0||O._status===-1)&&(O._status=2,O._result=Re)}),O._status===-1&&(O._status=0,O._result=le)}if(O._status===1)return O._result.default;throw O._result}var re=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Le(){}return dt.Children={map:oe,forEach:function(O,le,Re){oe(O,function(){le.apply(this,arguments)},Re)},count:function(O){var le=0;return oe(O,function(){le++}),le},toArray:function(O){return oe(O,function(le){return le})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},dt.Component=q,dt.Fragment=t,dt.Profiler=a,dt.PureComponent=pe,dt.StrictMode=n,dt.Suspense=g,dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=be,dt.act=function(){throw Error("act(...) is not supported in production builds of React.")},dt.cache=function(O){return function(){return O.apply(null,arguments)}},dt.cloneElement=function(O,le,Re){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var je=R({},O.props),Te=O.key,Ye=void 0;if(le!=null)for(Pe in le.ref!==void 0&&(Ye=void 0),le.key!==void 0&&(Te=""+le.key),le)!Ee.call(le,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&le.ref===void 0||(je[Pe]=le[Pe]);var Pe=arguments.length-2;if(Pe===1)je.children=Re;else if(1<Pe){for(var hs=Array(Pe),_t=0;_t<Pe;_t++)hs[_t]=arguments[_t+2];je.children=hs}return L(O.type,Te,void 0,void 0,Ye,je)},dt.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},dt.createElement=function(O,le,Re){var je,Te={},Ye=null;if(le!=null)for(je in le.key!==void 0&&(Ye=""+le.key),le)Ee.call(le,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(Te[je]=le[je]);var Pe=arguments.length-2;if(Pe===1)Te.children=Re;else if(1<Pe){for(var hs=Array(Pe),_t=0;_t<Pe;_t++)hs[_t]=arguments[_t+2];Te.children=hs}if(O&&O.defaultProps)for(je in Pe=O.defaultProps,Pe)Te[je]===void 0&&(Te[je]=Pe[je]);return L(O,Ye,void 0,void 0,null,Te)},dt.createRef=function(){return{current:null}},dt.forwardRef=function(O){return{$$typeof:h,render:O}},dt.isValidElement=I,dt.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:Ce}},dt.memo=function(O,le){return{$$typeof:p,type:O,compare:le===void 0?null:le}},dt.startTransition=function(O){var le=be.T,Re={};be.T=Re;try{var je=O(),Te=be.S;Te!==null&&Te(Re,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(Le,re)}catch(Ye){re(Ye)}finally{be.T=le}},dt.unstable_useCacheRefresh=function(){return be.H.useCacheRefresh()},dt.use=function(O){return be.H.use(O)},dt.useActionState=function(O,le,Re){return be.H.useActionState(O,le,Re)},dt.useCallback=function(O,le){return be.H.useCallback(O,le)},dt.useContext=function(O){return be.H.useContext(O)},dt.useDebugValue=function(){},dt.useDeferredValue=function(O,le){return be.H.useDeferredValue(O,le)},dt.useEffect=function(O,le){return be.H.useEffect(O,le)},dt.useId=function(){return be.H.useId()},dt.useImperativeHandle=function(O,le,Re){return be.H.useImperativeHandle(O,le,Re)},dt.useInsertionEffect=function(O,le){return be.H.useInsertionEffect(O,le)},dt.useLayoutEffect=function(O,le){return be.H.useLayoutEffect(O,le)},dt.useMemo=function(O,le){return be.H.useMemo(O,le)},dt.useOptimistic=function(O,le){return be.H.useOptimistic(O,le)},dt.useReducer=function(O,le,Re){return be.H.useReducer(O,le,Re)},dt.useRef=function(O){return be.H.useRef(O)},dt.useState=function(O){return be.H.useState(O)},dt.useSyncExternalStore=function(O,le,Re){return be.H.useSyncExternalStore(O,le,Re)},dt.useTransition=function(){return be.H.useTransition()},dt.version="19.0.0",dt}var ow;function m0(){return ow||(ow=1,Ip.exports=UC()),Ip.exports}var K=m0(),Dp={exports:{}},Tu={},kp={exports:{}},Mp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lw;function VC(){return lw||(lw=1,function(s){function e(oe,Ce){var re=oe.length;oe.push(Ce);e:for(;0<re;){var Le=re-1>>>1,O=oe[Le];if(0<a(O,Ce))oe[Le]=Ce,oe[re]=O,re=Le;else break e}}function t(oe){return oe.length===0?null:oe[0]}function n(oe){if(oe.length===0)return null;var Ce=oe[0],re=oe.pop();if(re!==Ce){oe[0]=re;e:for(var Le=0,O=oe.length,le=O>>>1;Le<le;){var Re=2*(Le+1)-1,je=oe[Re],Te=Re+1,Ye=oe[Te];if(0>a(je,re))Te<O&&0>a(Ye,je)?(oe[Le]=Ye,oe[Te]=re,Le=Te):(oe[Le]=je,oe[Re]=re,Le=Re);else if(Te<O&&0>a(Ye,re))oe[Le]=Ye,oe[Te]=re,Le=Te;else break e}}return Ce}function a(oe,Ce){var re=oe.sortIndex-Ce.sortIndex;return re!==0?re:oe.id-Ce.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();s.unstable_now=function(){return u.now()-h}}var g=[],p=[],y=1,w=null,v=3,A=!1,R=!1,z=!1,q=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function ee(oe){for(var Ce=t(p);Ce!==null;){if(Ce.callback===null)n(p);else if(Ce.startTime<=oe)n(p),Ce.sortIndex=Ce.expirationTime,e(g,Ce);else break;Ce=t(p)}}function fe(oe){if(z=!1,ee(oe),!R)if(t(g)!==null)R=!0,zt();else{var Ce=t(p);Ce!==null&&Rt(fe,Ce.startTime-oe)}}var be=!1,Ee=-1,L=5,D=-1;function I(){return!(s.unstable_now()-D<L)}function U(){if(be){var oe=s.unstable_now();D=oe;var Ce=!0;try{e:{R=!1,z&&(z=!1,Q(Ee),Ee=-1),A=!0;var re=v;try{t:{for(ee(oe),w=t(g);w!==null&&!(w.expirationTime>oe&&I());){var Le=w.callback;if(typeof Le=="function"){w.callback=null,v=w.priorityLevel;var O=Le(w.expirationTime<=oe);if(oe=s.unstable_now(),typeof O=="function"){w.callback=O,ee(oe),Ce=!0;break t}w===t(g)&&n(g),ee(oe)}else n(g);w=t(g)}if(w!==null)Ce=!0;else{var le=t(p);le!==null&&Rt(fe,le.startTime-oe),Ce=!1}}break e}finally{w=null,v=re,A=!1}Ce=void 0}}finally{Ce?$():be=!1}}}var $;if(typeof pe=="function")$=function(){pe(U)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,P=X.port2;X.port1.onmessage=U,$=function(){P.postMessage(null)}}else $=function(){q(U,0)};function zt(){be||(be=!0,$())}function Rt(oe,Ce){Ee=q(function(){oe(s.unstable_now())},Ce)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(oe){oe.callback=null},s.unstable_continueExecution=function(){R||A||(R=!0,zt())},s.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<oe?Math.floor(1e3/oe):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_getFirstCallbackNode=function(){return t(g)},s.unstable_next=function(oe){switch(v){case 1:case 2:case 3:var Ce=3;break;default:Ce=v}var re=v;v=Ce;try{return oe()}finally{v=re}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(oe,Ce){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var re=v;v=oe;try{return Ce()}finally{v=re}},s.unstable_scheduleCallback=function(oe,Ce,re){var Le=s.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Le+re:Le):re=Le,oe){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=re+O,oe={id:y++,callback:Ce,priorityLevel:oe,startTime:re,expirationTime:O,sortIndex:-1},re>Le?(oe.sortIndex=re,e(p,oe),t(g)===null&&oe===t(p)&&(z?(Q(Ee),Ee=-1):z=!0,Rt(fe,re-Le))):(oe.sortIndex=O,e(g,oe),R||A||(R=!0,zt())),oe},s.unstable_shouldYield=I,s.unstable_wrapCallback=function(oe){var Ce=v;return function(){var re=v;v=Ce;try{return oe.apply(this,arguments)}finally{v=re}}}}(Mp)),Mp}var cw;function FC(){return cw||(cw=1,kp.exports=VC()),kp.exports}var Op={exports:{}},Fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function BC(){if(uw)return Fn;uw=1;var s=m0();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:g,containerInfo:p,implementation:y}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Fn.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,y)},Fn.flushSync=function(g){var p=u.T,y=n.p;try{if(u.T=null,n.p=2,g)return g()}finally{u.T=p,n.p=y,n.d.f()}},Fn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(g,p))},Fn.prefetchDNS=function(g){typeof g=="string"&&n.d.D(g)},Fn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,w=h(y,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?n.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:v,fetchPriority:A}):y==="script"&&n.d.X(g,{crossOrigin:w,integrity:v,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Fn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);n.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(g)},Fn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,w=h(y,p.crossOrigin);n.d.L(g,y,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Fn.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=h(p.as,p.crossOrigin);n.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(g)},Fn.requestFormReset=function(g){n.d.r(g)},Fn.unstable_batchedUpdates=function(g,p){return g(p)},Fn.useFormState=function(g,p,y){return u.H.useFormState(g,p,y)},Fn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Fn.version="19.0.0",Fn}var dw;function qC(){if(dw)return Op.exports;dw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Op.exports=BC(),Op.exports}var hw;function $C(){if(hw)return Tu;hw=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=FC(),e=m0(),t=qC();function n(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var l=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),A=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),fe=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function Ee(i){return i===null||typeof i!="object"?null:(i=be&&i[be]||i["@@iterator"],typeof i=="function"?i:null)}var L=Symbol.for("react.client.reference");function D(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===L?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case g:return"Fragment";case h:return"Portal";case y:return"Profiler";case p:return"StrictMode";case z:return"Suspense";case q:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case A:return(i.displayName||"Context")+".Provider";case v:return(i._context.displayName||"Context")+".Consumer";case R:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Q:return o=i.displayName||null,o!==null?o:D(i.type)||"Memo";case pe:o=i._payload,i=i._init;try{return D(i(o))}catch{}}return null}var I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=Object.assign,$,X;function P(i){if($===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);$=o&&o[1]||"",X=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$+i+X}var zt=!1;function Rt(i,o){if(!i||zt)return"";zt=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(he){var ne=he}Reflect.construct(i,[],ve)}else{try{ve.call()}catch(he){ne=he}i.call(ve.prototype)}}else{try{throw Error()}catch(he){ne=he}(ve=i())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(he){if(he&&ne&&typeof he.stack=="string")return[he.stack,ne.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),T=x[0],S=x[1];if(T&&S){var M=T.split(`
`),W=S.split(`
`);for(m=d=0;d<M.length&&!M[d].includes("DetermineComponentFrameRoot");)d++;for(;m<W.length&&!W[m].includes("DetermineComponentFrameRoot");)m++;if(d===M.length||m===W.length)for(d=M.length-1,m=W.length-1;1<=d&&0<=m&&M[d]!==W[m];)m--;for(;1<=d&&0<=m;d--,m--)if(M[d]!==W[m]){if(d!==1||m!==1)do if(d--,m--,0>m||M[d]!==W[m]){var me=`
`+M[d].replace(" at new "," at ");return i.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",i.displayName)),me}while(1<=d&&0<=m);break}}}finally{zt=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?P(c):""}function oe(i){switch(i.tag){case 26:case 27:case 5:return P(i.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return i=Rt(i.type,!1),i;case 11:return i=Rt(i.type.render,!1),i;case 1:return i=Rt(i.type,!0),i;default:return""}}function Ce(i){try{var o="";do o+=oe(i),i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function re(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function Le(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function O(i){if(re(i)!==i)throw Error(n(188))}function le(i){var o=i.alternate;if(!o){if(o=re(i),o===null)throw Error(n(188));return o!==i?null:i}for(var c=i,d=o;;){var m=c.return;if(m===null)break;var x=m.alternate;if(x===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===x.child){for(x=m.child;x;){if(x===c)return O(m),i;if(x===d)return O(m),o;x=x.sibling}throw Error(n(188))}if(c.return!==d.return)c=m,d=x;else{for(var T=!1,S=m.child;S;){if(S===c){T=!0,c=m,d=x;break}if(S===d){T=!0,d=m,c=x;break}S=S.sibling}if(!T){for(S=x.child;S;){if(S===c){T=!0,c=x,d=m;break}if(S===d){T=!0,d=x,c=m;break}S=S.sibling}if(!T)throw Error(n(189))}}if(c.alternate!==d)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:o}function Re(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=Re(i),o!==null)return o;i=i.sibling}return null}var je=Array.isArray,Te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye={pending:!1,data:null,method:null,action:null},Pe=[],hs=-1;function _t(i){return{current:i}}function qt(i){0>hs||(i.current=Pe[hs],Pe[hs]=null,hs--)}function jt(i,o){hs++,Pe[hs]=i.current,i.current=o}var en=_t(null),Ps=_t(null),tn=_t(null),nr=_t(null);function Gn(i,o){switch(jt(tn,o),jt(Ps,i),jt(en,null),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)&&(o=o.namespaceURI)?k_(o):0;break;default:if(i=i===8?o.parentNode:o,o=i.tagName,i=i.namespaceURI)i=k_(i),o=M_(i,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}qt(en),jt(en,o)}function ys(){qt(en),qt(Ps),qt(tn)}function $r(i){i.memoizedState!==null&&jt(nr,i);var o=en.current,c=M_(o,i.type);o!==c&&(jt(Ps,i),jt(en,c))}function qs(i){Ps.current===i&&(qt(en),qt(Ps)),nr.current===i&&(qt(nr),vu._currentValue=Ye)}var ur=Object.prototype.hasOwnProperty,li=s.unstable_scheduleCallback,zr=s.unstable_cancelCallback,pa=s.unstable_shouldYield,Mi=s.unstable_requestPaint,$s=s.unstable_now,xa=s.unstable_getCurrentPriorityLevel,fs=s.unstable_ImmediatePriority,Ls=s.unstable_UserBlockingPriority,Pn=s.unstable_NormalPriority,Hr=s.unstable_LowPriority,ns=s.unstable_IdlePriority,ya=s.log,_s=s.unstable_setDisableYieldValue,Wt=null,Ft=null;function tt(i){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Wt,i,void 0,(i.current.flags&128)===128)}catch{}}function Ot(i){if(typeof ya=="function"&&_s(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Wt,i)}catch{}}var Us=Math.clz32?Math.clz32:Oi,vs=Math.log,ci=Math.LN2;function Oi(i){return i>>>=0,i===0?32:31-(vs(i)/ci|0)|0}var rs=128,is=4194304;function hn(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ke(i,o){var c=i.pendingLanes;if(c===0)return 0;var d=0,m=i.suspendedLanes,x=i.pingedLanes,T=i.warmLanes;i=i.finishedLanes!==0;var S=c&134217727;return S!==0?(c=S&~m,c!==0?d=hn(c):(x&=S,x!==0?d=hn(x):i||(T=S&~T,T!==0&&(d=hn(T))))):(S=c&~m,S!==0?d=hn(S):x!==0?d=hn(x):i||(T=c&~T,T!==0&&(d=hn(T)))),d===0?0:o!==0&&o!==d&&(o&m)===0&&(m=d&-d,T=o&-o,m>=T||m===32&&(T&4194176)!==0)?o:d}function Ht(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Ve(i,o){switch(i){case 1:case 2:case 4:case 8:return o+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fn(){var i=rs;return rs<<=1,(rs&4194176)===0&&(rs=128),i}function jn(){var i=is;return is<<=1,(is&62914560)===0&&(is=4194304),i}function Qe(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Zt(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Gr(i,o,c,d,m,x){var T=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var S=i.entanglements,M=i.expirationTimes,W=i.hiddenUpdates;for(c=T&~c;0<c;){var me=31-Us(c),ve=1<<me;S[me]=0,M[me]=-1;var ne=W[me];if(ne!==null)for(W[me]=null,me=0;me<ne.length;me++){var he=ne[me];he!==null&&(he.lane&=-536870913)}c&=~ve}d!==0&&Yt(i,d,0),x!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=x&~(T&~o))}function Yt(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-Us(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|c&4194218}function Nr(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var d=31-Us(c),m=1<<d;m&o|i[d]&o&&(i[d]|=o),c&=~m}}function Pi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Li(){var i=Te.p;return i!==0?i:(i=window.event,i===void 0?32:J_(i.type))}function qe(i,o){var c=Te.p;try{return Te.p=i,o()}finally{Te.p=c}}var Wn=Math.random().toString(36).slice(2),ws="__reactFiber$"+Wn,ft="__reactProps$"+Wn,dr="__reactContainer$"+Wn,zs="__reactEvents$"+Wn,jr="__reactListeners$"+Wn,rr="__reactHandles$"+Wn,Wr="__reactResources$"+Wn,Tr="__reactMarker$"+Wn;function ms(i){delete i[ws],delete i[ft],delete i[zs],delete i[jr],delete i[rr]}function Et(i){var o=i[ws];if(o)return o;for(var c=i.parentNode;c;){if(o=c[dr]||c[ws]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=L_(i);i!==null;){if(c=i[ws])return c;i=L_(i)}return o}i=c,c=i.parentNode}return null}function mn(i){if(i=i[ws]||i[dr]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function Ns(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(n(33))}function Yn(i){var o=i[Wr];return o||(o=i[Wr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Kt(i){i[Tr]=!0}var ui=new Set,di={};function Rs(i,o){js(i,o),js(i+"Capture",o)}function js(i,o){for(di[i]=o,i=0;i<o.length;i++)ui.add(o[i])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hi={},fi={};function Sr(i){return ur.call(fi,i)?!0:ur.call(hi,i)?!1:hr.test(i)?fi[i]=!0:(hi[i]=!0,!1)}function ir(i,o,c){if(Sr(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function Er(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function Sn(i,o,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+d)}}function Pt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Yr(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ar(i){var o=Yr(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,x=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(T){d=""+T,x.call(this,T)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function fr(i){i._valueTracker||(i._valueTracker=Ar(i))}function Kn(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return i&&(d=Yr(i)?i.checked?"true":"false":i.value),i=d,i!==c?(o.setValue(i),!0):!1}function Kr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ln=/[\n"\\]/g;function es(i){return i.replace(Ln,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function N(i,o,c,d,m,x,T,S){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),o!=null?T==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Pt(o)):i.value!==""+Pt(o)&&(i.value=""+Pt(o)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),o!=null?Y(i,T,Pt(o)):c!=null?Y(i,T,Pt(c)):d!=null&&i.removeAttribute("value"),m==null&&x!=null&&(i.defaultChecked=!!x),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+Pt(S):i.removeAttribute("name")}function F(i,o,c,d,m,x,T,S){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.type=x),o!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||o!=null))return;c=c!=null?""+Pt(c):"",o=o!=null?""+Pt(o):c,S||o===i.value||(i.value=o),i.defaultValue=o}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=S?i.checked:!!d,i.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Y(i,o,c){o==="number"&&Kr(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function B(i,o,c,d){if(i=i.options,o){o={};for(var m=0;m<c.length;m++)o["$"+c[m]]=!0;for(c=0;c<i.length;c++)m=o.hasOwnProperty("$"+i[c].value),i[c].selected!==m&&(i[c].selected=m),m&&d&&(i[c].defaultSelected=!0)}else{for(c=""+Pt(c),o=null,m=0;m<i.length;m++){if(i[m].value===c){i[m].selected=!0,d&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function ie(i,o,c){if(o!=null&&(o=""+Pt(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+Pt(c):""}function de(i,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(n(92));if(je(d)){if(1<d.length)throw Error(n(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=Pt(o),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d)}function ce(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var Se=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xe(i,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,c):typeof c!="number"||c===0||Se.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function $e(i,o,c){if(o!=null&&typeof o!="object")throw Error(n(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var m in o)d=o[m],o.hasOwnProperty(m)&&c[m]!==d&&Xe(i,m,d)}else for(var x in o)o.hasOwnProperty(x)&&Xe(i,x,o[x])}function it(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ht(i){return bs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var at=null;function ct(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ot=null,gs=null;function _(i){var o=mn(i);if(o&&(i=o.stateNode)){var c=i[ft]||null;e:switch(i=o.stateNode,o.type){case"input":if(N(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+es(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==i&&d.form===i.form){var m=d[ft]||null;if(!m)throw Error(n(90));N(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===i.form&&Kn(d)}break e;case"textarea":ie(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&B(i,!!c.multiple,o,!1)}}}var C=!1;function V(i,o,c){if(C)return i(o,c);C=!0;try{var d=i(o);return d}finally{if(C=!1,(ot!==null||gs!==null)&&(wh(),ot&&(o=ot,i=gs,gs=ot=null,_(o),i)))for(o=0;o<i.length;o++)_(i[o])}}function k(i,o){var c=i.stateNode;if(c===null)return null;var d=c[ft]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var G=!1;if(Tn)try{var se={};Object.defineProperty(se,"passive",{get:function(){G=!0}}),window.addEventListener("test",se,se),window.removeEventListener("test",se,se)}catch{G=!1}var ue=null,_e=null,Ne=null;function We(){if(Ne)return Ne;var i,o=_e,c=o.length,d,m="value"in ue?ue.value:ue.textContent,x=m.length;for(i=0;i<c&&o[i]===m[i];i++);var T=c-i;for(d=1;d<=T&&o[c-d]===m[x-d];d++);return Ne=m.slice(i,1<d?1-d:void 0)}function mt(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ut(){return!0}function ze(){return!1}function ke(i){function o(c,d,m,x,T){this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(c=i[S],this[S]=c?c(x):x[S]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ut:ze,this.isPropagationStopped=ze,this}return U(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ut)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ut)},persist:function(){},isPersistent:ut}),o}var Ie={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Me=ke(Ie),Fe=U({},Ie,{view:0,detail:0}),gt=ke(Fe),ts,Vs,Ts,gn=U({},Fe,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ts&&(Ts&&i.type==="mousemove"?(ts=i.screenX-Ts.screenX,Vs=i.screenY-Ts.screenY):Vs=ts=0,Ts=i),ts)},movementY:function(i){return"movementY"in i?i.movementY:Vs}}),Qt=ke(gn),mr=U({},gn,{dataTransfer:0}),Qn=ke(mr),Un=U({},Fe,{relatedTarget:0}),Is=ke(Un),pn=U({},Ie,{animationName:0,elapsedTime:0,pseudoElement:0}),gr=ke(pn),Ui=U({},Ie,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),va=ke(Ui),Pc=U({},Ie,{data:0}),mi=ke(Pc),Vi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Pd[i])?!!o[i]:!1}function yo(){return Lc}var Ld=U({},Fe,{key:function(i){if(i.key){var o=Vi[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=mt(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?hl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(i){return i.type==="keypress"?mt(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?mt(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),fl=ke(Ld),Ud=U({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=ke(Ud),Fi=U({},Fe,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),Vd=ke(Fi),Fd=U({},Ie,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bd=ke(Fd),qd=U({},gn,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ml=ke(qd),Xn=U({},Ie,{newState:0,oldState:0}),$d=ke(Xn),zd=[9,13,27,32],gi=Tn&&"CompositionEvent"in window,f=null;Tn&&"documentMode"in document&&(f=document.documentMode);var b=Tn&&"TextEvent"in window&&!f,j=Tn&&(!gi||f&&8<f&&11>=f),E=" ",Z=!1;function ae(i,o){switch(i){case"keyup":return zd.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ae(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var It=!1;function sn(i,o){switch(i){case"compositionend":return Ae(o);case"keypress":return o.which!==32?null:(Z=!0,E);case"textInput":return i=o.data,i===E&&Z?null:i;default:return null}}function Dt(i,o){if(It)return i==="compositionend"||!gi&&ae(i,o)?(i=We(),Ne=_e=ue=null,It=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return j&&o.locale!=="ko"?null:o.data;default:return null}}var xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nn(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!xn[i.type]:o==="textarea"}function Bi(i,o,c,d){ot?gs?gs.push(d):gs=[d]:ot=d,o=Eh(o,"onChange"),0<o.length&&(c=new Me("onChange","change",null,c,d),i.push({event:c,listeners:o}))}var En=null,pi=null;function Vc(i){A_(i,0)}function Hd(i){var o=Ns(i);if(Kn(o))return i}function nv(i,o){if(i==="change")return o}var rv=!1;if(Tn){var Bm;if(Tn){var qm="oninput"in document;if(!qm){var iv=document.createElement("div");iv.setAttribute("oninput","return;"),qm=typeof iv.oninput=="function"}Bm=qm}else Bm=!1;rv=Bm&&(!document.documentMode||9<document.documentMode)}function av(){En&&(En.detachEvent("onpropertychange",ov),pi=En=null)}function ov(i){if(i.propertyName==="value"&&Hd(pi)){var o=[];Bi(o,pi,i,ct(i)),V(Vc,o)}}function uA(i,o,c){i==="focusin"?(av(),En=o,pi=c,En.attachEvent("onpropertychange",ov)):i==="focusout"&&av()}function dA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hd(pi)}function hA(i,o){if(i==="click")return Hd(o)}function fA(i,o){if(i==="input"||i==="change")return Hd(o)}function mA(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var pr=typeof Object.is=="function"?Object.is:mA;function Fc(i,o){if(pr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!ur.call(o,m)||!pr(i[m],o[m]))return!1}return!0}function lv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function cv(i,o){var c=lv(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=o&&d>=o)return{node:c,offset:o-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=lv(c)}}function uv(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?uv(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function dv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Kr(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Kr(i.document)}return o}function $m(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function gA(i,o){var c=dv(o);o=i.focusedElem;var d=i.selectionRange;if(c!==o&&o&&o.ownerDocument&&uv(o.ownerDocument.documentElement,o)){if(d!==null&&$m(o)){if(i=d.start,c=d.end,c===void 0&&(c=i),"selectionStart"in o)o.selectionStart=i,o.selectionEnd=Math.min(c,o.value.length);else if(c=(i=o.ownerDocument||document)&&i.defaultView||window,c.getSelection){c=c.getSelection();var m=o.textContent.length,x=Math.min(d.start,m);d=d.end===void 0?x:Math.min(d.end,m),!c.extend&&x>d&&(m=d,d=x,x=m),m=cv(o,x);var T=cv(o,d);m&&T&&(c.rangeCount!==1||c.anchorNode!==m.node||c.anchorOffset!==m.offset||c.focusNode!==T.node||c.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),c.removeAllRanges(),x>d?(c.addRange(i),c.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),c.addRange(i)))}}for(i=[],c=o;c=c.parentNode;)c.nodeType===1&&i.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<i.length;o++)c=i[o],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var pA=Tn&&"documentMode"in document&&11>=document.documentMode,gl=null,zm=null,Bc=null,Hm=!1;function hv(i,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Hm||gl==null||gl!==Kr(d)||(d=gl,"selectionStart"in d&&$m(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Bc&&Fc(Bc,d)||(Bc=d,d=Eh(zm,"onSelect"),0<d.length&&(o=new Me("onSelect","select",null,o,c),i.push({event:o,listeners:d}),o.target=gl)))}function vo(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var pl={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionrun:vo("Transition","TransitionRun"),transitionstart:vo("Transition","TransitionStart"),transitioncancel:vo("Transition","TransitionCancel"),transitionend:vo("Transition","TransitionEnd")},Gm={},fv={};Tn&&(fv=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function bo(i){if(Gm[i])return Gm[i];if(!pl[i])return i;var o=pl[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in fv)return Gm[i]=o[c];return i}var mv=bo("animationend"),gv=bo("animationiteration"),pv=bo("animationstart"),xA=bo("transitionrun"),yA=bo("transitionstart"),vA=bo("transitioncancel"),xv=bo("transitionend"),yv=new Map,vv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Qr(i,o){yv.set(i,o),Rs(o,[i])}var Cr=[],xl=0,Wm=0;function Gd(){for(var i=xl,o=Wm=xl=0;o<i;){var c=Cr[o];Cr[o++]=null;var d=Cr[o];Cr[o++]=null;var m=Cr[o];Cr[o++]=null;var x=Cr[o];if(Cr[o++]=null,d!==null&&m!==null){var T=d.pending;T===null?m.next=m:(m.next=T.next,T.next=m),d.pending=m}x!==0&&bv(c,m,x)}}function Wd(i,o,c,d){Cr[xl++]=i,Cr[xl++]=o,Cr[xl++]=c,Cr[xl++]=d,Wm|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Ym(i,o,c,d){return Wd(i,o,c,d),Yd(i)}function ba(i,o){return Wd(i,null,null,o),Yd(i)}function bv(i,o,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var m=!1,x=i.return;x!==null;)x.childLanes|=c,d=x.alternate,d!==null&&(d.childLanes|=c),x.tag===22&&(i=x.stateNode,i===null||i._visibility&1||(m=!0)),i=x,x=x.return;m&&o!==null&&i.tag===3&&(x=i.stateNode,m=31-Us(c),x=x.hiddenUpdates,i=x[m],i===null?x[m]=[o]:i.push(o),o.lane=c|536870912)}function Yd(i){if(50<hu)throw hu=0,ep=null,Error(n(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var yl={},_v=new WeakMap;function Rr(i,o){if(typeof i=="object"&&i!==null){var c=_v.get(i);return c!==void 0?c:(o={value:i,source:o,stack:Ce(o)},_v.set(i,o),o)}return{value:i,source:o,stack:Ce(o)}}var vl=[],bl=0,Kd=null,Qd=0,Ir=[],Dr=0,_o=null,qi=1,$i="";function wo(i,o){vl[bl++]=Qd,vl[bl++]=Kd,Kd=i,Qd=o}function wv(i,o,c){Ir[Dr++]=qi,Ir[Dr++]=$i,Ir[Dr++]=_o,_o=i;var d=qi;i=$i;var m=32-Us(d)-1;d&=~(1<<m),c+=1;var x=32-Us(o)+m;if(30<x){var T=m-m%5;x=(d&(1<<T)-1).toString(32),d>>=T,m-=T,qi=1<<32-Us(o)+m|c<<m|d,$i=x+i}else qi=1<<x|c<<m|d,$i=i}function Km(i){i.return!==null&&(wo(i,1),wv(i,1,0))}function Qm(i){for(;i===Kd;)Kd=vl[--bl],vl[bl]=null,Qd=vl[--bl],vl[bl]=null;for(;i===_o;)_o=Ir[--Dr],Ir[Dr]=null,$i=Ir[--Dr],Ir[Dr]=null,qi=Ir[--Dr],Ir[Dr]=null}var Jn=null,An=null,Lt=!1,Xr=null,xi=!1,Xm=Error(n(519));function No(i){var o=Error(n(418,""));throw zc(Rr(o,i)),Xm}function Nv(i){var o=i.stateNode,c=i.type,d=i.memoizedProps;switch(o[ws]=i,o[ft]=d,c){case"dialog":At("cancel",o),At("close",o);break;case"iframe":case"object":case"embed":At("load",o);break;case"video":case"audio":for(c=0;c<mu.length;c++)At(mu[c],o);break;case"source":At("error",o);break;case"img":case"image":case"link":At("error",o),At("load",o);break;case"details":At("toggle",o);break;case"input":At("invalid",o),F(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),fr(o);break;case"select":At("invalid",o);break;case"textarea":At("invalid",o),de(o,d.value,d.defaultValue,d.children),fr(o)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||D_(o.textContent,c)?(d.popover!=null&&(At("beforetoggle",o),At("toggle",o)),d.onScroll!=null&&At("scroll",o),d.onScrollEnd!=null&&At("scrollend",o),d.onClick!=null&&(o.onclick=Ah),o=!0):o=!1,o||No(i)}function jv(i){for(Jn=i.return;Jn;)switch(Jn.tag){case 3:case 27:xi=!0;return;case 5:case 13:xi=!1;return;default:Jn=Jn.return}}function qc(i){if(i!==Jn)return!1;if(!Lt)return jv(i),Lt=!0,!1;var o=!1,c;if((c=i.tag!==3&&i.tag!==27)&&((c=i.tag===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||xp(i.type,i.memoizedProps)),c=!c),c&&(o=!0),o&&An&&No(i),jv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(o===0){An=Zr(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;i=i.nextSibling}An=null}}else An=Jn?Zr(i.stateNode.nextSibling):null;return!0}function $c(){An=Jn=null,Lt=!1}function zc(i){Xr===null?Xr=[i]:Xr.push(i)}var Hc=Error(n(460)),Tv=Error(n(474)),Jm={then:function(){}};function Sv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Xd(){}function Ev(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(Xd,Xd),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,i===Hc?Error(n(483)):i;default:if(typeof o.status=="string")o.then(Xd,Xd);else{if(i=as,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=d}},function(d){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,i===Hc?Error(n(483)):i}throw Gc=o,Hc}}var Gc=null;function Av(){if(Gc===null)throw Error(n(459));var i=Gc;return Gc=null,i}var _l=null,Wc=0;function Jd(i){var o=Wc;return Wc+=1,_l===null&&(_l=[]),Ev(_l,i,o)}function Yc(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Zd(i,o){throw o.$$typeof===l?Error(n(525)):(i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Cv(i){var o=i._init;return o(i._payload)}function Rv(i){function o(J,H){if(i){var te=J.deletions;te===null?(J.deletions=[H],J.flags|=16):te.push(H)}}function c(J,H){if(!i)return null;for(;H!==null;)o(J,H),H=H.sibling;return null}function d(J){for(var H=new Map;J!==null;)J.key!==null?H.set(J.key,J):H.set(J.index,J),J=J.sibling;return H}function m(J,H){return J=Da(J,H),J.index=0,J.sibling=null,J}function x(J,H,te){return J.index=te,i?(te=J.alternate,te!==null?(te=te.index,te<H?(J.flags|=33554434,H):te):(J.flags|=33554434,H)):(J.flags|=1048576,H)}function T(J){return i&&J.alternate===null&&(J.flags|=33554434),J}function S(J,H,te,xe){return H===null||H.tag!==6?(H=Gg(te,J.mode,xe),H.return=J,H):(H=m(H,te),H.return=J,H)}function M(J,H,te,xe){var Ue=te.type;return Ue===g?me(J,H,te.props.children,xe,te.key):H!==null&&(H.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===pe&&Cv(Ue)===H.type)?(H=m(H,te.props),Yc(H,te),H.return=J,H):(H=xh(te.type,te.key,te.props,null,J.mode,xe),Yc(H,te),H.return=J,H)}function W(J,H,te,xe){return H===null||H.tag!==4||H.stateNode.containerInfo!==te.containerInfo||H.stateNode.implementation!==te.implementation?(H=Wg(te,J.mode,xe),H.return=J,H):(H=m(H,te.children||[]),H.return=J,H)}function me(J,H,te,xe,Ue){return H===null||H.tag!==7?(H=ko(te,J.mode,xe,Ue),H.return=J,H):(H=m(H,te),H.return=J,H)}function ve(J,H,te){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Gg(""+H,J.mode,te),H.return=J,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case u:return te=xh(H.type,H.key,H.props,null,J.mode,te),Yc(te,H),te.return=J,te;case h:return H=Wg(H,J.mode,te),H.return=J,H;case pe:var xe=H._init;return H=xe(H._payload),ve(J,H,te)}if(je(H)||Ee(H))return H=ko(H,J.mode,te,null),H.return=J,H;if(typeof H.then=="function")return ve(J,Jd(H),te);if(H.$$typeof===A)return ve(J,mh(J,H),te);Zd(J,H)}return null}function ne(J,H,te,xe){var Ue=H!==null?H.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Ue!==null?null:S(J,H,""+te,xe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case u:return te.key===Ue?M(J,H,te,xe):null;case h:return te.key===Ue?W(J,H,te,xe):null;case pe:return Ue=te._init,te=Ue(te._payload),ne(J,H,te,xe)}if(je(te)||Ee(te))return Ue!==null?null:me(J,H,te,xe,null);if(typeof te.then=="function")return ne(J,H,Jd(te),xe);if(te.$$typeof===A)return ne(J,H,mh(J,te),xe);Zd(J,te)}return null}function he(J,H,te,xe,Ue){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return J=J.get(te)||null,S(H,J,""+xe,Ue);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case u:return J=J.get(xe.key===null?te:xe.key)||null,M(H,J,xe,Ue);case h:return J=J.get(xe.key===null?te:xe.key)||null,W(H,J,xe,Ue);case pe:var xt=xe._init;return xe=xt(xe._payload),he(J,H,te,xe,Ue)}if(je(xe)||Ee(xe))return J=J.get(te)||null,me(H,J,xe,Ue,null);if(typeof xe.then=="function")return he(J,H,te,Jd(xe),Ue);if(xe.$$typeof===A)return he(J,H,te,mh(H,xe),Ue);Zd(H,xe)}return null}function Be(J,H,te,xe){for(var Ue=null,xt=null,He=H,Je=H=0,bn=null;He!==null&&Je<te.length;Je++){He.index>Je?(bn=He,He=null):bn=He.sibling;var Ut=ne(J,He,te[Je],xe);if(Ut===null){He===null&&(He=bn);break}i&&He&&Ut.alternate===null&&o(J,He),H=x(Ut,H,Je),xt===null?Ue=Ut:xt.sibling=Ut,xt=Ut,He=bn}if(Je===te.length)return c(J,He),Lt&&wo(J,Je),Ue;if(He===null){for(;Je<te.length;Je++)He=ve(J,te[Je],xe),He!==null&&(H=x(He,H,Je),xt===null?Ue=He:xt.sibling=He,xt=He);return Lt&&wo(J,Je),Ue}for(He=d(He);Je<te.length;Je++)bn=he(He,J,Je,te[Je],xe),bn!==null&&(i&&bn.alternate!==null&&He.delete(bn.key===null?Je:bn.key),H=x(bn,H,Je),xt===null?Ue=bn:xt.sibling=bn,xt=bn);return i&&He.forEach(function(Va){return o(J,Va)}),Lt&&wo(J,Je),Ue}function nt(J,H,te,xe){if(te==null)throw Error(n(151));for(var Ue=null,xt=null,He=H,Je=H=0,bn=null,Ut=te.next();He!==null&&!Ut.done;Je++,Ut=te.next()){He.index>Je?(bn=He,He=null):bn=He.sibling;var Va=ne(J,He,Ut.value,xe);if(Va===null){He===null&&(He=bn);break}i&&He&&Va.alternate===null&&o(J,He),H=x(Va,H,Je),xt===null?Ue=Va:xt.sibling=Va,xt=Va,He=bn}if(Ut.done)return c(J,He),Lt&&wo(J,Je),Ue;if(He===null){for(;!Ut.done;Je++,Ut=te.next())Ut=ve(J,Ut.value,xe),Ut!==null&&(H=x(Ut,H,Je),xt===null?Ue=Ut:xt.sibling=Ut,xt=Ut);return Lt&&wo(J,Je),Ue}for(He=d(He);!Ut.done;Je++,Ut=te.next())Ut=he(He,J,Je,Ut.value,xe),Ut!==null&&(i&&Ut.alternate!==null&&He.delete(Ut.key===null?Je:Ut.key),H=x(Ut,H,Je),xt===null?Ue=Ut:xt.sibling=Ut,xt=Ut);return i&&He.forEach(function(kC){return o(J,kC)}),Lt&&wo(J,Je),Ue}function Ms(J,H,te,xe){if(typeof te=="object"&&te!==null&&te.type===g&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case u:e:{for(var Ue=te.key;H!==null;){if(H.key===Ue){if(Ue=te.type,Ue===g){if(H.tag===7){c(J,H.sibling),xe=m(H,te.props.children),xe.return=J,J=xe;break e}}else if(H.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===pe&&Cv(Ue)===H.type){c(J,H.sibling),xe=m(H,te.props),Yc(xe,te),xe.return=J,J=xe;break e}c(J,H);break}else o(J,H);H=H.sibling}te.type===g?(xe=ko(te.props.children,J.mode,xe,te.key),xe.return=J,J=xe):(xe=xh(te.type,te.key,te.props,null,J.mode,xe),Yc(xe,te),xe.return=J,J=xe)}return T(J);case h:e:{for(Ue=te.key;H!==null;){if(H.key===Ue)if(H.tag===4&&H.stateNode.containerInfo===te.containerInfo&&H.stateNode.implementation===te.implementation){c(J,H.sibling),xe=m(H,te.children||[]),xe.return=J,J=xe;break e}else{c(J,H);break}else o(J,H);H=H.sibling}xe=Wg(te,J.mode,xe),xe.return=J,J=xe}return T(J);case pe:return Ue=te._init,te=Ue(te._payload),Ms(J,H,te,xe)}if(je(te))return Be(J,H,te,xe);if(Ee(te)){if(Ue=Ee(te),typeof Ue!="function")throw Error(n(150));return te=Ue.call(te),nt(J,H,te,xe)}if(typeof te.then=="function")return Ms(J,H,Jd(te),xe);if(te.$$typeof===A)return Ms(J,H,mh(J,te),xe);Zd(J,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,H!==null&&H.tag===6?(c(J,H.sibling),xe=m(H,te),xe.return=J,J=xe):(c(J,H),xe=Gg(te,J.mode,xe),xe.return=J,J=xe),T(J)):c(J,H)}return function(J,H,te,xe){try{Wc=0;var Ue=Ms(J,H,te,xe);return _l=null,Ue}catch(He){if(He===Hc)throw He;var xt=Pr(29,He,null,J.mode);return xt.lanes=xe,xt.return=J,xt}finally{}}}var jo=Rv(!0),Iv=Rv(!1),wl=_t(null),eh=_t(0);function Dv(i,o){i=ea,jt(eh,i),jt(wl,o),ea=i|o.baseLanes}function Zm(){jt(eh,ea),jt(wl,wl.current)}function eg(){ea=eh.current,qt(wl),qt(eh)}var kr=_t(null),yi=null;function _a(i){var o=i.alternate;jt(rn,rn.current&1),jt(kr,i),yi===null&&(o===null||wl.current!==null||o.memoizedState!==null)&&(yi=i)}function kv(i){if(i.tag===22){if(jt(rn,rn.current),jt(kr,i),yi===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(yi=i)}}else wa()}function wa(){jt(rn,rn.current),jt(kr,kr.current)}function zi(i){qt(kr),yi===i&&(yi=null),qt(rn)}var rn=_t(0);function th(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var bA=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},_A=s.unstable_scheduleCallback,wA=s.unstable_NormalPriority,an={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tg(){return{controller:new bA,data:new Map,refCount:0}}function Kc(i){i.refCount--,i.refCount===0&&_A(wA,function(){i.controller.abort()})}var Qc=null,sg=0,Nl=0,jl=null;function NA(i,o){if(Qc===null){var c=Qc=[];sg=0,Nl=lp(),jl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return sg++,o.then(Mv,Mv),o}function Mv(){if(--sg===0&&Qc!==null){jl!==null&&(jl.status="fulfilled");var i=Qc;Qc=null,Nl=0,jl=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function jA(i,o){var c=[],d={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var m=0;m<c.length;m++)(0,c[m])(o)},function(m){for(d.status="rejected",d.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),d}var Ov=I.S;I.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&NA(i,o),Ov!==null&&Ov(i,o)};var To=_t(null);function ng(){var i=To.current;return i!==null?i:as.pooledCache}function sh(i,o){o===null?jt(To,To.current):jt(To,o.pool)}function Pv(){var i=ng();return i===null?null:{parent:an._currentValue,pool:i}}var Na=0,pt=null,Xt=null,Hs=null,nh=!1,Tl=!1,So=!1,rh=0,Xc=0,Sl=null,TA=0;function Fs(){throw Error(n(321))}function rg(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!pr(i[c],o[c]))return!1;return!0}function ig(i,o,c,d,m,x){return Na=x,pt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=i===null||i.memoizedState===null?Eo:ja,So=!1,x=c(d,m),So=!1,Tl&&(x=Uv(o,c,d,m)),Lv(i),x}function Lv(i){I.H=vi;var o=Xt!==null&&Xt.next!==null;if(Na=0,Hs=Xt=pt=null,nh=!1,Xc=0,Sl=null,o)throw Error(n(300));i===null||yn||(i=i.dependencies,i!==null&&fh(i)&&(yn=!0))}function Uv(i,o,c,d){pt=i;var m=0;do{if(Tl&&(Sl=null),Xc=0,Tl=!1,25<=m)throw Error(n(301));if(m+=1,Hs=Xt=null,i.updateQueue!=null){var x=i.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}I.H=Ao,x=o(c,d)}while(Tl);return x}function SA(){var i=I.H,o=i.useState()[0];return o=typeof o.then=="function"?Jc(o):o,i=i.useState()[0],(Xt!==null?Xt.memoizedState:null)!==i&&(pt.flags|=1024),o}function ag(){var i=rh!==0;return rh=0,i}function og(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function lg(i){if(nh){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}nh=!1}Na=0,Hs=Xt=pt=null,Tl=!1,Xc=rh=0,Sl=null}function ar(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hs===null?pt.memoizedState=Hs=i:Hs=Hs.next=i,Hs}function Gs(){if(Xt===null){var i=pt.alternate;i=i!==null?i.memoizedState:null}else i=Xt.next;var o=Hs===null?pt.memoizedState:Hs.next;if(o!==null)Hs=o,Xt=i;else{if(i===null)throw pt.alternate===null?Error(n(467)):Error(n(310));Xt=i,i={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},Hs===null?pt.memoizedState=Hs=i:Hs=Hs.next=i}return Hs}var ih;ih=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Jc(i){var o=Xc;return Xc+=1,Sl===null&&(Sl=[]),i=Ev(Sl,i,o),o=pt,(Hs===null?o.memoizedState:Hs.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?Eo:ja),i}function ah(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Jc(i);if(i.$$typeof===A)return Vn(i)}throw Error(n(438,String(i)))}function cg(i){var o=null,c=pt.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=pt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=ih(),pt.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),d=0;d<i;d++)c[d]=fe;return o.index++,c}function Hi(i,o){return typeof o=="function"?o(i):o}function oh(i){var o=Gs();return ug(o,Xt,i)}function ug(i,o,c){var d=i.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=c;var m=i.baseQueue,x=d.pending;if(x!==null){if(m!==null){var T=m.next;m.next=x.next,x.next=T}o.baseQueue=m=x,d.pending=null}if(x=i.baseState,m===null)i.memoizedState=x;else{o=m.next;var S=T=null,M=null,W=o,me=!1;do{var ve=W.lane&-536870913;if(ve!==W.lane?(kt&ve)===ve:(Na&ve)===ve){var ne=W.revertLane;if(ne===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ve===Nl&&(me=!0);else if((Na&ne)===ne){W=W.next,ne===Nl&&(me=!0);continue}else ve={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},M===null?(S=M=ve,T=x):M=M.next=ve,pt.lanes|=ne,ka|=ne;ve=W.action,So&&c(x,ve),x=W.hasEagerState?W.eagerState:c(x,ve)}else ne={lane:ve,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},M===null?(S=M=ne,T=x):M=M.next=ne,pt.lanes|=ve,ka|=ve;W=W.next}while(W!==null&&W!==o);if(M===null?T=x:M.next=S,!pr(x,i.memoizedState)&&(yn=!0,me&&(c=jl,c!==null)))throw c;i.memoizedState=x,i.baseState=T,i.baseQueue=M,d.lastRenderedState=x}return m===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function dg(i){var o=Gs(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var d=c.dispatch,m=c.pending,x=o.memoizedState;if(m!==null){c.pending=null;var T=m=m.next;do x=i(x,T.action),T=T.next;while(T!==m);pr(x,o.memoizedState)||(yn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),c.lastRenderedState=x}return[x,d]}function Vv(i,o,c){var d=pt,m=Gs(),x=Lt;if(x){if(c===void 0)throw Error(n(407));c=c()}else c=o();var T=!pr((Xt||m).memoizedState,c);if(T&&(m.memoizedState=c,yn=!0),m=m.queue,mg(qv.bind(null,d,m,i),[i]),m.getSnapshot!==o||T||Hs!==null&&Hs.memoizedState.tag&1){if(d.flags|=2048,El(9,Bv.bind(null,d,m,c,o),{destroy:void 0},null),as===null)throw Error(n(349));x||(Na&60)!==0||Fv(d,o,c)}return c}function Fv(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=pt.updateQueue,o===null?(o=ih(),pt.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function Bv(i,o,c,d){o.value=c,o.getSnapshot=d,$v(o)&&zv(i)}function qv(i,o,c){return c(function(){$v(o)&&zv(i)})}function $v(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!pr(i,c)}catch{return!0}}function zv(i){var o=ba(i,2);o!==null&&Zn(o,i,2)}function hg(i){var o=ar();if(typeof i=="function"){var c=i;if(i=c(),So){Ot(!0);try{c()}finally{Ot(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:i},o}function Hv(i,o,c,d){return i.baseState=c,ug(i,Xt,typeof d=="function"?d:Hi)}function EA(i,o,c,d,m){if(uh(i))throw Error(n(485));if(i=o.action,i!==null){var x={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){x.listeners.push(T)}};I.T!==null?c(!0):x.isTransition=!1,d(x),c=o.pending,c===null?(x.next=o.pending=x,Gv(o,x)):(x.next=c.next,o.pending=c.next=x)}}function Gv(i,o){var c=o.action,d=o.payload,m=i.state;if(o.isTransition){var x=I.T,T={};I.T=T;try{var S=c(m,d),M=I.S;M!==null&&M(T,S),Wv(i,o,S)}catch(W){fg(i,o,W)}finally{I.T=x}}else try{x=c(m,d),Wv(i,o,x)}catch(W){fg(i,o,W)}}function Wv(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Yv(i,o,d)},function(d){return fg(i,o,d)}):Yv(i,o,c)}function Yv(i,o,c){o.status="fulfilled",o.value=c,Kv(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,Gv(i,c)))}function fg(i,o,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,Kv(o),o=o.next;while(o!==d)}i.action=null}function Kv(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Qv(i,o){return o}function Xv(i,o){if(Lt){var c=as.formState;if(c!==null){e:{var d=pt;if(Lt){if(An){t:{for(var m=An,x=xi;m.nodeType!==8;){if(!x){m=null;break t}if(m=Zr(m.nextSibling),m===null){m=null;break t}}x=m.data,m=x==="F!"||x==="F"?m:null}if(m){An=Zr(m.nextSibling),d=m.data==="F!";break e}}No(d)}d=!1}d&&(o=c[0])}}return c=ar(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qv,lastRenderedState:o},c.queue=d,c=gb.bind(null,pt,d),d.dispatch=c,d=hg(!1),x=vg.bind(null,pt,!1,d.queue),d=ar(),m={state:o,dispatch:null,action:i,pending:null},d.queue=m,c=EA.bind(null,pt,m,x,c),m.dispatch=c,d.memoizedState=i,[o,c,!1]}function Jv(i){var o=Gs();return Zv(o,Xt,i)}function Zv(i,o,c){o=ug(i,o,Qv)[0],i=oh(Hi)[0],o=typeof o=="object"&&o!==null&&typeof o.then=="function"?Jc(o):o;var d=Gs(),m=d.queue,x=m.dispatch;return c!==d.memoizedState&&(pt.flags|=2048,El(9,AA.bind(null,m,c),{destroy:void 0},null)),[o,x,i]}function AA(i,o){i.action=o}function eb(i){var o=Gs(),c=Xt;if(c!==null)return Zv(o,c,i);Gs(),o=o.memoizedState,c=Gs();var d=c.queue.dispatch;return c.memoizedState=i,[o,d,!1]}function El(i,o,c,d){return i={tag:i,create:o,inst:c,deps:d,next:null},o=pt.updateQueue,o===null&&(o=ih(),pt.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,o.lastEffect=i),i}function tb(){return Gs().memoizedState}function lh(i,o,c,d){var m=ar();pt.flags|=i,m.memoizedState=El(1|o,c,{destroy:void 0},d===void 0?null:d)}function ch(i,o,c,d){var m=Gs();d=d===void 0?null:d;var x=m.memoizedState.inst;Xt!==null&&d!==null&&rg(d,Xt.memoizedState.deps)?m.memoizedState=El(o,c,x,d):(pt.flags|=i,m.memoizedState=El(1|o,c,x,d))}function sb(i,o){lh(8390656,8,i,o)}function mg(i,o){ch(2048,8,i,o)}function nb(i,o){return ch(4,2,i,o)}function rb(i,o){return ch(4,4,i,o)}function ib(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ab(i,o,c){c=c!=null?c.concat([i]):null,ch(4,4,ib.bind(null,o,i),c)}function gg(){}function ob(i,o){var c=Gs();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&rg(o,d[1])?d[0]:(c.memoizedState=[i,o],i)}function lb(i,o){var c=Gs();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&rg(o,d[1]))return d[0];if(d=i(),So){Ot(!0);try{i()}finally{Ot(!1)}}return c.memoizedState=[d,o],d}function pg(i,o,c){return c===void 0||(Na&1073741824)!==0?i.memoizedState=o:(i.memoizedState=c,i=u_(),pt.lanes|=i,ka|=i,c)}function cb(i,o,c,d){return pr(c,o)?c:wl.current!==null?(i=pg(i,c,d),pr(i,o)||(yn=!0),i):(Na&42)===0?(yn=!0,i.memoizedState=c):(i=u_(),pt.lanes|=i,ka|=i,o)}function ub(i,o,c,d,m){var x=Te.p;Te.p=x!==0&&8>x?x:8;var T=I.T,S={};I.T=S,vg(i,!1,o,c);try{var M=m(),W=I.S;if(W!==null&&W(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var me=jA(M,d);Zc(i,o,me,br(i))}else Zc(i,o,d,br(i))}catch(ve){Zc(i,o,{then:function(){},status:"rejected",reason:ve},br())}finally{Te.p=x,I.T=T}}function CA(){}function xg(i,o,c,d){if(i.tag!==5)throw Error(n(476));var m=db(i).queue;ub(i,m,o,Ye,c===null?CA:function(){return hb(i),c(d)})}function db(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Ye,baseState:Ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:Ye},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function hb(i){var o=db(i).next.queue;Zc(i,o,{},br())}function yg(){return Vn(vu)}function fb(){return Gs().memoizedState}function mb(){return Gs().memoizedState}function RA(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=br();i=Ea(c);var d=Aa(o,i,c);d!==null&&(Zn(d,o,c),su(d,o,c)),o={cache:tg()},i.payload=o;return}o=o.return}}function IA(i,o,c){var d=br();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},uh(i)?pb(o,c):(c=Ym(i,o,c,d),c!==null&&(Zn(c,i,d),xb(c,o,d)))}function gb(i,o,c){var d=br();Zc(i,o,c,d)}function Zc(i,o,c,d){var m={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(uh(i))pb(o,m);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var T=o.lastRenderedState,S=x(T,c);if(m.hasEagerState=!0,m.eagerState=S,pr(S,T))return Wd(i,o,m,0),as===null&&Gd(),!1}catch{}finally{}if(c=Ym(i,o,m,d),c!==null)return Zn(c,i,d),xb(c,o,d),!0}return!1}function vg(i,o,c,d){if(d={lane:2,revertLane:lp(),action:d,hasEagerState:!1,eagerState:null,next:null},uh(i)){if(o)throw Error(n(479))}else o=Ym(i,c,d,2),o!==null&&Zn(o,i,2)}function uh(i){var o=i.alternate;return i===pt||o!==null&&o===pt}function pb(i,o){Tl=nh=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function xb(i,o,c){if((c&4194176)!==0){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,Nr(i,c)}}var vi={readContext:Vn,use:ah,useCallback:Fs,useContext:Fs,useEffect:Fs,useImperativeHandle:Fs,useLayoutEffect:Fs,useInsertionEffect:Fs,useMemo:Fs,useReducer:Fs,useRef:Fs,useState:Fs,useDebugValue:Fs,useDeferredValue:Fs,useTransition:Fs,useSyncExternalStore:Fs,useId:Fs};vi.useCacheRefresh=Fs,vi.useMemoCache=Fs,vi.useHostTransitionStatus=Fs,vi.useFormState=Fs,vi.useActionState=Fs,vi.useOptimistic=Fs;var Eo={readContext:Vn,use:ah,useCallback:function(i,o){return ar().memoizedState=[i,o===void 0?null:o],i},useContext:Vn,useEffect:sb,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,lh(4194308,4,ib.bind(null,o,i),c)},useLayoutEffect:function(i,o){return lh(4194308,4,i,o)},useInsertionEffect:function(i,o){lh(4,2,i,o)},useMemo:function(i,o){var c=ar();o=o===void 0?null:o;var d=i();if(So){Ot(!0);try{i()}finally{Ot(!1)}}return c.memoizedState=[d,o],d},useReducer:function(i,o,c){var d=ar();if(c!==void 0){var m=c(o);if(So){Ot(!0);try{c(o)}finally{Ot(!1)}}}else m=o;return d.memoizedState=d.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},d.queue=i,i=i.dispatch=IA.bind(null,pt,i),[d.memoizedState,i]},useRef:function(i){var o=ar();return i={current:i},o.memoizedState=i},useState:function(i){i=hg(i);var o=i.queue,c=gb.bind(null,pt,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:gg,useDeferredValue:function(i,o){var c=ar();return pg(c,i,o)},useTransition:function(){var i=hg(!1);return i=ub.bind(null,pt,i.queue,!0,!1),ar().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var d=pt,m=ar();if(Lt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),as===null)throw Error(n(349));(kt&60)!==0||Fv(d,o,c)}m.memoizedState=c;var x={value:c,getSnapshot:o};return m.queue=x,sb(qv.bind(null,d,x,i),[i]),d.flags|=2048,El(9,Bv.bind(null,d,x,c,o),{destroy:void 0},null),c},useId:function(){var i=ar(),o=as.identifierPrefix;if(Lt){var c=$i,d=qi;c=(d&~(1<<32-Us(d)-1)).toString(32)+c,o=":"+o+"R"+c,c=rh++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=TA++,o=":"+o+"r"+c.toString(32)+":";return i.memoizedState=o},useCacheRefresh:function(){return ar().memoizedState=RA.bind(null,pt)}};Eo.useMemoCache=cg,Eo.useHostTransitionStatus=yg,Eo.useFormState=Xv,Eo.useActionState=Xv,Eo.useOptimistic=function(i){var o=ar();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=vg.bind(null,pt,!0,c),c.dispatch=o,[i,o]};var ja={readContext:Vn,use:ah,useCallback:ob,useContext:Vn,useEffect:mg,useImperativeHandle:ab,useInsertionEffect:nb,useLayoutEffect:rb,useMemo:lb,useReducer:oh,useRef:tb,useState:function(){return oh(Hi)},useDebugValue:gg,useDeferredValue:function(i,o){var c=Gs();return cb(c,Xt.memoizedState,i,o)},useTransition:function(){var i=oh(Hi)[0],o=Gs().memoizedState;return[typeof i=="boolean"?i:Jc(i),o]},useSyncExternalStore:Vv,useId:fb};ja.useCacheRefresh=mb,ja.useMemoCache=cg,ja.useHostTransitionStatus=yg,ja.useFormState=Jv,ja.useActionState=Jv,ja.useOptimistic=function(i,o){var c=Gs();return Hv(c,Xt,i,o)};var Ao={readContext:Vn,use:ah,useCallback:ob,useContext:Vn,useEffect:mg,useImperativeHandle:ab,useInsertionEffect:nb,useLayoutEffect:rb,useMemo:lb,useReducer:dg,useRef:tb,useState:function(){return dg(Hi)},useDebugValue:gg,useDeferredValue:function(i,o){var c=Gs();return Xt===null?pg(c,i,o):cb(c,Xt.memoizedState,i,o)},useTransition:function(){var i=dg(Hi)[0],o=Gs().memoizedState;return[typeof i=="boolean"?i:Jc(i),o]},useSyncExternalStore:Vv,useId:fb};Ao.useCacheRefresh=mb,Ao.useMemoCache=cg,Ao.useHostTransitionStatus=yg,Ao.useFormState=eb,Ao.useActionState=eb,Ao.useOptimistic=function(i,o){var c=Gs();return Xt!==null?Hv(c,Xt,i,o):(c.baseState=i,[i,c.queue.dispatch])};function bg(i,o,c,d){o=i.memoizedState,c=c(d,o),c=c==null?o:U({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var _g={isMounted:function(i){return(i=i._reactInternals)?re(i)===i:!1},enqueueSetState:function(i,o,c){i=i._reactInternals;var d=br(),m=Ea(d);m.payload=o,c!=null&&(m.callback=c),o=Aa(i,m,d),o!==null&&(Zn(o,i,d),su(o,i,d))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var d=br(),m=Ea(d);m.tag=1,m.payload=o,c!=null&&(m.callback=c),o=Aa(i,m,d),o!==null&&(Zn(o,i,d),su(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=br(),d=Ea(c);d.tag=2,o!=null&&(d.callback=o),o=Aa(i,d,c),o!==null&&(Zn(o,i,c),su(o,i,c))}};function yb(i,o,c,d,m,x,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,x,T):o.prototype&&o.prototype.isPureReactComponent?!Fc(c,d)||!Fc(m,x):!0}function vb(i,o,c,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==i&&_g.enqueueReplaceState(o,o.state,null)}function Co(i,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(i=i.defaultProps){c===o&&(c=U({},c));for(var m in i)c[m]===void 0&&(c[m]=i[m])}return c}var dh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function bb(i){dh(i)}function _b(i){console.error(i)}function wb(i){dh(i)}function hh(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Nb(i,o,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function wg(i,o,c){return c=Ea(c),c.tag=3,c.payload={element:null},c.callback=function(){hh(i,o)},c}function jb(i){return i=Ea(i),i.tag=3,i}function Tb(i,o,c,d){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var x=d.value;i.payload=function(){return m(x)},i.callback=function(){Nb(o,c,d)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Nb(o,c,d),typeof m!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var S=d.stack;this.componentDidCatch(d.value,{componentStack:S!==null?S:""})})}function DA(i,o,c,d,m){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&tu(o,c,m,!0),c=kr.current,c!==null){switch(c.tag){case 13:return yi===null?np():c.alternate===null&&ks===0&&(ks=3),c.flags&=-257,c.flags|=65536,c.lanes=m,d===Jm?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),ip(i,d,m)),!1;case 22:return c.flags|=65536,d===Jm?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),ip(i,d,m)),!1}throw Error(n(435,c.tag))}return ip(i,d,m),np(),!1}if(Lt)return o=kr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,d!==Xm&&(i=Error(n(422),{cause:d}),zc(Rr(i,c)))):(d!==Xm&&(o=Error(n(423),{cause:d}),zc(Rr(o,c))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,d=Rr(d,c),m=wg(i.stateNode,d,m),Lg(i,m),ks!==4&&(ks=2)),!1;var x=Error(n(520),{cause:d});if(x=Rr(x,c),uu===null?uu=[x]:uu.push(x),ks!==4&&(ks=2),o===null)return!0;d=Rr(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=m&-m,c.lanes|=i,i=wg(c.stateNode,d,i),Lg(c,i),!1;case 1:if(o=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ma===null||!Ma.has(x))))return c.flags|=65536,m&=-m,c.lanes|=m,m=jb(m),Tb(m,i,c,d),Lg(c,m),!1}c=c.return}while(c!==null);return!1}var Sb=Error(n(461)),yn=!1;function Cn(i,o,c,d){o.child=i===null?Iv(o,null,c,d):jo(o,i.child,c,d)}function Eb(i,o,c,d,m){c=c.render;var x=o.ref;if("ref"in d){var T={};for(var S in d)S!=="ref"&&(T[S]=d[S])}else T=d;return Io(o),d=ig(i,o,c,T,x,m),S=ag(),i!==null&&!yn?(og(i,o,m),Gi(i,o,m)):(Lt&&S&&Km(o),o.flags|=1,Cn(i,o,d,m),o.child)}function Ab(i,o,c,d,m){if(i===null){var x=c.type;return typeof x=="function"&&!Hg(x)&&x.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=x,Cb(i,o,x,d,m)):(i=xh(c.type,null,d,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(x=i.child,!Ig(i,m)){var T=x.memoizedProps;if(c=c.compare,c=c!==null?c:Fc,c(T,d)&&i.ref===o.ref)return Gi(i,o,m)}return o.flags|=1,i=Da(x,d),i.ref=o.ref,i.return=o,o.child=i}function Cb(i,o,c,d,m){if(i!==null){var x=i.memoizedProps;if(Fc(x,d)&&i.ref===o.ref)if(yn=!1,o.pendingProps=d=x,Ig(i,m))(i.flags&131072)!==0&&(yn=!0);else return o.lanes=i.lanes,Gi(i,o,m)}return Ng(i,o,c,d,m)}function Rb(i,o,c){var d=o.pendingProps,m=d.children,x=(o.stateNode._pendingVisibility&2)!==0,T=i!==null?i.memoizedState:null;if(eu(i,o),d.mode==="hidden"||x){if((o.flags&128)!==0){if(d=T!==null?T.baseLanes|c:c,i!==null){for(m=o.child=i.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;o.childLanes=x&~d}else o.childLanes=0,o.child=null;return Ib(i,o,d,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&sh(o,T!==null?T.cachePool:null),T!==null?Dv(o,T):Zm(),kv(o);else return o.lanes=o.childLanes=536870912,Ib(i,o,T!==null?T.baseLanes|c:c,c)}else T!==null?(sh(o,T.cachePool),Dv(o,T),wa(),o.memoizedState=null):(i!==null&&sh(o,null),Zm(),wa());return Cn(i,o,m,c),o.child}function Ib(i,o,c,d){var m=ng();return m=m===null?null:{parent:an._currentValue,pool:m},o.memoizedState={baseLanes:c,cachePool:m},i!==null&&sh(o,null),Zm(),kv(o),i!==null&&tu(i,o,d,!0),null}function eu(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=2097664);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(i===null||i.ref!==c)&&(o.flags|=2097664)}}function Ng(i,o,c,d,m){return Io(o),c=ig(i,o,c,d,void 0,m),d=ag(),i!==null&&!yn?(og(i,o,m),Gi(i,o,m)):(Lt&&d&&Km(o),o.flags|=1,Cn(i,o,c,m),o.child)}function Db(i,o,c,d,m,x){return Io(o),o.updateQueue=null,c=Uv(o,d,c,m),Lv(i),d=ag(),i!==null&&!yn?(og(i,o,x),Gi(i,o,x)):(Lt&&d&&Km(o),o.flags|=1,Cn(i,o,c,x),o.child)}function kb(i,o,c,d,m){if(Io(o),o.stateNode===null){var x=yl,T=c.contextType;typeof T=="object"&&T!==null&&(x=Vn(T)),x=new c(d,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=_g,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=d,x.state=o.memoizedState,x.refs={},Og(o),T=c.contextType,x.context=typeof T=="object"&&T!==null?Vn(T):yl,x.state=o.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(bg(o,c,T,d),x.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(T=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),T!==x.state&&_g.enqueueReplaceState(x,x.state,null),ru(o,d,x,m),nu(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){x=o.stateNode;var S=o.memoizedProps,M=Co(c,S);x.props=M;var W=x.context,me=c.contextType;T=yl,typeof me=="object"&&me!==null&&(T=Vn(me));var ve=c.getDerivedStateFromProps;me=typeof ve=="function"||typeof x.getSnapshotBeforeUpdate=="function",S=o.pendingProps!==S,me||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(S||W!==T)&&vb(o,x,d,T),Sa=!1;var ne=o.memoizedState;x.state=ne,ru(o,d,x,m),nu(),W=o.memoizedState,S||ne!==W||Sa?(typeof ve=="function"&&(bg(o,c,ve,d),W=o.memoizedState),(M=Sa||yb(o,c,M,d,ne,W,T))?(me||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=W),x.props=d,x.state=W,x.context=T,d=M):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{x=o.stateNode,Pg(i,o),T=o.memoizedProps,me=Co(c,T),x.props=me,ve=o.pendingProps,ne=x.context,W=c.contextType,M=yl,typeof W=="object"&&W!==null&&(M=Vn(W)),S=c.getDerivedStateFromProps,(W=typeof S=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==ve||ne!==M)&&vb(o,x,d,M),Sa=!1,ne=o.memoizedState,x.state=ne,ru(o,d,x,m),nu();var he=o.memoizedState;T!==ve||ne!==he||Sa||i!==null&&i.dependencies!==null&&fh(i.dependencies)?(typeof S=="function"&&(bg(o,c,S,d),he=o.memoizedState),(me=Sa||yb(o,c,me,d,ne,he,M)||i!==null&&i.dependencies!==null&&fh(i.dependencies))?(W||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,he,M),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,he,M)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=he),x.props=d,x.state=he,x.context=M,d=me):(typeof x.componentDidUpdate!="function"||T===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),d=!1)}return x=d,eu(i,o),d=(o.flags&128)!==0,x||d?(x=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,i!==null&&d?(o.child=jo(o,i.child,null,m),o.child=jo(o,null,c,m)):Cn(i,o,c,m),o.memoizedState=x.state,i=o.child):i=Gi(i,o,m),i}function Mb(i,o,c,d){return $c(),o.flags|=256,Cn(i,o,c,d),o.child}var jg={dehydrated:null,treeContext:null,retryLane:0};function Tg(i){return{baseLanes:i,cachePool:Pv()}}function Sg(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=Lr),i}function Ob(i,o,c){var d=o.pendingProps,m=!1,x=(o.flags&128)!==0,T;if((T=x)||(T=i!==null&&i.memoizedState===null?!1:(rn.current&2)!==0),T&&(m=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,i===null){if(Lt){if(m?_a(o):wa(),Lt){var S=An,M;if(M=S){e:{for(M=S,S=xi;M.nodeType!==8;){if(!S){S=null;break e}if(M=Zr(M.nextSibling),M===null){S=null;break e}}S=M}S!==null?(o.memoizedState={dehydrated:S,treeContext:_o!==null?{id:qi,overflow:$i}:null,retryLane:536870912},M=Pr(18,null,null,0),M.stateNode=S,M.return=o,o.child=M,Jn=o,An=null,M=!0):M=!1}M||No(o)}if(S=o.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return S.data==="$!"?o.lanes=16:o.lanes=536870912,null;zi(o)}return S=d.children,d=d.fallback,m?(wa(),m=o.mode,S=Ag({mode:"hidden",children:S},m),d=ko(d,m,c,null),S.return=o,d.return=o,S.sibling=d,o.child=S,m=o.child,m.memoizedState=Tg(c),m.childLanes=Sg(i,T,c),o.memoizedState=jg,d):(_a(o),Eg(o,S))}if(M=i.memoizedState,M!==null&&(S=M.dehydrated,S!==null)){if(x)o.flags&256?(_a(o),o.flags&=-257,o=Cg(i,o,c)):o.memoizedState!==null?(wa(),o.child=i.child,o.flags|=128,o=null):(wa(),m=d.fallback,S=o.mode,d=Ag({mode:"visible",children:d.children},S),m=ko(m,S,c,null),m.flags|=2,d.return=o,m.return=o,d.sibling=m,o.child=d,jo(o,i.child,null,c),d=o.child,d.memoizedState=Tg(c),d.childLanes=Sg(i,T,c),o.memoizedState=jg,o=m);else if(_a(o),S.data==="$!"){if(T=S.nextSibling&&S.nextSibling.dataset,T)var W=T.dgst;T=W,d=Error(n(419)),d.stack="",d.digest=T,zc({value:d,source:null,stack:null}),o=Cg(i,o,c)}else if(yn||tu(i,o,c,!1),T=(c&i.childLanes)!==0,yn||T){if(T=as,T!==null){if(d=c&-c,(d&42)!==0)d=1;else switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=64;break;case 268435456:d=134217728;break;default:d=0}if(d=(d&(T.suspendedLanes|c))!==0?0:d,d!==0&&d!==M.retryLane)throw M.retryLane=d,ba(i,d),Zn(T,i,d),Sb}S.data==="$?"||np(),o=Cg(i,o,c)}else S.data==="$?"?(o.flags|=128,o.child=i.child,o=WA.bind(null,i),S._reactRetry=o,o=null):(i=M.treeContext,An=Zr(S.nextSibling),Jn=o,Lt=!0,Xr=null,xi=!1,i!==null&&(Ir[Dr++]=qi,Ir[Dr++]=$i,Ir[Dr++]=_o,qi=i.id,$i=i.overflow,_o=o),o=Eg(o,d.children),o.flags|=4096);return o}return m?(wa(),m=d.fallback,S=o.mode,M=i.child,W=M.sibling,d=Da(M,{mode:"hidden",children:d.children}),d.subtreeFlags=M.subtreeFlags&31457280,W!==null?m=Da(W,m):(m=ko(m,S,c,null),m.flags|=2),m.return=o,d.return=o,d.sibling=m,o.child=d,d=m,m=o.child,S=i.child.memoizedState,S===null?S=Tg(c):(M=S.cachePool,M!==null?(W=an._currentValue,M=M.parent!==W?{parent:W,pool:W}:M):M=Pv(),S={baseLanes:S.baseLanes|c,cachePool:M}),m.memoizedState=S,m.childLanes=Sg(i,T,c),o.memoizedState=jg,d):(_a(o),c=i.child,i=c.sibling,c=Da(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,i!==null&&(T=o.deletions,T===null?(o.deletions=[i],o.flags|=16):T.push(i)),o.child=c,o.memoizedState=null,c)}function Eg(i,o){return o=Ag({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Ag(i,o){return o_(i,o,0,null)}function Cg(i,o,c){return jo(o,i.child,null,c),i=Eg(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Pb(i,o,c){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),kg(i.return,o,c)}function Rg(i,o,c,d,m){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=c,x.tailMode=m)}function Lb(i,o,c){var d=o.pendingProps,m=d.revealOrder,x=d.tail;if(Cn(i,o,d.children,c),d=rn.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Pb(i,c,o);else if(i.tag===19)Pb(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(jt(rn,d),m){case"forwards":for(c=o.child,m=null;c!==null;)i=c.alternate,i!==null&&th(i)===null&&(m=c),c=c.sibling;c=m,c===null?(m=o.child,o.child=null):(m=c.sibling,c.sibling=null),Rg(o,!1,m,c,x);break;case"backwards":for(c=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&th(i)===null){o.child=m;break}i=m.sibling,m.sibling=c,c=m,m=i}Rg(o,!0,c,null,x);break;case"together":Rg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Gi(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),ka|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(tu(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,c=Da(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Da(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function Ig(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&fh(i)))}function kA(i,o,c){switch(o.tag){case 3:Gn(o,o.stateNode.containerInfo),Ta(o,an,i.memoizedState.cache),$c();break;case 27:case 5:$r(o);break;case 4:Gn(o,o.stateNode.containerInfo);break;case 10:Ta(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(_a(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Ob(i,o,c):(_a(o),i=Gi(i,o,c),i!==null?i.sibling:null);_a(o);break;case 19:var m=(i.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(tu(i,o,c,!1),d=(c&o.childLanes)!==0),m){if(d)return Lb(i,o,c);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),jt(rn,rn.current),d)break;return null;case 22:case 23:return o.lanes=0,Rb(i,o,c);case 24:Ta(o,an,i.memoizedState.cache)}return Gi(i,o,c)}function Ub(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)yn=!0;else{if(!Ig(i,c)&&(o.flags&128)===0)return yn=!1,kA(i,o,c);yn=(i.flags&131072)!==0}else yn=!1,Lt&&(o.flags&1048576)!==0&&wv(o,Qd,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var d=o.elementType,m=d._init;if(d=m(d._payload),o.type=d,typeof d=="function")Hg(d)?(i=Co(d,i),o.tag=1,o=kb(null,o,d,i,c)):(o.tag=0,o=Ng(null,o,d,i,c));else{if(d!=null){if(m=d.$$typeof,m===R){o.tag=11,o=Eb(null,o,d,i,c);break e}else if(m===Q){o.tag=14,o=Ab(null,o,d,i,c);break e}}throw o=D(d)||d,Error(n(306,o,""))}}return o;case 0:return Ng(i,o,o.type,o.pendingProps,c);case 1:return d=o.type,m=Co(d,o.pendingProps),kb(i,o,d,m,c);case 3:e:{if(Gn(o,o.stateNode.containerInfo),i===null)throw Error(n(387));var x=o.pendingProps;m=o.memoizedState,d=m.element,Pg(i,o),ru(o,x,null,c);var T=o.memoizedState;if(x=T.cache,Ta(o,an,x),x!==m.cache&&Mg(o,[an],c,!0),nu(),x=T.element,m.isDehydrated)if(m={element:x,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=m,o.memoizedState=m,o.flags&256){o=Mb(i,o,x,c);break e}else if(x!==d){d=Rr(Error(n(424)),o),zc(d),o=Mb(i,o,x,c);break e}else for(An=Zr(o.stateNode.containerInfo.firstChild),Jn=o,Lt=!0,Xr=null,xi=!0,c=Iv(o,null,x,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if($c(),x===d){o=Gi(i,o,c);break e}Cn(i,o,x,c)}o=o.child}return o;case 26:return eu(i,o),i===null?(c=B_(o.type,null,o.pendingProps,null))?o.memoizedState=c:Lt||(c=o.type,i=o.pendingProps,d=Ch(tn.current).createElement(c),d[ws]=o,d[ft]=i,Rn(d,c,i),Kt(d),o.stateNode=d):o.memoizedState=B_(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return $r(o),i===null&&Lt&&(d=o.stateNode=U_(o.type,o.pendingProps,tn.current),Jn=o,xi=!0,An=Zr(d.firstChild)),d=o.pendingProps.children,i!==null||Lt?Cn(i,o,d,c):o.child=jo(o,null,d,c),eu(i,o),o.child;case 5:return i===null&&Lt&&((m=d=An)&&(d=cC(d,o.type,o.pendingProps,xi),d!==null?(o.stateNode=d,Jn=o,An=Zr(d.firstChild),xi=!1,m=!0):m=!1),m||No(o)),$r(o),m=o.type,x=o.pendingProps,T=i!==null?i.memoizedProps:null,d=x.children,xp(m,x)?d=null:T!==null&&xp(m,T)&&(o.flags|=32),o.memoizedState!==null&&(m=ig(i,o,SA,null,null,c),vu._currentValue=m),eu(i,o),Cn(i,o,d,c),o.child;case 6:return i===null&&Lt&&((i=c=An)&&(c=uC(c,o.pendingProps,xi),c!==null?(o.stateNode=c,Jn=o,An=null,i=!0):i=!1),i||No(o)),null;case 13:return Ob(i,o,c);case 4:return Gn(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=jo(o,null,d,c):Cn(i,o,d,c),o.child;case 11:return Eb(i,o,o.type,o.pendingProps,c);case 7:return Cn(i,o,o.pendingProps,c),o.child;case 8:return Cn(i,o,o.pendingProps.children,c),o.child;case 12:return Cn(i,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,Ta(o,o.type,d.value),Cn(i,o,d.children,c),o.child;case 9:return m=o.type._context,d=o.pendingProps.children,Io(o),m=Vn(m),d=d(m),o.flags|=1,Cn(i,o,d,c),o.child;case 14:return Ab(i,o,o.type,o.pendingProps,c);case 15:return Cb(i,o,o.type,o.pendingProps,c);case 19:return Lb(i,o,c);case 22:return Rb(i,o,c);case 24:return Io(o),d=Vn(an),i===null?(m=ng(),m===null&&(m=as,x=tg(),m.pooledCache=x,x.refCount++,x!==null&&(m.pooledCacheLanes|=c),m=x),o.memoizedState={parent:d,cache:m},Og(o),Ta(o,an,m)):((i.lanes&c)!==0&&(Pg(i,o),ru(o,null,null,c),nu()),m=i.memoizedState,x=o.memoizedState,m.parent!==d?(m={parent:d,cache:d},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),Ta(o,an,d)):(d=x.cache,Ta(o,an,d),d!==m.cache&&Mg(o,[an],c,!0))),Cn(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}var Dg=_t(null),Ro=null,Wi=null;function Ta(i,o,c){jt(Dg,o._currentValue),o._currentValue=c}function Yi(i){i._currentValue=Dg.current,qt(Dg)}function kg(i,o,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===c)break;i=i.return}}function Mg(i,o,c,d){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var x=m.dependencies;if(x!==null){var T=m.child;x=x.firstContext;e:for(;x!==null;){var S=x;x=m;for(var M=0;M<o.length;M++)if(S.context===o[M]){x.lanes|=c,S=x.alternate,S!==null&&(S.lanes|=c),kg(x.return,c,i),d||(T=null);break e}x=S.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(n(341));T.lanes|=c,x=T.alternate,x!==null&&(x.lanes|=c),kg(T,c,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function tu(i,o,c,d){i=null;for(var m=o,x=!1;m!==null;){if(!x){if((m.flags&524288)!==0)x=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(n(387));if(T=T.memoizedProps,T!==null){var S=m.type;pr(m.pendingProps.value,T.value)||(i!==null?i.push(S):i=[S])}}else if(m===nr.current){if(T=m.alternate,T===null)throw Error(n(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(vu):i=[vu])}m=m.return}i!==null&&Mg(o,i,c,d),o.flags|=262144}function fh(i){for(i=i.firstContext;i!==null;){if(!pr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Io(i){Ro=i,Wi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Vn(i){return Vb(Ro,i)}function mh(i,o){return Ro===null&&Io(i),Vb(i,o)}function Vb(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Wi===null){if(i===null)throw Error(n(308));Wi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Wi=Wi.next=o;return c}var Sa=!1;function Og(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pg(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ea(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Aa(i,o,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Es&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,o=Yd(i),bv(i,null,c),o}return Wd(i,d,o,c),Yd(i)}function su(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194176)!==0)){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,Nr(i,c)}}function Lg(i,o){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?m=x=T:x=x.next=T,c=c.next}while(c!==null);x===null?m=x=o:x=x.next=o}else m=x=o;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var Ug=!1;function nu(){if(Ug){var i=jl;if(i!==null)throw i}}function ru(i,o,c,d){Ug=!1;var m=i.updateQueue;Sa=!1;var x=m.firstBaseUpdate,T=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var M=S,W=M.next;M.next=null,T===null?x=W:T.next=W,T=M;var me=i.alternate;me!==null&&(me=me.updateQueue,S=me.lastBaseUpdate,S!==T&&(S===null?me.firstBaseUpdate=W:S.next=W,me.lastBaseUpdate=M))}if(x!==null){var ve=m.baseState;T=0,me=W=M=null,S=x;do{var ne=S.lane&-536870913,he=ne!==S.lane;if(he?(kt&ne)===ne:(d&ne)===ne){ne!==0&&ne===Nl&&(Ug=!0),me!==null&&(me=me.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Be=i,nt=S;ne=o;var Ms=c;switch(nt.tag){case 1:if(Be=nt.payload,typeof Be=="function"){ve=Be.call(Ms,ve,ne);break e}ve=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=nt.payload,ne=typeof Be=="function"?Be.call(Ms,ve,ne):Be,ne==null)break e;ve=U({},ve,ne);break e;case 2:Sa=!0}}ne=S.callback,ne!==null&&(i.flags|=64,he&&(i.flags|=8192),he=m.callbacks,he===null?m.callbacks=[ne]:he.push(ne))}else he={lane:ne,tag:S.tag,payload:S.payload,callback:S.callback,next:null},me===null?(W=me=he,M=ve):me=me.next=he,T|=ne;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;he=S,S=he.next,he.next=null,m.lastBaseUpdate=he,m.shared.pending=null}}while(!0);me===null&&(M=ve),m.baseState=M,m.firstBaseUpdate=W,m.lastBaseUpdate=me,x===null&&(m.shared.lanes=0),ka|=T,i.lanes=T,i.memoizedState=ve}}function Fb(i,o){if(typeof i!="function")throw Error(n(191,i));i.call(o)}function Bb(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Fb(c[i],o)}function iu(i,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var m=d.next;c=m;do{if((c.tag&i)===i){d=void 0;var x=c.create,T=c.inst;d=x(),T.destroy=d}c=c.next}while(c!==m)}}catch(S){ss(o,o.return,S)}}function Ca(i,o,c){try{var d=o.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var x=m.next;d=x;do{if((d.tag&i)===i){var T=d.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,m=o;var M=c;try{S()}catch(W){ss(m,M,W)}}}d=d.next}while(d!==x)}}catch(W){ss(o,o.return,W)}}function qb(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{Bb(o,c)}catch(d){ss(i,i.return,d)}}}function $b(i,o,c){c.props=Co(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){ss(i,o,d)}}function Do(i,o){try{var c=i.ref;if(c!==null){var d=i.stateNode;switch(i.tag){case 26:case 27:case 5:var m=d;break;default:m=d}typeof c=="function"?i.refCleanup=c(m):c.current=m}}catch(x){ss(i,o,x)}}function xr(i,o){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(m){ss(i,o,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){ss(i,o,m)}else c.current=null}function zb(i){var o=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(m){ss(i,i.return,m)}}function Hb(i,o,c){try{var d=i.stateNode;rC(d,i.type,c,o),d[ft]=o}catch(m){ss(i,i.return,m)}}function Gb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Vg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Gb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Fg(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(i,o):c.insertBefore(i,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(i,c)):(o=c,o.appendChild(i)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Ah));else if(d!==4&&d!==27&&(i=i.child,i!==null))for(Fg(i,o,c),i=i.sibling;i!==null;)Fg(i,o,c),i=i.sibling}function gh(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(d!==4&&d!==27&&(i=i.child,i!==null))for(gh(i,o,c),i=i.sibling;i!==null;)gh(i,o,c),i=i.sibling}var Ki=!1,Ds=!1,Bg=!1,Wb=typeof WeakSet=="function"?WeakSet:Set,vn=null,Yb=!1;function MA(i,o){if(i=i.containerInfo,gp=Oh,i=dv(i),$m(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var m=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var T=0,S=-1,M=-1,W=0,me=0,ve=i,ne=null;t:for(;;){for(var he;ve!==c||m!==0&&ve.nodeType!==3||(S=T+m),ve!==x||d!==0&&ve.nodeType!==3||(M=T+d),ve.nodeType===3&&(T+=ve.nodeValue.length),(he=ve.firstChild)!==null;)ne=ve,ve=he;for(;;){if(ve===i)break t;if(ne===c&&++W===m&&(S=T),ne===x&&++me===d&&(M=T),(he=ve.nextSibling)!==null)break;ve=ne,ne=ve.parentNode}ve=he}c=S===-1||M===-1?null:{start:S,end:M}}else c=null}c=c||{start:0,end:0}}else c=null;for(pp={focusedElem:i,selectionRange:c},Oh=!1,vn=o;vn!==null;)if(o=vn,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,vn=i;else for(;vn!==null;){switch(o=vn,x=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&x!==null){i=void 0,c=o,m=x.memoizedProps,x=x.memoizedState,d=c.stateNode;try{var Be=Co(c.type,m,c.elementType===c.type);i=d.getSnapshotBeforeUpdate(Be,x),d.__reactInternalSnapshotBeforeUpdate=i}catch(nt){ss(c,c.return,nt)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)bp(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":bp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=o.sibling,i!==null){i.return=o.return,vn=i;break}vn=o.return}return Be=Yb,Yb=!1,Be}function Kb(i,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Xi(i,c),d&4&&iu(5,c);break;case 1:if(Xi(i,c),d&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(S){ss(c,c.return,S)}else{var m=Co(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(m,o,i.__reactInternalSnapshotBeforeUpdate)}catch(S){ss(c,c.return,S)}}d&64&&qb(c),d&512&&Do(c,c.return);break;case 3:if(Xi(i,c),d&64&&(d=c.updateQueue,d!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{Bb(d,i)}catch(S){ss(c,c.return,S)}}break;case 26:Xi(i,c),d&512&&Do(c,c.return);break;case 27:case 5:Xi(i,c),o===null&&d&4&&zb(c),d&512&&Do(c,c.return);break;case 12:Xi(i,c);break;case 13:Xi(i,c),d&4&&Jb(i,c);break;case 22:if(m=c.memoizedState!==null||Ki,!m){o=o!==null&&o.memoizedState!==null||Ds;var x=Ki,T=Ds;Ki=m,(Ds=o)&&!T?Ra(i,c,(c.subtreeFlags&8772)!==0):Xi(i,c),Ki=x,Ds=T}d&512&&(c.memoizedProps.mode==="manual"?Do(c,c.return):xr(c,c.return));break;default:Xi(i,c)}}function Qb(i){var o=i.alternate;o!==null&&(i.alternate=null,Qb(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&ms(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ws=null,yr=!1;function Qi(i,o,c){for(c=c.child;c!==null;)Xb(i,o,c),c=c.sibling}function Xb(i,o,c){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Wt,c)}catch{}switch(c.tag){case 26:Ds||xr(c,o),Qi(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ds||xr(c,o);var d=Ws,m=yr;for(Ws=c.stateNode,Qi(i,o,c),c=c.stateNode,o=c.attributes;o.length;)c.removeAttributeNode(o[0]);ms(c),Ws=d,yr=m;break;case 5:Ds||xr(c,o);case 6:m=Ws;var x=yr;if(Ws=null,Qi(i,o,c),Ws=m,yr=x,Ws!==null)if(yr)try{i=Ws,d=c.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)}catch(T){ss(c,o,T)}else try{Ws.removeChild(c.stateNode)}catch(T){ss(c,o,T)}break;case 18:Ws!==null&&(yr?(o=Ws,c=c.stateNode,o.nodeType===8?vp(o.parentNode,c):o.nodeType===1&&vp(o,c),Nu(o)):vp(Ws,c.stateNode));break;case 4:d=Ws,m=yr,Ws=c.stateNode.containerInfo,yr=!0,Qi(i,o,c),Ws=d,yr=m;break;case 0:case 11:case 14:case 15:Ds||Ca(2,c,o),Ds||Ca(4,c,o),Qi(i,o,c);break;case 1:Ds||(xr(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&$b(c,o,d)),Qi(i,o,c);break;case 21:Qi(i,o,c);break;case 22:Ds||xr(c,o),Ds=(d=Ds)||c.memoizedState!==null,Qi(i,o,c),Ds=d;break;default:Qi(i,o,c)}}function Jb(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Nu(i)}catch(c){ss(o,o.return,c)}}function OA(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Wb),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Wb),o;default:throw Error(n(435,i.tag))}}function qg(i,o){var c=OA(i);o.forEach(function(d){var m=YA.bind(null,i,d);c.has(d)||(c.add(d),d.then(m,m))})}function Mr(i,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d],x=i,T=o,S=T;e:for(;S!==null;){switch(S.tag){case 27:case 5:Ws=S.stateNode,yr=!1;break e;case 3:Ws=S.stateNode.containerInfo,yr=!0;break e;case 4:Ws=S.stateNode.containerInfo,yr=!0;break e}S=S.return}if(Ws===null)throw Error(n(160));Xb(x,T,m),Ws=null,yr=!1,x=m.alternate,x!==null&&(x.return=null),m.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Zb(o,i),o=o.sibling}var Jr=null;function Zb(i,o){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Mr(o,i),Or(i),d&4&&(Ca(3,i,i.return),iu(3,i),Ca(5,i,i.return));break;case 1:Mr(o,i),Or(i),d&512&&(Ds||c===null||xr(c,c.return)),d&64&&Ki&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var m=Jr;if(Mr(o,i),Or(i),d&512&&(Ds||c===null||xr(c,c.return)),d&4){var x=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":x=m.getElementsByTagName("title")[0],(!x||x[Tr]||x[ws]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=m.createElement(d),m.head.insertBefore(x,m.querySelector("head > title"))),Rn(x,d,c),x[ws]=i,Kt(x),d=x;break e;case"link":var T=z_("link","href",m).get(d+(c.href||""));if(T){for(var S=0;S<T.length;S++)if(x=T[S],x.getAttribute("href")===(c.href==null?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(S,1);break t}}x=m.createElement(d),Rn(x,d,c),m.head.appendChild(x);break;case"meta":if(T=z_("meta","content",m).get(d+(c.content||""))){for(S=0;S<T.length;S++)if(x=T[S],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(S,1);break t}}x=m.createElement(d),Rn(x,d,c),m.head.appendChild(x);break;default:throw Error(n(468,d))}x[ws]=i,Kt(x),d=x}i.stateNode=d}else H_(m,i.type,i.stateNode);else i.stateNode=$_(m,d,i.memoizedProps);else x!==d?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,d===null?H_(m,i.type,i.stateNode):$_(m,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Hb(i,i.memoizedProps,c.memoizedProps)}break;case 27:if(d&4&&i.alternate===null){m=i.stateNode,x=i.memoizedProps;try{for(var M=m.firstChild;M;){var W=M.nextSibling,me=M.nodeName;M[Tr]||me==="HEAD"||me==="BODY"||me==="SCRIPT"||me==="STYLE"||me==="LINK"&&M.rel.toLowerCase()==="stylesheet"||m.removeChild(M),M=W}for(var ve=i.type,ne=m.attributes;ne.length;)m.removeAttributeNode(ne[0]);Rn(m,ve,x),m[ws]=i,m[ft]=x}catch(Be){ss(i,i.return,Be)}}case 5:if(Mr(o,i),Or(i),d&512&&(Ds||c===null||xr(c,c.return)),i.flags&32){m=i.stateNode;try{ce(m,"")}catch(Be){ss(i,i.return,Be)}}d&4&&i.stateNode!=null&&(m=i.memoizedProps,Hb(i,m,c!==null?c.memoizedProps:m)),d&1024&&(Bg=!0);break;case 6:if(Mr(o,i),Or(i),d&4){if(i.stateNode===null)throw Error(n(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(Be){ss(i,i.return,Be)}}break;case 3:if(Dh=null,m=Jr,Jr=Rh(o.containerInfo),Mr(o,i),Jr=m,Or(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Nu(o.containerInfo)}catch(Be){ss(i,i.return,Be)}Bg&&(Bg=!1,e_(i));break;case 4:d=Jr,Jr=Rh(i.stateNode.containerInfo),Mr(o,i),Or(i),Jr=d;break;case 12:Mr(o,i),Or(i);break;case 13:Mr(o,i),Or(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Xg=$s()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,qg(i,d)));break;case 22:if(d&512&&(Ds||c===null||xr(c,c.return)),M=i.memoizedState!==null,W=c!==null&&c.memoizedState!==null,me=Ki,ve=Ds,Ki=me||M,Ds=ve||W,Mr(o,i),Ds=ve,Ki=me,Or(i),o=i.stateNode,o._current=i,o._visibility&=-3,o._visibility|=o._pendingVisibility&2,d&8192&&(o._visibility=M?o._visibility&-2:o._visibility|1,M&&(o=Ki||Ds,c===null||W||o||Al(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(c=null,o=i;;){if(o.tag===5||o.tag===26||o.tag===27){if(c===null){W=c=o;try{if(m=W.stateNode,M)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{T=W.stateNode,S=W.memoizedProps.style;var he=S!=null&&S.hasOwnProperty("display")?S.display:null;T.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(Be){ss(W,W.return,Be)}}}else if(o.tag===6){if(c===null){W=o;try{W.stateNode.nodeValue=M?"":W.memoizedProps}catch(Be){ss(W,W.return,Be)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,qg(i,c))));break;case 19:Mr(o,i),Or(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,qg(i,d)));break;case 21:break;default:Mr(o,i),Or(i)}}function Or(i){var o=i.flags;if(o&2){try{if(i.tag!==27){e:{for(var c=i.return;c!==null;){if(Gb(c)){var d=c;break e}c=c.return}throw Error(n(160))}switch(d.tag){case 27:var m=d.stateNode,x=Vg(i);gh(i,x,m);break;case 5:var T=d.stateNode;d.flags&32&&(ce(T,""),d.flags&=-33);var S=Vg(i);gh(i,S,T);break;case 3:case 4:var M=d.stateNode.containerInfo,W=Vg(i);Fg(i,W,M);break;default:throw Error(n(161))}}}catch(me){ss(i,i.return,me)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function e_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;e_(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Xi(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Kb(i,o.alternate,o),o=o.sibling}function Al(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ca(4,o,o.return),Al(o);break;case 1:xr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&$b(o,o.return,c),Al(o);break;case 26:case 27:case 5:xr(o,o.return),Al(o);break;case 22:xr(o,o.return),o.memoizedState===null&&Al(o);break;default:Al(o)}i=i.sibling}}function Ra(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,m=i,x=o,T=x.flags;switch(x.tag){case 0:case 11:case 15:Ra(m,x,c),iu(4,x);break;case 1:if(Ra(m,x,c),d=x,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(W){ss(d,d.return,W)}if(d=x,m=d.updateQueue,m!==null){var S=d.stateNode;try{var M=m.shared.hiddenCallbacks;if(M!==null)for(m.shared.hiddenCallbacks=null,m=0;m<M.length;m++)Fb(M[m],S)}catch(W){ss(d,d.return,W)}}c&&T&64&&qb(x),Do(x,x.return);break;case 26:case 27:case 5:Ra(m,x,c),c&&d===null&&T&4&&zb(x),Do(x,x.return);break;case 12:Ra(m,x,c);break;case 13:Ra(m,x,c),c&&T&4&&Jb(m,x);break;case 22:x.memoizedState===null&&Ra(m,x,c),Do(x,x.return);break;default:Ra(m,x,c)}o=o.sibling}}function $g(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Kc(c))}function zg(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Kc(i))}function Ia(i,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)t_(i,o,c,d),o=o.sibling}function t_(i,o,c,d){var m=o.flags;switch(o.tag){case 0:case 11:case 15:Ia(i,o,c,d),m&2048&&iu(9,o);break;case 3:Ia(i,o,c,d),m&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Kc(i)));break;case 12:if(m&2048){Ia(i,o,c,d),i=o.stateNode;try{var x=o.memoizedProps,T=x.id,S=x.onPostCommit;typeof S=="function"&&S(T,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(M){ss(o,o.return,M)}}else Ia(i,o,c,d);break;case 23:break;case 22:x=o.stateNode,o.memoizedState!==null?x._visibility&4?Ia(i,o,c,d):au(i,o):x._visibility&4?Ia(i,o,c,d):(x._visibility|=4,Cl(i,o,c,d,(o.subtreeFlags&10256)!==0)),m&2048&&$g(o.alternate,o);break;case 24:Ia(i,o,c,d),m&2048&&zg(o.alternate,o);break;default:Ia(i,o,c,d)}}function Cl(i,o,c,d,m){for(m=m&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var x=i,T=o,S=c,M=d,W=T.flags;switch(T.tag){case 0:case 11:case 15:Cl(x,T,S,M,m),iu(8,T);break;case 23:break;case 22:var me=T.stateNode;T.memoizedState!==null?me._visibility&4?Cl(x,T,S,M,m):au(x,T):(me._visibility|=4,Cl(x,T,S,M,m)),m&&W&2048&&$g(T.alternate,T);break;case 24:Cl(x,T,S,M,m),m&&W&2048&&zg(T.alternate,T);break;default:Cl(x,T,S,M,m)}o=o.sibling}}function au(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,d=o,m=d.flags;switch(d.tag){case 22:au(c,d),m&2048&&$g(d.alternate,d);break;case 24:au(c,d),m&2048&&zg(d.alternate,d);break;default:au(c,d)}o=o.sibling}}var ou=8192;function Rl(i){if(i.subtreeFlags&ou)for(i=i.child;i!==null;)s_(i),i=i.sibling}function s_(i){switch(i.tag){case 26:Rl(i),i.flags&ou&&i.memoizedState!==null&&NC(Jr,i.memoizedState,i.memoizedProps);break;case 5:Rl(i);break;case 3:case 4:var o=Jr;Jr=Rh(i.stateNode.containerInfo),Rl(i),Jr=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=ou,ou=16777216,Rl(i),ou=o):Rl(i));break;default:Rl(i)}}function n_(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function lu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];vn=d,i_(d,i)}n_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)r_(i),i=i.sibling}function r_(i){switch(i.tag){case 0:case 11:case 15:lu(i),i.flags&2048&&Ca(9,i,i.return);break;case 3:lu(i);break;case 12:lu(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&4&&(i.return===null||i.return.tag!==13)?(o._visibility&=-5,ph(i)):lu(i);break;default:lu(i)}}function ph(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];vn=d,i_(d,i)}n_(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ca(8,o,o.return),ph(o);break;case 22:c=o.stateNode,c._visibility&4&&(c._visibility&=-5,ph(o));break;default:ph(o)}i=i.sibling}}function i_(i,o){for(;vn!==null;){var c=vn;switch(c.tag){case 0:case 11:case 15:Ca(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Kc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,vn=d;else e:for(c=i;vn!==null;){d=vn;var m=d.sibling,x=d.return;if(Qb(d),d===c){vn=null;break e}if(m!==null){m.return=x,vn=m;break e}vn=x}}}function PA(i,o,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(i,o,c,d){return new PA(i,o,c,d)}function Hg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Da(i,o){var c=i.alternate;return c===null?(c=Pr(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&31457280,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function a_(i,o){i.flags&=31457282;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function xh(i,o,c,d,m,x){var T=0;if(d=i,typeof i=="function")Hg(i)&&(T=1);else if(typeof i=="string")T=_C(i,c,en.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case g:return ko(c.children,m,x,o);case p:T=8,m|=24;break;case y:return i=Pr(12,c,o,m|2),i.elementType=y,i.lanes=x,i;case z:return i=Pr(13,c,o,m),i.elementType=z,i.lanes=x,i;case q:return i=Pr(19,c,o,m),i.elementType=q,i.lanes=x,i;case ee:return o_(c,m,x,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case w:case A:T=10;break e;case v:T=9;break e;case R:T=11;break e;case Q:T=14;break e;case pe:T=16,d=null;break e}T=29,c=Error(n(130,i===null?"null":typeof i,"")),d=null}return o=Pr(T,c,o,m),o.elementType=i,o.type=d,o.lanes=x,o}function ko(i,o,c,d){return i=Pr(7,i,d,o),i.lanes=c,i}function o_(i,o,c,d){i=Pr(22,i,d,o),i.elementType=ee,i.lanes=c;var m={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var x=m._current;if(x===null)throw Error(n(456));if((m._pendingVisibility&2)===0){var T=ba(x,2);T!==null&&(m._pendingVisibility|=2,Zn(T,x,2))}},attach:function(){var x=m._current;if(x===null)throw Error(n(456));if((m._pendingVisibility&2)!==0){var T=ba(x,2);T!==null&&(m._pendingVisibility&=-3,Zn(T,x,2))}}};return i.stateNode=m,i}function Gg(i,o,c){return i=Pr(6,i,null,o),i.lanes=c,i}function Wg(i,o,c){return o=Pr(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Ji(i){i.flags|=4}function l_(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!G_(o)){if(o=kr.current,o!==null&&((kt&4194176)===kt?yi!==null:(kt&62914560)!==kt&&(kt&536870912)===0||o!==yi))throw Gc=Jm,Tv;i.flags|=8192}}function yh(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?jn():536870912,i.lanes|=o,Dl|=o)}function cu(i,o){if(!Lt)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Ss(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(o)for(var m=i.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&31457280,d|=m.flags&31457280,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=d,i.childLanes=c,o}function LA(i,o,c){var d=o.pendingProps;switch(Qm(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ss(o),null;case 1:return Ss(o),null;case 3:return c=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Yi(an),ys(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(qc(o)?Ji(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Xr!==null&&(tp(Xr),Xr=null))),Ss(o),null;case 26:return c=o.memoizedState,i===null?(Ji(o),c!==null?(Ss(o),l_(o,c)):(Ss(o),o.flags&=-16777217)):c?c!==i.memoizedState?(Ji(o),Ss(o),l_(o,c)):(Ss(o),o.flags&=-16777217):(i.memoizedProps!==d&&Ji(o),Ss(o),o.flags&=-16777217),null;case 27:qs(o),c=tn.current;var m=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==d&&Ji(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Ss(o),null}i=en.current,qc(o)?Nv(o):(i=U_(m,d,c),o.stateNode=i,Ji(o))}return Ss(o),null;case 5:if(qs(o),c=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&Ji(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Ss(o),null}if(i=en.current,qc(o))Nv(o);else{switch(m=Ch(tn.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?m.createElement("select",{is:d.is}):m.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?m.createElement(c,{is:d.is}):m.createElement(c)}}i[ws]=o,i[ft]=d;e:for(m=o.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break e;for(;m.sibling===null;){if(m.return===null||m.return===o)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}o.stateNode=i;e:switch(Rn(i,c,d),c){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ji(o)}}return Ss(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&Ji(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(i=tn.current,qc(o)){if(i=o.stateNode,c=o.memoizedProps,d=null,m=Jn,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}i[ws]=o,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||D_(i.nodeValue,c)),i||No(o)}else i=Ch(i).createTextNode(d),i[ws]=o,o.stateNode=i}return Ss(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=qc(o),d!==null&&d.dehydrated!==null){if(i===null){if(!m)throw Error(n(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[ws]=o}else $c(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ss(o),m=!1}else Xr!==null&&(tp(Xr),Xr=null),m=!0;if(!m)return o.flags&256?(zi(o),o):(zi(o),null)}if(zi(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=d!==null,i=i!==null&&i.memoizedState!==null,c){d=o.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool);var x=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==m&&(d.flags|=2048)}return c!==i&&c&&(o.child.flags|=8192),yh(o,o.updateQueue),Ss(o),null;case 4:return ys(),i===null&&hp(o.stateNode.containerInfo),Ss(o),null;case 10:return Yi(o.type),Ss(o),null;case 19:if(qt(rn),m=o.memoizedState,m===null)return Ss(o),null;if(d=(o.flags&128)!==0,x=m.rendering,x===null)if(d)cu(m,!1);else{if(ks!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(x=th(i),x!==null){for(o.flags|=128,cu(m,!1),i=x.updateQueue,o.updateQueue=i,yh(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)a_(c,i),c=c.sibling;return jt(rn,rn.current&1|2),o.child}i=i.sibling}m.tail!==null&&$s()>vh&&(o.flags|=128,d=!0,cu(m,!1),o.lanes=4194304)}else{if(!d)if(i=th(x),i!==null){if(o.flags|=128,d=!0,i=i.updateQueue,o.updateQueue=i,yh(o,i),cu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!Lt)return Ss(o),null}else 2*$s()-m.renderingStartTime>vh&&c!==536870912&&(o.flags|=128,d=!0,cu(m,!1),o.lanes=4194304);m.isBackwards?(x.sibling=o.child,o.child=x):(i=m.last,i!==null?i.sibling=x:o.child=x,m.last=x)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=$s(),o.sibling=null,i=rn.current,jt(rn,d?i&1|2:i&1),o):(Ss(o),null);case 22:case 23:return zi(o),eg(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(Ss(o),o.subtreeFlags&6&&(o.flags|=8192)):Ss(o),c=o.updateQueue,c!==null&&yh(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),i!==null&&qt(To),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Yi(an),Ss(o),null;case 25:return null}throw Error(n(156,o.tag))}function UA(i,o){switch(Qm(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Yi(an),ys(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return qs(o),null;case 13:if(zi(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));$c()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return qt(rn),null;case 4:return ys(),null;case 10:return Yi(o.type),null;case 22:case 23:return zi(o),eg(),i!==null&&qt(To),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Yi(an),null;case 25:return null;default:return null}}function c_(i,o){switch(Qm(o),o.tag){case 3:Yi(an),ys();break;case 26:case 27:case 5:qs(o);break;case 4:ys();break;case 13:zi(o);break;case 19:qt(rn);break;case 10:Yi(o.type);break;case 22:case 23:zi(o),eg(),i!==null&&qt(To);break;case 24:Yi(an)}}var VA={getCacheForType:function(i){var o=Vn(an),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c}},FA=typeof WeakMap=="function"?WeakMap:Map,Es=0,as=null,wt=null,kt=0,os=0,vr=null,Zi=!1,Il=!1,Yg=!1,ea=0,ks=0,ka=0,Mo=0,Kg=0,Lr=0,Dl=0,uu=null,bi=null,Qg=!1,Xg=0,vh=1/0,bh=null,Ma=null,_h=!1,Oo=null,du=0,Jg=0,Zg=null,hu=0,ep=null;function br(){if((Es&2)!==0&&kt!==0)return kt&-kt;if(I.T!==null){var i=Nl;return i!==0?i:lp()}return Li()}function u_(){Lr===0&&(Lr=(kt&536870912)===0||Lt?fn():536870912);var i=kr.current;return i!==null&&(i.flags|=32),Lr}function Zn(i,o,c){(i===as&&os===2||i.cancelPendingCommit!==null)&&(kl(i,0),ta(i,kt,Lr,!1)),Zt(i,c),((Es&2)===0||i!==as)&&(i===as&&((Es&2)===0&&(Mo|=c),ks===4&&ta(i,kt,Lr,!1)),_i(i))}function d_(i,o,c){if((Es&6)!==0)throw Error(n(327));var d=!c&&(o&60)===0&&(o&i.expiredLanes)===0||Ht(i,o),m=d?$A(i,o):rp(i,o,!0),x=d;do{if(m===0){Il&&!d&&ta(i,o,0,!1);break}else if(m===6)ta(i,o,0,!Zi);else{if(c=i.current.alternate,x&&!BA(c)){m=rp(i,o,!1),x=!1;continue}if(m===2){if(x=o,i.errorRecoveryDisabledLanes&x)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var S=i;m=uu;var M=S.current.memoizedState.isDehydrated;if(M&&(kl(S,T).flags|=256),T=rp(S,T,!1),T!==2){if(Yg&&!M){S.errorRecoveryDisabledLanes|=x,Mo|=x,m=4;break e}x=bi,bi=m,x!==null&&tp(x)}m=T}if(x=!1,m!==2)continue}}if(m===1){kl(i,0),ta(i,o,0,!0);break}e:{switch(d=i,m){case 0:case 1:throw Error(n(345));case 4:if((o&4194176)===o){ta(d,o,Lr,!Zi);break e}break;case 2:bi=null;break;case 3:case 5:break;default:throw Error(n(329))}if(d.finishedWork=c,d.finishedLanes=o,(o&62914560)===o&&(x=Xg+300-$s(),10<x)){if(ta(d,o,Lr,!Zi),Ke(d,0)!==0)break e;d.timeoutHandle=O_(h_.bind(null,d,c,bi,bh,Qg,o,Lr,Mo,Dl,Zi,2,-0,0),x);break e}h_(d,c,bi,bh,Qg,o,Lr,Mo,Dl,Zi,0,-0,0)}}break}while(!0);_i(i)}function tp(i){bi===null?bi=i:bi.push.apply(bi,i)}function h_(i,o,c,d,m,x,T,S,M,W,me,ve,ne){var he=o.subtreeFlags;if((he&8192||(he&16785408)===16785408)&&(yu={stylesheets:null,count:0,unsuspend:wC},s_(o),o=jC(),o!==null)){i.cancelPendingCommit=o(v_.bind(null,i,c,d,m,T,S,M,1,ve,ne)),ta(i,x,T,!W);return}v_(i,c,d,m,T,S,M,me,ve,ne)}function BA(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var m=c[d],x=m.getSnapshot;m=m.value;try{if(!pr(x(),m))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ta(i,o,c,d){o&=~Kg,o&=~Mo,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var m=o;0<m;){var x=31-Us(m),T=1<<x;d[x]=-1,m&=~T}c!==0&&Yt(i,c,o)}function wh(){return(Es&6)===0?(fu(0),!1):!0}function sp(){if(wt!==null){if(os===0)var i=wt.return;else i=wt,Wi=Ro=null,lg(i),_l=null,Wc=0,i=wt;for(;i!==null;)c_(i.alternate,i),i=i.return;wt=null}}function kl(i,o){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,aC(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),sp(),as=i,wt=c=Da(i.current,null),kt=o,os=0,vr=null,Zi=!1,Il=Ht(i,o),Yg=!1,Dl=Lr=Kg=Mo=ka=ks=0,bi=uu=null,Qg=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var m=31-Us(d),x=1<<m;o|=i[m],d&=~x}return ea=o,Gd(),c}function f_(i,o){pt=null,I.H=vi,o===Hc?(o=Av(),os=3):o===Tv?(o=Av(),os=4):os=o===Sb?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,vr=o,wt===null&&(ks=1,hh(i,Rr(o,i.current)))}function m_(){var i=I.H;return I.H=vi,i===null?vi:i}function g_(){var i=I.A;return I.A=VA,i}function np(){ks=4,Zi||(kt&4194176)!==kt&&kr.current!==null||(Il=!0),(ka&134217727)===0&&(Mo&134217727)===0||as===null||ta(as,kt,Lr,!1)}function rp(i,o,c){var d=Es;Es|=2;var m=m_(),x=g_();(as!==i||kt!==o)&&(bh=null,kl(i,o)),o=!1;var T=ks;e:do try{if(os!==0&&wt!==null){var S=wt,M=vr;switch(os){case 8:sp(),T=6;break e;case 3:case 2:case 6:kr.current===null&&(o=!0);var W=os;if(os=0,vr=null,Ml(i,S,M,W),c&&Il){T=0;break e}break;default:W=os,os=0,vr=null,Ml(i,S,M,W)}}qA(),T=ks;break}catch(me){f_(i,me)}while(!0);return o&&i.shellSuspendCounter++,Wi=Ro=null,Es=d,I.H=m,I.A=x,wt===null&&(as=null,kt=0,Gd()),T}function qA(){for(;wt!==null;)p_(wt)}function $A(i,o){var c=Es;Es|=2;var d=m_(),m=g_();as!==i||kt!==o?(bh=null,vh=$s()+500,kl(i,o)):Il=Ht(i,o);e:do try{if(os!==0&&wt!==null){o=wt;var x=vr;t:switch(os){case 1:os=0,vr=null,Ml(i,o,x,1);break;case 2:if(Sv(x)){os=0,vr=null,x_(o);break}o=function(){os===2&&as===i&&(os=7),_i(i)},x.then(o,o);break e;case 3:os=7;break e;case 4:os=5;break e;case 7:Sv(x)?(os=0,vr=null,x_(o)):(os=0,vr=null,Ml(i,o,x,7));break;case 5:var T=null;switch(wt.tag){case 26:T=wt.memoizedState;case 5:case 27:var S=wt;if(!T||G_(T)){os=0,vr=null;var M=S.sibling;if(M!==null)wt=M;else{var W=S.return;W!==null?(wt=W,Nh(W)):wt=null}break t}}os=0,vr=null,Ml(i,o,x,5);break;case 6:os=0,vr=null,Ml(i,o,x,6);break;case 8:sp(),ks=6;break e;default:throw Error(n(462))}}zA();break}catch(me){f_(i,me)}while(!0);return Wi=Ro=null,I.H=d,I.A=m,Es=c,wt!==null?0:(as=null,kt=0,Gd(),ks)}function zA(){for(;wt!==null&&!pa();)p_(wt)}function p_(i){var o=Ub(i.alternate,i,ea);i.memoizedProps=i.pendingProps,o===null?Nh(i):wt=o}function x_(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=Db(c,o,o.pendingProps,o.type,void 0,kt);break;case 11:o=Db(c,o,o.pendingProps,o.type.render,o.ref,kt);break;case 5:lg(o);default:c_(c,o),o=wt=a_(o,ea),o=Ub(c,o,ea)}i.memoizedProps=i.pendingProps,o===null?Nh(i):wt=o}function Ml(i,o,c,d){Wi=Ro=null,lg(o),_l=null,Wc=0;var m=o.return;try{if(DA(i,m,o,c,kt)){ks=1,hh(i,Rr(c,i.current)),wt=null;return}}catch(x){if(m!==null)throw wt=m,x;ks=1,hh(i,Rr(c,i.current)),wt=null;return}o.flags&32768?(Lt||d===1?i=!0:Il||(kt&536870912)!==0?i=!1:(Zi=i=!0,(d===2||d===3||d===6)&&(d=kr.current,d!==null&&d.tag===13&&(d.flags|=16384))),y_(o,i)):Nh(o)}function Nh(i){var o=i;do{if((o.flags&32768)!==0){y_(o,Zi);return}i=o.return;var c=LA(o.alternate,o,ea);if(c!==null){wt=c;return}if(o=o.sibling,o!==null){wt=o;return}wt=o=i}while(o!==null);ks===0&&(ks=5)}function y_(i,o){do{var c=UA(i.alternate,i);if(c!==null){c.flags&=32767,wt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){wt=i;return}wt=i=c}while(i!==null);ks=6,wt=null}function v_(i,o,c,d,m,x,T,S,M,W){var me=I.T,ve=Te.p;try{Te.p=2,I.T=null,HA(i,o,c,d,ve,m,x,T,S,M,W)}finally{I.T=me,Te.p=ve}}function HA(i,o,c,d,m,x,T,S){do Ol();while(Oo!==null);if((Es&6)!==0)throw Error(n(327));var M=i.finishedWork;if(d=i.finishedLanes,M===null)return null;if(i.finishedWork=null,i.finishedLanes=0,M===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var W=M.lanes|M.childLanes;if(W|=Wm,Gr(i,d,W,x,T,S),i===as&&(wt=as=null,kt=0),(M.subtreeFlags&10256)===0&&(M.flags&10256)===0||_h||(_h=!0,Jg=W,Zg=c,KA(Pn,function(){return Ol(),null})),c=(M.flags&15990)!==0,(M.subtreeFlags&15990)!==0||c?(c=I.T,I.T=null,x=Te.p,Te.p=2,T=Es,Es|=4,MA(i,M),Zb(M,i),gA(pp,i.containerInfo),Oh=!!gp,pp=gp=null,i.current=M,Kb(i,M.alternate,M),Mi(),Es=T,Te.p=x,I.T=c):i.current=M,_h?(_h=!1,Oo=i,du=d):b_(i,W),W=i.pendingLanes,W===0&&(Ma=null),tt(M.stateNode),_i(i),o!==null)for(m=i.onRecoverableError,M=0;M<o.length;M++)W=o[M],m(W.value,{componentStack:W.stack});return(du&3)!==0&&Ol(),W=i.pendingLanes,(d&4194218)!==0&&(W&42)!==0?i===ep?hu++:(hu=0,ep=i):hu=0,fu(0),null}function b_(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Kc(o)))}function Ol(){if(Oo!==null){var i=Oo,o=Jg;Jg=0;var c=Pi(du),d=I.T,m=Te.p;try{if(Te.p=32>c?32:c,I.T=null,Oo===null)var x=!1;else{c=Zg,Zg=null;var T=Oo,S=du;if(Oo=null,du=0,(Es&6)!==0)throw Error(n(331));var M=Es;if(Es|=4,r_(T.current),t_(T,T.current,S,c),Es=M,fu(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Wt,T)}catch{}x=!0}return x}finally{Te.p=m,I.T=d,b_(i,o)}}return!1}function __(i,o,c){o=Rr(c,o),o=wg(i.stateNode,o,2),i=Aa(i,o,2),i!==null&&(Zt(i,2),_i(i))}function ss(i,o,c){if(i.tag===3)__(i,i,c);else for(;o!==null;){if(o.tag===3){__(o,i,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ma===null||!Ma.has(d))){i=Rr(c,i),c=jb(2),d=Aa(o,c,2),d!==null&&(Tb(c,d,o,i),Zt(d,2),_i(d));break}}o=o.return}}function ip(i,o,c){var d=i.pingCache;if(d===null){d=i.pingCache=new FA;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(c)||(Yg=!0,m.add(c),i=GA.bind(null,i,o,c),o.then(i,i))}function GA(i,o,c){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,as===i&&(kt&c)===c&&(ks===4||ks===3&&(kt&62914560)===kt&&300>$s()-Xg?(Es&2)===0&&kl(i,0):Kg|=c,Dl===kt&&(Dl=0)),_i(i)}function w_(i,o){o===0&&(o=jn()),i=ba(i,o),i!==null&&(Zt(i,o),_i(i))}function WA(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),w_(i,c)}function YA(i,o){var c=0;switch(i.tag){case 13:var d=i.stateNode,m=i.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(o),w_(i,c)}function KA(i,o){return li(i,o)}var jh=null,Pl=null,ap=!1,Th=!1,op=!1,Po=0;function _i(i){i!==Pl&&i.next===null&&(Pl===null?jh=Pl=i:Pl=Pl.next=i),Th=!0,ap||(ap=!0,XA(QA))}function fu(i,o){if(!op&&Th){op=!0;do for(var c=!1,d=jh;d!==null;){if(i!==0){var m=d.pendingLanes;if(m===0)var x=0;else{var T=d.suspendedLanes,S=d.pingedLanes;x=(1<<31-Us(42|i)+1)-1,x&=m&~(T&~S),x=x&201326677?x&201326677|1:x?x|2:0}x!==0&&(c=!0,T_(d,x))}else x=kt,x=Ke(d,d===as?x:0),(x&3)===0||Ht(d,x)||(c=!0,T_(d,x));d=d.next}while(c);op=!1}}function QA(){Th=ap=!1;var i=0;Po!==0&&(iC()&&(i=Po),Po=0);for(var o=$s(),c=null,d=jh;d!==null;){var m=d.next,x=N_(d,o);x===0?(d.next=null,c===null?jh=m:c.next=m,m===null&&(Pl=c)):(c=d,(i!==0||(x&3)!==0)&&(Th=!0)),d=m}fu(i)}function N_(i,o){for(var c=i.suspendedLanes,d=i.pingedLanes,m=i.expirationTimes,x=i.pendingLanes&-62914561;0<x;){var T=31-Us(x),S=1<<T,M=m[T];M===-1?((S&c)===0||(S&d)!==0)&&(m[T]=Ve(S,o)):M<=o&&(i.expiredLanes|=S),x&=~S}if(o=as,c=kt,c=Ke(i,i===o?c:0),d=i.callbackNode,c===0||i===o&&os===2||i.cancelPendingCommit!==null)return d!==null&&d!==null&&zr(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Ht(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(d!==null&&zr(d),Pi(c)){case 2:case 8:c=Ls;break;case 32:c=Pn;break;case 268435456:c=ns;break;default:c=Pn}return d=j_.bind(null,i),c=li(c,d),i.callbackPriority=o,i.callbackNode=c,o}return d!==null&&d!==null&&zr(d),i.callbackPriority=2,i.callbackNode=null,2}function j_(i,o){var c=i.callbackNode;if(Ol()&&i.callbackNode!==c)return null;var d=kt;return d=Ke(i,i===as?d:0),d===0?null:(d_(i,d,o),N_(i,$s()),i.callbackNode!=null&&i.callbackNode===c?j_.bind(null,i):null)}function T_(i,o){if(Ol())return null;d_(i,o,!0)}function XA(i){oC(function(){(Es&6)!==0?li(fs,i):i()})}function lp(){return Po===0&&(Po=fn()),Po}function S_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ht(""+i)}function E_(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function JA(i,o,c,d,m){if(o==="submit"&&c&&c.stateNode===m){var x=S_((m[ft]||null).action),T=d.submitter;T&&(o=(o=T[ft]||null)?S_(o.formAction):T.getAttribute("formAction"),o!==null&&(x=o,T=null));var S=new Me("action","action",null,d,m);i.push({event:S,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Po!==0){var M=T?E_(m,T):new FormData(m);xg(c,{pending:!0,data:M,method:m.method,action:x},null,M)}}else typeof x=="function"&&(S.preventDefault(),M=T?E_(m,T):new FormData(m),xg(c,{pending:!0,data:M,method:m.method,action:x},x,M))},currentTarget:m}]})}}for(var cp=0;cp<vv.length;cp++){var up=vv[cp],ZA=up.toLowerCase(),eC=up[0].toUpperCase()+up.slice(1);Qr(ZA,"on"+eC)}Qr(mv,"onAnimationEnd"),Qr(gv,"onAnimationIteration"),Qr(pv,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(xA,"onTransitionRun"),Qr(yA,"onTransitionStart"),Qr(vA,"onTransitionCancel"),Qr(xv,"onTransitionEnd"),js("onMouseEnter",["mouseout","mouseover"]),js("onMouseLeave",["mouseout","mouseover"]),js("onPointerEnter",["pointerout","pointerover"]),js("onPointerLeave",["pointerout","pointerover"]),Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mu));function A_(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],m=d.event;d=d.listeners;e:{var x=void 0;if(o)for(var T=d.length-1;0<=T;T--){var S=d[T],M=S.instance,W=S.currentTarget;if(S=S.listener,M!==x&&m.isPropagationStopped())break e;x=S,m.currentTarget=W;try{x(m)}catch(me){dh(me)}m.currentTarget=null,x=M}else for(T=0;T<d.length;T++){if(S=d[T],M=S.instance,W=S.currentTarget,S=S.listener,M!==x&&m.isPropagationStopped())break e;x=S,m.currentTarget=W;try{x(m)}catch(me){dh(me)}m.currentTarget=null,x=M}}}}function At(i,o){var c=o[zs];c===void 0&&(c=o[zs]=new Set);var d=i+"__bubble";c.has(d)||(C_(o,i,2,!1),c.add(d))}function dp(i,o,c){var d=0;o&&(d|=4),C_(c,i,d,o)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function hp(i){if(!i[Sh]){i[Sh]=!0,ui.forEach(function(c){c!=="selectionchange"&&(tC.has(c)||dp(c,!1,i),dp(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Sh]||(o[Sh]=!0,dp("selectionchange",!1,o))}}function C_(i,o,c,d){switch(J_(o)){case 2:var m=EC;break;case 8:m=AC;break;default:m=Tp}c=m.bind(null,o,c,i),m=void 0,!G||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?i.addEventListener(o,c,{capture:!0,passive:m}):i.addEventListener(o,c,!0):m!==void 0?i.addEventListener(o,c,{passive:m}):i.addEventListener(o,c,!1)}function fp(i,o,c,d,m){var x=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var S=d.stateNode.containerInfo;if(S===m||S.nodeType===8&&S.parentNode===m)break;if(T===4)for(T=d.return;T!==null;){var M=T.tag;if((M===3||M===4)&&(M=T.stateNode.containerInfo,M===m||M.nodeType===8&&M.parentNode===m))return;T=T.return}for(;S!==null;){if(T=Et(S),T===null)return;if(M=T.tag,M===5||M===6||M===26||M===27){d=x=T;continue e}S=S.parentNode}}d=d.return}V(function(){var W=x,me=ct(c),ve=[];e:{var ne=yv.get(i);if(ne!==void 0){var he=Me,Be=i;switch(i){case"keypress":if(mt(c)===0)break e;case"keydown":case"keyup":he=fl;break;case"focusin":Be="focus",he=Is;break;case"focusout":Be="blur",he=Is;break;case"beforeblur":case"afterblur":he=Is;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Qt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Qn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Vd;break;case mv:case gv:case pv:he=gr;break;case xv:he=Bd;break;case"scroll":case"scrollend":he=gt;break;case"wheel":he=ml;break;case"copy":case"cut":case"paste":he=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Uc;break;case"toggle":case"beforetoggle":he=$d}var nt=(o&4)!==0,Ms=!nt&&(i==="scroll"||i==="scrollend"),J=nt?ne!==null?ne+"Capture":null:ne;nt=[];for(var H=W,te;H!==null;){var xe=H;if(te=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||te===null||J===null||(xe=k(H,J),xe!=null&&nt.push(gu(H,xe,te))),Ms)break;H=H.return}0<nt.length&&(ne=new he(ne,Be,null,c,me),ve.push({event:ne,listeners:nt}))}}if((o&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ne&&c!==at&&(Be=c.relatedTarget||c.fromElement)&&(Et(Be)||Be[dr]))break e;if((he||ne)&&(ne=me.window===me?me:(ne=me.ownerDocument)?ne.defaultView||ne.parentWindow:window,he?(Be=c.relatedTarget||c.toElement,he=W,Be=Be?Et(Be):null,Be!==null&&(Ms=re(Be),nt=Be.tag,Be!==Ms||nt!==5&&nt!==27&&nt!==6)&&(Be=null)):(he=null,Be=W),he!==Be)){if(nt=Qt,xe="onMouseLeave",J="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(nt=Uc,xe="onPointerLeave",J="onPointerEnter",H="pointer"),Ms=he==null?ne:Ns(he),te=Be==null?ne:Ns(Be),ne=new nt(xe,H+"leave",he,c,me),ne.target=Ms,ne.relatedTarget=te,xe=null,Et(me)===W&&(nt=new nt(J,H+"enter",Be,c,me),nt.target=te,nt.relatedTarget=Ms,xe=nt),Ms=xe,he&&Be)t:{for(nt=he,J=Be,H=0,te=nt;te;te=Ll(te))H++;for(te=0,xe=J;xe;xe=Ll(xe))te++;for(;0<H-te;)nt=Ll(nt),H--;for(;0<te-H;)J=Ll(J),te--;for(;H--;){if(nt===J||J!==null&&nt===J.alternate)break t;nt=Ll(nt),J=Ll(J)}nt=null}else nt=null;he!==null&&R_(ve,ne,he,nt,!1),Be!==null&&Ms!==null&&R_(ve,Ms,Be,nt,!0)}}e:{if(ne=W?Ns(W):window,he=ne.nodeName&&ne.nodeName.toLowerCase(),he==="select"||he==="input"&&ne.type==="file")var Ue=nv;else if(nn(ne))if(rv)Ue=fA;else{Ue=dA;var xt=uA}else he=ne.nodeName,!he||he.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?W&&it(W.elementType)&&(Ue=nv):Ue=hA;if(Ue&&(Ue=Ue(i,W))){Bi(ve,Ue,c,me);break e}xt&&xt(i,ne,W),i==="focusout"&&W&&ne.type==="number"&&W.memoizedProps.value!=null&&Y(ne,"number",ne.value)}switch(xt=W?Ns(W):window,i){case"focusin":(nn(xt)||xt.contentEditable==="true")&&(gl=xt,zm=W,Bc=null);break;case"focusout":Bc=zm=gl=null;break;case"mousedown":Hm=!0;break;case"contextmenu":case"mouseup":case"dragend":Hm=!1,hv(ve,c,me);break;case"selectionchange":if(pA)break;case"keydown":case"keyup":hv(ve,c,me)}var He;if(gi)e:{switch(i){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else It?ae(i,c)&&(Je="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Je="onCompositionStart");Je&&(j&&c.locale!=="ko"&&(It||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&It&&(He=We()):(ue=me,_e="value"in ue?ue.value:ue.textContent,It=!0)),xt=Eh(W,Je),0<xt.length&&(Je=new mi(Je,i,null,c,me),ve.push({event:Je,listeners:xt}),He?Je.data=He:(He=Ae(c),He!==null&&(Je.data=He)))),(He=b?sn(i,c):Dt(i,c))&&(Je=Eh(W,"onBeforeInput"),0<Je.length&&(xt=new mi("onBeforeInput","beforeinput",null,c,me),ve.push({event:xt,listeners:Je}),xt.data=He)),JA(ve,i,W,c,me)}A_(ve,o)})}function gu(i,o,c){return{instance:i,listener:o,currentTarget:c}}function Eh(i,o){for(var c=o+"Capture",d=[];i!==null;){var m=i,x=m.stateNode;m=m.tag,m!==5&&m!==26&&m!==27||x===null||(m=k(i,c),m!=null&&d.unshift(gu(i,m,x)),m=k(i,o),m!=null&&d.push(gu(i,m,x))),i=i.return}return d}function Ll(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function R_(i,o,c,d,m){for(var x=o._reactName,T=[];c!==null&&c!==d;){var S=c,M=S.alternate,W=S.stateNode;if(S=S.tag,M!==null&&M===d)break;S!==5&&S!==26&&S!==27||W===null||(M=W,m?(W=k(c,x),W!=null&&T.unshift(gu(c,W,M))):m||(W=k(c,x),W!=null&&T.push(gu(c,W,M)))),c=c.return}T.length!==0&&i.push({event:o,listeners:T})}var sC=/\r\n?/g,nC=/\u0000|\uFFFD/g;function I_(i){return(typeof i=="string"?i:""+i).replace(sC,`
`).replace(nC,"")}function D_(i,o){return o=I_(o),I_(i)===o}function Ah(){}function Jt(i,o,c,d,m,x){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||ce(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&ce(i,""+d);break;case"className":Er(i,"class",d);break;case"tabIndex":Er(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Er(i,c,d);break;case"style":$e(i,d,x);break;case"data":if(o!=="object"){Er(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=ht(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(o!=="input"&&Jt(i,o,"name",m.name,m,null),Jt(i,o,"formEncType",m.formEncType,m,null),Jt(i,o,"formMethod",m.formMethod,m,null),Jt(i,o,"formTarget",m.formTarget,m,null)):(Jt(i,o,"encType",m.encType,m,null),Jt(i,o,"method",m.method,m,null),Jt(i,o,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=ht(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Ah);break;case"onScroll":d!=null&&At("scroll",i);break;case"onScrollEnd":d!=null&&At("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=ht(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":At("beforetoggle",i),At("toggle",i),ir(i,"popover",d);break;case"xlinkActuate":Sn(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Sn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Sn(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Sn(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Sn(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Sn(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Sn(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Sn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Sn(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ir(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Bt.get(c)||c,ir(i,c,d))}}function mp(i,o,c,d,m,x){switch(c){case"style":$e(i,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"children":typeof d=="string"?ce(i,d):(typeof d=="number"||typeof d=="bigint")&&ce(i,""+d);break;case"onScroll":d!=null&&At("scroll",i);break;case"onScrollEnd":d!=null&&At("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Ah);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!di.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),o=c.slice(2,m?c.length-7:void 0),x=i[ft]||null,x=x!=null?x[c]:null,typeof x=="function"&&i.removeEventListener(o,x,m),typeof d=="function")){typeof x!="function"&&x!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,d,m);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):ir(i,c,d)}}}function Rn(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",i),At("load",i);var d=!1,m=!1,x;for(x in c)if(c.hasOwnProperty(x)){var T=c[x];if(T!=null)switch(x){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Jt(i,o,x,T,c,null)}}m&&Jt(i,o,"srcSet",c.srcSet,c,null),d&&Jt(i,o,"src",c.src,c,null);return;case"input":At("invalid",i);var S=x=T=m=null,M=null,W=null;for(d in c)if(c.hasOwnProperty(d)){var me=c[d];if(me!=null)switch(d){case"name":m=me;break;case"type":T=me;break;case"checked":M=me;break;case"defaultChecked":W=me;break;case"value":x=me;break;case"defaultValue":S=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(n(137,o));break;default:Jt(i,o,d,me,c,null)}}F(i,x,S,M,W,T,m,!1),fr(i);return;case"select":At("invalid",i),d=T=x=null;for(m in c)if(c.hasOwnProperty(m)&&(S=c[m],S!=null))switch(m){case"value":x=S;break;case"defaultValue":T=S;break;case"multiple":d=S;default:Jt(i,o,m,S,c,null)}o=x,c=T,i.multiple=!!d,o!=null?B(i,!!d,o,!1):c!=null&&B(i,!!d,c,!0);return;case"textarea":At("invalid",i),x=m=d=null;for(T in c)if(c.hasOwnProperty(T)&&(S=c[T],S!=null))switch(T){case"value":d=S;break;case"defaultValue":m=S;break;case"children":x=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:Jt(i,o,T,S,c,null)}de(i,d,m,x),fr(i);return;case"option":for(M in c)if(c.hasOwnProperty(M)&&(d=c[M],d!=null))switch(M){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Jt(i,o,M,d,c,null)}return;case"dialog":At("cancel",i),At("close",i);break;case"iframe":case"object":At("load",i);break;case"video":case"audio":for(d=0;d<mu.length;d++)At(mu[d],i);break;case"image":At("error",i),At("load",i);break;case"details":At("toggle",i);break;case"embed":case"source":case"link":At("error",i),At("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in c)if(c.hasOwnProperty(W)&&(d=c[W],d!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Jt(i,o,W,d,c,null)}return;default:if(it(o)){for(me in c)c.hasOwnProperty(me)&&(d=c[me],d!==void 0&&mp(i,o,me,d,c,void 0));return}}for(S in c)c.hasOwnProperty(S)&&(d=c[S],d!=null&&Jt(i,o,S,d,c,null))}function rC(i,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,x=null,T=null,S=null,M=null,W=null,me=null;for(he in c){var ve=c[he];if(c.hasOwnProperty(he)&&ve!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":M=ve;default:d.hasOwnProperty(he)||Jt(i,o,he,null,d,ve)}}for(var ne in d){var he=d[ne];if(ve=c[ne],d.hasOwnProperty(ne)&&(he!=null||ve!=null))switch(ne){case"type":x=he;break;case"name":m=he;break;case"checked":W=he;break;case"defaultChecked":me=he;break;case"value":T=he;break;case"defaultValue":S=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,o));break;default:he!==ve&&Jt(i,o,ne,he,d,ve)}}N(i,T,S,M,W,me,x,m);return;case"select":he=T=S=ne=null;for(x in c)if(M=c[x],c.hasOwnProperty(x)&&M!=null)switch(x){case"value":break;case"multiple":he=M;default:d.hasOwnProperty(x)||Jt(i,o,x,null,d,M)}for(m in d)if(x=d[m],M=c[m],d.hasOwnProperty(m)&&(x!=null||M!=null))switch(m){case"value":ne=x;break;case"defaultValue":S=x;break;case"multiple":T=x;default:x!==M&&Jt(i,o,m,x,d,M)}o=S,c=T,d=he,ne!=null?B(i,!!c,ne,!1):!!d!=!!c&&(o!=null?B(i,!!c,o,!0):B(i,!!c,c?[]:"",!1));return;case"textarea":he=ne=null;for(S in c)if(m=c[S],c.hasOwnProperty(S)&&m!=null&&!d.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Jt(i,o,S,null,d,m)}for(T in d)if(m=d[T],x=c[T],d.hasOwnProperty(T)&&(m!=null||x!=null))switch(T){case"value":ne=m;break;case"defaultValue":he=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==x&&Jt(i,o,T,m,d,x)}ie(i,ne,he);return;case"option":for(var Be in c)if(ne=c[Be],c.hasOwnProperty(Be)&&ne!=null&&!d.hasOwnProperty(Be))switch(Be){case"selected":i.selected=!1;break;default:Jt(i,o,Be,null,d,ne)}for(M in d)if(ne=d[M],he=c[M],d.hasOwnProperty(M)&&ne!==he&&(ne!=null||he!=null))switch(M){case"selected":i.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Jt(i,o,M,ne,d,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in c)ne=c[nt],c.hasOwnProperty(nt)&&ne!=null&&!d.hasOwnProperty(nt)&&Jt(i,o,nt,null,d,ne);for(W in d)if(ne=d[W],he=c[W],d.hasOwnProperty(W)&&ne!==he&&(ne!=null||he!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(n(137,o));break;default:Jt(i,o,W,ne,d,he)}return;default:if(it(o)){for(var Ms in c)ne=c[Ms],c.hasOwnProperty(Ms)&&ne!==void 0&&!d.hasOwnProperty(Ms)&&mp(i,o,Ms,void 0,d,ne);for(me in d)ne=d[me],he=c[me],!d.hasOwnProperty(me)||ne===he||ne===void 0&&he===void 0||mp(i,o,me,ne,d,he);return}}for(var J in c)ne=c[J],c.hasOwnProperty(J)&&ne!=null&&!d.hasOwnProperty(J)&&Jt(i,o,J,null,d,ne);for(ve in d)ne=d[ve],he=c[ve],!d.hasOwnProperty(ve)||ne===he||ne==null&&he==null||Jt(i,o,ve,ne,d,he)}var gp=null,pp=null;function Ch(i){return i.nodeType===9?i:i.ownerDocument}function k_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M_(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function xp(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var yp=null;function iC(){var i=window.event;return i&&i.type==="popstate"?i===yp?!1:(yp=i,!0):(yp=null,!1)}var O_=typeof setTimeout=="function"?setTimeout:void 0,aC=typeof clearTimeout=="function"?clearTimeout:void 0,P_=typeof Promise=="function"?Promise:void 0,oC=typeof queueMicrotask=="function"?queueMicrotask:typeof P_<"u"?function(i){return P_.resolve(null).then(i).catch(lC)}:O_;function lC(i){setTimeout(function(){throw i})}function vp(i,o){var c=o,d=0;do{var m=c.nextSibling;if(i.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(d===0){i.removeChild(m),Nu(o);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=m}while(c);Nu(o)}function bp(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":bp(c),ms(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function cC(i,o,c,d){for(;i.nodeType===1;){var m=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Tr])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(x=i.getAttribute("rel"),x==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(x!==m.rel||i.getAttribute("href")!==(m.href==null?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(x=i.getAttribute("src"),(x!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&x&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var x=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===x)return i}else return i;if(i=Zr(i.nextSibling),i===null)break}return null}function uC(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Zr(i.nextSibling),i===null))return null;return i}function Zr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}function L_(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}function U_(i,o,c){switch(o=Ch(c),i){case"html":if(i=o.documentElement,!i)throw Error(n(452));return i;case"head":if(i=o.head,!i)throw Error(n(453));return i;case"body":if(i=o.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}var Ur=new Map,V_=new Set;function Rh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var sa=Te.d;Te.d={f:dC,r:hC,D:fC,C:mC,L:gC,m:pC,X:yC,S:xC,M:vC};function dC(){var i=sa.f(),o=wh();return i||o}function hC(i){var o=mn(i);o!==null&&o.tag===5&&o.type==="form"?hb(o):sa.r(i)}var Ul=typeof document>"u"?null:document;function F_(i,o,c){var d=Ul;if(d&&typeof o=="string"&&o){var m=es(o);m='link[rel="'+i+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),V_.has(m)||(V_.add(m),i={rel:i,crossOrigin:c,href:o},d.querySelector(m)===null&&(o=d.createElement("link"),Rn(o,"link",i),Kt(o),d.head.appendChild(o)))}}function fC(i){sa.D(i),F_("dns-prefetch",i,null)}function mC(i,o){sa.C(i,o),F_("preconnect",i,o)}function gC(i,o,c){sa.L(i,o,c);var d=Ul;if(d&&i&&o){var m='link[rel="preload"][as="'+es(o)+'"]';o==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+es(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+es(c.imageSizes)+'"]')):m+='[href="'+es(i)+'"]';var x=m;switch(o){case"style":x=Vl(i);break;case"script":x=Fl(i)}Ur.has(x)||(i=U({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),Ur.set(x,i),d.querySelector(m)!==null||o==="style"&&d.querySelector(pu(x))||o==="script"&&d.querySelector(xu(x))||(o=d.createElement("link"),Rn(o,"link",i),Kt(o),d.head.appendChild(o)))}}function pC(i,o){sa.m(i,o);var c=Ul;if(c&&i){var d=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+es(d)+'"][href="'+es(i)+'"]',x=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Fl(i)}if(!Ur.has(x)&&(i=U({rel:"modulepreload",href:i},o),Ur.set(x,i),c.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(xu(x)))return}d=c.createElement("link"),Rn(d,"link",i),Kt(d),c.head.appendChild(d)}}}function xC(i,o,c){sa.S(i,o,c);var d=Ul;if(d&&i){var m=Yn(d).hoistableStyles,x=Vl(i);o=o||"default";var T=m.get(x);if(!T){var S={loading:0,preload:null};if(T=d.querySelector(pu(x)))S.loading=5;else{i=U({rel:"stylesheet",href:i,"data-precedence":o},c),(c=Ur.get(x))&&_p(i,c);var M=T=d.createElement("link");Kt(M),Rn(M,"link",i),M._p=new Promise(function(W,me){M.onload=W,M.onerror=me}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Ih(T,o,d)}T={type:"stylesheet",instance:T,count:1,state:S},m.set(x,T)}}}function yC(i,o){sa.X(i,o);var c=Ul;if(c&&i){var d=Yn(c).hoistableScripts,m=Fl(i),x=d.get(m);x||(x=c.querySelector(xu(m)),x||(i=U({src:i,async:!0},o),(o=Ur.get(m))&&wp(i,o),x=c.createElement("script"),Kt(x),Rn(x,"link",i),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(m,x))}}function vC(i,o){sa.M(i,o);var c=Ul;if(c&&i){var d=Yn(c).hoistableScripts,m=Fl(i),x=d.get(m);x||(x=c.querySelector(xu(m)),x||(i=U({src:i,async:!0,type:"module"},o),(o=Ur.get(m))&&wp(i,o),x=c.createElement("script"),Kt(x),Rn(x,"link",i),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(m,x))}}function B_(i,o,c,d){var m=(m=tn.current)?Rh(m):null;if(!m)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Vl(c.href),c=Yn(m).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Vl(c.href);var x=Yn(m).hoistableStyles,T=x.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(i,T),(x=m.querySelector(pu(i)))&&!x._p&&(T.instance=x,T.state.loading=5),Ur.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ur.set(i,c),x||bC(m,i,c,T.state))),o&&d===null)throw Error(n(528,""));return T}if(o&&d!==null)throw Error(n(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Fl(c),c=Yn(m).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Vl(i){return'href="'+es(i)+'"'}function pu(i){return'link[rel="stylesheet"]['+i+"]"}function q_(i){return U({},i,{"data-precedence":i.precedence,precedence:null})}function bC(i,o,c,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Rn(o,"link",c),Kt(o),i.head.appendChild(o))}function Fl(i){return'[src="'+es(i)+'"]'}function xu(i){return"script[async]"+i}function $_(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+es(c.href)+'"]');if(d)return o.instance=d,Kt(d),d;var m=U({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Kt(d),Rn(d,"style",m),Ih(d,c.precedence,i),o.instance=d;case"stylesheet":m=Vl(c.href);var x=i.querySelector(pu(m));if(x)return o.state.loading|=4,o.instance=x,Kt(x),x;d=q_(c),(m=Ur.get(m))&&_p(d,m),x=(i.ownerDocument||i).createElement("link"),Kt(x);var T=x;return T._p=new Promise(function(S,M){T.onload=S,T.onerror=M}),Rn(x,"link",d),o.state.loading|=4,Ih(x,c.precedence,i),o.instance=x;case"script":return x=Fl(c.src),(m=i.querySelector(xu(x)))?(o.instance=m,Kt(m),m):(d=c,(m=Ur.get(x))&&(d=U({},c),wp(d,m)),i=i.ownerDocument||i,m=i.createElement("script"),Kt(m),Rn(m,"link",d),i.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Ih(d,c.precedence,i));return o.instance}function Ih(i,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,x=m,T=0;T<d.length;T++){var S=d[T];if(S.dataset.precedence===o)x=S;else if(x!==m)break}x?x.parentNode.insertBefore(i,x.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function _p(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function wp(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Dh=null;function z_(i,o,c){if(Dh===null){var d=new Map,m=Dh=new Map;m.set(c,d)}else m=Dh,d=m.get(c),d||(d=new Map,m.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),m=0;m<c.length;m++){var x=c[m];if(!(x[Tr]||x[ws]||i==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var T=x.getAttribute(o)||"";T=i+T;var S=d.get(T);S?S.push(x):d.set(T,[x])}}return d}function H_(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function _C(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function G_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var yu=null;function wC(){}function NC(i,o,c){if(yu===null)throw Error(n(475));var d=yu;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Vl(c.href),x=i.querySelector(pu(m));if(x){i=x._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=kh.bind(d),i.then(d,d)),o.state.loading|=4,o.instance=x,Kt(x);return}x=i.ownerDocument||i,c=q_(c),(m=Ur.get(m))&&_p(c,m),x=x.createElement("link"),Kt(x);var T=x;T._p=new Promise(function(S,M){T.onload=S,T.onerror=M}),Rn(x,"link",c),o.instance=x}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=kh.bind(d),i.addEventListener("load",o),i.addEventListener("error",o))}}function jC(){if(yu===null)throw Error(n(475));var i=yu;return i.stylesheets&&i.count===0&&Np(i,i.stylesheets),0<i.count?function(o){var c=setTimeout(function(){if(i.stylesheets&&Np(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(c)}}:null}function kh(){if(this.count--,this.count===0){if(this.stylesheets)Np(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Mh=null;function Np(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Mh=new Map,o.forEach(TC,i),Mh=null,kh.call(i))}function TC(i,o){if(!(o.state.loading&4)){var c=Mh.get(i);if(c)var d=c.get(null);else{c=new Map,Mh.set(i,c);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<m.length;x++){var T=m[x];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),d=T)}d&&c.set(null,d)}m=o.instance,T=m.getAttribute("data-precedence"),x=c.get(T)||d,x===d&&c.set(null,m),c.set(T,m),this.count++,d=kh.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),x?x.parentNode.insertBefore(m,x.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),o.state.loading|=4}}var vu={$$typeof:A,Provider:null,Consumer:null,_currentValue:Ye,_currentValue2:Ye,_threadCount:0};function SC(i,o,c,d,m,x,T,S){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qe(0),this.hiddenUpdates=Qe(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=x,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function W_(i,o,c,d,m,x,T,S,M,W,me,ve){return i=new SC(i,o,c,T,S,M,W,ve),o=1,x===!0&&(o|=24),x=Pr(3,null,null,o),i.current=x,x.stateNode=i,o=tg(),o.refCount++,i.pooledCache=o,o.refCount++,x.memoizedState={element:d,isDehydrated:c,cache:o},Og(x),i}function Y_(i){return i?(i=yl,i):yl}function K_(i,o,c,d,m,x){m=Y_(m),d.context===null?d.context=m:d.pendingContext=m,d=Ea(o),d.payload={element:c},x=x===void 0?null:x,x!==null&&(d.callback=x),c=Aa(i,d,o),c!==null&&(Zn(c,i,o),su(c,i,o))}function Q_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function jp(i,o){Q_(i,o),(i=i.alternate)&&Q_(i,o)}function X_(i){if(i.tag===13){var o=ba(i,67108864);o!==null&&Zn(o,i,67108864),jp(i,67108864)}}var Oh=!0;function EC(i,o,c,d){var m=I.T;I.T=null;var x=Te.p;try{Te.p=2,Tp(i,o,c,d)}finally{Te.p=x,I.T=m}}function AC(i,o,c,d){var m=I.T;I.T=null;var x=Te.p;try{Te.p=8,Tp(i,o,c,d)}finally{Te.p=x,I.T=m}}function Tp(i,o,c,d){if(Oh){var m=Sp(d);if(m===null)fp(i,o,d,Ph,c),Z_(i,d);else if(RC(m,i,o,c,d))d.stopPropagation();else if(Z_(i,d),o&4&&-1<CC.indexOf(i)){for(;m!==null;){var x=mn(m);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var T=hn(x.pendingLanes);if(T!==0){var S=x;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var M=1<<31-Us(T);S.entanglements[1]|=M,T&=~M}_i(x),(Es&6)===0&&(vh=$s()+500,fu(0))}}break;case 13:S=ba(x,2),S!==null&&Zn(S,x,2),wh(),jp(x,2)}if(x=Sp(d),x===null&&fp(i,o,d,Ph,c),x===m)break;m=x}m!==null&&d.stopPropagation()}else fp(i,o,d,null,c)}}function Sp(i){return i=ct(i),Ep(i)}var Ph=null;function Ep(i){if(Ph=null,i=Et(i),i!==null){var o=re(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=Le(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ph=i,null}function J_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xa()){case fs:return 2;case Ls:return 8;case Pn:case Hr:return 32;case ns:return 268435456;default:return 32}default:return 32}}var Ap=!1,Oa=null,Pa=null,La=null,bu=new Map,_u=new Map,Ua=[],CC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z_(i,o){switch(i){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":bu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(o.pointerId)}}function wu(i,o,c,d,m,x){return i===null||i.nativeEvent!==x?(i={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:x,targetContainers:[m]},o!==null&&(o=mn(o),o!==null&&X_(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function RC(i,o,c,d,m){switch(o){case"focusin":return Oa=wu(Oa,i,o,c,d,m),!0;case"dragenter":return Pa=wu(Pa,i,o,c,d,m),!0;case"mouseover":return La=wu(La,i,o,c,d,m),!0;case"pointerover":var x=m.pointerId;return bu.set(x,wu(bu.get(x)||null,i,o,c,d,m)),!0;case"gotpointercapture":return x=m.pointerId,_u.set(x,wu(_u.get(x)||null,i,o,c,d,m)),!0}return!1}function ew(i){var o=Et(i.target);if(o!==null){var c=re(o);if(c!==null){if(o=c.tag,o===13){if(o=Le(c),o!==null){i.blockedOn=o,qe(i.priority,function(){if(c.tag===13){var d=br(),m=ba(c,d);m!==null&&Zn(m,c,d),jp(c,d)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Lh(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Sp(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);at=d,c.target.dispatchEvent(d),at=null}else return o=mn(c),o!==null&&X_(o),i.blockedOn=c,!1;o.shift()}return!0}function tw(i,o,c){Lh(i)&&c.delete(o)}function IC(){Ap=!1,Oa!==null&&Lh(Oa)&&(Oa=null),Pa!==null&&Lh(Pa)&&(Pa=null),La!==null&&Lh(La)&&(La=null),bu.forEach(tw),_u.forEach(tw)}function Uh(i,o){i.blockedOn===o&&(i.blockedOn=null,Ap||(Ap=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,IC)))}var Vh=null;function sw(i){Vh!==i&&(Vh=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Vh===i&&(Vh=null);for(var o=0;o<i.length;o+=3){var c=i[o],d=i[o+1],m=i[o+2];if(typeof d!="function"){if(Ep(d||c)===null)continue;break}var x=mn(c);x!==null&&(i.splice(o,3),o-=3,xg(x,{pending:!0,data:m,method:c.method,action:d},d,m))}}))}function Nu(i){function o(M){return Uh(M,i)}Oa!==null&&Uh(Oa,i),Pa!==null&&Uh(Pa,i),La!==null&&Uh(La,i),bu.forEach(o),_u.forEach(o);for(var c=0;c<Ua.length;c++){var d=Ua[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Ua.length&&(c=Ua[0],c.blockedOn===null);)ew(c),c.blockedOn===null&&Ua.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var m=c[d],x=c[d+1],T=m[ft]||null;if(typeof x=="function")T||sw(c);else if(T){var S=null;if(x&&x.hasAttribute("formAction")){if(m=x,T=x[ft]||null)S=T.formAction;else if(Ep(m)!==null)continue}else S=T.action;typeof S=="function"?c[d+1]=S:(c.splice(d,3),d-=3),sw(c)}}}function Cp(i){this._internalRoot=i}Fh.prototype.render=Cp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));var c=o.current,d=br();K_(c,d,i,o,null,null)},Fh.prototype.unmount=Cp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;i.tag===0&&Ol(),K_(i.current,2,null,i,null,null),wh(),o[dr]=null}};function Fh(i){this._internalRoot=i}Fh.prototype.unstable_scheduleHydration=function(i){if(i){var o=Li();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Ua.length&&o!==0&&o<Ua[c].priority;c++);Ua.splice(c,0,i),c===0&&ew(i)}};var nw=e.version;if(nw!=="19.0.0")throw Error(n(527,nw,"19.0.0"));Te.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=le(o),i=i!==null?Re(i):null,i=i===null?null:i.stateNode,i};var DC={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:Et,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{Wt=Bh.inject(DC),Ft=Bh}catch{}}return Tu.createRoot=function(i,o){if(!a(i))throw Error(n(299));var c=!1,d="",m=bb,x=_b,T=wb,S=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(S=o.unstable_transitionCallbacks)),o=W_(i,1,!1,null,null,c,d,m,x,T,S,null),i[dr]=o.current,hp(i.nodeType===8?i.parentNode:i),new Cp(o)},Tu.hydrateRoot=function(i,o,c){if(!a(i))throw Error(n(299));var d=!1,m="",x=bb,T=_b,S=wb,M=null,W=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(S=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(M=c.unstable_transitionCallbacks),c.formState!==void 0&&(W=c.formState)),o=W_(i,1,!0,o,c??null,d,m,x,T,S,M,W),o.context=Y_(null),c=o.current,d=br(),m=Ea(d),m.callback=null,Aa(c,m,d),o.current.lanes=d,Zt(o,d),_i(o),i[dr]=o.current,hp(i),new Fh(o)},Tu.version="19.0.0",Tu}var fw;function zC(){if(fw)return Dp.exports;fw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Dp.exports=$C(),Dp.exports}var HC=zC();const GC=()=>{};var mw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we=function(s,e){if(!s)throw Tc(e)},Tc=function(s){return new Error("Firebase Database ("+Zj.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let a=s.charCodeAt(n);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++n)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},WC=function(s){const e=[];let t=0,n=0;for(;t<s.length;){const a=s[t++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[n++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],u=s[t++],h=s[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[n++]=String.fromCharCode(55296+(g>>10)),e[n++]=String.fromCharCode(56320+(g&1023))}else{const l=s[t++],u=s[t++];e[n++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},g0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<s.length;a+=3){const l=s[a],u=a+1<s.length,h=u?s[a+1]:0,g=a+2<s.length,p=g?s[a+2]:0,y=l>>2,w=(l&3)<<4|h>>4;let v=(h&15)<<2|p>>6,A=p&63;g||(A=64,u||(v=64)),n.push(t[y],t[w],t[v],t[A])}return n.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(eT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):WC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],h=a<s.length?t[s.charAt(a)]:0;++a;const p=a<s.length?t[s.charAt(a)]:64;++a;const w=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||h==null||p==null||w==null)throw new YC;const v=l<<2|h>>4;if(n.push(v),p!==64){const A=h<<4&240|p>>2;if(n.push(A),w!==64){const R=p<<6&192|w;n.push(R)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class YC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tT=function(s){const e=eT(s);return g0.encodeByteArray(e,!0)},hf=function(s){return tT(s).replace(/\./g,"")},fx=function(s){try{return g0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(s){return sT(void 0,s)}function sT(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!QC(t)||(s[t]=sT(s[t],e[t]));return s}function QC(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=()=>XC().__FIREBASE_DEFAULTS__,ZC=()=>{if(typeof process>"u"||typeof mw>"u")return;const s=mw.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},e4=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&fx(s[1]);return e&&JSON.parse(e)},p0=()=>{try{return GC()||JC()||ZC()||e4()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},t4=s=>{var e,t;return(t=(e=p0())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},Qf=s=>{const e=t4(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},nT=()=>{var s;return(s=p0())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xf(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[hf(JSON.stringify(t)),hf(JSON.stringify(u)),""].join(".")}const Lu={};function s4(){const s={prod:[],emulator:[]};for(const e of Object.keys(Lu))Lu[e]?s.emulator.push(e):s.prod.push(e);return s}function n4(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let gw=!1;function Jf(s,e){if(typeof window>"u"||typeof document>"u"||!fo(window.location.host)||Lu[s]===e||Lu[s]||gw)return;Lu[s]=e;function t(v){return`__firebase__banner__${v}`}const n="__firebase__banner",l=s4().prod.length>0;function u(){const v=document.getElementById(n);v&&v.remove()}function h(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function g(v,A){v.setAttribute("width","24"),v.setAttribute("id",A),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function p(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{gw=!0,u()},v}function y(v,A){v.setAttribute("id",A),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function w(){const v=n4(n),A=t("text"),R=document.getElementById(A)||document.createElement("span"),z=t("learnmore"),q=document.getElementById(z)||document.createElement("a"),Q=t("preprendIcon"),pe=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const ee=v.element;h(ee),y(q,z);const fe=p();g(pe,Q),ee.append(pe,R,q,fe),document.body.appendChild(ee)}l?(R.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rT())}function r4(){var e;const s=(e=p0())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function i4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function a4(){return Zj.NODE_ADMIN===!0}function o4(){return!r4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aT(){try{return typeof indexedDB=="object"}catch{return!1}}function oT(){return new Promise((s,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(n),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}function l4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="FirebaseError";class ma extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=c4,Object.setPrototypeOf(this,ma.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zf.prototype.create)}}class Zf{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?u4(l,n):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new ma(a,h,n)}}function u4(s,e){return s.replace(d4,(t,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const d4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(s){return JSON.parse(s)}function un(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=function(s){let e={},t={},n={},a="";try{const l=s.split(".");e=Qu(fx(l[0])||""),t=Qu(fx(l[1])||""),a=l[2],n=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:n,signature:a}},h4=function(s){const e=lT(s),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},f4=function(s){const e=lT(s).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function cc(s,e){if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}function pw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ff(s,e,t){const n={};for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=e.call(t,s[a],a,s));return n}function Xu(s,e){if(s===e)return!0;const t=Object.keys(s),n=Object.keys(e);for(const a of t){if(!n.includes(a))return!1;const l=s[a],u=e[a];if(xw(l)&&xw(u)){if(!Xu(l,u))return!1}else if(l!==u)return!1}for(const a of n)if(!t.includes(a))return!1;return!0}function xw(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(s){const e=[];for(const[t,n]of Object.entries(s))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if(typeof e=="string")for(let w=0;w<16;w++)n[w]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let w=0;w<16;w++)n[w]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let w=16;w<80;w++){const v=n[w-3]^n[w-8]^n[w-14]^n[w-16];n[w]=(v<<1|v>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],u=this.chain_[2],h=this.chain_[3],g=this.chain_[4],p,y;for(let w=0;w<80;w++){w<40?w<20?(p=h^l&(u^h),y=1518500249):(p=l^u^h,y=1859775393):w<60?(p=l&u|h&(l|u),y=2400959708):(p=l^u^h,y=3395469782);const v=(a<<5|a>>>27)+p+g+y+n[w]&4294967295;g=h,h=u,u=(l<<30|l>>>2)&4294967295,l=a,a=v}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const n=t-this.blockSize;let a=0;const l=this.buf_;let u=this.inbuf_;for(;a<t;){if(u===0)for(;a<=n;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[u]=e.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}else for(;a<t;)if(l[u]=e[a],++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let n=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[n]=this.chain_[a]>>l&255,++n;return e}}function em(s,e){return`${s} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let a=s.charCodeAt(n);if(a>=55296&&a<=56319){const l=a-55296;n++,we(n<s.length,"Surrogate pair missing trail surrogate.");const u=s.charCodeAt(n)-56320;a=65536+(l<<10)+u}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},tm=function(s){let e=0;for(let t=0;t<s.length;t++){const n=s.charCodeAt(t);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(s){return s&&s._delegate?s._delegate:s}class Br{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new yd;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v4(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});n.resolve(l)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);n===h&&u.resolve(a)}return a}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const l=this.instances.get(n);return l&&e(l,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const a of n)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:y4(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y4(s){return s===Vo?void 0:s}function v4(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new x4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ct||(Ct={}));const _4={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},w4=Ct.INFO,N4={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},j4=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),a=N4[e];if(a)console[a](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y0{constructor(e){this.name=e,this._logLevel=w4,this._logHandler=j4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const T4=(s,e)=>e.some(t=>s instanceof t);let yw,vw;function S4(){return yw||(yw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E4(){return vw||(vw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cT=new WeakMap,mx=new WeakMap,uT=new WeakMap,Pp=new WeakMap,v0=new WeakMap;function A4(s){const e=new Promise((t,n)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",u)},l=()=>{t(oa(s.result)),a()},u=()=>{n(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&cT.set(t,s)}).catch(()=>{}),v0.set(e,s),e}function C4(s){if(mx.has(s))return;const e=new Promise((t,n)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",u),s.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{n(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",u),s.addEventListener("abort",u)});mx.set(s,e)}let gx={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return mx.get(s);if(e==="objectStoreNames")return s.objectStoreNames||uT.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oa(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function R4(s){gx=s(gx)}function I4(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=s.call(Lp(this),e,...t);return uT.set(n,e.sort?e.sort():[e]),oa(n)}:E4().includes(s)?function(...e){return s.apply(Lp(this),e),oa(cT.get(this))}:function(...e){return oa(s.apply(Lp(this),e))}}function D4(s){return typeof s=="function"?I4(s):(s instanceof IDBTransaction&&C4(s),T4(s,S4())?new Proxy(s,gx):s)}function oa(s){if(s instanceof IDBRequest)return A4(s);if(Pp.has(s))return Pp.get(s);const e=D4(s);return e!==s&&(Pp.set(s,e),v0.set(e,s)),e}const Lp=s=>v0.get(s);function sm(s,e,{blocked:t,upgrade:n,blocking:a,terminated:l}={}){const u=indexedDB.open(s,e),h=oa(u);return n&&u.addEventListener("upgradeneeded",g=>{n(oa(u.result),g.oldVersion,g.newVersion,oa(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}function Up(s,{blocked:e}={}){const t=indexedDB.deleteDatabase(s);return e&&t.addEventListener("blocked",n=>e(n.oldVersion,n)),oa(t).then(()=>{})}const k4=["get","getKey","getAll","getAllKeys","count"],M4=["put","add","delete","clear"],Vp=new Map;function bw(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Vp.get(e))return Vp.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,a=M4.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(a||k4.includes(t)))return;const l=async function(u,...h){const g=this.transaction(u,a?"readwrite":"readonly");let p=g.store;return n&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&g.done]))[0]};return Vp.set(e,l),l}R4(s=>({...s,get:(e,t,n)=>bw(e,t)||s.get(e,t,n),has:(e,t)=>!!bw(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(P4(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function P4(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const px="@firebase/app",_w="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=new y0("@firebase/app"),L4="@firebase/app-compat",U4="@firebase/analytics-compat",V4="@firebase/analytics",F4="@firebase/app-check-compat",B4="@firebase/app-check",q4="@firebase/auth",$4="@firebase/auth-compat",z4="@firebase/database",H4="@firebase/data-connect",G4="@firebase/database-compat",W4="@firebase/functions",Y4="@firebase/functions-compat",K4="@firebase/installations",Q4="@firebase/installations-compat",X4="@firebase/messaging",J4="@firebase/messaging-compat",Z4="@firebase/performance",eR="@firebase/performance-compat",tR="@firebase/remote-config",sR="@firebase/remote-config-compat",nR="@firebase/storage",rR="@firebase/storage-compat",iR="@firebase/firestore",aR="@firebase/ai",oR="@firebase/firestore-compat",lR="firebase",cR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="[DEFAULT]",uR={[px]:"fire-core",[L4]:"fire-core-compat",[V4]:"fire-analytics",[U4]:"fire-analytics-compat",[B4]:"fire-app-check",[F4]:"fire-app-check-compat",[q4]:"fire-auth",[$4]:"fire-auth-compat",[z4]:"fire-rtdb",[H4]:"fire-data-connect",[G4]:"fire-rtdb-compat",[W4]:"fire-fn",[Y4]:"fire-fn-compat",[K4]:"fire-iid",[Q4]:"fire-iid-compat",[X4]:"fire-fcm",[J4]:"fire-fcm-compat",[Z4]:"fire-perf",[eR]:"fire-perf-compat",[tR]:"fire-rc",[sR]:"fire-rc-compat",[nR]:"fire-gcs",[rR]:"fire-gcs-compat",[iR]:"fire-fst",[oR]:"fire-fst-compat",[aR]:"fire-vertex","fire-js":"fire-js",[lR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new Map,dR=new Map,yx=new Map;function ww(s,e){try{s.container.addComponent(e)}catch(t){ca.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ai(s){const e=s.name;if(yx.has(e))return ca.debug(`There were multiple attempts to register component ${e}.`),!1;yx.set(e,s);for(const t of mf.values())ww(t,s);for(const t of dR.values())ww(t,s);return!0}function rl(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function nm(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ha=new Zf("app","Firebase",hR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ha.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=cR;function rm(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const n={name:xx,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Ha.create("bad-app-name",{appName:String(a)});if(t||(t=nT()),!t)throw Ha.create("no-options");const l=mf.get(a);if(l){if(Xu(t,l.options)&&Xu(n,l.config))return l;throw Ha.create("duplicate-app",{appName:a})}const u=new b4(a);for(const g of yx.values())u.addComponent(g);const h=new fR(t,n,u);return mf.set(a,h),h}function vd(s=xx){const e=mf.get(s);if(!e&&s===xx&&nT())return rm();if(!e)throw Ha.create("no-app",{appName:s});return e}function zn(s,e,t){let n=uR[s]??s;t&&(n+=`-${t}`);const a=n.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${n}" with version "${e}":`];a&&u.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ca.warn(u.join(" "));return}ai(new Br(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="firebase-heartbeat-database",gR=1,Ju="firebase-heartbeat-store";let Fp=null;function dT(){return Fp||(Fp=sm(mR,gR,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ha.create("idb-open",{originalErrorMessage:s.message})})),Fp}async function pR(s){try{const t=(await dT()).transaction(Ju),n=await t.objectStore(Ju).get(hT(s));return await t.done,n}catch(e){if(e instanceof ma)ca.warn(e.message);else{const t=Ha.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ca.warn(t.message)}}}async function Nw(s,e){try{const n=(await dT()).transaction(Ju,"readwrite");await n.objectStore(Ju).put(e,hT(s)),await n.done}catch(t){if(t instanceof ma)ca.warn(t.message);else{const n=Ha.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ca.warn(n.message)}}}function hT(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=1024,yR=30;class vR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _R(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=jw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>yR){const u=wR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ca.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jw(),{heartbeatsToSend:n,unsentEntries:a}=bR(this._heartbeatsCache.heartbeats),l=hf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ca.warn(t),""}}}function jw(){return new Date().toISOString().substring(0,10)}function bR(s,e=xR){const t=[];let n=s.slice();for(const a of s){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Tw(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Tw(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class _R{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aT()?oT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Nw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Nw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Tw(s){return hf(JSON.stringify({version:2,heartbeats:s})).length}function wR(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let n=1;n<s.length;n++)s[n].date<t&&(t=s[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(s){ai(new Br("platform-logger",e=>new O4(e),"PRIVATE")),ai(new Br("heartbeat",e=>new vR(e),"PRIVATE")),zn(px,_w,s),zn(px,_w,"esm2020"),zn("fire-js","")}NR("");var jR="firebase",TR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(jR,TR,"app");var Sw={};const Ew="@firebase/database",Aw="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fT="";function mT(s){fT=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),un(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Qu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Di(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const e=window[s];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new SR(e)}}catch{}return new ER},$o=gT("localStorage"),AR=gT("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new y0("@firebase/database"),CR=function(){let s=1;return function(){return s++}}(),pT=function(s){const e=p4(s),t=new g4;t.update(e);const n=t.digest();return g0.encodeByteArray(n)},bd=function(...s){let e="";for(let t=0;t<s.length;t++){const n=s[t];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=bd.apply(null,n):typeof n=="object"?e+=un(n):e+=n,e+=" "}return e};let Uu=null,Cw=!0;const RR=function(s,e){we(!0,"Can't turn on custom loggers persistently."),ic.logLevel=Ct.VERBOSE,Uu=ic.log.bind(ic)},Dn=function(...s){if(Cw===!0&&(Cw=!1,Uu===null&&AR.get("logging_enabled")===!0&&RR()),Uu){const e=bd.apply(null,s);Uu(e)}},_d=function(s){return function(...e){Dn(s,...e)}},vx=function(...s){const e="FIREBASE INTERNAL ERROR: "+bd(...s);ic.error(e)},ua=function(...s){const e=`FIREBASE FATAL ERROR: ${bd(...s)}`;throw ic.error(e),new Error(e)},sr=function(...s){const e="FIREBASE WARNING: "+bd(...s);ic.warn(e)},IR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&sr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},_0=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},DR=function(s){if(document.readyState==="complete")s();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},eo="[MIN_NAME]",to="[MAX_NAME]",il=function(s,e){if(s===e)return 0;if(s===eo||e===to)return-1;if(e===eo||s===to)return 1;{const t=Rw(s),n=Rw(e);return t!==null?n!==null?t-n===0?s.length-e.length:t-n:-1:n!==null?1:s<e?-1:1}},kR=function(s,e){return s===e?0:s<e?-1:1},Su=function(s,e){if(e&&s in e)return e[s];throw new Error("Missing required key ("+s+") in object: "+un(e))},w0=function(s){if(typeof s!="object"||s===null)return un(s);const e=[];for(const n in s)e.push(n);e.sort();let t="{";for(let n=0;n<e.length;n++)n!==0&&(t+=","),t+=un(e[n]),t+=":",t+=w0(s[e[n]]);return t+="}",t},xT=function(s,e){const t=s.length;if(t<=e)return[s];const n=[];for(let a=0;a<t;a+=e)a+e>t?n.push(s.substring(a,t)):n.push(s.substring(a,a+e));return n};function Mn(s,e){for(const t in s)s.hasOwnProperty(t)&&e(t,s[t])}const yT=function(s){we(!_0(s),"Invalid JSON number");const e=11,t=52,n=(1<<e-1)-1;let a,l,u,h,g;s===0?(l=0,u=0,a=1/s===-1/0?1:0):(a=s<0,s=Math.abs(s),s>=Math.pow(2,1-n)?(h=Math.min(Math.floor(Math.log(s)/Math.LN2),n),l=h+n,u=Math.round(s*Math.pow(2,t-h)-Math.pow(2,t))):(l=0,u=Math.round(s/Math.pow(2,1-n-t))));const p=[];for(g=t;g;g-=1)p.push(u%2?1:0),u=Math.floor(u/2);for(g=e;g;g-=1)p.push(l%2?1:0),l=Math.floor(l/2);p.push(a?1:0),p.reverse();const y=p.join("");let w="";for(g=0;g<64;g+=8){let v=parseInt(y.substr(g,8),2).toString(16);v.length===1&&(v="0"+v),w=w+v}return w.toLowerCase()},MR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},OR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function PR(s,e){let t="Unknown Error";s==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?t="Client doesn't have permission to access the desired data.":s==="unavailable"&&(t="The service is unavailable");const n=new Error(s+" at "+e._path.toString()+": "+t);return n.code=s.toUpperCase(),n}const LR=new RegExp("^-?(0*)\\d{1,10}$"),UR=-2147483648,VR=2147483647,Rw=function(s){if(LR.test(s)){const e=Number(s);if(e>=UR&&e<=VR)return e}return null},Sc=function(s){try{s()}catch(e){setTimeout(()=>{const t=e.stack||"";throw sr("Exception was thrown by user callback.",t),e},Math.floor(0))}},FR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Vu=function(s,e){const t=setTimeout(s,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,nm(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(n=>this.appCheck=n)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)==null||t.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){sr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',sr(e)}}class sf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}sf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="5",vT="v",bT="s",_T="r",wT="f",NT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jT="ls",TT="p",bx="ac",ST="websocket",ET="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t,n,a,l=!1,u="",h=!1,g=!1,p=null){this.secure=t,this.namespace=n,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$o.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$o.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function $R(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function CT(s,e,t){we(typeof e=="string","typeof type must == string"),we(typeof t=="object","typeof params must == object");let n;if(e===ST)n=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(e===ET)n=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);$R(s)&&(t.ns=s.namespace);const a=[];return Mn(t,(l,u)=>{a.push(l+"="+u)}),n+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.counters_={}}incrementCounter(e,t=1){Di(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return KC(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp={},qp={};function j0(s){const e=s.toString();return Bp[e]||(Bp[e]=new zR),Bp[e]}function HR(s,e){const t=s.toString();return qp[t]||(qp[t]=e()),qp[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<n.length;++a)n[a]&&Sc(()=>{this.onMessage_(n[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="start",WR="close",YR="pLPCommand",KR="pRTLPCB",RT="id",IT="pw",DT="ser",QR="cb",XR="seg",JR="ts",ZR="d",eI="dframe",kT=1870,MT=30,tI=kT-MT,sI=25e3,nI=3e4;class rc{constructor(e,t,n,a,l,u,h){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=a,this.authToken=l,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_d(e),this.stats_=j0(t),this.urlFn=g=>(this.appCheckToken&&(g[bx]=this.appCheckToken),CT(t,ET,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new GR(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nI)),DR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new T0((...l)=>{const[u,h,g,p,y]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Iw)this.id=h,this.password=g;else if(u===WR)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,h]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const n={};n[Iw]="t",n[DT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[QR]=this.scriptTagHolder.uniqueCallbackIdentifier),n[vT]=N0,this.transportSessionId&&(n[bT]=this.transportSessionId),this.lastSessionId&&(n[jT]=this.lastSessionId),this.applicationId&&(n[TT]=this.applicationId),this.appCheckToken&&(n[bx]=this.appCheckToken),typeof location<"u"&&location.hostname&&NT.test(location.hostname)&&(n[_T]=wT);const a=this.urlFn(n);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){rc.forceAllow_=!0}static forceDisallow(){rc.forceDisallow_=!0}static isAvailable(){return rc.forceAllow_?!0:!rc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!MR()&&!OR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=un(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=tT(t),a=xT(n,tI);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={};n[eI]="t",n[RT]=e,n[IT]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=un(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class T0{constructor(e,t,n,a){this.onDisconnect=n,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=CR(),window[YR+this.uniqueCallbackIdentifier]=e,window[KR+this.uniqueCallbackIdentifier]=t,this.myIFrame=T0.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Dn("frame writing exception"),h.stack&&Dn(h.stack),Dn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Dn("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[RT]=this.myID,e[IT]=this.myPW,e[DT]=this.currentSerial;let t=this.urlFn(e),n="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+MT+n.length<=kT;){const u=this.pendingSegs.shift();n=n+"&"+XR+a+"="+u.seg+"&"+JR+a+"="+u.ts+"&"+ZR+a+"="+u.d,a++}return t=t+n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(n,Math.floor(sI)),l=()=>{clearTimeout(a),n()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const a=n.readyState;(!a||a==="loaded"||a==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=16384,iI=45e3;let gf=null;typeof MozWebSocket<"u"?gf=MozWebSocket:typeof WebSocket<"u"&&(gf=WebSocket);class si{constructor(e,t,n,a,l,u,h){this.connId=e,this.applicationId=n,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_d(this.connId),this.stats_=j0(t),this.connURL=si.connectionURL_(t,u,h,a,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,a,l){const u={};return u[vT]=N0,typeof location<"u"&&location.hostname&&NT.test(location.hostname)&&(u[_T]=wT),t&&(u[bT]=t),n&&(u[jT]=n),a&&(u[bx]=a),l&&(u[TT]=l),CT(e,ST,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$o.set("previous_websocket_failure",!0);try{let n;a4(),this.mySock=new gf(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const a=n.message||n.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const a=n.message||n.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){si.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&gf!==null&&!si.forceDisallow_}static previouslyFailed(){return $o.isInMemoryStorage||$o.get("previous_websocket_failure")===!0}markConnectionHealthy(){$o.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const n=Qu(t);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(we(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const n=this.extractFrameCount_(t);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const t=un(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=xT(t,rI);n.length>1&&this.sendString_(String(n.length));for(let a=0;a<n.length;a++)this.sendString_(n[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(iI))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}si.responsesRequiredToBeHealthy=2;si.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{static get ALL_TRANSPORTS(){return[rc,si]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=si&&si.isAvailable();let n=t&&!si.previouslyFailed();if(e.webSocketOnly&&(t||sr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[si];else{const a=this.transports_=[];for(const l of Zu.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);Zu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Zu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=6e4,oI=5e3,lI=10*1024,cI=100*1024,$p="t",Dw="d",uI="s",kw="r",dI="e",Mw="o",Ow="a",Pw="n",Lw="p",hI="h";class fI{constructor(e,t,n,a,l,u,h,g,p,y){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=g,this.onKill_=p,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_d("c:"+this.id+":"),this.transportManager_=new Zu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Vu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>cI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>lI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if($p in e){const t=e[$p];t===Ow?this.upgradeIfSecondaryHealthy_():t===kw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Mw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Su("t",e),n=Su("d",e);if(t==="c")this.onSecondaryControl_(n);else if(t==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Lw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ow,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Pw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Su("t",e),n=Su("d",e);t==="c"?this.onControl_(n):t==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Su($p,e);if(Dw in e){const n=e[Dw];if(t===hI){const a={...n};this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===Pw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===uI?this.onConnectionShutdown_(n):t===kw?this.onReset_(n):t===dI?vx("Server Error: "+n):t===Mw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),N0!==n&&sr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Vu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(aI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(oI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Lw,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($o.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{put(e,t,n,a){}merge(e,t,n,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.allowedEvents_=e,this.listeners_={},we(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let a=0;a<n.length;a++)n[a].callback.apply(n[a].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const a=this.getInitialEvent(e);a&&t.apply(n,a)}off(e,t,n){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!n||n===a[l].context)){a.splice(l,1);return}}validateEventType_(e){we(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends PT{static getInstance(){return new pf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!iT()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return we(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=32,Vw=768;class Gt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let n=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[n]=this.pieces_[a],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Vt(){return new Gt("")}function yt(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function so(s){return s.pieces_.length-s.pieceNum_}function us(s){let e=s.pieceNum_;return e<s.pieces_.length&&e++,new Gt(s.pieces_,e)}function S0(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function mI(s){let e="";for(let t=s.pieceNum_;t<s.pieces_.length;t++)s.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(s.pieces_[t])));return e||"/"}function ed(s,e=0){return s.pieces_.slice(s.pieceNum_+e)}function LT(s){if(s.pieceNum_>=s.pieces_.length)return null;const e=[];for(let t=s.pieceNum_;t<s.pieces_.length-1;t++)e.push(s.pieces_[t]);return new Gt(e,0)}function Os(s,e){const t=[];for(let n=s.pieceNum_;n<s.pieces_.length;n++)t.push(s.pieces_[n]);if(e instanceof Gt)for(let n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{const n=e.split("/");for(let a=0;a<n.length;a++)n[a].length>0&&t.push(n[a])}return new Gt(t,0)}function vt(s){return s.pieceNum_>=s.pieces_.length}function tr(s,e){const t=yt(s),n=yt(e);if(t===null)return e;if(t===n)return tr(us(s),us(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+s+")")}function gI(s,e){const t=ed(s,0),n=ed(e,0);for(let a=0;a<t.length&&a<n.length;a++){const l=il(t[a],n[a]);if(l!==0)return l}return t.length===n.length?0:t.length<n.length?-1:1}function E0(s,e){if(so(s)!==so(e))return!1;for(let t=s.pieceNum_,n=e.pieceNum_;t<=s.pieces_.length;t++,n++)if(s.pieces_[t]!==e.pieces_[n])return!1;return!0}function Fr(s,e){let t=s.pieceNum_,n=e.pieceNum_;if(so(s)>so(e))return!1;for(;t<s.pieces_.length;){if(s.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0}class pI{constructor(e,t){this.errorPrefix_=t,this.parts_=ed(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=tm(this.parts_[n]);UT(this)}}function xI(s,e){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(e),s.byteLength_+=tm(e),UT(s)}function yI(s){const e=s.parts_.pop();s.byteLength_-=tm(e),s.parts_.length>0&&(s.byteLength_-=1)}function UT(s){if(s.byteLength_>Vw)throw new Error(s.errorPrefix_+"has a key path longer than "+Vw+" bytes ("+s.byteLength_+").");if(s.parts_.length>Uw)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Uw+") or object contains a cycle "+Fo(s))}function Fo(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends PT{static getInstance(){return new A0}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(e){return we(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=1e3,vI=60*5*1e3,Fw=30*1e3,bI=1.3,_I=3e4,wI="server_kill",Bw=3;class la extends OT{constructor(e,t,n,a,l,u,h,g){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=g,this.id=la.nextPersistentConnectionId_++,this.log_=_d("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Eu,this.maxReconnectDelay_=vI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");A0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&pf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(un(l)),we(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),n&&(this.requestCBHash_[a]=n)}get(e){this.initConnection_();const t=new yd,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,n,a){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),we(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),we(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const h={onComplete:a,hashFn:t,query:e,tag:n};this.listens.get(u).set(l,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+n+" for "+a);const l={p:n},u="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,h=>{const g=h.d,p=h.s;la.warnOnListenWarnings_(g,t),(this.listens.get(n)&&this.listens.get(n).get(a))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(n,a),e.onComplete&&e.onComplete(p,g))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Di(e,"w")){const n=cc(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();sr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||f4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Fw)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=h4(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(t,n,a=>{const l=a.s,u=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+a),we(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,a)&&this.connected_&&this.sendUnlisten_(n,a,e._queryObject,t)}sendUnlisten_(e,t,n,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},u="n";a&&(l.q=n,l.t=a),this.sendRequest(u,l)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,a){const l={p:t,d:n};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(e,t,n,a){this.putInternal("p",e,t,n,a)}merge(e,t,n,a){this.putInternal("m",e,t,n,a)}putInternal(e,t,n,a,l){this.initConnection_();const u={p:t,d:n};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:a}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,n=>{if(n.s!=="ok"){const l=n.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+un(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):vx("Unrecognized action received from server: "+un(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){we(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Eu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Eu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>_I&&(this.reconnectDelay_=Eu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bI)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+la.nextConnectionId_++,l=this.lastSessionId;let u=!1,h=null;const g=function(){h?h.close():(u=!0,n())},p=function(w){we(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(w)};this.realtime_={close:g,sendRequest:p};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[w,v]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);u?Dn("getToken() completed but was canceled"):(Dn("getToken() completed. Creating connection."),this.authToken_=w&&w.accessToken,this.appCheckToken_=v&&v.token,h=new fI(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,A=>{sr(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(wI)},l))}catch(w){this.log_("Failed to get token: "+w),u||(this.repoInfo_.nodeAdmin&&sr(w),g())}}}interrupt(e){Dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],pw(this.interruptReasons_)&&(this.reconnectDelay_=Eu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;t?n=t.map(l=>w0(l)).join("$"):n="default";const a=this.removeListen_(e,n);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const n=new Gt(e).toString();let a;if(this.listens.has(n)){const l=this.listens.get(n);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(n)}else a=void 0;return a}onAuthRevoked_(e,t){Dn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Bw&&(this.reconnectDelay_=Fw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Dn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Bw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+fT.replace(/\./g,"-")]=1,iT()?e["framework.cordova"]=1:i4()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=pf.getInstance().currentlyOnline();return pw(this.interruptReasons_)&&e}}la.nextPersistentConnectionId_=0;la.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new bt(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new bt(eo,e),a=new bt(eo,t);return this.compare(n,a)!==0}minPost(){return bt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh;class VT extends im{static get __EMPTY_NODE(){return qh}static set __EMPTY_NODE(e){qh=e}compare(e,t){return il(e.name,t.name)}isDefinedOn(e){throw Tc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return bt.MIN}maxPost(){return new bt(to,qh)}makePost(e,t){return we(typeof e=="string","KeyIndex indexValue must always be a string."),new bt(e,qh)}toString(){return".key"}}const Ga=new VT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h=class{constructor(e,t,n,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?n(e.key,t):1,a&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},_r=class Ru{constructor(e,t,n,a,l){this.key=e,this.value=t,this.color=n??Ru.RED,this.left=a??ji.EMPTY_NODE,this.right=l??ji.EMPTY_NODE}copy(e,t,n,a,l){return new Ru(e??this.key,t??this.value,n??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let a=this;const l=n(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,n),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,n)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ji.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,a;if(n=this,t(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),t(e,n.key)===0){if(n.right.isEmpty())return ji.EMPTY_NODE;a=n.right.min_(),n=n.copy(a.key,a.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ru.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ru.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};_r.RED=!0;_r.BLACK=!1;class NI{copy(e,t,n,a,l){return this}insert(e,t,n){return new _r(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ji=class nf{constructor(e,t=nf.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new nf(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,_r.BLACK,null,null))}remove(e){return new nf(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_r.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,a=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return a?a.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(a=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $h(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new $h(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new $h(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new $h(this.root_,null,this.comparator_,!0,e)}};ji.EMPTY_NODE=new NI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(s,e){return il(s.name,e.name)}function C0(s,e){return il(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _x;function TI(s){_x=s}const FT=function(s){return typeof s=="number"?"number:"+yT(s):"string:"+s},BT=function(s){if(s.isLeafNode()){const e=s.val();we(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Di(e,".sv"),"Priority must be a string or number.")}else we(s===_x||s.isEmpty(),"priority of unexpected type.");we(s===_x||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qw;class wn{static set __childrenNodeConstructor(e){qw=e}static get __childrenNodeConstructor(){return qw}constructor(e,t=wn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,we(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),BT(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new wn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:wn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return vt(e)?this:yt(e)===".priority"?this.priorityNode_:wn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:wn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=yt(e);return n===null?t:t.isEmpty()&&n!==".priority"?this:(we(n!==".priority"||so(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,wn.__childrenNodeConstructor.EMPTY_NODE.updateChild(us(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+FT(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=yT(this.value_):e+=this.value_,this.lazyHash_=pT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===wn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof wn.__childrenNodeConstructor?-1:(we(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,a=wn.VALUE_TYPE_ORDER.indexOf(t),l=wn.VALUE_TYPE_ORDER.indexOf(n);return we(a>=0,"Unknown leaf type: "+t),we(l>=0,"Unknown leaf type: "+n),a===l?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}wn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qT,$T;function SI(s){qT=s}function EI(s){$T=s}class AI extends im{compare(e,t){const n=e.node.getPriority(),a=t.node.getPriority(),l=n.compareTo(a);return l===0?il(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return bt.MIN}maxPost(){return new bt(to,new wn("[PRIORITY-POST]",$T))}makePost(e,t){const n=qT(e);return new bt(t,new wn("[PRIORITY-POST]",n))}toString(){return".priority"}}const As=new AI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=Math.log(2);class RI{constructor(e){const t=l=>parseInt(Math.log(l)/CI,10),n=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=n(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xf=function(s,e,t,n){s.sort(e);const a=function(g,p){const y=p-g;let w,v;if(y===0)return null;if(y===1)return w=s[g],v=t?t(w):w,new _r(v,w.node,_r.BLACK,null,null);{const A=parseInt(y/2,10)+g,R=a(g,A),z=a(A+1,p);return w=s[A],v=t?t(w):w,new _r(v,w.node,_r.BLACK,R,z)}},l=function(g){let p=null,y=null,w=s.length;const v=function(R,z){const q=w-R,Q=w;w-=R;const pe=a(q+1,Q),ee=s[q],fe=t?t(ee):ee;A(new _r(fe,ee.node,z,null,pe))},A=function(R){p?(p.left=R,p=R):(y=R,p=R)};for(let R=0;R<g.count;++R){const z=g.nextBitIsOne(),q=Math.pow(2,g.count-(R+1));z?v(q,_r.BLACK):(v(q,_r.BLACK),v(q,_r.RED))}return y},u=new RI(s.length),h=l(u);return new ji(n||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zp;const Bl={};class aa{static get Default(){return we(Bl&&As,"ChildrenNode.ts has not been loaded"),zp=zp||new aa({".priority":Bl},{".priority":As}),zp}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=cc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ji?t:null}hasIndex(e){return Di(this.indexSet_,e.toString())}addIndex(e,t){we(e!==Ga,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let a=!1;const l=t.getIterator(bt.Wrap);let u=l.getNext();for(;u;)a=a||e.isDefinedOn(u.node),n.push(u),u=l.getNext();let h;a?h=xf(n,e.getCompare()):h=Bl;const g=e.toString(),p={...this.indexSet_};p[g]=e;const y={...this.indexes_};return y[g]=h,new aa(y,p)}addToIndexes(e,t){const n=ff(this.indexes_,(a,l)=>{const u=cc(this.indexSet_,l);if(we(u,"Missing index implementation for "+l),a===Bl)if(u.isDefinedOn(e.node)){const h=[],g=t.getIterator(bt.Wrap);let p=g.getNext();for(;p;)p.name!==e.name&&h.push(p),p=g.getNext();return h.push(e),xf(h,u.getCompare())}else return Bl;else{const h=t.get(e.name);let g=a;return h&&(g=g.remove(new bt(e.name,h))),g.insert(e,e.node)}});return new aa(n,this.indexSet_)}removeFromIndexes(e,t){const n=ff(this.indexes_,a=>{if(a===Bl)return a;{const l=t.get(e.name);return l?a.remove(new bt(e.name,l)):a}});return new aa(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au;class Ze{static get EMPTY_NODE(){return Au||(Au=new Ze(new ji(C0),null,aa.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&BT(this.priorityNode_),this.children_.isEmpty()&&we(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Au}updatePriority(e){return this.children_.isEmpty()?this:new Ze(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Au:t}}getChild(e){const t=yt(e);return t===null?this:this.getImmediateChild(t).getChild(us(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(we(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const n=new bt(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(n,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(n,this.children_));const u=a.isEmpty()?Au:this.priorityNode_;return new Ze(a,u,l)}}updateChild(e,t){const n=yt(e);if(n===null)return t;{we(yt(e)!==".priority"||so(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(n).updateChild(us(e),t);return this.updateImmediateChild(n,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,a=0,l=!0;if(this.forEachChild(As,(u,h)=>{t[u]=h.val(e),n++,l&&Ze.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):l=!1}),!e&&l&&a<2*n){const u=[];for(const h in t)u[h]=t[h];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+FT(this.getPriority().val())+":"),this.forEachChild(As,(t,n)=>{const a=n.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":pT(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const a=this.resolveIndex_(n);if(a){const l=a.getPredecessorKey(new bt(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const n=t.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new bt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const n=t.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new bt(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,bt.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,bt.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wd?-1:0}withIndex(e){if(e===Ga||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ze(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ga||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const n=this.getIterator(As),a=t.getIterator(As);let l=n.getNext(),u=a.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=n.getNext(),u=a.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===Ga?null:this.indexMap_.get(e.toString())}}Ze.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class II extends Ze{constructor(){super(new ji(C0),Ze.EMPTY_NODE,aa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ze.EMPTY_NODE}isEmpty(){return!1}}const wd=new II;Object.defineProperties(bt,{MIN:{value:new bt(eo,Ze.EMPTY_NODE)},MAX:{value:new bt(to,wd)}});VT.__EMPTY_NODE=Ze.EMPTY_NODE;wn.__childrenNodeConstructor=Ze;TI(wd);EI(wd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=!0;function cn(s,e=null){if(s===null)return Ze.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(e=s[".priority"]),we(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const t=s;return new wn(t,cn(e))}if(!(s instanceof Array)&&DI){const t=[];let n=!1;if(Mn(s,(u,h)=>{if(u.substring(0,1)!=="."){const g=cn(h);g.isEmpty()||(n=n||!g.getPriority().isEmpty(),t.push(new bt(u,g)))}}),t.length===0)return Ze.EMPTY_NODE;const l=xf(t,jI,u=>u.name,C0);if(n){const u=xf(t,As.getCompare());return new Ze(l,cn(e),new aa({".priority":u},{".priority":As}))}else return new Ze(l,cn(e),aa.Default)}else{let t=Ze.EMPTY_NODE;return Mn(s,(n,a)=>{if(Di(s,n)&&n.substring(0,1)!=="."){const l=cn(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(n,l))}}),t.updatePriority(cn(e))}}SI(cn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0 extends im{constructor(e){super(),this.indexPath_=e,we(!vt(e)&&yt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),a=this.extractChild(t.node),l=n.compareTo(a);return l===0?il(e.name,t.name):l}makePost(e,t){const n=cn(e),a=Ze.EMPTY_NODE.updateChild(this.indexPath_,n);return new bt(t,a)}maxPost(){const e=Ze.EMPTY_NODE.updateChild(this.indexPath_,wd);return new bt(to,e)}toString(){return ed(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI extends im{compare(e,t){const n=e.node.compareTo(t.node);return n===0?il(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return bt.MIN}maxPost(){return bt.MAX}makePost(e,t){const n=cn(e);return new bt(t,n)}toString(){return".value"}}const zT=new kI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(s){return{type:"value",snapshotNode:s}}function uc(s,e){return{type:"child_added",snapshotNode:e,childName:s}}function td(s,e){return{type:"child_removed",snapshotNode:e,childName:s}}function sd(s,e,t){return{type:"child_changed",snapshotNode:e,childName:s,oldSnap:t}}function MI(s,e){return{type:"child_moved",snapshotNode:e,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this.index_=e}updateChild(e,t,n,a,l,u){we(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(a).equals(n.getChild(a))&&h.isEmpty()===n.isEmpty()||(u!=null&&(n.isEmpty()?e.hasChild(t)?u.trackChildChange(td(t,h)):we(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(uc(t,n)):u.trackChildChange(sd(t,n,h))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return n!=null&&(e.isLeafNode()||e.forEachChild(As,(a,l)=>{t.hasChild(a)||n.trackChildChange(td(a,l))}),t.isLeafNode()||t.forEachChild(As,(a,l)=>{if(e.hasChild(a)){const u=e.getImmediateChild(a);u.equals(l)||n.trackChildChange(sd(a,l,u))}else n.trackChildChange(uc(a,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ze.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.indexedFilter_=new I0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=nd.getStartPost_(e),this.endPost_=nd.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,a,l,u){return this.matches(new bt(t,n))||(n=Ze.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,a,l,u)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Ze.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(Ze.EMPTY_NODE);const l=this;return t.forEachChild(As,(u,h)=>{l.matches(new bt(u,h))||(a=a.updateImmediateChild(u,Ze.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=t=>{const n=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new nd(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,a,l,u){return this.rangedFilter_.matches(new bt(t,n))||(n=Ze.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,a,l,u):this.fullLimitUpdateChild_(e,t,n,l,u)}updateFullNode(e,t,n){let a;if(t.isLeafNode()||t.isEmpty())a=Ze.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=Ze.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const h=l.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))a=a.updateImmediateChild(h.name,h.node),u++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(Ze.EMPTY_NODE);let l;this.reverse_?l=a.getReverseIterator(this.index_):l=a.getIterator(this.index_);let u=0;for(;l.hasNext();){const h=l.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:a=a.updateImmediateChild(h.name,Ze.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,a,l){let u;if(this.reverse_){const w=this.index_.getCompare();u=(v,A)=>w(A,v)}else u=this.index_.getCompare();const h=e;we(h.numChildren()===this.limit_,"");const g=new bt(t,n),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),y=this.rangedFilter_.matches(g);if(h.hasChild(t)){const w=h.getImmediateChild(t);let v=a.getChildAfterChild(this.index_,p,this.reverse_);for(;v!=null&&(v.name===t||h.hasChild(v.name));)v=a.getChildAfterChild(this.index_,v,this.reverse_);const A=v==null?1:u(v,g);if(y&&!n.isEmpty()&&A>=0)return l!=null&&l.trackChildChange(sd(t,n,w)),h.updateImmediateChild(t,n);{l!=null&&l.trackChildChange(td(t,w));const z=h.updateImmediateChild(t,Ze.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(l!=null&&l.trackChildChange(uc(v.name,v.node)),z.updateImmediateChild(v.name,v.node)):z}}else return n.isEmpty()?e:y&&u(p,g)>=0?(l!=null&&(l.trackChildChange(td(p.name,p.node)),l.trackChildChange(uc(t,n))),h.updateImmediateChild(t,n).updateImmediateChild(p.name,Ze.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=As}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return we(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return we(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:eo}hasEnd(){return this.endSet_}getIndexEndValue(){return we(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return we(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:to}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return we(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===As}copy(){const e=new am;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function PI(s){return s.loadsAllData()?new I0(s.getIndex()):s.hasLimit()?new OI(s):new nd(s)}function LI(s,e){const t=s.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function UI(s,e,t){const n=s.copy();return n.startSet_=!0,e===void 0&&(e=null),n.indexStartValue_=e,t!=null?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n}function wx(s,e,t){const n=s.copy();return n.endSet_=!0,e===void 0&&(e=null),n.indexEndValue_=e,t!==void 0?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n}function VI(s,e,t){let n;return s.index_===Ga||t?n=wx(s,e,t):n=wx(s,e,eo),n.endBeforeSet_=!0,n}function FI(s,e){const t=s.copy();return t.index_=e,t}function $w(s){const e={};if(s.isDefault())return e;let t;if(s.index_===As?t="$priority":s.index_===zT?t="$value":s.index_===Ga?t="$key":(we(s.index_ instanceof R0,"Unrecognized index type!"),t=s.index_.toString()),e.orderBy=un(t),s.startSet_){const n=s.startAfterSet_?"startAfter":"startAt";e[n]=un(s.indexStartValue_),s.startNameSet_&&(e[n]+=","+un(s.indexStartName_))}if(s.endSet_){const n=s.endBeforeSet_?"endBefore":"endAt";e[n]=un(s.indexEndValue_),s.endNameSet_&&(e[n]+=","+un(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?e.limitToFirst=s.limit_:e.limitToLast=s.limit_),e}function zw(s){const e={};if(s.startSet_&&(e.sp=s.indexStartValue_,s.startNameSet_&&(e.sn=s.indexStartName_),e.sin=!s.startAfterSet_),s.endSet_&&(e.ep=s.indexEndValue_,s.endNameSet_&&(e.en=s.indexEndName_),e.ein=!s.endBeforeSet_),s.limitSet_){e.l=s.limit_;let t=s.viewFrom_;t===""&&(s.isViewFromLeft()?t="l":t="r"),e.vf=t}return s.index_!==As&&(e.i=s.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends OT{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(we(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=a,this.log_=_d("p:rest:"),this.listens_={}}listen(e,t,n,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=yf.getListenId_(e,n),h={};this.listens_[u]=h;const g=$w(e._queryParams);this.restRequest_(l+".json",g,(p,y)=>{let w=y;if(p===404&&(w=null,p=null),p===null&&this.onDataUpdate_(l,w,!1,n),cc(this.listens_,u)===h){let v;p?p===401?v="permission_denied":v="rest_error:"+p:v="ok",a(v,null)}})}unlisten(e,t){const n=yf.getListenId_(e,t);delete this.listens_[n]}get(e){const t=$w(e._queryParams),n=e._path.toString(),a=new yd;return this.restRequest_(n+".json",t,(l,u)=>{let h=u;l===404&&(h=null,l=null),l===null?(this.onDataUpdate_(n,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+m4(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(n&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=Qu(h.responseText)}catch{sr("Failed to parse JSON response for "+u+": "+h.responseText)}n(null,g)}else h.status!==401&&h.status!==404&&sr("Got unsuccessful REST response for "+u+" Status: "+h.status),n(h.status);n=null}},h.open("GET",u,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.rootNode_=Ze.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(){return{value:null,children:new Map}}function GT(s,e,t){if(vt(e))s.value=t,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(e,t);else{const n=yt(e);s.children.has(n)||s.children.set(n,vf());const a=s.children.get(n);e=us(e),GT(a,e,t)}}function Nx(s,e,t){s.value!==null?t(e,s.value):qI(s,(n,a)=>{const l=new Gt(e.toString()+"/"+n);Nx(a,l,t)})}function qI(s,e){s.children.forEach((t,n)=>{e(n,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&Mn(this.last_,(n,a)=>{t[n]=t[n]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=10*1e3,zI=30*1e3,HI=5*60*1e3;class GI{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new $I(e);const n=Hw+(zI-Hw)*Math.random();Vu(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Mn(e,(a,l)=>{l>0&&Di(this.statsToReport_,a)&&(t[a]=l,n=!0)}),n&&this.server_.reportStats(t),Vu(this.reportStats_.bind(this),Math.floor(Math.random()*2*HI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ni||(ni={}));function D0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function k0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function M0(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ni.ACK_USER_WRITE,this.source=D0()}operationForChild(e){if(vt(this.path)){if(this.affectedTree.value!=null)return we(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Gt(e));return new bf(Vt(),t,this.revert)}}else return we(yt(this.path)===e,"operationForChild called for unrelated child."),new bf(us(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t){this.source=e,this.path=t,this.type=ni.LISTEN_COMPLETE}operationForChild(e){return vt(this.path)?new rd(this.source,Vt()):new rd(this.source,us(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ni.OVERWRITE}operationForChild(e){return vt(this.path)?new Xo(this.source,Vt(),this.snap.getImmediateChild(e)):new Xo(this.source,us(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ni.MERGE}operationForChild(e){if(vt(this.path)){const t=this.children.subtree(new Gt(e));return t.isEmpty()?null:t.value?new Xo(this.source,Vt(),t.value):new dc(this.source,Vt(),t)}else return we(yt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new dc(this.source,us(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vt(e))return this.isFullyInitialized()&&!this.filtered_;const t=yt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function YI(s,e,t,n){const a=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&s.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(MI(u.childName,u.snapshotNode))}),Cu(s,a,"child_removed",e,n,t),Cu(s,a,"child_added",e,n,t),Cu(s,a,"child_moved",l,n,t),Cu(s,a,"child_changed",e,n,t),Cu(s,a,"value",e,n,t),a}function Cu(s,e,t,n,a,l){const u=n.filter(h=>h.type===t);u.sort((h,g)=>QI(s,h,g)),u.forEach(h=>{const g=KI(s,h,l);a.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(g,s.query_))})})}function KI(s,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,s.index_)),e}function QI(s,e,t){if(e.childName==null||t.childName==null)throw Tc("Should only compare child_ events.");const n=new bt(e.childName,e.snapshotNode),a=new bt(t.childName,t.snapshotNode);return s.index_.compare(n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(s,e){return{eventCache:s,serverCache:e}}function Fu(s,e,t,n){return om(new no(e,t,n),s.serverCache)}function WT(s,e,t,n){return om(s.eventCache,new no(e,t,n))}function _f(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function Jo(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hp;const XI=()=>(Hp||(Hp=new ji(kR)),Hp);class cs{static fromObject(e){let t=new cs(null);return Mn(e,(n,a)=>{t=t.set(new Gt(n),a)}),t}constructor(e,t=XI()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Vt(),value:this.value};if(vt(e))return null;{const n=yt(e),a=this.children.get(n);if(a!==null){const l=a.findRootMostMatchingPathAndValue(us(e),t);return l!=null?{path:Os(new Gt(n),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(vt(e))return this;{const t=yt(e),n=this.children.get(t);return n!==null?n.subtree(us(e)):new cs(null)}}set(e,t){if(vt(e))return new cs(t,this.children);{const n=yt(e),l=(this.children.get(n)||new cs(null)).set(us(e),t),u=this.children.insert(n,l);return new cs(this.value,u)}}remove(e){if(vt(e))return this.children.isEmpty()?new cs(null):new cs(null,this.children);{const t=yt(e),n=this.children.get(t);if(n){const a=n.remove(us(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new cs(null):new cs(this.value,l)}else return this}}get(e){if(vt(e))return this.value;{const t=yt(e),n=this.children.get(t);return n?n.get(us(e)):null}}setTree(e,t){if(vt(e))return t;{const n=yt(e),l=(this.children.get(n)||new cs(null)).setTree(us(e),t);let u;return l.isEmpty()?u=this.children.remove(n):u=this.children.insert(n,l),new cs(this.value,u)}}fold(e){return this.fold_(Vt(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((a,l)=>{n[a]=l.fold_(Os(e,a),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Vt(),t)}findOnPath_(e,t,n){const a=this.value?n(t,this.value):!1;if(a)return a;if(vt(e))return null;{const l=yt(e),u=this.children.get(l);return u?u.findOnPath_(us(e),Os(t,l),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Vt(),t)}foreachOnPath_(e,t,n){if(vt(e))return this;{this.value&&n(t,this.value);const a=yt(e),l=this.children.get(a);return l?l.foreachOnPath_(us(e),Os(t,a),n):new cs(null)}}foreach(e){this.foreach_(Vt(),e)}foreach_(e,t){this.children.inorderTraversal((n,a)=>{a.foreach_(Os(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.writeTree_=e}static empty(){return new ii(new cs(null))}}function Bu(s,e,t){if(vt(e))return new ii(new cs(t));{const n=s.writeTree_.findRootMostValueAndPath(e);if(n!=null){const a=n.path;let l=n.value;const u=tr(a,e);return l=l.updateChild(u,t),new ii(s.writeTree_.set(a,l))}else{const a=new cs(t),l=s.writeTree_.setTree(e,a);return new ii(l)}}}function jx(s,e,t){let n=s;return Mn(t,(a,l)=>{n=Bu(n,Os(e,a),l)}),n}function Gw(s,e){if(vt(e))return ii.empty();{const t=s.writeTree_.setTree(e,new cs(null));return new ii(t)}}function Tx(s,e){return al(s,e)!=null}function al(s,e){const t=s.writeTree_.findRootMostValueAndPath(e);return t!=null?s.writeTree_.get(t.path).getChild(tr(t.path,e)):null}function Ww(s){const e=[],t=s.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(As,(n,a)=>{e.push(new bt(n,a))}):s.writeTree_.children.inorderTraversal((n,a)=>{a.value!=null&&e.push(new bt(n,a.value))}),e}function Wa(s,e){if(vt(e))return s;{const t=al(s,e);return t!=null?new ii(new cs(t)):new ii(s.writeTree_.subtree(e))}}function Sx(s){return s.writeTree_.isEmpty()}function hc(s,e){return YT(Vt(),s.writeTree_,e)}function YT(s,e,t){if(e.value!=null)return t.updateChild(s,e.value);{let n=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(we(l.value!==null,"Priority writes must always be leaf nodes"),n=l.value):t=YT(Os(s,a),l,t)}),!t.getChild(s).isEmpty()&&n!==null&&(t=t.updateChild(Os(s,".priority"),n)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(s,e){return JT(e,s)}function JI(s,e,t,n,a){we(n>s.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),s.allWrites.push({path:e,snap:t,writeId:n,visible:a}),a&&(s.visibleWrites=Bu(s.visibleWrites,e,t)),s.lastWriteId=n}function ZI(s,e,t,n){we(n>s.lastWriteId,"Stacking an older merge on top of newer ones"),s.allWrites.push({path:e,children:t,writeId:n,visible:!0}),s.visibleWrites=jx(s.visibleWrites,e,t),s.lastWriteId=n}function eD(s,e){for(let t=0;t<s.allWrites.length;t++){const n=s.allWrites[t];if(n.writeId===e)return n}return null}function tD(s,e){const t=s.allWrites.findIndex(h=>h.writeId===e);we(t>=0,"removeWrite called with nonexistent writeId.");const n=s.allWrites[t];s.allWrites.splice(t,1);let a=n.visible,l=!1,u=s.allWrites.length-1;for(;a&&u>=0;){const h=s.allWrites[u];h.visible&&(u>=t&&sD(h,n.path)?a=!1:Fr(n.path,h.path)&&(l=!0)),u--}if(a){if(l)return nD(s),!0;if(n.snap)s.visibleWrites=Gw(s.visibleWrites,n.path);else{const h=n.children;Mn(h,g=>{s.visibleWrites=Gw(s.visibleWrites,Os(n.path,g))})}return!0}else return!1}function sD(s,e){if(s.snap)return Fr(s.path,e);for(const t in s.children)if(s.children.hasOwnProperty(t)&&Fr(Os(s.path,t),e))return!0;return!1}function nD(s){s.visibleWrites=KT(s.allWrites,rD,Vt()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function rD(s){return s.visible}function KT(s,e,t){let n=ii.empty();for(let a=0;a<s.length;++a){const l=s[a];if(e(l)){const u=l.path;let h;if(l.snap)Fr(t,u)?(h=tr(t,u),n=Bu(n,h,l.snap)):Fr(u,t)&&(h=tr(u,t),n=Bu(n,Vt(),l.snap.getChild(h)));else if(l.children){if(Fr(t,u))h=tr(t,u),n=jx(n,h,l.children);else if(Fr(u,t))if(h=tr(u,t),vt(h))n=jx(n,Vt(),l.children);else{const g=cc(l.children,yt(h));if(g){const p=g.getChild(us(h));n=Bu(n,Vt(),p)}}}else throw Tc("WriteRecord should have .snap or .children")}}return n}function QT(s,e,t,n,a){if(!n&&!a){const l=al(s.visibleWrites,e);if(l!=null)return l;{const u=Wa(s.visibleWrites,e);if(Sx(u))return t;if(t==null&&!Tx(u,Vt()))return null;{const h=t||Ze.EMPTY_NODE;return hc(u,h)}}}else{const l=Wa(s.visibleWrites,e);if(!a&&Sx(l))return t;if(!a&&t==null&&!Tx(l,Vt()))return null;{const u=function(p){return(p.visible||a)&&(!n||!~n.indexOf(p.writeId))&&(Fr(p.path,e)||Fr(e,p.path))},h=KT(s.allWrites,u,e),g=t||Ze.EMPTY_NODE;return hc(h,g)}}}function iD(s,e,t){let n=Ze.EMPTY_NODE;const a=al(s.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(As,(l,u)=>{n=n.updateImmediateChild(l,u)}),n;if(t){const l=Wa(s.visibleWrites,e);return t.forEachChild(As,(u,h)=>{const g=hc(Wa(l,new Gt(u)),h);n=n.updateImmediateChild(u,g)}),Ww(l).forEach(u=>{n=n.updateImmediateChild(u.name,u.node)}),n}else{const l=Wa(s.visibleWrites,e);return Ww(l).forEach(u=>{n=n.updateImmediateChild(u.name,u.node)}),n}}function aD(s,e,t,n,a){we(n||a,"Either existingEventSnap or existingServerSnap must exist");const l=Os(e,t);if(Tx(s.visibleWrites,l))return null;{const u=Wa(s.visibleWrites,l);return Sx(u)?a.getChild(t):hc(u,a.getChild(t))}}function oD(s,e,t,n){const a=Os(e,t),l=al(s.visibleWrites,a);if(l!=null)return l;if(n.isCompleteForChild(t)){const u=Wa(s.visibleWrites,a);return hc(u,n.getNode().getImmediateChild(t))}else return null}function lD(s,e){return al(s.visibleWrites,e)}function cD(s,e,t,n,a,l,u){let h;const g=Wa(s.visibleWrites,e),p=al(g,Vt());if(p!=null)h=p;else if(t!=null)h=hc(g,t);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const y=[],w=u.getCompare(),v=l?h.getReverseIteratorFrom(n,u):h.getIteratorFrom(n,u);let A=v.getNext();for(;A&&y.length<a;)w(A,n)!==0&&y.push(A),A=v.getNext();return y}else return[]}function uD(){return{visibleWrites:ii.empty(),allWrites:[],lastWriteId:-1}}function wf(s,e,t,n){return QT(s.writeTree,s.treePath,e,t,n)}function O0(s,e){return iD(s.writeTree,s.treePath,e)}function Yw(s,e,t,n){return aD(s.writeTree,s.treePath,e,t,n)}function Nf(s,e){return lD(s.writeTree,Os(s.treePath,e))}function dD(s,e,t,n,a,l){return cD(s.writeTree,s.treePath,e,t,n,a,l)}function P0(s,e,t){return oD(s.writeTree,s.treePath,e,t)}function XT(s,e){return JT(Os(s.treePath,e),s.writeTree)}function JT(s,e){return{treePath:s,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;we(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),we(n!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(n);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(n,sd(n,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(n);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(n,td(n,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(n,uc(n,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(n,sd(n,e.snapshotNode,a.oldSnap));else throw Tc("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}}const ZT=new fD;class L0{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new no(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return P0(this.writes_,e,n)}}getChildAfterChild(e,t,n){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Jo(this.viewCache_),l=dD(this.writes_,a,t,1,n,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(s){return{filter:s}}function gD(s,e){we(e.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),we(e.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function pD(s,e,t,n,a){const l=new hD;let u,h;if(t.type===ni.OVERWRITE){const p=t;p.source.fromUser?u=Ex(s,e,p.path,p.snap,n,a,l):(we(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!vt(p.path),u=jf(s,e,p.path,p.snap,n,a,h,l))}else if(t.type===ni.MERGE){const p=t;p.source.fromUser?u=yD(s,e,p.path,p.children,n,a,l):(we(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),u=Ax(s,e,p.path,p.children,n,a,h,l))}else if(t.type===ni.ACK_USER_WRITE){const p=t;p.revert?u=_D(s,e,p.path,n,a,l):u=vD(s,e,p.path,p.affectedTree,n,a,l)}else if(t.type===ni.LISTEN_COMPLETE)u=bD(s,e,t.path,n,l);else throw Tc("Unknown operation type: "+t.type);const g=l.getChanges();return xD(e,u,g),{viewCache:u,changes:g}}function xD(s,e,t){const n=e.eventCache;if(n.isFullyInitialized()){const a=n.getNode().isLeafNode()||n.getNode().isEmpty(),l=_f(s);(t.length>0||!s.eventCache.isFullyInitialized()||a&&!n.getNode().equals(l)||!n.getNode().getPriority().equals(l.getPriority()))&&t.push(HT(_f(e)))}}function eS(s,e,t,n,a,l){const u=e.eventCache;if(Nf(n,t)!=null)return e;{let h,g;if(vt(t))if(we(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Jo(e),y=p instanceof Ze?p:Ze.EMPTY_NODE,w=O0(n,y);h=s.filter.updateFullNode(e.eventCache.getNode(),w,l)}else{const p=wf(n,Jo(e));h=s.filter.updateFullNode(e.eventCache.getNode(),p,l)}else{const p=yt(t);if(p===".priority"){we(so(t)===1,"Can't have a priority with additional path components");const y=u.getNode();g=e.serverCache.getNode();const w=Yw(n,t,y,g);w!=null?h=s.filter.updatePriority(y,w):h=u.getNode()}else{const y=us(t);let w;if(u.isCompleteForChild(p)){g=e.serverCache.getNode();const v=Yw(n,t,u.getNode(),g);v!=null?w=u.getNode().getImmediateChild(p).updateChild(y,v):w=u.getNode().getImmediateChild(p)}else w=P0(n,p,e.serverCache);w!=null?h=s.filter.updateChild(u.getNode(),p,w,y,a,l):h=u.getNode()}}return Fu(e,h,u.isFullyInitialized()||vt(t),s.filter.filtersNodes())}}function jf(s,e,t,n,a,l,u,h){const g=e.serverCache;let p;const y=u?s.filter:s.filter.getIndexedFilter();if(vt(t))p=y.updateFullNode(g.getNode(),n,null);else if(y.filtersNodes()&&!g.isFiltered()){const A=g.getNode().updateChild(t,n);p=y.updateFullNode(g.getNode(),A,null)}else{const A=yt(t);if(!g.isCompleteForPath(t)&&so(t)>1)return e;const R=us(t),q=g.getNode().getImmediateChild(A).updateChild(R,n);A===".priority"?p=y.updatePriority(g.getNode(),q):p=y.updateChild(g.getNode(),A,q,R,ZT,null)}const w=WT(e,p,g.isFullyInitialized()||vt(t),y.filtersNodes()),v=new L0(a,w,l);return eS(s,w,t,a,v,h)}function Ex(s,e,t,n,a,l,u){const h=e.eventCache;let g,p;const y=new L0(a,e,l);if(vt(t))p=s.filter.updateFullNode(e.eventCache.getNode(),n,u),g=Fu(e,p,!0,s.filter.filtersNodes());else{const w=yt(t);if(w===".priority")p=s.filter.updatePriority(e.eventCache.getNode(),n),g=Fu(e,p,h.isFullyInitialized(),h.isFiltered());else{const v=us(t),A=h.getNode().getImmediateChild(w);let R;if(vt(v))R=n;else{const z=y.getCompleteChild(w);z!=null?S0(v)===".priority"&&z.getChild(LT(v)).isEmpty()?R=z:R=z.updateChild(v,n):R=Ze.EMPTY_NODE}if(A.equals(R))g=e;else{const z=s.filter.updateChild(h.getNode(),w,R,v,y,u);g=Fu(e,z,h.isFullyInitialized(),s.filter.filtersNodes())}}}return g}function Kw(s,e){return s.eventCache.isCompleteForChild(e)}function yD(s,e,t,n,a,l,u){let h=e;return n.foreach((g,p)=>{const y=Os(t,g);Kw(e,yt(y))&&(h=Ex(s,h,y,p,a,l,u))}),n.foreach((g,p)=>{const y=Os(t,g);Kw(e,yt(y))||(h=Ex(s,h,y,p,a,l,u))}),h}function Qw(s,e,t){return t.foreach((n,a)=>{e=e.updateChild(n,a)}),e}function Ax(s,e,t,n,a,l,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g=e,p;vt(t)?p=n:p=new cs(null).setTree(t,n);const y=e.serverCache.getNode();return p.children.inorderTraversal((w,v)=>{if(y.hasChild(w)){const A=e.serverCache.getNode().getImmediateChild(w),R=Qw(s,A,v);g=jf(s,g,new Gt(w),R,a,l,u,h)}}),p.children.inorderTraversal((w,v)=>{const A=!e.serverCache.isCompleteForChild(w)&&v.value===null;if(!y.hasChild(w)&&!A){const R=e.serverCache.getNode().getImmediateChild(w),z=Qw(s,R,v);g=jf(s,g,new Gt(w),z,a,l,u,h)}}),g}function vD(s,e,t,n,a,l,u){if(Nf(a,t)!=null)return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(n.value!=null){if(vt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return jf(s,e,t,g.getNode().getChild(t),a,l,h,u);if(vt(t)){let p=new cs(null);return g.getNode().forEachChild(Ga,(y,w)=>{p=p.set(new Gt(y),w)}),Ax(s,e,t,p,a,l,h,u)}else return e}else{let p=new cs(null);return n.foreach((y,w)=>{const v=Os(t,y);g.isCompleteForPath(v)&&(p=p.set(y,g.getNode().getChild(v)))}),Ax(s,e,t,p,a,l,h,u)}}function bD(s,e,t,n,a){const l=e.serverCache,u=WT(e,l.getNode(),l.isFullyInitialized()||vt(t),l.isFiltered());return eS(s,u,t,n,ZT,a)}function _D(s,e,t,n,a,l){let u;if(Nf(n,t)!=null)return e;{const h=new L0(n,e,a),g=e.eventCache.getNode();let p;if(vt(t)||yt(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=wf(n,Jo(e));else{const w=e.serverCache.getNode();we(w instanceof Ze,"serverChildren would be complete if leaf node"),y=O0(n,w)}y=y,p=s.filter.updateFullNode(g,y,l)}else{const y=yt(t);let w=P0(n,y,e.serverCache);w==null&&e.serverCache.isCompleteForChild(y)&&(w=g.getImmediateChild(y)),w!=null?p=s.filter.updateChild(g,y,w,us(t),h,l):e.eventCache.getNode().hasChild(y)?p=s.filter.updateChild(g,y,Ze.EMPTY_NODE,us(t),h,l):p=g,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=wf(n,Jo(e)),u.isLeafNode()&&(p=s.filter.updateFullNode(p,u,l)))}return u=e.serverCache.isFullyInitialized()||Nf(n,Vt())!=null,Fu(e,p,u,s.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,a=new I0(n.getIndex()),l=PI(n);this.processor_=mD(l);const u=t.serverCache,h=t.eventCache,g=a.updateFullNode(Ze.EMPTY_NODE,u.getNode(),null),p=l.updateFullNode(Ze.EMPTY_NODE,h.getNode(),null),y=new no(g,u.isFullyInitialized(),a.filtersNodes()),w=new no(p,h.isFullyInitialized(),l.filtersNodes());this.viewCache_=om(w,y),this.eventGenerator_=new WI(this.query_)}get query(){return this.query_}}function ND(s){return s.viewCache_.serverCache.getNode()}function jD(s){return _f(s.viewCache_)}function TD(s,e){const t=Jo(s.viewCache_);return t&&(s.query._queryParams.loadsAllData()||!vt(e)&&!t.getImmediateChild(yt(e)).isEmpty())?t.getChild(e):null}function Xw(s){return s.eventRegistrations_.length===0}function SD(s,e){s.eventRegistrations_.push(e)}function Jw(s,e,t){const n=[];if(t){we(e==null,"A cancel should cancel all event registrations.");const a=s.query._path;s.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(t,a);u&&n.push(u)})}if(e){let a=[];for(let l=0;l<s.eventRegistrations_.length;++l){const u=s.eventRegistrations_[l];if(!u.matches(e))a.push(u);else if(e.hasAnyCallback()){a=a.concat(s.eventRegistrations_.slice(l+1));break}}s.eventRegistrations_=a}else s.eventRegistrations_=[];return n}function Zw(s,e,t,n){e.type===ni.MERGE&&e.source.queryId!==null&&(we(Jo(s.viewCache_),"We should always have a full cache before handling merges"),we(_f(s.viewCache_),"Missing event cache, even though we have a server cache"));const a=s.viewCache_,l=pD(s.processor_,a,e,t,n);return gD(s.processor_,l.viewCache),we(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=l.viewCache,tS(s,l.changes,l.viewCache.eventCache.getNode(),null)}function ED(s,e){const t=s.viewCache_.eventCache,n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(As,(l,u)=>{n.push(uc(l,u))}),t.isFullyInitialized()&&n.push(HT(t.getNode())),tS(s,n,t.getNode(),e)}function tS(s,e,t,n){const a=n?[n]:s.eventRegistrations_;return YI(s.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf;class sS{constructor(){this.views=new Map}}function AD(s){we(!Tf,"__referenceConstructor has already been defined"),Tf=s}function CD(){return we(Tf,"Reference.ts has not been loaded"),Tf}function RD(s){return s.views.size===0}function U0(s,e,t,n){const a=e.source.queryId;if(a!==null){const l=s.views.get(a);return we(l!=null,"SyncTree gave us an op for an invalid query."),Zw(l,e,t,n)}else{let l=[];for(const u of s.views.values())l=l.concat(Zw(u,e,t,n));return l}}function nS(s,e,t,n,a){const l=e._queryIdentifier,u=s.views.get(l);if(!u){let h=wf(t,a?n:null),g=!1;h?g=!0:n instanceof Ze?(h=O0(t,n),g=!1):(h=Ze.EMPTY_NODE,g=!1);const p=om(new no(h,g,!1),new no(n,a,!1));return new wD(e,p)}return u}function ID(s,e,t,n,a,l){const u=nS(s,e,n,a,l);return s.views.has(e._queryIdentifier)||s.views.set(e._queryIdentifier,u),SD(u,t),ED(u,t)}function DD(s,e,t,n){const a=e._queryIdentifier,l=[];let u=[];const h=ro(s);if(a==="default")for(const[g,p]of s.views.entries())u=u.concat(Jw(p,t,n)),Xw(p)&&(s.views.delete(g),p.query._queryParams.loadsAllData()||l.push(p.query));else{const g=s.views.get(a);g&&(u=u.concat(Jw(g,t,n)),Xw(g)&&(s.views.delete(a),g.query._queryParams.loadsAllData()||l.push(g.query)))}return h&&!ro(s)&&l.push(new(CD())(e._repo,e._path)),{removed:l,events:u}}function rS(s){const e=[];for(const t of s.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ya(s,e){let t=null;for(const n of s.views.values())t=t||TD(n,e);return t}function iS(s,e){if(e._queryParams.loadsAllData())return cm(s);{const n=e._queryIdentifier;return s.views.get(n)}}function aS(s,e){return iS(s,e)!=null}function ro(s){return cm(s)!=null}function cm(s){for(const e of s.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf;function kD(s){we(!Sf,"__referenceConstructor has already been defined"),Sf=s}function MD(){return we(Sf,"Reference.ts has not been loaded"),Sf}let OD=1;class eN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cs(null),this.pendingWriteTree_=uD(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function oS(s,e,t,n,a){return JI(s.pendingWriteTree_,e,t,n,a),a?Ec(s,new Xo(D0(),e,t)):[]}function PD(s,e,t,n){ZI(s.pendingWriteTree_,e,t,n);const a=cs.fromObject(t);return Ec(s,new dc(D0(),e,a))}function $a(s,e,t=!1){const n=eD(s.pendingWriteTree_,e);if(tD(s.pendingWriteTree_,e)){let l=new cs(null);return n.snap!=null?l=l.set(Vt(),!0):Mn(n.children,u=>{l=l.set(new Gt(u),!0)}),Ec(s,new bf(n.path,l,t))}else return[]}function Nd(s,e,t){return Ec(s,new Xo(k0(),e,t))}function LD(s,e,t){const n=cs.fromObject(t);return Ec(s,new dc(k0(),e,n))}function UD(s,e){return Ec(s,new rd(k0(),e))}function VD(s,e,t){const n=F0(s,t);if(n){const a=B0(n),l=a.path,u=a.queryId,h=tr(l,e),g=new rd(M0(u),h);return q0(s,l,g)}else return[]}function Ef(s,e,t,n,a=!1){const l=e._path,u=s.syncPointTree_.get(l);let h=[];if(u&&(e._queryIdentifier==="default"||aS(u,e))){const g=DD(u,e,t,n);RD(u)&&(s.syncPointTree_=s.syncPointTree_.remove(l));const p=g.removed;if(h=g.events,!a){const y=p.findIndex(v=>v._queryParams.loadsAllData())!==-1,w=s.syncPointTree_.findOnPath(l,(v,A)=>ro(A));if(y&&!w){const v=s.syncPointTree_.subtree(l);if(!v.isEmpty()){const A=qD(v);for(let R=0;R<A.length;++R){const z=A[R],q=z.query,Q=dS(s,z);s.listenProvider_.startListening(qu(q),id(s,q),Q.hashFn,Q.onComplete)}}}!w&&p.length>0&&!n&&(y?s.listenProvider_.stopListening(qu(e),null):p.forEach(v=>{const A=s.queryToTagMap.get(um(v));s.listenProvider_.stopListening(qu(v),A)}))}$D(s,p)}return h}function lS(s,e,t,n){const a=F0(s,n);if(a!=null){const l=B0(a),u=l.path,h=l.queryId,g=tr(u,e),p=new Xo(M0(h),g,t);return q0(s,u,p)}else return[]}function FD(s,e,t,n){const a=F0(s,n);if(a){const l=B0(a),u=l.path,h=l.queryId,g=tr(u,e),p=cs.fromObject(t),y=new dc(M0(h),g,p);return q0(s,u,y)}else return[]}function Cx(s,e,t,n=!1){const a=e._path;let l=null,u=!1;s.syncPointTree_.foreachOnPath(a,(v,A)=>{const R=tr(v,a);l=l||Ya(A,R),u=u||ro(A)});let h=s.syncPointTree_.get(a);h?(u=u||ro(h),l=l||Ya(h,Vt())):(h=new sS,s.syncPointTree_=s.syncPointTree_.set(a,h));let g;l!=null?g=!0:(g=!1,l=Ze.EMPTY_NODE,s.syncPointTree_.subtree(a).foreachChild((A,R)=>{const z=Ya(R,Vt());z&&(l=l.updateImmediateChild(A,z))}));const p=aS(h,e);if(!p&&!e._queryParams.loadsAllData()){const v=um(e);we(!s.queryToTagMap.has(v),"View does not exist, but we have a tag");const A=zD();s.queryToTagMap.set(v,A),s.tagToQueryMap.set(A,v)}const y=lm(s.pendingWriteTree_,a);let w=ID(h,e,t,y,l,g);if(!p&&!u&&!n){const v=iS(h,e);w=w.concat(HD(s,e,v))}return w}function V0(s,e,t){const a=s.pendingWriteTree_,l=s.syncPointTree_.findOnPath(e,(u,h)=>{const g=tr(u,e),p=Ya(h,g);if(p)return p});return QT(a,e,l,t,!0)}function BD(s,e){const t=e._path;let n=null;s.syncPointTree_.foreachOnPath(t,(p,y)=>{const w=tr(p,t);n=n||Ya(y,w)});let a=s.syncPointTree_.get(t);a?n=n||Ya(a,Vt()):(a=new sS,s.syncPointTree_=s.syncPointTree_.set(t,a));const l=n!=null,u=l?new no(n,!0,!1):null,h=lm(s.pendingWriteTree_,e._path),g=nS(a,e,h,l?u.getNode():Ze.EMPTY_NODE,l);return jD(g)}function Ec(s,e){return cS(e,s.syncPointTree_,null,lm(s.pendingWriteTree_,Vt()))}function cS(s,e,t,n){if(vt(s.path))return uS(s,e,t,n);{const a=e.get(Vt());t==null&&a!=null&&(t=Ya(a,Vt()));let l=[];const u=yt(s.path),h=s.operationForChild(u),g=e.children.get(u);if(g&&h){const p=t?t.getImmediateChild(u):null,y=XT(n,u);l=l.concat(cS(h,g,p,y))}return a&&(l=l.concat(U0(a,s,n,t))),l}}function uS(s,e,t,n){const a=e.get(Vt());t==null&&a!=null&&(t=Ya(a,Vt()));let l=[];return e.children.inorderTraversal((u,h)=>{const g=t?t.getImmediateChild(u):null,p=XT(n,u),y=s.operationForChild(u);y&&(l=l.concat(uS(y,h,g,p)))}),a&&(l=l.concat(U0(a,s,n,t))),l}function dS(s,e){const t=e.query,n=id(s,t);return{hashFn:()=>(ND(e)||Ze.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return n?VD(s,t._path,n):UD(s,t._path);{const l=PR(a,t);return Ef(s,t,null,l)}}}}function id(s,e){const t=um(e);return s.queryToTagMap.get(t)}function um(s){return s._path.toString()+"$"+s._queryIdentifier}function F0(s,e){return s.tagToQueryMap.get(e)}function B0(s){const e=s.indexOf("$");return we(e!==-1&&e<s.length-1,"Bad queryKey."),{queryId:s.substr(e+1),path:new Gt(s.substr(0,e))}}function q0(s,e,t){const n=s.syncPointTree_.get(e);we(n,"Missing sync point for query tag that we're tracking");const a=lm(s.pendingWriteTree_,e);return U0(n,t,a,null)}function qD(s){return s.fold((e,t,n)=>{if(t&&ro(t))return[cm(t)];{let a=[];return t&&(a=rS(t)),Mn(n,(l,u)=>{a=a.concat(u)}),a}})}function qu(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(MD())(s._repo,s._path):s}function $D(s,e){for(let t=0;t<e.length;++t){const n=e[t];if(!n._queryParams.loadsAllData()){const a=um(n),l=s.queryToTagMap.get(a);s.queryToTagMap.delete(a),s.tagToQueryMap.delete(l)}}}function zD(){return OD++}function HD(s,e,t){const n=e._path,a=id(s,e),l=dS(s,t),u=s.listenProvider_.startListening(qu(e),a,l.hashFn,l.onComplete),h=s.syncPointTree_.subtree(n);if(a)we(!ro(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((p,y,w)=>{if(!vt(p)&&y&&ro(y))return[cm(y).query];{let v=[];return y&&(v=v.concat(rS(y).map(A=>A.query))),Mn(w,(A,R)=>{v=v.concat(R)}),v}});for(let p=0;p<g.length;++p){const y=g[p];s.listenProvider_.stopListening(qu(y),id(s,y))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $0(t)}node(){return this.node_}}class z0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Os(this.path_,e);return new z0(this.syncTree_,t)}node(){return V0(this.syncTree_,this.path_)}}const GD=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},tN=function(s,e,t){if(!s||typeof s!="object")return s;if(we(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return WD(s[".sv"],e,t);if(typeof s[".sv"]=="object")return YD(s[".sv"],e);we(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},WD=function(s,e,t){switch(s){case"timestamp":return t.timestamp;default:we(!1,"Unexpected server value: "+s)}},YD=function(s,e,t){s.hasOwnProperty("increment")||we(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const n=s.increment;typeof n!="number"&&we(!1,"Unexpected increment value: "+n);const a=e.node();if(we(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return n;const u=a.getValue();return typeof u!="number"?n:u+n},hS=function(s,e,t,n){return H0(e,new z0(t,s),n)},fS=function(s,e,t){return H0(s,new $0(e),t)};function H0(s,e,t){const n=s.getPriority().val(),a=tN(n,e.getImmediateChild(".priority"),t);let l;if(s.isLeafNode()){const u=s,h=tN(u.getValue(),e,t);return h!==u.getValue()||a!==u.getPriority().val()?new wn(h,cn(a)):s}else{const u=s;return l=u,a!==u.getPriority().val()&&(l=l.updatePriority(new wn(a))),u.forEachChild(As,(h,g)=>{const p=H0(g,e.getImmediateChild(h),t);p!==g&&(l=l.updateImmediateChild(h,p))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function W0(s,e){let t=e instanceof Gt?e:new Gt(e),n=s,a=yt(t);for(;a!==null;){const l=cc(n.node.children,a)||{children:{},childCount:0};n=new G0(a,n,l),t=us(t),a=yt(t)}return n}function Ac(s){return s.node.value}function mS(s,e){s.node.value=e,Rx(s)}function gS(s){return s.node.childCount>0}function KD(s){return Ac(s)===void 0&&!gS(s)}function dm(s,e){Mn(s.node.children,(t,n)=>{e(new G0(t,s,n))})}function pS(s,e,t,n){t&&e(s),dm(s,a=>{pS(a,e,!0)})}function QD(s,e,t){let n=s.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function jd(s){return new Gt(s.parent===null?s.name:jd(s.parent)+"/"+s.name)}function Rx(s){s.parent!==null&&XD(s.parent,s.name,s)}function XD(s,e,t){const n=KD(t),a=Di(s.node.children,e);n&&a?(delete s.node.children[e],s.node.childCount--,Rx(s)):!n&&!a&&(s.node.children[e]=t.node,s.node.childCount++,Rx(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=/[\[\].#$\/\u0000-\u001F\u007F]/,ZD=/[\[\].#$\u0000-\u001F\u007F]/,Gp=10*1024*1024,Y0=function(s){return typeof s=="string"&&s.length!==0&&!JD.test(s)},xS=function(s){return typeof s=="string"&&s.length!==0&&!ZD.test(s)},ek=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),xS(s)},Ix=function(s){return s===null||typeof s=="string"||typeof s=="number"&&!_0(s)||s&&typeof s=="object"&&Di(s,".sv")},Cc=function(s,e,t,n){n&&e===void 0||hm(em(s,"value"),e,t)},hm=function(s,e,t){const n=t instanceof Gt?new pI(t,s):t;if(e===void 0)throw new Error(s+"contains undefined "+Fo(n));if(typeof e=="function")throw new Error(s+"contains a function "+Fo(n)+" with contents = "+e.toString());if(_0(e))throw new Error(s+"contains "+e.toString()+" "+Fo(n));if(typeof e=="string"&&e.length>Gp/3&&tm(e)>Gp)throw new Error(s+"contains a string greater than "+Gp+" utf8 bytes "+Fo(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(Mn(e,(u,h)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!Y0(u)))throw new Error(s+" contains an invalid key ("+u+") "+Fo(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);xI(n,u),hm(s,h,n),yI(n)}),a&&l)throw new Error(s+' contains ".value" child '+Fo(n)+" in addition to actual children.")}},tk=function(s,e){let t,n;for(t=0;t<e.length;t++){n=e[t];const l=ed(n);for(let u=0;u<l.length;u++)if(!(l[u]===".priority"&&u===l.length-1)){if(!Y0(l[u]))throw new Error(s+"contains an invalid key ("+l[u]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(gI);let a=null;for(t=0;t<e.length;t++){if(n=e[t],a!==null&&Fr(a,n))throw new Error(s+"contains a path "+a.toString()+" that is ancestor of another path "+n.toString());a=n}},sk=function(s,e,t,n){const a=em(s,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(a+" must be an object containing the children to replace.");const l=[];Mn(e,(u,h)=>{const g=new Gt(u);if(hm(a,h,Os(t,g)),S0(g)===".priority"&&!Ix(h))throw new Error(a+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(g)}),tk(a,l)},fm=function(s,e,t,n){if(!xS(t))throw new Error(em(s,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},nk=function(s,e,t,n){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),fm(s,e,t)},K0=function(s,e){if(yt(e)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},rk=function(s,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Y0(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!ek(t))throw new Error(em(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mm(s,e){let t=null;for(let n=0;n<e.length;n++){const a=e[n],l=a.getPath();t!==null&&!E0(l,t.path)&&(s.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&s.eventLists_.push(t)}function yS(s,e,t){mm(s,t),vS(s,n=>E0(n,e))}function qr(s,e,t){mm(s,t),vS(s,n=>Fr(n,e)||Fr(e,n))}function vS(s,e){s.recursionDepth_++;let t=!0;for(let n=0;n<s.eventLists_.length;n++){const a=s.eventLists_[n];if(a){const l=a.path;e(l)?(ak(s.eventLists_[n]),s.eventLists_[n]=null):t=!1}}t&&(s.eventLists_=[]),s.recursionDepth_--}function ak(s){for(let e=0;e<s.events.length;e++){const t=s.events[e];if(t!==null){s.events[e]=null;const n=t.getEventRunner();Uu&&Dn("event: "+t.toString()),Sc(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="repo_interrupt",lk=25;class ck{constructor(e,t,n,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ik,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vf(),this.transactionQueueTree_=new G0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uk(s,e,t){if(s.stats_=j0(s.repoInfo_),s.forceRestClient_||FR())s.server_=new yf(s.repoInfo_,(n,a,l,u)=>{sN(s,n,a,l,u)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>nN(s,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{un(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}s.persistentConnection_=new la(s.repoInfo_,e,(n,a,l,u)=>{sN(s,n,a,l,u)},n=>{nN(s,n)},n=>{dk(s,n)},s.authTokenProvider_,s.appCheckProvider_,t),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(n=>{s.server_.refreshAuthToken(n)}),s.appCheckProvider_.addTokenChangeListener(n=>{s.server_.refreshAppCheckToken(n.token)}),s.statsReporter_=HR(s.repoInfo_,()=>new GI(s.stats_,s.server_)),s.infoData_=new BI,s.infoSyncTree_=new eN({startListening:(n,a,l,u)=>{let h=[];const g=s.infoData_.getNode(n._path);return g.isEmpty()||(h=Nd(s.infoSyncTree_,n._path,g),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),Q0(s,"connected",!1),s.serverSyncTree_=new eN({startListening:(n,a,l,u)=>(s.server_.listen(n,l,a,(h,g)=>{const p=u(h,g);qr(s.eventQueue_,n._path,p)}),[]),stopListening:(n,a)=>{s.server_.unlisten(n,a)}})}function bS(s){const t=s.infoData_.getNode(new Gt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function gm(s){return GD({timestamp:bS(s)})}function sN(s,e,t,n,a){s.dataUpdateCount++;const l=new Gt(e);t=s.interceptServerDataCallback_?s.interceptServerDataCallback_(e,t):t;let u=[];if(a)if(n){const g=ff(t,p=>cn(p));u=FD(s.serverSyncTree_,l,g,a)}else{const g=cn(t);u=lS(s.serverSyncTree_,l,g,a)}else if(n){const g=ff(t,p=>cn(p));u=LD(s.serverSyncTree_,l,g)}else{const g=cn(t);u=Nd(s.serverSyncTree_,l,g)}let h=l;u.length>0&&(h=fc(s,l)),qr(s.eventQueue_,h,u)}function nN(s,e){Q0(s,"connected",e),e===!1&&gk(s)}function dk(s,e){Mn(e,(t,n)=>{Q0(s,t,n)})}function Q0(s,e,t){const n=new Gt("/.info/"+e),a=cn(t);s.infoData_.updateSnapshot(n,a);const l=Nd(s.infoSyncTree_,n,a);qr(s.eventQueue_,n,l)}function X0(s){return s.nextWriteId_++}function hk(s,e,t){const n=BD(s.serverSyncTree_,e);return n!=null?Promise.resolve(n):s.server_.get(e).then(a=>{const l=cn(a).withIndex(e._queryParams.getIndex());Cx(s.serverSyncTree_,e,t,!0);let u;if(e._queryParams.loadsAllData())u=Nd(s.serverSyncTree_,e._path,l);else{const h=id(s.serverSyncTree_,e);u=lS(s.serverSyncTree_,e._path,l,h)}return qr(s.eventQueue_,e._path,u),Ef(s.serverSyncTree_,e,t,null,!0),l},a=>(Td(s,"get for query "+un(e)+" failed: "+a),Promise.reject(new Error(a))))}function fk(s,e,t,n,a){Td(s,"set",{path:e.toString(),value:t,priority:n});const l=gm(s),u=cn(t,n),h=V0(s.serverSyncTree_,e),g=fS(u,h,l),p=X0(s),y=oS(s.serverSyncTree_,e,g,p,!0);mm(s.eventQueue_,y),s.server_.put(e.toString(),u.val(!0),(v,A)=>{const R=v==="ok";R||sr("set at "+e+" failed: "+v);const z=$a(s.serverSyncTree_,p,!R);qr(s.eventQueue_,e,z),Dx(s,a,v,A)});const w=Z0(s,e);fc(s,w),qr(s.eventQueue_,w,[])}function mk(s,e,t,n){Td(s,"update",{path:e.toString(),value:t});let a=!0;const l=gm(s),u={};if(Mn(t,(h,g)=>{a=!1,u[h]=hS(Os(e,h),cn(g),s.serverSyncTree_,l)}),a)Dn("update() called with empty data.  Don't do anything."),Dx(s,n,"ok",void 0);else{const h=X0(s),g=PD(s.serverSyncTree_,e,u,h);mm(s.eventQueue_,g),s.server_.merge(e.toString(),t,(p,y)=>{const w=p==="ok";w||sr("update at "+e+" failed: "+p);const v=$a(s.serverSyncTree_,h,!w),A=v.length>0?fc(s,e):e;qr(s.eventQueue_,A,v),Dx(s,n,p,y)}),Mn(t,p=>{const y=Z0(s,Os(e,p));fc(s,y)}),qr(s.eventQueue_,e,[])}}function gk(s){Td(s,"onDisconnectEvents");const e=gm(s),t=vf();Nx(s.onDisconnect_,Vt(),(a,l)=>{const u=hS(a,l,s.serverSyncTree_,e);GT(t,a,u)});let n=[];Nx(t,Vt(),(a,l)=>{n=n.concat(Nd(s.serverSyncTree_,a,l));const u=Z0(s,a);fc(s,u)}),s.onDisconnect_=vf(),qr(s.eventQueue_,Vt(),n)}function pk(s,e,t){let n;yt(e._path)===".info"?n=Cx(s.infoSyncTree_,e,t):n=Cx(s.serverSyncTree_,e,t),yS(s.eventQueue_,e._path,n)}function xk(s,e,t){let n;yt(e._path)===".info"?n=Ef(s.infoSyncTree_,e,t):n=Ef(s.serverSyncTree_,e,t),yS(s.eventQueue_,e._path,n)}function yk(s){s.persistentConnection_&&s.persistentConnection_.interrupt(ok)}function Td(s,...e){let t="";s.persistentConnection_&&(t=s.persistentConnection_.id+":"),Dn(t,...e)}function Dx(s,e,t,n){e&&Sc(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let l=a;n&&(l+=": "+n);const u=new Error(l);u.code=a,e(u)}})}function _S(s,e,t){return V0(s.serverSyncTree_,e,t)||Ze.EMPTY_NODE}function J0(s,e=s.transactionQueueTree_){if(e||pm(s,e),Ac(e)){const t=NS(s,e);we(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&vk(s,jd(e),t)}else gS(e)&&dm(e,t=>{J0(s,t)})}function vk(s,e,t){const n=t.map(p=>p.currentWriteId),a=_S(s,e,n);let l=a;const u=a.hash();for(let p=0;p<t.length;p++){const y=t[p];we(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const w=tr(e,y.path);l=l.updateChild(w,y.currentOutputSnapshotRaw)}const h=l.val(!0),g=e;s.server_.put(g.toString(),h,p=>{Td(s,"transaction put response",{path:g.toString(),status:p});let y=[];if(p==="ok"){const w=[];for(let v=0;v<t.length;v++)t[v].status=2,y=y.concat($a(s.serverSyncTree_,t[v].currentWriteId)),t[v].onComplete&&w.push(()=>t[v].onComplete(null,!0,t[v].currentOutputSnapshotResolved)),t[v].unwatcher();pm(s,W0(s.transactionQueueTree_,e)),J0(s,s.transactionQueueTree_),qr(s.eventQueue_,e,y);for(let v=0;v<w.length;v++)Sc(w[v])}else{if(p==="datastale")for(let w=0;w<t.length;w++)t[w].status===3?t[w].status=4:t[w].status=0;else{sr("transaction at "+g.toString()+" failed: "+p);for(let w=0;w<t.length;w++)t[w].status=4,t[w].abortReason=p}fc(s,e)}},u)}function fc(s,e){const t=wS(s,e),n=jd(t),a=NS(s,t);return bk(s,a,n),n}function bk(s,e,t){if(e.length===0)return;const n=[];let a=[];const u=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],p=tr(t,g.path);let y=!1,w;if(we(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)y=!0,w=g.abortReason,a=a.concat($a(s.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=lk)y=!0,w="maxretry",a=a.concat($a(s.serverSyncTree_,g.currentWriteId,!0));else{const v=_S(s,g.path,u);g.currentInputSnapshot=v;const A=e[h].update(v.val());if(A!==void 0){hm("transaction failed: Data returned ",A,g.path);let R=cn(A);typeof A=="object"&&A!=null&&Di(A,".priority")||(R=R.updatePriority(v.getPriority()));const q=g.currentWriteId,Q=gm(s),pe=fS(R,v,Q);g.currentOutputSnapshotRaw=R,g.currentOutputSnapshotResolved=pe,g.currentWriteId=X0(s),u.splice(u.indexOf(q),1),a=a.concat(oS(s.serverSyncTree_,g.path,pe,g.currentWriteId,g.applyLocally)),a=a.concat($a(s.serverSyncTree_,q,!0))}else y=!0,w="nodata",a=a.concat($a(s.serverSyncTree_,g.currentWriteId,!0))}qr(s.eventQueue_,t,a),a=[],y&&(e[h].status=2,function(v){setTimeout(v,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(w==="nodata"?n.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):n.push(()=>e[h].onComplete(new Error(w),!1,null))))}pm(s,s.transactionQueueTree_);for(let h=0;h<n.length;h++)Sc(n[h]);J0(s,s.transactionQueueTree_)}function wS(s,e){let t,n=s.transactionQueueTree_;for(t=yt(e);t!==null&&Ac(n)===void 0;)n=W0(n,t),e=us(e),t=yt(e);return n}function NS(s,e){const t=[];return jS(s,e,t),t.sort((n,a)=>n.order-a.order),t}function jS(s,e,t){const n=Ac(e);if(n)for(let a=0;a<n.length;a++)t.push(n[a]);dm(e,a=>{jS(s,a,t)})}function pm(s,e){const t=Ac(e);if(t){let n=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[n]=t[a],n++);t.length=n,mS(e,t.length>0?t:void 0)}dm(e,n=>{pm(s,n)})}function Z0(s,e){const t=jd(wS(s,e)),n=W0(s.transactionQueueTree_,e);return QD(n,a=>{Wp(s,a)}),Wp(s,n),pS(n,a=>{Wp(s,a)}),t}function Wp(s,e){const t=Ac(e);if(t){const n=[];let a=[],l=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(we(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):(we(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),a=a.concat($a(s.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&n.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?mS(e,void 0):t.length=l+1,qr(s.eventQueue_,jd(e),a);for(let u=0;u<n.length;u++)Sc(n[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(s){let e="";const t=s.split("/");for(let n=0;n<t.length;n++)if(t[n].length>0){let a=t[n];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function wk(s){const e={};s.charAt(0)==="?"&&(s=s.substring(1));for(const t of s.split("&")){if(t.length===0)continue;const n=t.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):sr(`Invalid query segment '${t}' in query '${s}'`)}return e}const rN=function(s,e){const t=Nk(s),n=t.namespace;t.domain==="firebase.com"&&ua(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&t.domain!=="localhost"&&ua("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||IR();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new AT(t.host,t.secure,n,a,e,"",n!==t.subdomain),path:new Gt(t.pathString)}},Nk=function(s){let e="",t="",n="",a="",l="",u=!0,h="https",g=443;if(typeof s=="string"){let p=s.indexOf("//");p>=0&&(h=s.substring(0,p-1),s=s.substring(p+2));let y=s.indexOf("/");y===-1&&(y=s.length);let w=s.indexOf("?");w===-1&&(w=s.length),e=s.substring(0,Math.min(y,w)),y<w&&(a=_k(s.substring(y,w)));const v=wk(s.substring(Math.min(s.length,w)));p=e.indexOf(":"),p>=0?(u=h==="https"||h==="wss",g=parseInt(e.substring(p+1),10)):p=e.length;const A=e.slice(0,p);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{const R=e.indexOf(".");n=e.substring(0,R).toLowerCase(),t=e.substring(R+1),l=n}"ns"in v&&(l=v.ns)}return{host:e,port:g,domain:t,subdomain:n,secure:u,scheme:h,pathString:a,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",jk=function(){let s=0;const e=[];return function(t){const n=t===s;s=t;let a;const l=new Array(8);for(a=7;a>=0;a--)l[a]=iN.charAt(t%64),t=Math.floor(t/64);we(t===0,"Cannot push at time == 0");let u=l.join("");if(n){for(a=11;a>=0&&e[a]===63;a--)e[a]=0;e[a]++}else for(a=0;a<12;a++)e[a]=Math.floor(Math.random()*64);for(a=0;a<12;a++)u+=iN.charAt(e[a]);return we(u.length===20,"nextPushId: Length should be 20."),u}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,t,n,a){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+un(this.snapshot.exportVal())}}class Sk{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return we(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t,n,a){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=a}get key(){return vt(this._path)?null:S0(this._path)}get ref(){return new ki(this._repo,this._path)}get _queryIdentifier(){const e=zw(this._queryParams),t=w0(e);return t==="{}"?"default":t}get _queryObject(){return zw(this._queryParams)}isEqual(e){if(e=xs(e),!(e instanceof ga))return!1;const t=this._repo===e._repo,n=E0(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&n&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+mI(this._path)}}function Ek(s,e){if(s._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function xm(s){let e=null,t=null;if(s.hasStart()&&(e=s.getIndexStartValue()),s.hasEnd()&&(t=s.getIndexEndValue()),s.getIndex()===Ga){const n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",a="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(s.hasStart()){if(s.getIndexStartName()!==eo)throw new Error(n);if(typeof e!="string")throw new Error(a)}if(s.hasEnd()){if(s.getIndexEndName()!==to)throw new Error(n);if(typeof t!="string")throw new Error(a)}}else if(s.getIndex()===As){if(e!=null&&!Ix(e)||t!=null&&!Ix(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(we(s.getIndex()instanceof R0||s.getIndex()===zT,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ey(s){if(s.hasStart()&&s.hasEnd()&&s.hasLimit()&&!s.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ki extends ga{constructor(e,t){super(e,t,new am,!1)}get parent(){const e=LT(this._path);return e===null?null:new ki(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class mc{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Gt(e),n=gc(this.ref,e);return new mc(this._node.getChild(t),n,As)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,a)=>e(new mc(a,gc(this.ref,n),As)))}hasChild(e){const t=new Gt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ks(s,e){return s=xs(s),s._checkNotDeleted("ref"),e!==void 0?gc(s._root,e):s._root}function gc(s,e){return s=xs(s),yt(s._path)===null?nk("child","path",e):fm("child","path",e),new ki(s._repo,Os(s._path,e))}function ym(s,e){s=xs(s),K0("push",s._path),Cc("push",e,s._path,!0);const t=bS(s._repo),n=jk(t),a=gc(s,n),l=gc(s,n);let u;return e!=null?u=ty(l,e).then(()=>l):u=Promise.resolve(l),a.then=u.then.bind(u),a.catch=u.then.bind(u,void 0),a}function ty(s,e){s=xs(s),K0("set",s._path),Cc("set",e,s._path,!1);const t=new yd;return fk(s._repo,s._path,e,null,t.wrapCallback(()=>{})),t.promise}function pc(s,e){sk("update",e,s._path);const t=new yd;return mk(s._repo,s._path,e,t.wrapCallback(()=>{})),t.promise}function io(s){s=xs(s);const e=new TS(()=>{}),t=new vm(e);return hk(s._repo,s,t).then(n=>new mc(n,new ki(s._repo,s._path),s._queryParams.getIndex()))}class vm{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const n=t._queryParams.getIndex();return new Tk("value",this,new mc(e.snapshotNode,new ki(t._repo,t._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Sk(this,e,t):null}matches(e){return e instanceof vm?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Ak(s,e,t,n,a){const l=new TS(t,void 0),u=new vm(l);return pk(s._repo,s,u),()=>xk(s._repo,s,u)}function Sd(s,e,t,n){return Ak(s,"value",e)}let ol=class{};class Ck extends ol{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Cc("endAt",this._value,e._path,!0);const t=wx(e._queryParams,this._value,this._key);if(ey(t),xm(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ga(e._repo,e._path,t,e._orderByCalled)}}class Rk extends ol{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Cc("endBefore",this._value,e._path,!1);const t=VI(e._queryParams,this._value,this._key);if(ey(t),xm(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ga(e._repo,e._path,t,e._orderByCalled)}}function SS(s,e){return new Rk(s,e)}class Ik extends ol{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Cc("startAt",this._value,e._path,!0);const t=UI(e._queryParams,this._value,this._key);if(ey(t),xm(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ga(e._repo,e._path,t,e._orderByCalled)}}class Dk extends ol{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ga(e._repo,e._path,LI(e._queryParams,this._limit),e._orderByCalled)}}function Ka(s){if(typeof s!="number"||Math.floor(s)!==s||s<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Dk(s)}class kk extends ol{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Ek(e,"orderByChild");const t=new Gt(this._path);if(vt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new R0(t),a=FI(e._queryParams,n);return xm(a),new ga(e._repo,e._path,a,!0)}}function Zo(s){if(s==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(s==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(s==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return fm("orderByChild","path",s),new kk(s)}class Mk extends ol{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Cc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ck(this._value,this._key)._apply(new Ik(this._value,this._key)._apply(e))}}function Ed(s,e){return new Mk(s,e)}function Qa(s,...e){let t=xs(s);for(const n of e)t=n._apply(t);return t}AD(ki);kD(ki);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="FIREBASE_DATABASE_EMULATOR_HOST",kx={};let Pk=!1;function Lk(s,e,t,n){const a=e.lastIndexOf(":"),l=e.substring(0,a),u=fo(l);s.repoInfo_=new AT(e,u,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,t),n&&(s.authTokenProvider_=n)}function ES(s,e,t,n,a){let l=n||s.options.databaseURL;l===void 0&&(s.options.projectId||ua("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Dn("Using default host for project ",s.options.projectId),l=`${s.options.projectId}-default-rtdb.firebaseio.com`);let u=rN(l,a),h=u.repoInfo,g;typeof process<"u"&&Sw&&(g=Sw[Ok]),g?(l=`http://${g}?ns=${h.namespace}`,u=rN(l,a),h=u.repoInfo):u.repoInfo.secure;const p=new qR(s.name,s.options,e);rk("Invalid Firebase Database URL",u),vt(u.path)||ua("Database URL must point to the root of a Firebase Database (not including a child path).");const y=Vk(h,s,p,new BR(s,t));return new AS(y,s)}function Uk(s,e){const t=kx[e];(!t||t[s.key]!==s)&&ua(`Database ${e}(${s.repoInfo_}) has already been deleted.`),yk(s),delete t[s.key]}function Vk(s,e,t,n){let a=kx[e.name];a||(a={},kx[e.name]=a);let l=a[s.toURLString()];return l&&ua("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new ck(s,Pk,t,n),a[s.toURLString()]=l,l}class AS{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(uk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ki(this._repo,Vt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Uk(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ua("Cannot call "+e+" on a deleted database.")}}function CS(s=vd(),e){const t=rl(s,"database").getImmediate({identifier:e});if(!t._instanceStarted){const n=Qf("database");n&&RS(t,...n)}return t}function RS(s,e,t,n={}){s=xs(s),s._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=s._repoInternal;if(s._instanceStarted){if(a===s._repoInternal.repoInfo_.host&&Xu(n,l.repoInfo_.emulatorOptions))return;ua("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(l.repoInfo_.nodeAdmin)n.mockUserToken&&ua('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new sf(sf.OWNER);else if(n.mockUserToken){const h=typeof n.mockUserToken=="string"?n.mockUserToken:x0(n.mockUserToken,s.app.options.projectId);u=new sf(h)}fo(e)&&(Xf(e),Jf("Database",!0)),Lk(l,a,n,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(s){mT(b0),ai(new Br("database",(e,{instanceIdentifier:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return ES(n,a,l,t)},"PUBLIC").setMultipleInstances(!0)),zn(Ew,Aw,s),zn(Ew,Aw,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk={".sv":"timestamp"};function sy(){return Bk}la.prototype.simpleListen=function(s,e){this.sendRequest("q",{p:s},e)};la.prototype.echo=function(s,e){this.sendRequest("echo",{d:s},e)};Fk();const IS=Object.freeze(Object.defineProperty({__proto__:null,DataSnapshot:mc,Database:AS,QueryConstraint:ol,_QueryImpl:ga,_QueryParams:am,_ReferenceImpl:ki,_repoManagerDatabaseFromApp:ES,_setSDKVersion:mT,_validatePathString:fm,_validateWritablePath:K0,child:gc,connectDatabaseEmulator:RS,endBefore:SS,equalTo:Ed,get:io,getDatabase:CS,limitToLast:Ka,onValue:Sd,orderByChild:Zo,push:ym,query:Qa,ref:Ks,serverTimestamp:sy,set:ty,update:pc},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="firebasestorage.googleapis.com",qk="storageBucket",$k=2*60*1e3,zk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo=class kS extends ma{constructor(e,t,n=0){super(Yp(e),`Firebase Storage: ${t} (${Yp(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kS.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Ri;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ri||(Ri={}));function Yp(s){return"storage/"+s}function Hk(){const s="An unknown error occurred, please check the error payload for server response.";return new mo(Ri.UNKNOWN,s)}function Gk(){return new mo(Ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wk(){return new mo(Ri.CANCELED,"User canceled the upload/download.")}function Yk(s){return new mo(Ri.INVALID_URL,"Invalid URL '"+s+"'.")}function Kk(s){return new mo(Ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function aN(s){return new mo(Ri.INVALID_ARGUMENT,s)}function MS(){return new mo(Ri.APP_DELETED,"The Firebase app was deleted.")}function Qk(s){return new mo(Ri.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ri.makeFromUrl(e,t)}catch{return new ri(e,"")}if(n.path==="")return n;throw Kk(e)}static makeFromUrl(e,t){let n=null;const a="([A-Za-z0-9.\\-_]+)";function l(fe){fe.path.charAt(fe.path.length-1)==="/"&&(fe.path_=fe.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+a+u,"i"),g={bucket:1,path:3};function p(fe){fe.path_=decodeURIComponent(fe.path)}const y="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",A=new RegExp(`^https?://${w}/${y}/b/${a}/o${v}`,"i"),R={bucket:1,path:3},z=t===DS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,q="([^?#]*)",Q=new RegExp(`^https?://${z}/${a}/${q}`,"i"),ee=[{regex:h,indices:g,postModify:l},{regex:A,indices:R,postModify:p},{regex:Q,indices:{bucket:1,path:2},postModify:p}];for(let fe=0;fe<ee.length;fe++){const be=ee[fe],Ee=be.regex.exec(e);if(Ee){const L=Ee[be.indices.bucket];let D=Ee[be.indices.path];D||(D=""),n=new ri(L,D),be.postModify(n);break}}if(n==null)throw Yk(e);return n}}class Xk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(s,e,t){let n=1,a=null,l=null,u=!1,h=0;function g(){return h===2}let p=!1;function y(...q){p||(p=!0,e.apply(null,q))}function w(q){a=setTimeout(()=>{a=null,s(A,g())},q)}function v(){l&&clearTimeout(l)}function A(q,...Q){if(p){v();return}if(q){v(),y.call(null,q,...Q);return}if(g()||u){v(),y.call(null,q,...Q);return}n<64&&(n*=2);let ee;h===1?(h=2,ee=0):ee=(n+Math.random())*1e3,w(ee)}let R=!1;function z(q){R||(R=!0,v(),!p&&(a!==null?(q||(h=2),clearTimeout(a),w(0)):q||(h=1)))}return w(0),l=setTimeout(()=>{u=!0,z(!0)},t),z}function Zk(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(s){return s!==void 0}function oN(s,e,t,n){if(n<e)throw aN(`Invalid value for '${s}'. Expected ${e} or greater.`);if(n>t)throw aN(`Invalid value for '${s}'. Expected ${t} or less.`)}function t3(s){const e=encodeURIComponent;let t="?";for(const n in s)if(s.hasOwnProperty(n)){const a=e(n)+"="+e(s[n]);t=t+a+"&"}return t=t.slice(0,-1),t}var Af;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Af||(Af={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(s,e){const t=s>=500&&s<600,a=[408,429].indexOf(s)!==-1,l=e.indexOf(s)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,t,n,a,l,u,h,g,p,y,w,v=!0,A=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=g,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=w,this.retry=v,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,z)=>{this.resolve_=R,this.reject_=z,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new zh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=h=>{const g=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,p)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const h=l.getErrorCode()===Af.NO_ERROR,g=l.getStatus();if(!h||s3(g,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Af.ABORT;n(!1,new zh(!1,null,y));return}const p=this.successCodes_.indexOf(g)!==-1;n(!0,new zh(p,l))})},t=(n,a)=>{const l=this.resolve_,u=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());e3(g)?l(g):l()}catch(g){u(g)}else if(h!==null){const g=Hk();g.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,g)):u(g)}else if(a.canceled){const g=this.appDelete_?MS():Wk();u(g)}else{const g=Gk();u(g)}};this.canceled_?t(!1,new zh(!1,null,!0)):this.backoffId_=Jk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Zk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zh{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function r3(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function i3(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function a3(s,e){e&&(s["X-Firebase-GMPID"]=e)}function o3(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function l3(s,e,t,n,a,l,u=!0,h=!1){const g=t3(s.urlParams),p=s.url+g,y=Object.assign({},s.headers);return a3(y,e),r3(y,t),i3(y,l),o3(y,n),new n3(p,s.method,y,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,a,u,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function u3(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t){this._service=e,t instanceof ri?this._location=t:this._location=ri.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Cf(e,t)}get root(){const e=new ri(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return u3(this._location.path)}get storage(){return this._service}get parent(){const e=c3(this._location.path);if(e===null)return null;const t=new ri(this._location.bucket,e);return new Cf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Qk(e)}}function lN(s,e){const t=e==null?void 0:e[qk];return t==null?null:ri.makeFromBucketSpec(t,s)}function d3(s,e,t,n={}){s.host=`${e}:${t}`;const a=fo(e);a&&(Xf(`https://${s.host}/b`),Jf("Storage",!0)),s._isUsingEmulator=!0,s._protocol=a?"https":"http";const{mockUserToken:l}=n;l&&(s._overrideAuthToken=typeof l=="string"?l:x0(l,s.app.options.projectId))}class h3{constructor(e,t,n,a,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=DS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$k,this._maxUploadRetryTime=zk,this._requests=new Set,a!=null?this._bucket=ri.makeFromBucketSpec(a,this._host):this._bucket=lN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ri.makeFromBucketSpec(this._url,e):this._bucket=lN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(nm(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Cf(this,e)}_makeRequest(e,t,n,a,l=!0){if(this._deleted)return new Xk(MS());{const u=l3(e,this._appId,n,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,a).getPromise()}}const cN="@firebase/storage",uN="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="storage";function f3(s=vd(),e){s=xs(s);const n=rl(s,OS).getImmediate({identifier:e}),a=Qf("storage");return a&&m3(n,...a),n}function m3(s,e,t,n={}){d3(s,e,t,n)}function g3(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),n=s.getProvider("auth-internal"),a=s.getProvider("app-check-internal");return new h3(t,n,a,e,b0)}function p3(){ai(new Br(OS,g3,"PUBLIC").setMultipleInstances(!0)),zn(cN,uN,""),zn(cN,uN,"esm2020")}p3();var dN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xa,PS;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,D){function I(){}I.prototype=D.prototype,L.D=D.prototype,L.prototype=new I,L.prototype.constructor=L,L.C=function(U,$,X){for(var P=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)P[zt-2]=arguments[zt];return D.prototype[$].apply(U,P)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(L,D,I){I||(I=0);var U=Array(16);if(typeof D=="string")for(var $=0;16>$;++$)U[$]=D.charCodeAt(I++)|D.charCodeAt(I++)<<8|D.charCodeAt(I++)<<16|D.charCodeAt(I++)<<24;else for($=0;16>$;++$)U[$]=D[I++]|D[I++]<<8|D[I++]<<16|D[I++]<<24;D=L.g[0],I=L.g[1],$=L.g[2];var X=L.g[3],P=D+(X^I&($^X))+U[0]+3614090360&4294967295;D=I+(P<<7&4294967295|P>>>25),P=X+($^D&(I^$))+U[1]+3905402710&4294967295,X=D+(P<<12&4294967295|P>>>20),P=$+(I^X&(D^I))+U[2]+606105819&4294967295,$=X+(P<<17&4294967295|P>>>15),P=I+(D^$&(X^D))+U[3]+3250441966&4294967295,I=$+(P<<22&4294967295|P>>>10),P=D+(X^I&($^X))+U[4]+4118548399&4294967295,D=I+(P<<7&4294967295|P>>>25),P=X+($^D&(I^$))+U[5]+1200080426&4294967295,X=D+(P<<12&4294967295|P>>>20),P=$+(I^X&(D^I))+U[6]+2821735955&4294967295,$=X+(P<<17&4294967295|P>>>15),P=I+(D^$&(X^D))+U[7]+4249261313&4294967295,I=$+(P<<22&4294967295|P>>>10),P=D+(X^I&($^X))+U[8]+1770035416&4294967295,D=I+(P<<7&4294967295|P>>>25),P=X+($^D&(I^$))+U[9]+2336552879&4294967295,X=D+(P<<12&4294967295|P>>>20),P=$+(I^X&(D^I))+U[10]+4294925233&4294967295,$=X+(P<<17&4294967295|P>>>15),P=I+(D^$&(X^D))+U[11]+2304563134&4294967295,I=$+(P<<22&4294967295|P>>>10),P=D+(X^I&($^X))+U[12]+1804603682&4294967295,D=I+(P<<7&4294967295|P>>>25),P=X+($^D&(I^$))+U[13]+4254626195&4294967295,X=D+(P<<12&4294967295|P>>>20),P=$+(I^X&(D^I))+U[14]+2792965006&4294967295,$=X+(P<<17&4294967295|P>>>15),P=I+(D^$&(X^D))+U[15]+1236535329&4294967295,I=$+(P<<22&4294967295|P>>>10),P=D+($^X&(I^$))+U[1]+4129170786&4294967295,D=I+(P<<5&4294967295|P>>>27),P=X+(I^$&(D^I))+U[6]+3225465664&4294967295,X=D+(P<<9&4294967295|P>>>23),P=$+(D^I&(X^D))+U[11]+643717713&4294967295,$=X+(P<<14&4294967295|P>>>18),P=I+(X^D&($^X))+U[0]+3921069994&4294967295,I=$+(P<<20&4294967295|P>>>12),P=D+($^X&(I^$))+U[5]+3593408605&4294967295,D=I+(P<<5&4294967295|P>>>27),P=X+(I^$&(D^I))+U[10]+38016083&4294967295,X=D+(P<<9&4294967295|P>>>23),P=$+(D^I&(X^D))+U[15]+3634488961&4294967295,$=X+(P<<14&4294967295|P>>>18),P=I+(X^D&($^X))+U[4]+3889429448&4294967295,I=$+(P<<20&4294967295|P>>>12),P=D+($^X&(I^$))+U[9]+568446438&4294967295,D=I+(P<<5&4294967295|P>>>27),P=X+(I^$&(D^I))+U[14]+3275163606&4294967295,X=D+(P<<9&4294967295|P>>>23),P=$+(D^I&(X^D))+U[3]+4107603335&4294967295,$=X+(P<<14&4294967295|P>>>18),P=I+(X^D&($^X))+U[8]+1163531501&4294967295,I=$+(P<<20&4294967295|P>>>12),P=D+($^X&(I^$))+U[13]+2850285829&4294967295,D=I+(P<<5&4294967295|P>>>27),P=X+(I^$&(D^I))+U[2]+4243563512&4294967295,X=D+(P<<9&4294967295|P>>>23),P=$+(D^I&(X^D))+U[7]+1735328473&4294967295,$=X+(P<<14&4294967295|P>>>18),P=I+(X^D&($^X))+U[12]+2368359562&4294967295,I=$+(P<<20&4294967295|P>>>12),P=D+(I^$^X)+U[5]+4294588738&4294967295,D=I+(P<<4&4294967295|P>>>28),P=X+(D^I^$)+U[8]+2272392833&4294967295,X=D+(P<<11&4294967295|P>>>21),P=$+(X^D^I)+U[11]+1839030562&4294967295,$=X+(P<<16&4294967295|P>>>16),P=I+($^X^D)+U[14]+4259657740&4294967295,I=$+(P<<23&4294967295|P>>>9),P=D+(I^$^X)+U[1]+2763975236&4294967295,D=I+(P<<4&4294967295|P>>>28),P=X+(D^I^$)+U[4]+1272893353&4294967295,X=D+(P<<11&4294967295|P>>>21),P=$+(X^D^I)+U[7]+4139469664&4294967295,$=X+(P<<16&4294967295|P>>>16),P=I+($^X^D)+U[10]+3200236656&4294967295,I=$+(P<<23&4294967295|P>>>9),P=D+(I^$^X)+U[13]+681279174&4294967295,D=I+(P<<4&4294967295|P>>>28),P=X+(D^I^$)+U[0]+3936430074&4294967295,X=D+(P<<11&4294967295|P>>>21),P=$+(X^D^I)+U[3]+3572445317&4294967295,$=X+(P<<16&4294967295|P>>>16),P=I+($^X^D)+U[6]+76029189&4294967295,I=$+(P<<23&4294967295|P>>>9),P=D+(I^$^X)+U[9]+3654602809&4294967295,D=I+(P<<4&4294967295|P>>>28),P=X+(D^I^$)+U[12]+3873151461&4294967295,X=D+(P<<11&4294967295|P>>>21),P=$+(X^D^I)+U[15]+530742520&4294967295,$=X+(P<<16&4294967295|P>>>16),P=I+($^X^D)+U[2]+3299628645&4294967295,I=$+(P<<23&4294967295|P>>>9),P=D+($^(I|~X))+U[0]+4096336452&4294967295,D=I+(P<<6&4294967295|P>>>26),P=X+(I^(D|~$))+U[7]+1126891415&4294967295,X=D+(P<<10&4294967295|P>>>22),P=$+(D^(X|~I))+U[14]+2878612391&4294967295,$=X+(P<<15&4294967295|P>>>17),P=I+(X^($|~D))+U[5]+4237533241&4294967295,I=$+(P<<21&4294967295|P>>>11),P=D+($^(I|~X))+U[12]+1700485571&4294967295,D=I+(P<<6&4294967295|P>>>26),P=X+(I^(D|~$))+U[3]+2399980690&4294967295,X=D+(P<<10&4294967295|P>>>22),P=$+(D^(X|~I))+U[10]+4293915773&4294967295,$=X+(P<<15&4294967295|P>>>17),P=I+(X^($|~D))+U[1]+2240044497&4294967295,I=$+(P<<21&4294967295|P>>>11),P=D+($^(I|~X))+U[8]+1873313359&4294967295,D=I+(P<<6&4294967295|P>>>26),P=X+(I^(D|~$))+U[15]+4264355552&4294967295,X=D+(P<<10&4294967295|P>>>22),P=$+(D^(X|~I))+U[6]+2734768916&4294967295,$=X+(P<<15&4294967295|P>>>17),P=I+(X^($|~D))+U[13]+1309151649&4294967295,I=$+(P<<21&4294967295|P>>>11),P=D+($^(I|~X))+U[4]+4149444226&4294967295,D=I+(P<<6&4294967295|P>>>26),P=X+(I^(D|~$))+U[11]+3174756917&4294967295,X=D+(P<<10&4294967295|P>>>22),P=$+(D^(X|~I))+U[2]+718787259&4294967295,$=X+(P<<15&4294967295|P>>>17),P=I+(X^($|~D))+U[9]+3951481745&4294967295,L.g[0]=L.g[0]+D&4294967295,L.g[1]=L.g[1]+($+(P<<21&4294967295|P>>>11))&4294967295,L.g[2]=L.g[2]+$&4294967295,L.g[3]=L.g[3]+X&4294967295}n.prototype.u=function(L,D){D===void 0&&(D=L.length);for(var I=D-this.blockSize,U=this.B,$=this.h,X=0;X<D;){if($==0)for(;X<=I;)a(this,L,X),X+=this.blockSize;if(typeof L=="string"){for(;X<D;)if(U[$++]=L.charCodeAt(X++),$==this.blockSize){a(this,U),$=0;break}}else for(;X<D;)if(U[$++]=L[X++],$==this.blockSize){a(this,U),$=0;break}}this.h=$,this.o+=D},n.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var D=1;D<L.length-8;++D)L[D]=0;var I=8*this.o;for(D=L.length-8;D<L.length;++D)L[D]=I&255,I/=256;for(this.u(L),L=Array(16),D=I=0;4>D;++D)for(var U=0;32>U;U+=8)L[I++]=this.g[D]>>>U&255;return L};function l(L,D){var I=h;return Object.prototype.hasOwnProperty.call(I,L)?I[L]:I[L]=D(L)}function u(L,D){this.h=D;for(var I=[],U=!0,$=L.length-1;0<=$;$--){var X=L[$]|0;U&&X==D||(I[$]=X,U=!1)}this.g=I}var h={};function g(L){return-128<=L&&128>L?l(L,function(D){return new u([D|0],0>D?-1:0)}):new u([L|0],0>L?-1:0)}function p(L){if(isNaN(L)||!isFinite(L))return w;if(0>L)return q(p(-L));for(var D=[],I=1,U=0;L>=I;U++)D[U]=L/I|0,I*=4294967296;return new u(D,0)}function y(L,D){if(L.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(L.charAt(0)=="-")return q(y(L.substring(1),D));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(D,8)),U=w,$=0;$<L.length;$+=8){var X=Math.min(8,L.length-$),P=parseInt(L.substring($,$+X),D);8>X?(X=p(Math.pow(D,X)),U=U.j(X).add(p(P))):(U=U.j(I),U=U.add(p(P)))}return U}var w=g(0),v=g(1),A=g(16777216);s=u.prototype,s.m=function(){if(z(this))return-q(this).m();for(var L=0,D=1,I=0;I<this.g.length;I++){var U=this.i(I);L+=(0<=U?U:4294967296+U)*D,D*=4294967296}return L},s.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(R(this))return"0";if(z(this))return"-"+q(this).toString(L);for(var D=p(Math.pow(L,6)),I=this,U="";;){var $=fe(I,D).g;I=Q(I,$.j(D));var X=((0<I.g.length?I.g[0]:I.h)>>>0).toString(L);if(I=$,R(I))return X+U;for(;6>X.length;)X="0"+X;U=X+U}},s.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function R(L){if(L.h!=0)return!1;for(var D=0;D<L.g.length;D++)if(L.g[D]!=0)return!1;return!0}function z(L){return L.h==-1}s.l=function(L){return L=Q(this,L),z(L)?-1:R(L)?0:1};function q(L){for(var D=L.g.length,I=[],U=0;U<D;U++)I[U]=~L.g[U];return new u(I,~L.h).add(v)}s.abs=function(){return z(this)?q(this):this},s.add=function(L){for(var D=Math.max(this.g.length,L.g.length),I=[],U=0,$=0;$<=D;$++){var X=U+(this.i($)&65535)+(L.i($)&65535),P=(X>>>16)+(this.i($)>>>16)+(L.i($)>>>16);U=P>>>16,X&=65535,P&=65535,I[$]=P<<16|X}return new u(I,I[I.length-1]&-2147483648?-1:0)};function Q(L,D){return L.add(q(D))}s.j=function(L){if(R(this)||R(L))return w;if(z(this))return z(L)?q(this).j(q(L)):q(q(this).j(L));if(z(L))return q(this.j(q(L)));if(0>this.l(A)&&0>L.l(A))return p(this.m()*L.m());for(var D=this.g.length+L.g.length,I=[],U=0;U<2*D;U++)I[U]=0;for(U=0;U<this.g.length;U++)for(var $=0;$<L.g.length;$++){var X=this.i(U)>>>16,P=this.i(U)&65535,zt=L.i($)>>>16,Rt=L.i($)&65535;I[2*U+2*$]+=P*Rt,pe(I,2*U+2*$),I[2*U+2*$+1]+=X*Rt,pe(I,2*U+2*$+1),I[2*U+2*$+1]+=P*zt,pe(I,2*U+2*$+1),I[2*U+2*$+2]+=X*zt,pe(I,2*U+2*$+2)}for(U=0;U<D;U++)I[U]=I[2*U+1]<<16|I[2*U];for(U=D;U<2*D;U++)I[U]=0;return new u(I,0)};function pe(L,D){for(;(L[D]&65535)!=L[D];)L[D+1]+=L[D]>>>16,L[D]&=65535,D++}function ee(L,D){this.g=L,this.h=D}function fe(L,D){if(R(D))throw Error("division by zero");if(R(L))return new ee(w,w);if(z(L))return D=fe(q(L),D),new ee(q(D.g),q(D.h));if(z(D))return D=fe(L,q(D)),new ee(q(D.g),D.h);if(30<L.g.length){if(z(L)||z(D))throw Error("slowDivide_ only works with positive integers.");for(var I=v,U=D;0>=U.l(L);)I=be(I),U=be(U);var $=Ee(I,1),X=Ee(U,1);for(U=Ee(U,2),I=Ee(I,2);!R(U);){var P=X.add(U);0>=P.l(L)&&($=$.add(I),X=P),U=Ee(U,1),I=Ee(I,1)}return D=Q(L,$.j(D)),new ee($,D)}for($=w;0<=L.l(D);){for(I=Math.max(1,Math.floor(L.m()/D.m())),U=Math.ceil(Math.log(I)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),X=p(I),P=X.j(D);z(P)||0<P.l(L);)I-=U,X=p(I),P=X.j(D);R(X)&&(X=v),$=$.add(X),L=Q(L,P)}return new ee($,L)}s.A=function(L){return fe(this,L).h},s.and=function(L){for(var D=Math.max(this.g.length,L.g.length),I=[],U=0;U<D;U++)I[U]=this.i(U)&L.i(U);return new u(I,this.h&L.h)},s.or=function(L){for(var D=Math.max(this.g.length,L.g.length),I=[],U=0;U<D;U++)I[U]=this.i(U)|L.i(U);return new u(I,this.h|L.h)},s.xor=function(L){for(var D=Math.max(this.g.length,L.g.length),I=[],U=0;U<D;U++)I[U]=this.i(U)^L.i(U);return new u(I,this.h^L.h)};function be(L){for(var D=L.g.length+1,I=[],U=0;U<D;U++)I[U]=L.i(U)<<1|L.i(U-1)>>>31;return new u(I,L.h)}function Ee(L,D){var I=D>>5;D%=32;for(var U=L.g.length-I,$=[],X=0;X<U;X++)$[X]=0<D?L.i(X+I)>>>D|L.i(X+I+1)<<32-D:L.i(X+I);return new u($,L.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,PS=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Xa=u}).apply(typeof dN<"u"?dN:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LS,Iu,US,rf,Mx,VS,FS,BS;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,b,j){return f==Array.prototype||f==Object.prototype||(f[b]=j.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var b=0;b<f.length;++b){var j=f[b];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=t(this);function a(f,b){if(b)e:{var j=n;f=f.split(".");for(var E=0;E<f.length-1;E++){var Z=f[E];if(!(Z in j))break e;j=j[Z]}f=f[f.length-1],E=j[f],b=b(E),b!=E&&b!=null&&e(j,f,{configurable:!0,writable:!0,value:b})}}function l(f,b){f instanceof String&&(f+="");var j=0,E=!1,Z={next:function(){if(!E&&j<f.length){var ae=j++;return{value:b(ae,f[ae]),done:!1}}return E=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}a("Array.prototype.values",function(f){return f||function(){return l(this,function(b,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function g(f){var b=typeof f;return b=b!="object"?b:f?Array.isArray(f)?"array":b:"null",b=="array"||b=="object"&&typeof f.length=="number"}function p(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function y(f,b,j){return f.call.apply(f.bind,arguments)}function w(f,b,j){if(!f)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,E),f.apply(b,Z)}}return function(){return f.apply(b,arguments)}}function v(f,b,j){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:w,v.apply(null,arguments)}function A(f,b){var j=Array.prototype.slice.call(arguments,1);return function(){var E=j.slice();return E.push.apply(E,arguments),f.apply(this,E)}}function R(f,b){function j(){}j.prototype=b.prototype,f.aa=b.prototype,f.prototype=new j,f.prototype.constructor=f,f.Qb=function(E,Z,ae){for(var Ae=Array(arguments.length-2),It=2;It<arguments.length;It++)Ae[It-2]=arguments[It];return b.prototype[Z].apply(E,Ae)}}function z(f){const b=f.length;if(0<b){const j=Array(b);for(let E=0;E<b;E++)j[E]=f[E];return j}return[]}function q(f,b){for(let j=1;j<arguments.length;j++){const E=arguments[j];if(g(E)){const Z=f.length||0,ae=E.length||0;f.length=Z+ae;for(let Ae=0;Ae<ae;Ae++)f[Z+Ae]=E[Ae]}else f.push(E)}}class Q{constructor(b,j){this.i=b,this.j=j,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function pe(f){return/^[\s\xa0]*$/.test(f)}function ee(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function fe(f){return fe[" "](f),f}fe[" "]=function(){};var be=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function Ee(f,b,j){for(const E in f)b.call(j,f[E],E,f)}function L(f,b){for(const j in f)b.call(void 0,f[j],j,f)}function D(f){const b={};for(const j in f)b[j]=f[j];return b}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(f,b){let j,E;for(let Z=1;Z<arguments.length;Z++){E=arguments[Z];for(j in E)f[j]=E[j];for(let ae=0;ae<I.length;ae++)j=I[ae],Object.prototype.hasOwnProperty.call(E,j)&&(f[j]=E[j])}}function $(f){var b=1;f=f.split(":");const j=[];for(;0<b&&f.length;)j.push(f.shift()),b--;return f.length&&j.push(f.join(":")),j}function X(f){h.setTimeout(()=>{throw f},0)}function P(){var f=Le;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class zt{constructor(){this.h=this.g=null}add(b,j){const E=Rt.get();E.set(b,j),this.h?this.h.next=E:this.g=E,this.h=E}}var Rt=new Q(()=>new oe,f=>f.reset());class oe{constructor(){this.next=this.g=this.h=null}set(b,j){this.h=b,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,re=!1,Le=new zt,O=()=>{const f=h.Promise.resolve(void 0);Ce=()=>{f.then(le)}};var le=()=>{for(var f;f=P();){try{f.h.call(f.g)}catch(j){X(j)}var b=Rt;b.j(f),100>b.h&&(b.h++,f.next=b.g,b.g=f)}re=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const j=()=>{};h.addEventListener("test",j,b),h.removeEventListener("test",j,b)}catch{}return f}();function Ye(f,b){if(je.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var j=this.type=f.type,E=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget){if(be){e:{try{fe(b.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(b=null)}}else j=="mouseover"?b=f.fromElement:j=="mouseout"&&(b=f.toElement);this.relatedTarget=b,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Pe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ye.aa.h.call(this)}}R(Ye,je);var Pe={2:"touch",3:"pen",4:"mouse"};Ye.prototype.h=function(){Ye.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var hs="closure_listenable_"+(1e6*Math.random()|0),_t=0;function qt(f,b,j,E,Z){this.listener=f,this.proxy=null,this.src=b,this.type=j,this.capture=!!E,this.ha=Z,this.key=++_t,this.da=this.fa=!1}function jt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function en(f){this.src=f,this.g={},this.h=0}en.prototype.add=function(f,b,j,E,Z){var ae=f.toString();f=this.g[ae],f||(f=this.g[ae]=[],this.h++);var Ae=tn(f,b,E,Z);return-1<Ae?(b=f[Ae],j||(b.fa=!1)):(b=new qt(b,this.src,ae,!!E,Z),b.fa=j,f.push(b)),b};function Ps(f,b){var j=b.type;if(j in f.g){var E=f.g[j],Z=Array.prototype.indexOf.call(E,b,void 0),ae;(ae=0<=Z)&&Array.prototype.splice.call(E,Z,1),ae&&(jt(b),f.g[j].length==0&&(delete f.g[j],f.h--))}}function tn(f,b,j,E){for(var Z=0;Z<f.length;++Z){var ae=f[Z];if(!ae.da&&ae.listener==b&&ae.capture==!!j&&ae.ha==E)return Z}return-1}var nr="closure_lm_"+(1e6*Math.random()|0),Gn={};function ys(f,b,j,E,Z){if(Array.isArray(b)){for(var ae=0;ae<b.length;ae++)ys(f,b[ae],j,E,Z);return null}return j=xa(j),f&&f[hs]?f.K(b,j,p(E)?!!E.capture:!1,Z):$r(f,b,j,!1,E,Z)}function $r(f,b,j,E,Z,ae){if(!b)throw Error("Invalid event type");var Ae=p(Z)?!!Z.capture:!!Z,It=Mi(f);if(It||(f[nr]=It=new en(f)),j=It.add(b,j,E,Ae,ae),j.proxy)return j;if(E=qs(),j.proxy=E,E.src=f,E.listener=j,f.addEventListener)Te||(Z=Ae),Z===void 0&&(Z=!1),f.addEventListener(b.toString(),E,Z);else if(f.attachEvent)f.attachEvent(zr(b.toString()),E);else if(f.addListener&&f.removeListener)f.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return j}function qs(){function f(j){return b.call(f.src,f.listener,j)}const b=pa;return f}function ur(f,b,j,E,Z){if(Array.isArray(b))for(var ae=0;ae<b.length;ae++)ur(f,b[ae],j,E,Z);else E=p(E)?!!E.capture:!!E,j=xa(j),f&&f[hs]?(f=f.i,b=String(b).toString(),b in f.g&&(ae=f.g[b],j=tn(ae,j,E,Z),-1<j&&(jt(ae[j]),Array.prototype.splice.call(ae,j,1),ae.length==0&&(delete f.g[b],f.h--)))):f&&(f=Mi(f))&&(b=f.g[b.toString()],f=-1,b&&(f=tn(b,j,E,Z)),(j=-1<f?b[f]:null)&&li(j))}function li(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[hs])Ps(b.i,f);else{var j=f.type,E=f.proxy;b.removeEventListener?b.removeEventListener(j,E,f.capture):b.detachEvent?b.detachEvent(zr(j),E):b.addListener&&b.removeListener&&b.removeListener(E),(j=Mi(b))?(Ps(j,f),j.h==0&&(j.src=null,b[nr]=null)):jt(f)}}}function zr(f){return f in Gn?Gn[f]:Gn[f]="on"+f}function pa(f,b){if(f.da)f=!0;else{b=new Ye(b,this);var j=f.listener,E=f.ha||f.src;f.fa&&li(f),f=j.call(E,b)}return f}function Mi(f){return f=f[nr],f instanceof en?f:null}var $s="__closure_events_fn_"+(1e9*Math.random()>>>0);function xa(f){return typeof f=="function"?f:(f[$s]||(f[$s]=function(b){return f.handleEvent(b)}),f[$s])}function fs(){Re.call(this),this.i=new en(this),this.M=this,this.F=null}R(fs,Re),fs.prototype[hs]=!0,fs.prototype.removeEventListener=function(f,b,j,E){ur(this,f,b,j,E)};function Ls(f,b){var j,E=f.F;if(E)for(j=[];E;E=E.F)j.push(E);if(f=f.M,E=b.type||b,typeof b=="string")b=new je(b,f);else if(b instanceof je)b.target=b.target||f;else{var Z=b;b=new je(E,f),U(b,Z)}if(Z=!0,j)for(var ae=j.length-1;0<=ae;ae--){var Ae=b.g=j[ae];Z=Pn(Ae,E,!0,b)&&Z}if(Ae=b.g=f,Z=Pn(Ae,E,!0,b)&&Z,Z=Pn(Ae,E,!1,b)&&Z,j)for(ae=0;ae<j.length;ae++)Ae=b.g=j[ae],Z=Pn(Ae,E,!1,b)&&Z}fs.prototype.N=function(){if(fs.aa.N.call(this),this.i){var f=this.i,b;for(b in f.g){for(var j=f.g[b],E=0;E<j.length;E++)jt(j[E]);delete f.g[b],f.h--}}this.F=null},fs.prototype.K=function(f,b,j,E){return this.i.add(String(f),b,!1,j,E)},fs.prototype.L=function(f,b,j,E){return this.i.add(String(f),b,!0,j,E)};function Pn(f,b,j,E){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();for(var Z=!0,ae=0;ae<b.length;++ae){var Ae=b[ae];if(Ae&&!Ae.da&&Ae.capture==j){var It=Ae.listener,sn=Ae.ha||Ae.src;Ae.fa&&Ps(f.i,Ae),Z=It.call(sn,E)!==!1&&Z}}return Z&&!E.defaultPrevented}function Hr(f,b,j){if(typeof f=="function")j&&(f=v(f,j));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:h.setTimeout(f,b||0)}function ns(f){f.g=Hr(()=>{f.g=null,f.i&&(f.i=!1,ns(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class ya extends Re{constructor(b,j){super(),this.m=b,this.l=j,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:ns(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(f){Re.call(this),this.h=f,this.g={}}R(_s,Re);var Wt=[];function Ft(f){Ee(f.g,function(b,j){this.g.hasOwnProperty(j)&&li(b)},f),f.g={}}_s.prototype.N=function(){_s.aa.N.call(this),Ft(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tt=h.JSON.stringify,Ot=h.JSON.parse,Us=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function vs(){}vs.prototype.h=null;function ci(f){return f.h||(f.h=f.i())}function Oi(){}var rs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function is(){je.call(this,"d")}R(is,je);function hn(){je.call(this,"c")}R(hn,je);var Ke={},Ht=null;function Ve(){return Ht=Ht||new fs}Ke.La="serverreachability";function fn(f){je.call(this,Ke.La,f)}R(fn,je);function jn(f){const b=Ve();Ls(b,new fn(b))}Ke.STAT_EVENT="statevent";function Qe(f,b){je.call(this,Ke.STAT_EVENT,f),this.stat=b}R(Qe,je);function Zt(f){const b=Ve();Ls(b,new Qe(b,f))}Ke.Ma="timingevent";function Gr(f,b){je.call(this,Ke.Ma,f),this.size=b}R(Gr,je);function Yt(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},b)}function Nr(){this.g=!0}Nr.prototype.xa=function(){this.g=!1};function Pi(f,b,j,E,Z,ae){f.info(function(){if(f.g)if(ae)for(var Ae="",It=ae.split("&"),sn=0;sn<It.length;sn++){var Dt=It[sn].split("=");if(1<Dt.length){var xn=Dt[0];Dt=Dt[1];var nn=xn.split("_");Ae=2<=nn.length&&nn[1]=="type"?Ae+(xn+"="+Dt+"&"):Ae+(xn+"=redacted&")}}else Ae=null;else Ae=ae;return"XMLHTTP REQ ("+E+") [attempt "+Z+"]: "+b+`
`+j+`
`+Ae})}function Li(f,b,j,E,Z,ae,Ae){f.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+Z+"]: "+b+`
`+j+`
`+ae+" "+Ae})}function qe(f,b,j,E){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+ws(f,j)+(E?" "+E:"")})}function Wn(f,b){f.info(function(){return"TIMEOUT: "+b})}Nr.prototype.info=function(){};function ws(f,b){if(!f.g)return b;if(!b)return null;try{var j=JSON.parse(b);if(j){for(f=0;f<j.length;f++)if(Array.isArray(j[f])){var E=j[f];if(!(2>E.length)){var Z=E[1];if(Array.isArray(Z)&&!(1>Z.length)){var ae=Z[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var Ae=1;Ae<Z.length;Ae++)Z[Ae]=""}}}}return tt(j)}catch{return b}}var ft={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zs;function jr(){}R(jr,vs),jr.prototype.g=function(){return new XMLHttpRequest},jr.prototype.i=function(){return{}},zs=new jr;function rr(f,b,j,E){this.j=f,this.i=b,this.l=j,this.R=E||1,this.U=new _s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wr}function Wr(){this.i=null,this.g="",this.h=!1}var Tr={},ms={};function Et(f,b,j){f.L=1,f.v=ie(es(b)),f.m=j,f.P=!0,mn(f,null)}function mn(f,b){f.F=Date.now(),Kt(f),f.A=es(f.v);var j=f.A,E=f.R;Array.isArray(E)||(E=[String(E)]),gs(j.i,"t",E),f.C=0,j=f.j.J,f.h=new Wr,f.g=Bd(f.j,j?b:null,!f.m),0<f.O&&(f.M=new ya(v(f.Y,f,f.g),f.O)),b=f.U,j=f.g,E=f.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(Wt[0]=Z.toString()),Z=Wt);for(var ae=0;ae<Z.length;ae++){var Ae=ys(j,Z[ae],E||b.handleEvent,!1,b.h||b);if(!Ae)break;b.g[Ae.key]=Ae}b=f.H?D(f.H):{},f.m?(f.u||(f.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,b)):(f.u="GET",f.g.ea(f.A,f.u,null,b)),jn(),Pi(f.i,f.u,f.A,f.l,f.R,f.m)}rr.prototype.ca=function(f){f=f.target;const b=this.M;b&&Qt(f)==3?b.j():this.Y(f)},rr.prototype.Y=function(f){try{if(f==this.g)e:{const nn=Qt(this.g);var b=this.g.Ba();const Bi=this.g.Z();if(!(3>nn)&&(nn!=3||this.g&&(this.h.h||this.g.oa()||mr(this.g)))){this.J||nn!=4||b==7||(b==8||0>=Bi?jn(3):jn(2)),di(this);var j=this.g.Z();this.X=j;t:if(Ns(this)){var E=mr(this.g);f="";var Z=E.length,ae=Qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){js(this),Rs(this);var Ae="";break t}this.h.i=new h.TextDecoder}for(b=0;b<Z;b++)this.h.h=!0,f+=this.h.i.decode(E[b],{stream:!(ae&&b==Z-1)});E.length=0,this.h.g+=f,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=j==200,Li(this.i,this.u,this.A,this.l,this.R,nn,j),this.o){if(this.T&&!this.K){t:{if(this.g){var It,sn=this.g;if((It=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pe(It)){var Dt=It;break t}}Dt=null}if(j=Dt)qe(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tn(this,j);else{this.o=!1,this.s=3,Zt(12),js(this),Rs(this);break e}}if(this.P){j=!0;let En;for(;!this.J&&this.C<Ae.length;)if(En=Yn(this,Ae),En==ms){nn==4&&(this.s=4,Zt(14),j=!1),qe(this.i,this.l,null,"[Incomplete Response]");break}else if(En==Tr){this.s=4,Zt(15),qe(this.i,this.l,Ae,"[Invalid Chunk]"),j=!1;break}else qe(this.i,this.l,En,null),Tn(this,En);if(Ns(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nn!=4||Ae.length!=0||this.h.h||(this.s=1,Zt(16),j=!1),this.o=this.o&&j,!j)qe(this.i,this.l,Ae,"[Invalid Chunked Response]"),js(this),Rs(this);else if(0<Ae.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),yo(xn),xn.M=!0,Zt(11))}}else qe(this.i,this.l,Ae,null),Tn(this,Ae);nn==4&&js(this),this.o&&!this.J&&(nn==4?Ud(this.j,this):(this.o=!1,Kt(this)))}else Qn(this.g),j==400&&0<Ae.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),js(this),Rs(this)}}}catch{}finally{}};function Ns(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Yn(f,b){var j=f.C,E=b.indexOf(`
`,j);return E==-1?ms:(j=Number(b.substring(j,E)),isNaN(j)?Tr:(E+=1,E+j>b.length?ms:(b=b.slice(E,E+j),f.C=E+j,b)))}rr.prototype.cancel=function(){this.J=!0,js(this)};function Kt(f){f.S=Date.now()+f.I,ui(f,f.I)}function ui(f,b){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Yt(v(f.ba,f),b)}function di(f){f.B&&(h.clearTimeout(f.B),f.B=null)}rr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Wn(this.i,this.A),this.L!=2&&(jn(),Zt(17)),js(this),this.s=2,Rs(this)):ui(this,this.S-f)};function Rs(f){f.j.G==0||f.J||Ud(f.j,f)}function js(f){di(f);var b=f.M;b&&typeof b.ma=="function"&&b.ma(),f.M=null,Ft(f.U),f.g&&(b=f.g,f.g=null,b.abort(),b.ma())}function Tn(f,b){try{var j=f.j;if(j.G!=0&&(j.g==f||ir(j.h,f))){if(!f.K&&ir(j.h,f)&&j.G==3){try{var E=j.Da.g.parse(b)}catch{E=null}if(Array.isArray(E)&&E.length==3){var Z=E;if(Z[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<f.F)fl(j),gr(j);else break e;Lc(j),Zt(18)}}else j.za=Z[1],0<j.za-j.T&&37500>Z[2]&&j.F&&j.v==0&&!j.C&&(j.C=Yt(v(j.Za,j),6e3));if(1>=Sr(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Fi(j,11)}else if((f.K||j.g==f)&&fl(j),!pe(b))for(Z=j.Da.g.parse(b),b=0;b<Z.length;b++){let Dt=Z[b];if(j.T=Dt[0],Dt=Dt[1],j.G==2)if(Dt[0]=="c"){j.K=Dt[1],j.ia=Dt[2];const xn=Dt[3];xn!=null&&(j.la=xn,j.j.info("VER="+j.la));const nn=Dt[4];nn!=null&&(j.Aa=nn,j.j.info("SVER="+j.Aa));const Bi=Dt[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(E=1.5*Bi,j.L=E,j.j.info("backChannelRequestTimeoutMs_="+E)),E=j;const En=f.g;if(En){const pi=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pi){var ae=E.h;ae.g||pi.indexOf("spdy")==-1&&pi.indexOf("quic")==-1&&pi.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Er(ae,ae.h),ae.h=null))}if(E.D){const Vc=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Vc&&(E.ya=Vc,B(E.I,E.D,Vc))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-f.F,j.j.info("Handshake RTT: "+j.R+"ms")),E=j;var Ae=f;if(E.qa=Fd(E,E.J?E.ia:null,E.W),Ae.K){Sn(E.h,Ae);var It=Ae,sn=E.L;sn&&(It.I=sn),It.B&&(di(It),Kt(It)),E.g=Ae}else Pd(E);0<j.i.length&&va(j)}else Dt[0]!="stop"&&Dt[0]!="close"||Fi(j,7);else j.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Fi(j,7):pn(j):Dt[0]!="noop"&&j.l&&j.l.ta(Dt),j.v=0)}}jn(4)}catch{}}var hr=class{constructor(f,b){this.g=f,this.map=b}};function hi(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fi(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Sr(f){return f.h?1:f.g?f.g.size:0}function ir(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function Er(f,b){f.g?f.g.add(b):f.h=b}function Sn(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}hi.prototype.cancel=function(){if(this.i=Pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Pt(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const j of f.g.values())b=b.concat(j.D);return b}return z(f.i)}function Yr(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(g(f)){for(var b=[],j=f.length,E=0;E<j;E++)b.push(f[E]);return b}b=[],j=0;for(E in f)b[j++]=f[E];return b}function Ar(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(g(f)||typeof f=="string"){var b=[];f=f.length;for(var j=0;j<f;j++)b.push(j);return b}b=[],j=0;for(const E in f)b[j++]=E;return b}}}function fr(f,b){if(f.forEach&&typeof f.forEach=="function")f.forEach(b,void 0);else if(g(f)||typeof f=="string")Array.prototype.forEach.call(f,b,void 0);else for(var j=Ar(f),E=Yr(f),Z=E.length,ae=0;ae<Z;ae++)b.call(void 0,E[ae],j&&j[ae],f)}var Kn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kr(f,b){if(f){f=f.split("&");for(var j=0;j<f.length;j++){var E=f[j].indexOf("="),Z=null;if(0<=E){var ae=f[j].substring(0,E);Z=f[j].substring(E+1)}else ae=f[j];b(ae,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Ln(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ln){this.h=f.h,N(this,f.j),this.o=f.o,this.g=f.g,F(this,f.s),this.l=f.l;var b=f.i,j=new ht;j.i=b.i,b.g&&(j.g=new Map(b.g),j.h=b.h),Y(this,j),this.m=f.m}else f&&(b=String(f).match(Kn))?(this.h=!1,N(this,b[1]||"",!0),this.o=de(b[2]||""),this.g=de(b[3]||"",!0),F(this,b[4]),this.l=de(b[5]||"",!0),Y(this,b[6]||"",!0),this.m=de(b[7]||"")):(this.h=!1,this.i=new ht(null,this.h))}Ln.prototype.toString=function(){var f=[],b=this.j;b&&f.push(ce(b,Xe,!0),":");var j=this.g;return(j||b=="file")&&(f.push("//"),(b=this.o)&&f.push(ce(b,Xe,!0),"@"),f.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&f.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&f.push("/"),f.push(ce(j,j.charAt(0)=="/"?it:$e,!0))),(j=this.i.toString())&&f.push("?",j),(j=this.m)&&f.push("#",ce(j,bs)),f.join("")};function es(f){return new Ln(f)}function N(f,b,j){f.j=j?de(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function F(f,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);f.s=b}else f.s=null}function Y(f,b,j){b instanceof ht?(f.i=b,C(f.i,f.h)):(j||(b=ce(b,Bt)),f.i=new ht(b,f.h))}function B(f,b,j){f.i.set(b,j)}function ie(f){return B(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function de(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ce(f,b,j){return typeof f=="string"?(f=encodeURI(f).replace(b,Se),j&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Se(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Xe=/[#\/\?@]/g,$e=/[#\?:]/g,it=/[#\?]/g,Bt=/[#\?@]/g,bs=/#/g;function ht(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function at(f){f.g||(f.g=new Map,f.h=0,f.i&&Kr(f.i,function(b,j){f.add(decodeURIComponent(b.replace(/\+/g," ")),j)}))}s=ht.prototype,s.add=function(f,b){at(this),this.i=null,f=_(this,f);var j=this.g.get(f);return j||this.g.set(f,j=[]),j.push(b),this.h+=1,this};function ct(f,b){at(f),b=_(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function ot(f,b){return at(f),b=_(f,b),f.g.has(b)}s.forEach=function(f,b){at(this),this.g.forEach(function(j,E){j.forEach(function(Z){f.call(b,Z,E,this)},this)},this)},s.na=function(){at(this);const f=Array.from(this.g.values()),b=Array.from(this.g.keys()),j=[];for(let E=0;E<b.length;E++){const Z=f[E];for(let ae=0;ae<Z.length;ae++)j.push(b[E])}return j},s.V=function(f){at(this);let b=[];if(typeof f=="string")ot(this,f)&&(b=b.concat(this.g.get(_(this,f))));else{f=Array.from(this.g.values());for(let j=0;j<f.length;j++)b=b.concat(f[j])}return b},s.set=function(f,b){return at(this),this.i=null,f=_(this,f),ot(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},s.get=function(f,b){return f?(f=this.V(f),0<f.length?String(f[0]):b):b};function gs(f,b,j){ct(f,b),0<j.length&&(f.i=null,f.g.set(_(f,b),z(j)),f.h+=j.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(var j=0;j<b.length;j++){var E=b[j];const ae=encodeURIComponent(String(E)),Ae=this.V(E);for(E=0;E<Ae.length;E++){var Z=ae;Ae[E]!==""&&(Z+="="+encodeURIComponent(String(Ae[E]))),f.push(Z)}}return this.i=f.join("&")};function _(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function C(f,b){b&&!f.j&&(at(f),f.i=null,f.g.forEach(function(j,E){var Z=E.toLowerCase();E!=Z&&(ct(this,E),gs(this,Z,j))},f)),f.j=b}function V(f,b){const j=new Nr;if(h.Image){const E=new Image;E.onload=A(G,j,"TestLoadImage: loaded",!0,b,E),E.onerror=A(G,j,"TestLoadImage: error",!1,b,E),E.onabort=A(G,j,"TestLoadImage: abort",!1,b,E),E.ontimeout=A(G,j,"TestLoadImage: timeout",!1,b,E),h.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=f}else b(!1)}function k(f,b){const j=new Nr,E=new AbortController,Z=setTimeout(()=>{E.abort(),G(j,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:E.signal}).then(ae=>{clearTimeout(Z),ae.ok?G(j,"TestPingServer: ok",!0,b):G(j,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Z),G(j,"TestPingServer: error",!1,b)})}function G(f,b,j,E,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),E(j)}catch{}}function se(){this.g=new Us}function ue(f,b,j){const E=j||"";try{fr(f,function(Z,ae){let Ae=Z;p(Z)&&(Ae=tt(Z)),b.push(E+ae+"="+encodeURIComponent(Ae))})}catch(Z){throw b.push(E+"type="+encodeURIComponent("_badmap")),Z}}function _e(f){this.l=f.Ub||null,this.j=f.eb||!1}R(_e,vs),_e.prototype.g=function(){return new Ne(this.l,this.j)},_e.prototype.i=function(f){return function(){return f}}({});function Ne(f,b){fs.call(this),this.D=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Ne,fs),s=Ne.prototype,s.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=b,this.readyState=1,ut(this)},s.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(b.body=f),(this.D||h).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mt(this)),this.readyState=0},s.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ut(this)),this.g&&(this.readyState=3,ut(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;We(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function We(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}s.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?mt(this):ut(this),this.readyState==3&&We(this)}},s.Ra=function(f){this.g&&(this.response=this.responseText=f,mt(this))},s.Qa=function(f){this.g&&(this.response=f,mt(this))},s.ga=function(){this.g&&mt(this)};function mt(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ut(f)}s.setRequestHeader=function(f,b){this.u.append(f,b)},s.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var j=b.next();!j.done;)j=j.value,f.push(j[0]+": "+j[1]),j=b.next();return f.join(`\r
`)};function ut(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ne.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ze(f){let b="";return Ee(f,function(j,E){b+=E,b+=":",b+=j,b+=`\r
`}),b}function ke(f,b,j){e:{for(E in j){var E=!1;break e}E=!0}E||(j=ze(j),typeof f=="string"?j!=null&&encodeURIComponent(String(j)):B(f,b,j))}function Ie(f){fs.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ie,fs);var Me=/^https?$/i,Fe=["POST","PUT"];s=Ie.prototype,s.Ha=function(f){this.J=f},s.ea=function(f,b,j,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zs.g(),this.v=this.o?ci(this.o):ci(zs),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(ae){gt(this,ae);return}if(f=j||"",j=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var Z in E)j.set(Z,E[Z]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const ae of E.keys())j.set(ae,E.get(ae));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(j.keys()).find(ae=>ae.toLowerCase()=="content-type"),Z=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Fe,b,void 0))||E||Z||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Ae]of j)this.g.setRequestHeader(ae,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gn(this),this.u=!0,this.g.send(f),this.u=!1}catch(ae){gt(this,ae)}};function gt(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.m=5,ts(f),Ts(f)}function ts(f){f.A||(f.A=!0,Ls(f,"complete"),Ls(f,"error"))}s.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ls(this,"complete"),Ls(this,"abort"),Ts(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),Ie.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Vs(this):this.bb())},s.bb=function(){Vs(this)};function Vs(f){if(f.h&&typeof u<"u"&&(!f.v[1]||Qt(f)!=4||f.Z()!=2)){if(f.u&&Qt(f)==4)Hr(f.Ea,0,f);else if(Ls(f,"readystatechange"),Qt(f)==4){f.h=!1;try{const Ae=f.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var j;if(!(j=b)){var E;if(E=Ae===0){var Z=String(f.D).match(Kn)[1]||null;!Z&&h.self&&h.self.location&&(Z=h.self.location.protocol.slice(0,-1)),E=!Me.test(Z?Z.toLowerCase():"")}j=E}if(j)Ls(f,"complete"),Ls(f,"success");else{f.m=6;try{var ae=2<Qt(f)?f.g.statusText:""}catch{ae=""}f.l=ae+" ["+f.Z()+"]",ts(f)}}finally{Ts(f)}}}}function Ts(f,b){if(f.g){gn(f);const j=f.g,E=f.v[0]?()=>{}:null;f.g=null,f.v=null,b||Ls(f,"ready");try{j.onreadystatechange=E}catch{}}}function gn(f){f.I&&(h.clearTimeout(f.I),f.I=null)}s.isActive=function(){return!!this.g};function Qt(f){return f.g?f.g.readyState:0}s.Z=function(){try{return 2<Qt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),Ot(b)}};function mr(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Qn(f){const b={};f=(f.g&&2<=Qt(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<f.length;E++){if(pe(f[E]))continue;var j=$(f[E]);const Z=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const ae=b[Z]||[];b[Z]=ae,ae.push(j)}L(b,function(E){return E.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Un(f,b,j){return j&&j.internalChannelParams&&j.internalChannelParams[f]||b}function Is(f){this.Aa=0,this.i=[],this.j=new Nr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Un("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Un("baseRetryDelayMs",5e3,f),this.cb=Un("retryDelaySeedMs",1e4,f),this.Wa=Un("forwardChannelMaxRetries",2,f),this.wa=Un("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new hi(f&&f.concurrentRequestLimit),this.Da=new se,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Is.prototype,s.la=8,s.G=1,s.connect=function(f,b,j,E){Zt(0),this.W=f,this.H=b||{},j&&E!==void 0&&(this.H.OSID=j,this.H.OAID=E),this.F=this.X,this.I=Fd(this,null,this.W),va(this)};function pn(f){if(Ui(f),f.G==3){var b=f.U++,j=es(f.I);if(B(j,"SID",f.K),B(j,"RID",b),B(j,"TYPE","terminate"),Vi(f,j),b=new rr(f,f.j,b),b.L=2,b.v=ie(es(j)),j=!1,h.navigator&&h.navigator.sendBeacon)try{j=h.navigator.sendBeacon(b.v.toString(),"")}catch{}!j&&h.Image&&(new Image().src=b.v,j=!0),j||(b.g=Bd(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Kt(b)}Vd(f)}function gr(f){f.g&&(yo(f),f.g.cancel(),f.g=null)}function Ui(f){gr(f),f.u&&(h.clearTimeout(f.u),f.u=null),fl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function va(f){if(!fi(f.h)&&!f.s){f.s=!0;var b=f.Ga;Ce||O(),re||(Ce(),re=!0),Le.add(b,f),f.B=0}}function Pc(f,b){return Sr(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=b.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Yt(v(f.Ga,f,b),Uc(f,f.B)),f.B++,!0)}s.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Z=new rr(this,this.j,f);let ae=this.o;if(this.S&&(ae?(ae=D(ae),U(ae,this.S)):ae=this.S),this.m!==null||this.O||(Z.H=ae,ae=null),this.P)e:{for(var b=0,j=0;j<this.i.length;j++){t:{var E=this.i[j];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(b+=E,4096<b){b=j;break e}if(b===4096||j===this.i.length-1){b=j+1;break e}}b=1e3}else b=1e3;b=hl(this,Z,b),j=es(this.I),B(j,"RID",f),B(j,"CVER",22),this.D&&B(j,"X-HTTP-Session-Id",this.D),Vi(this,j),ae&&(this.O?b="headers="+encodeURIComponent(String(ze(ae)))+"&"+b:this.m&&ke(j,this.m,ae)),Er(this.h,Z),this.Ua&&B(j,"TYPE","init"),this.P?(B(j,"$req",b),B(j,"SID","null"),Z.T=!0,Et(Z,j,null)):Et(Z,j,b),this.G=2}}else this.G==3&&(f?mi(this,f):this.i.length==0||fi(this.h)||mi(this))};function mi(f,b){var j;b?j=b.l:j=f.U++;const E=es(f.I);B(E,"SID",f.K),B(E,"RID",j),B(E,"AID",f.T),Vi(f,E),f.m&&f.o&&ke(E,f.m,f.o),j=new rr(f,f.j,j,f.B+1),f.m===null&&(j.H=f.o),b&&(f.i=b.D.concat(f.i)),b=hl(f,j,1e3),j.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Er(f.h,j),Et(j,E,b)}function Vi(f,b){f.H&&Ee(f.H,function(j,E){B(b,E,j)}),f.l&&fr({},function(j,E){B(b,E,j)})}function hl(f,b,j){j=Math.min(f.i.length,j);var E=f.l?v(f.l.Na,f.l,f):null;e:{var Z=f.i;let ae=-1;for(;;){const Ae=["count="+j];ae==-1?0<j?(ae=Z[0].g,Ae.push("ofs="+ae)):ae=0:Ae.push("ofs="+ae);let It=!0;for(let sn=0;sn<j;sn++){let Dt=Z[sn].g;const xn=Z[sn].map;if(Dt-=ae,0>Dt)ae=Math.max(0,Z[sn].g-100),It=!1;else try{ue(xn,Ae,"req"+Dt+"_")}catch{E&&E(xn)}}if(It){E=Ae.join("&");break e}}}return f=f.i.splice(0,j),b.D=f,E}function Pd(f){if(!f.g&&!f.u){f.Y=1;var b=f.Fa;Ce||O(),re||(Ce(),re=!0),Le.add(b,f),f.v=0}}function Lc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Yt(v(f.Fa,f),Uc(f,f.v)),f.v++,!0)}s.Fa=function(){if(this.u=null,Ld(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Yt(v(this.ab,this),f)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),gr(this),Ld(this))};function yo(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Ld(f){f.g=new rr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var b=es(f.qa);B(b,"RID","rpc"),B(b,"SID",f.K),B(b,"AID",f.T),B(b,"CI",f.F?"0":"1"),!f.F&&f.ja&&B(b,"TO",f.ja),B(b,"TYPE","xmlhttp"),Vi(f,b),f.m&&f.o&&ke(b,f.m,f.o),f.L&&(f.g.I=f.L);var j=f.g;f=f.ia,j.L=1,j.v=ie(es(b)),j.m=null,j.P=!0,mn(j,f)}s.Za=function(){this.C!=null&&(this.C=null,gr(this),Lc(this),Zt(19))};function fl(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Ud(f,b){var j=null;if(f.g==b){fl(f),yo(f),f.g=null;var E=2}else if(ir(f.h,b))j=b.D,Sn(f.h,b),E=1;else return;if(f.G!=0){if(b.o)if(E==1){j=b.m?b.m.length:0,b=Date.now()-b.F;var Z=f.B;E=Ve(),Ls(E,new Gr(E,j)),va(f)}else Pd(f);else if(Z=b.s,Z==3||Z==0&&0<b.X||!(E==1&&Pc(f,b)||E==2&&Lc(f)))switch(j&&0<j.length&&(b=f.h,b.i=b.i.concat(j)),Z){case 1:Fi(f,5);break;case 4:Fi(f,10);break;case 3:Fi(f,6);break;default:Fi(f,2)}}}function Uc(f,b){let j=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(j*=2),j*b}function Fi(f,b){if(f.j.info("Error code "+b),b==2){var j=v(f.fb,f),E=f.Xa;const Z=!E;E=new Ln(E||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||N(E,"https"),ie(E),Z?V(E.toString(),j):k(E.toString(),j)}else Zt(2);f.G=0,f.l&&f.l.sa(b),Vd(f),Ui(f)}s.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function Vd(f){if(f.G=0,f.ka=[],f.l){const b=Pt(f.h);(b.length!=0||f.i.length!=0)&&(q(f.ka,b),q(f.ka,f.i),f.h.i.length=0,z(f.i),f.i.length=0),f.l.ra()}}function Fd(f,b,j){var E=j instanceof Ln?es(j):new Ln(j);if(E.g!="")b&&(E.g=b+"."+E.g),F(E,E.s);else{var Z=h.location;E=Z.protocol,b=b?b+"."+Z.hostname:Z.hostname,Z=+Z.port;var ae=new Ln(null);E&&N(ae,E),b&&(ae.g=b),Z&&F(ae,Z),j&&(ae.l=j),E=ae}return j=f.D,b=f.ya,j&&b&&B(E,j,b),B(E,"VER",f.la),Vi(f,E),E}function Bd(f,b,j){if(b&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Ca&&!f.pa?new Ie(new _e({eb:j})):new Ie(f.pa),b.Ha(f.J),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function qd(){}s=qd.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ml(){}ml.prototype.g=function(f,b){return new Xn(f,b)};function Xn(f,b){fs.call(this),this.g=new Is(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(f?f["X-WebChannel-Client-Profile"]=b.va:f={"X-WebChannel-Client-Profile":b.va}),this.g.S=f,(f=b&&b.Sb)&&!pe(f)&&(this.g.m=f),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!pe(b)&&(this.g.D=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new gi(this)}R(Xn,fs),Xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){pn(this.g)},Xn.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var j={};j.__data__=f,f=j}else this.u&&(j={},j.__data__=tt(f),f=j);b.i.push(new hr(b.Ya++,f)),b.G==3&&va(b)},Xn.prototype.N=function(){this.g.l=null,delete this.j,pn(this.g),delete this.g,Xn.aa.N.call(this)};function $d(f){is.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const j in b){f=j;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}R($d,is);function zd(){hn.call(this),this.status=1}R(zd,hn);function gi(f){this.g=f}R(gi,qd),gi.prototype.ua=function(){Ls(this.g,"a")},gi.prototype.ta=function(f){Ls(this.g,new $d(f))},gi.prototype.sa=function(f){Ls(this.g,new zd)},gi.prototype.ra=function(){Ls(this.g,"b")},ml.prototype.createWebChannel=ml.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,BS=function(){return new ml},FS=function(){return Ve()},VS=Ke,Mx={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ft.NO_ERROR=0,ft.TIMEOUT=8,ft.HTTP_ERROR=6,rf=ft,dr.COMPLETE="complete",US=dr,Oi.EventType=rs,rs.OPEN="a",rs.CLOSE="b",rs.ERROR="c",rs.MESSAGE="d",fs.prototype.listen=fs.prototype.K,Iu=Oi,Ie.prototype.listenOnce=Ie.prototype.L,Ie.prototype.getLastError=Ie.prototype.Ka,Ie.prototype.getLastErrorCode=Ie.prototype.Ba,Ie.prototype.getStatus=Ie.prototype.Z,Ie.prototype.getResponseJson=Ie.prototype.Oa,Ie.prototype.getResponseText=Ie.prototype.oa,Ie.prototype.send=Ie.prototype.ea,Ie.prototype.setWithCredentials=Ie.prototype.Ha,LS=Ie}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});const hN="@firebase/firestore",fN="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new y0("@firebase/firestore");function Jl(){return el.logLevel}function Oe(s,...e){if(el.logLevel<=Ct.DEBUG){const t=e.map(ny);el.debug(`Firestore (${Rc}): ${s}`,...t)}}function da(s,...e){if(el.logLevel<=Ct.ERROR){const t=e.map(ny);el.error(`Firestore (${Rc}): ${s}`,...t)}}function xc(s,...e){if(el.logLevel<=Ct.WARN){const t=e.map(ny);el.warn(`Firestore (${Rc}): ${s}`,...t)}}function ny(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(s,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,qS(s,n,t)}function qS(s,e,t){let n=`FIRESTORE (${Rc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw da(n),new Error(n)}function $t(s,e,t,n){let a="Unexpected state";typeof t=="string"?a=t:n=t,s||qS(e,a,n)}function rt(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends ma{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qn.UNAUTHENTICATED))}shutdown(){}}class y3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class v3{constructor(e){this.t=e,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$t(this.o===void 0,42304);let n=this.i;const a=g=>this.i!==n?(n=this.i,t(g)):Promise.resolve();let l=new Yo;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Yo,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},h=g=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(g=>h(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Yo)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?($t(typeof n.accessToken=="string",31837,{l:n}),new $S(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $t(e===null||typeof e=="string",2055,{h:e}),new qn(e)}}class b3{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _3{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new b3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(qn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nm(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$t(this.o===void 0,3512);const n=l=>{l.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Oe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>n(l))};const a=l=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<s;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=N3(40);for(let l=0;l<a.length;++l)n.length<20&&a[l]<t&&(n+=e.charAt(a[l]%62))}return n}}function Tt(s,e){return s<e?-1:s>e?1:0}function Ox(s,e){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++){const a=s.charAt(n),l=e.charAt(n);if(a!==l)return Kp(a)===Kp(l)?Tt(a,l):Kp(a)?1:-1}return Tt(s.length,e.length)}const j3=55296,T3=57343;function Kp(s){const e=s.charCodeAt(0);return e>=j3&&e<=T3}function yc(s,e,t){return s.length===e.length&&s.every((n,a)=>t(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="__name__";class Ni{constructor(e,t,n){t===void 0?t=0:t>e.length&&et(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&et(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let a=0;a<n;a++){const l=Ni.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Tt(e.length,t.length)}static compareSegments(e,t){const n=Ni.isNumericId(e),a=Ni.isNumericId(t);return n&&!a?-1:!n&&a?1:n&&a?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):Ox(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xa.fromString(e.substring(4,e.length-2))}}class ds extends Ni{construct(e,t,n){return new ds(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new De(ge.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(a=>a.length>0))}return new ds(t)}static emptyPath(){return new ds([])}}const S3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends Ni{construct(e,t,n){return new kn(e,t,n)}static isValidIdentifier(e){return S3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gN}static keyField(){return new kn([gN])}static fromServerFormat(e){const t=[];let n="",a=0;const l=()=>{if(n.length===0)throw new De(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new De(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new De(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=g,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(n+=h,a++):(l(),a++)}if(l(),u)throw new De(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(t)}static emptyPath(){return new kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(ds.fromString(e))}static fromName(e){return new Ge(ds.fromString(e).popFirst(5))}static empty(){return new Ge(ds.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ds.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ds.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new ds(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(s,e,t){if(!t)throw new De(ge.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function E3(s,e,t,n){if(e===!0&&n===!0)throw new De(ge.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function pN(s){if(!Ge.isDocumentKey(s))throw new De(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function xN(s){if(Ge.isDocumentKey(s))throw new De(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function HS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function bm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":et(12329,{type:typeof s})}function Ko(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new De(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bm(s);throw new De(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(s,e){const t={typeString:s};return e&&(t.value=e),t}function Ad(s,e){if(!HS(s))throw new De(ge.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const a=e[n].typeString,l="value"in e[n]?{value:e[n].value}:void 0;if(!(n in s)){t=`JSON missing required field: '${n}'`;break}const u=s[n];if(a&&typeof u!==a){t=`JSON field '${n}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${n}' field to equal '${l.value}'`;break}}if(t)throw new De(ge.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=-62135596800,vN=1e6;class ps{static now(){return ps.fromMillis(Date.now())}static fromDate(e){return ps.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*vN);return new ps(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yN)throw new De(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vN}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ps._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ad(e,ps._jsonSchema))return new ps(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ps._jsonSchemaVersion="firestore/timestamp/1.0",ps._jsonSchema={type:Js("string",ps._jsonSchemaVersion),seconds:Js("number"),nanoseconds:Js("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{static fromTimestamp(e){return new st(e)}static min(){return new st(new ps(0,0))}static max(){return new st(new ps(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=-1;function A3(s,e){const t=s.toTimestamp().seconds,n=s.toTimestamp().nanoseconds+1,a=st.fromTimestamp(n===1e9?new ps(t+1,0):new ps(t,n));return new ao(a,Ge.empty(),e)}function C3(s){return new ao(s.readTime,s.key,ad)}class ao{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ao(st.min(),Ge.empty(),ad)}static max(){return new ao(st.max(),Ge.empty(),ad)}}function R3(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ge.comparator(s.documentKey,e.documentKey),t!==0?t:Tt(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(s){if(s.code!==ge.FAILED_PRECONDITION||s.message!==I3)throw s;Oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye((n,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(n,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(n,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.reject(t)}static resolve(e){return new ye((t,n)=>{t(e)})}static reject(e){return new ye((t,n)=>{n(e)})}static waitFor(e){return new ye((t,n)=>{let a=0,l=0,u=!1;e.forEach(h=>{++a,h.next(()=>{++l,u&&l===a&&t()},g=>n(g))}),u=!0,l===a&&t()})}static or(e){let t=ye.resolve(!1);for(const n of e)t=t.next(a=>a?ye.resolve(a):n());return t}static forEach(e,t){const n=[];return e.forEach((a,l)=>{n.push(t.call(this,a,l))}),this.waitFor(n)}static mapArray(e,t){return new ye((n,a)=>{const l=e.length,u=new Array(l);let h=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next(y=>{u[p]=y,++h,h===l&&n(u)},y=>a(y))}})}static doWhile(e,t){return new ye((n,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):n()};l()})}}function k3(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Dc(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_m.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=-1;function wm(s){return s==null}function Rf(s){return s===0&&1/s==-1/0}function M3(s){return typeof s=="number"&&Number.isInteger(s)&&!Rf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="";function O3(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=bN(e)),e=P3(s.get(t),e);return bN(e)}function P3(s,e){let t=e;const n=s.length;for(let a=0;a<n;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case GS:t+="";break;default:t+=l}}return t}function bN(s){return s+GS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function go(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function WS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new Cs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Cs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return t+n.left.size;a<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gh(this.root,e,this.comparator,!0)}}class Gh{constructor(e,t,n,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?n(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,n,a,l){this.key=e,this.value=t,this.color=n??In.RED,this.left=a??In.EMPTY,this.right=l??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,a,l){return new In(e??this.key,t??this.value,n??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let a=this;const l=n(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,n),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return In.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw et(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw et(57766)}get value(){throw et(16141)}get color(){throw et(16727)}get left(){throw et(29726)}get right(){throw et(36894)}copy(e,t,n,a,l){return this}insert(e,t,n){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.comparator=e,this.data=new Cs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wN(this.data.getIterator())}getIteratorFrom(e){return new wN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=n.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class wN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new wr([])}unionWith(e){let t=new dn(kn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new wr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yc(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new YS("Invalid base64 string: "+l):l}}(e);return new On(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new On(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const L3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oo(s){if($t(!!s,39018),typeof s=="string"){let e=0;const t=L3.exec(s);if($t(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(s);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Bs(s.seconds),nanos:Bs(s.nanos)}}function Bs(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function lo(s){return typeof s=="string"?On.fromBase64String(s):On.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="server_timestamp",QS="__type__",XS="__previous_value__",JS="__local_write_time__";function ay(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[QS])==null?void 0:n.stringValue)===KS}function Nm(s){const e=s.mapValue.fields[XS];return ay(e)?Nm(e):e}function od(s){const e=oo(s.mapValue.fields[JS].timestampValue);return new ps(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,t,n,a,l,u,h,g,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=y}}const If="(default)";class ld{constructor(e,t){this.projectId=e,this.database=t||If}static empty(){return new ld("","")}get isDefaultDatabase(){return this.database===If}isEqual(e){return e instanceof ld&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="__type__",V3="__max__",Wh={mapValue:{}},eE="__vector__",Df="value";function co(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ay(s)?4:B3(s)?9007199254740991:F3(s)?10:11:et(28295,{value:s})}function Ii(s,e){if(s===e)return!0;const t=co(s);if(t!==co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return od(s).isEqual(od(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=oo(a.timestampValue),h=oo(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(a,l){return lo(a.bytesValue).isEqual(lo(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,l){return Bs(a.geoPointValue.latitude)===Bs(l.geoPointValue.latitude)&&Bs(a.geoPointValue.longitude)===Bs(l.geoPointValue.longitude)}(s,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Bs(a.integerValue)===Bs(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Bs(a.doubleValue),h=Bs(l.doubleValue);return u===h?Rf(u)===Rf(h):isNaN(u)&&isNaN(h)}return!1}(s,e);case 9:return yc(s.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(_N(u)!==_N(h))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(h[g]===void 0||!Ii(u[g],h[g])))return!1;return!0}(s,e);default:return et(52216,{left:s})}}function cd(s,e){return(s.values||[]).find(t=>Ii(t,e))!==void 0}function vc(s,e){if(s===e)return 0;const t=co(s),n=co(e);if(t!==n)return Tt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(s.booleanValue,e.booleanValue);case 2:return function(l,u){const h=Bs(l.integerValue||l.doubleValue),g=Bs(u.integerValue||u.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1}(s,e);case 3:return NN(s.timestampValue,e.timestampValue);case 4:return NN(od(s),od(e));case 5:return Ox(s.stringValue,e.stringValue);case 6:return function(l,u){const h=lo(l),g=lo(u);return h.compareTo(g)}(s.bytesValue,e.bytesValue);case 7:return function(l,u){const h=l.split("/"),g=u.split("/");for(let p=0;p<h.length&&p<g.length;p++){const y=Tt(h[p],g[p]);if(y!==0)return y}return Tt(h.length,g.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,u){const h=Tt(Bs(l.latitude),Bs(u.latitude));return h!==0?h:Tt(Bs(l.longitude),Bs(u.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return jN(s.arrayValue,e.arrayValue);case 10:return function(l,u){var v,A,R,z;const h=l.fields||{},g=u.fields||{},p=(v=h[Df])==null?void 0:v.arrayValue,y=(A=g[Df])==null?void 0:A.arrayValue,w=Tt(((R=p==null?void 0:p.values)==null?void 0:R.length)||0,((z=y==null?void 0:y.values)==null?void 0:z.length)||0);return w!==0?w:jN(p,y)}(s.mapValue,e.mapValue);case 11:return function(l,u){if(l===Wh.mapValue&&u===Wh.mapValue)return 0;if(l===Wh.mapValue)return 1;if(u===Wh.mapValue)return-1;const h=l.fields||{},g=Object.keys(h),p=u.fields||{},y=Object.keys(p);g.sort(),y.sort();for(let w=0;w<g.length&&w<y.length;++w){const v=Ox(g[w],y[w]);if(v!==0)return v;const A=vc(h[g[w]],p[y[w]]);if(A!==0)return A}return Tt(g.length,y.length)}(s.mapValue,e.mapValue);default:throw et(23264,{he:t})}}function NN(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Tt(s,e);const t=oo(s),n=oo(e),a=Tt(t.seconds,n.seconds);return a!==0?a:Tt(t.nanos,n.nanos)}function jN(s,e){const t=s.values||[],n=e.values||[];for(let a=0;a<t.length&&a<n.length;++a){const l=vc(t[a],n[a]);if(l)return l}return Tt(t.length,n.length)}function bc(s){return Px(s)}function Px(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const n=oo(t);return`time(${n.seconds},${n.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return lo(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return Ge.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let n="[",a=!0;for(const l of t.values||[])a?a=!1:n+=",",n+=Px(l);return n+"]"}(s.arrayValue):"mapValue"in s?function(t){const n=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of n)l?l=!1:a+=",",a+=`${u}:${Px(t.fields[u])}`;return a+"}"}(s.mapValue):et(61005,{value:s})}function af(s){switch(co(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nm(s);return e?16+af(e):16;case 5:return 2*s.stringValue.length;case 6:return lo(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,l)=>a+af(l),0)}(s.arrayValue);case 10:case 11:return function(n){let a=0;return go(n.fields,(l,u)=>{a+=l.length+af(u)}),a}(s.mapValue);default:throw et(13486,{value:s})}}function TN(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Lx(s){return!!s&&"integerValue"in s}function oy(s){return!!s&&"arrayValue"in s}function SN(s){return!!s&&"nullValue"in s}function EN(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function of(s){return!!s&&"mapValue"in s}function F3(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[ZS])==null?void 0:n.stringValue)===eE}function $u(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return go(s.mapValue.fields,(t,n)=>e.mapValue.fields[t]=$u(n)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$u(s.arrayValue.values[t]);return e}return{...s}}function B3(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===V3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.value=e}static empty(){return new lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(t)}setAll(e){let t=kn.emptyPath(),n={},a=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,n,a),n={},a=[],t=h.popLast()}u?n[h.lastSegment()]=$u(u):a.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,n,a)}delete(e){const t=this.field(e.popLast());of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=t.mapValue.fields[e.get(n)];of(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,n){go(t,(a,l)=>e[a]=l);for(const a of n)delete e[a]}clone(){return new lr($u(this.value))}}function tE(s){const e=[];return go(s.fields,(t,n)=>{const a=new kn([t]);if(of(n)){const l=tE(n.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new wr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t,n,a,l,u,h){this.key=e,this.documentType=t,this.version=n,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new $n(e,0,st.min(),st.min(),st.min(),lr.empty(),0)}static newFoundDocument(e,t,n,a){return new $n(e,1,t,st.min(),n,a,0)}static newNoDocument(e,t){return new $n(e,2,t,st.min(),st.min(),lr.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,st.min(),st.min(),lr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.position=e,this.inclusive=t}}function AN(s,e,t){let n=0;for(let a=0;a<s.position.length;a++){const l=e[a],u=s.position[a];if(l.field.isKeyField()?n=Ge.comparator(Ge.fromName(u.referenceValue),t.key):n=vc(u,t.data.field(l.field)),l.dir==="desc"&&(n*=-1),n!==0)break}return n}function CN(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ii(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function q3(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{}class Qs extends sE{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new z3(e,t,n):t==="array-contains"?new W3(e,n):t==="in"?new Y3(e,n):t==="not-in"?new K3(e,n):t==="array-contains-any"?new Q3(e,n):new Qs(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new H3(e,n):new G3(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vc(t,this.value)):t!==null&&co(this.value)===co(t)&&this.matchesComparison(vc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends sE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new oi(e,t)}matches(e){return nE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nE(s){return s.op==="and"}function rE(s){return $3(s)&&nE(s)}function $3(s){for(const e of s.filters)if(e instanceof oi)return!1;return!0}function Ux(s){if(s instanceof Qs)return s.field.canonicalString()+s.op.toString()+bc(s.value);if(rE(s))return s.filters.map(e=>Ux(e)).join(",");{const e=s.filters.map(t=>Ux(t)).join(",");return`${s.op}(${e})`}}function iE(s,e){return s instanceof Qs?function(n,a){return a instanceof Qs&&n.op===a.op&&n.field.isEqual(a.field)&&Ii(n.value,a.value)}(s,e):s instanceof oi?function(n,a){return a instanceof oi&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((l,u,h)=>l&&iE(u,a.filters[h]),!0):!1}(s,e):void et(19439)}function aE(s){return s instanceof Qs?function(t){return`${t.field.canonicalString()} ${t.op} ${bc(t.value)}`}(s):s instanceof oi?function(t){return t.op.toString()+" {"+t.getFilters().map(aE).join(" ,")+"}"}(s):"Filter"}class z3 extends Qs{constructor(e,t,n){super(e,t,n),this.key=Ge.fromName(n.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class H3 extends Qs{constructor(e,t){super(e,"in",t),this.keys=oE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class G3 extends Qs{constructor(e,t){super(e,"not-in",t),this.keys=oE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oE(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(n=>Ge.fromName(n.referenceValue))}class W3 extends Qs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return oy(t)&&cd(t.arrayValue,this.value)}}class Y3 extends Qs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cd(this.value.arrayValue,t)}}class K3 extends Qs{constructor(e,t){super(e,"not-in",t)}matches(e){if(cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cd(this.value.arrayValue,t)}}class Q3 extends Qs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!oy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>cd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,t=null,n=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function RN(s,e=null,t=[],n=[],a=null,l=null,u=null){return new X3(s,e,t,n,a,l,u)}function ly(s){const e=rt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>Ux(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(l){return l.field.canonicalString()+l.dir}(n)).join(","),wm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>bc(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>bc(n)).join(",")),e.Te=t}return e.Te}function cy(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!q3(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!iE(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!CN(s.startAt,e.startAt)&&CN(s.endAt,e.endAt)}function Vx(s){return Ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t=null,n=[],a=[],l=null,u="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function J3(s,e,t,n,a,l,u,h){return new kc(s,e,t,n,a,l,u,h)}function uy(s){return new kc(s)}function IN(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function lE(s){return s.collectionGroup!==null}function zu(s){const e=rt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new dn(kn.comparator);return u.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ud(l,n))}),t.has(kn.keyField().canonicalString())||e.Ie.push(new ud(kn.keyField(),n))}return e.Ie}function Ti(s){const e=rt(s);return e.Ee||(e.Ee=Z3(e,zu(s))),e.Ee}function Z3(s,e){if(s.limitType==="F")return RN(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new ud(a.field,l)});const t=s.endAt?new kf(s.endAt.position,s.endAt.inclusive):null,n=s.startAt?new kf(s.startAt.position,s.startAt.inclusive):null;return RN(s.path,s.collectionGroup,e,s.filters,s.limit,t,n)}}function Fx(s,e){const t=s.filters.concat([e]);return new kc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Bx(s,e,t){return new kc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function jm(s,e){return cy(Ti(s),Ti(e))&&s.limitType===e.limitType}function cE(s){return`${ly(Ti(s))}|lt:${s.limitType}`}function Zl(s){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(a=>aE(a)).join(", ")}]`),wm(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(a=>bc(a)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(a=>bc(a)).join(",")),`Target(${n})`}(Ti(s))}; limitType=${s.limitType})`}function Tm(s,e){return e.isFoundDocument()&&function(n,a){const l=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):Ge.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)}(s,e)&&function(n,a){for(const l of zu(n))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(s,e)&&function(n,a){for(const l of n.filters)if(!l.matches(a))return!1;return!0}(s,e)&&function(n,a){return!(n.startAt&&!function(u,h,g){const p=AN(u,h,g);return u.inclusive?p<=0:p<0}(n.startAt,zu(n),a)||n.endAt&&!function(u,h,g){const p=AN(u,h,g);return u.inclusive?p>=0:p>0}(n.endAt,zu(n),a))}(s,e)}function e6(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function uE(s){return(e,t)=>{let n=!1;for(const a of zu(s)){const l=t6(a,e,t);if(l!==0)return l;n=n||a.field.isKeyField()}return 0}}function t6(s,e,t){const n=s.field.isKeyField()?Ge.comparator(e.key,t.key):function(l,u,h){const g=u.data.field(l),p=h.data.field(l);return g!==null&&p!==null?vc(g,p):et(42886)}(s.field,e,t);switch(s.dir){case"asc":return n;case"desc":return-1*n;default:return et(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[a,l]of n)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[t]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(t,n)=>{for(const[a,l]of n)e(a,l)})}isEmpty(){return WS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=new Cs(Ge.comparator);function ha(){return s6}const dE=new Cs(Ge.comparator);function Du(...s){let e=dE;for(const t of s)e=e.insert(t.key,t);return e}function hE(s){let e=dE;return s.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function zo(){return Hu()}function fE(){return Hu()}function Hu(){return new ll(s=>s.toString(),(s,e)=>s.isEqual(e))}const n6=new Cs(Ge.comparator),r6=new dn(Ge.comparator);function St(...s){let e=r6;for(const t of s)e=e.add(t);return e}const i6=new dn(Tt);function a6(){return i6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rf(e)?"-0":e}}function mE(s){return{integerValue:""+s}}function o6(s,e){return M3(e)?mE(e):dy(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this._=void 0}}function l6(s,e,t){return s instanceof dd?function(a,l){const u={fields:{[QS]:{stringValue:KS},[JS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&ay(l)&&(l=Nm(l)),l&&(u.fields[XS]=l),{mapValue:u}}(t,e):s instanceof hd?pE(s,e):s instanceof fd?xE(s,e):function(a,l){const u=gE(a,l),h=DN(u)+DN(a.Ae);return Lx(u)&&Lx(a.Ae)?mE(h):dy(a.serializer,h)}(s,e)}function c6(s,e,t){return s instanceof hd?pE(s,e):s instanceof fd?xE(s,e):t}function gE(s,e){return s instanceof Mf?function(n){return Lx(n)||function(l){return!!l&&"doubleValue"in l}(n)}(e)?e:{integerValue:0}:null}class dd extends Sm{}class hd extends Sm{constructor(e){super(),this.elements=e}}function pE(s,e){const t=yE(e);for(const n of s.elements)t.some(a=>Ii(a,n))||t.push(n);return{arrayValue:{values:t}}}class fd extends Sm{constructor(e){super(),this.elements=e}}function xE(s,e){let t=yE(e);for(const n of s.elements)t=t.filter(a=>!Ii(a,n));return{arrayValue:{values:t}}}class Mf extends Sm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function DN(s){return Bs(s.integerValue||s.doubleValue)}function yE(s){return oy(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,t){this.field=e,this.transform=t}}function d6(s,e){return s.field.isEqual(e.field)&&function(n,a){return n instanceof hd&&a instanceof hd||n instanceof fd&&a instanceof fd?yc(n.elements,a.elements,Ii):n instanceof Mf&&a instanceof Mf?Ii(n.Ae,a.Ae):n instanceof dd&&a instanceof dd}(s.transform,e.transform)}class h6{constructor(e,t){this.version=e,this.transformResults=t}}class Si{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Si}static exists(e){return new Si(void 0,e)}static updateTime(e){return new Si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Em{}function vE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new _E(s.key,Si.none()):new Cd(s.key,s.data,Si.none());{const t=s.data,n=lr.empty();let a=new dn(kn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?n.delete(l):n.set(l,u),a=a.add(l)}return new po(s.key,n,new wr(a.toArray()),Si.none())}}function f6(s,e,t){s instanceof Cd?function(a,l,u){const h=a.value.clone(),g=MN(a.fieldTransforms,l,u.transformResults);h.setAll(g),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(s,e,t):s instanceof po?function(a,l,u){if(!lf(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=MN(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(bE(a)),g.setAll(h),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(s,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Gu(s,e,t,n){return s instanceof Cd?function(l,u,h,g){if(!lf(l.precondition,u))return h;const p=l.value.clone(),y=ON(l.fieldTransforms,g,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(s,e,t,n):s instanceof po?function(l,u,h,g){if(!lf(l.precondition,u))return h;const p=ON(l.fieldTransforms,g,u),y=u.data;return y.setAll(bE(l)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(s,e,t,n):function(l,u,h){return lf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(s,e,t)}function m6(s,e){let t=null;for(const n of s.fieldTransforms){const a=e.data.field(n.field),l=gE(n.transform,a||null);l!=null&&(t===null&&(t=lr.empty()),t.set(n.field,l))}return t||null}function kN(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&yc(n,a,(l,u)=>d6(l,u))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Cd extends Em{constructor(e,t,n,a=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class po extends Em{constructor(e,t,n,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function bE(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=s.data.field(t);e.set(t,n)}}),e}function MN(s,e,t){const n=new Map;$t(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let a=0;a<t.length;a++){const l=s[a],u=l.transform,h=e.data.field(l.field);n.set(l.field,c6(u,h,t[a]))}return n}function ON(s,e,t){const n=new Map;for(const a of s){const l=a.transform,u=t.data.field(a.field);n.set(a.field,l6(l,u,e))}return n}class _E extends Em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g6 extends Em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,t,n,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&f6(l,e,n[a])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Gu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Gu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fE();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const g=vE(u,h);g!==null&&n.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(st.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),St())}isEqual(e){return this.batchId===e.batchId&&yc(this.mutations,e.mutations,(t,n)=>kN(t,n))&&yc(this.baseMutations,e.baseMutations,(t,n)=>kN(t,n))}}class hy{constructor(e,t,n,a){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=a}static from(e,t,n){$t(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return n6}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,n[u].version);return new hy(e,t,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ys,Mt;function v6(s){switch(s){case ge.OK:return et(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return et(15467,{code:s})}}function wE(s){if(s===void 0)return da("GRPC error has no .code"),ge.UNKNOWN;switch(s){case Ys.OK:return ge.OK;case Ys.CANCELLED:return ge.CANCELLED;case Ys.UNKNOWN:return ge.UNKNOWN;case Ys.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Ys.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Ys.INTERNAL:return ge.INTERNAL;case Ys.UNAVAILABLE:return ge.UNAVAILABLE;case Ys.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Ys.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Ys.NOT_FOUND:return ge.NOT_FOUND;case Ys.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Ys.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Ys.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Ys.ABORTED:return ge.ABORTED;case Ys.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Ys.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Ys.DATA_LOSS:return ge.DATA_LOSS;default:return et(39323,{code:s})}}(Mt=Ys||(Ys={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=new Xa([4294967295,4294967295],0);function PN(s){const e=b6().encode(s),t=new PS;return t.update(e),new Uint8Array(t.digest())}function LN(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Xa([t,n],0),new Xa([a,l],0)]}class fy{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ku(`Invalid padding: ${t}`);if(n<0)throw new ku(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ku(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new ku(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Xa.fromNumber(this.ge)}ye(e,t,n){let a=e.add(t.multiply(Xa.fromNumber(n)));return a.compare(_6)===1&&(a=new Xa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=PN(e),[n,a]=LN(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(n,a,l);if(!this.we(u))return!1}return!0}static create(e,t,n){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new fy(l,a,t);return n.forEach(h=>u.insert(h)),u}insert(e){if(this.ge===0)return;const t=PN(e),[n,a]=LN(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(n,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,t,n,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const a=new Map;return a.set(e,Rd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Am(st.min(),a,new Cs(Tt),ha(),St())}}class Rd{constructor(e,t,n,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Rd(n,t,St(),St(),St())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,n,a){this.be=e,this.removedTargetIds=t,this.key=n,this.De=a}}class NE{constructor(e,t){this.targetId=e,this.Ce=t}}class jE{constructor(e,t,n=On.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=a}}class UN{constructor(){this.ve=0,this.Fe=VN(),this.Me=On.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=St(),t=St(),n=St();return this.Fe.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:n=n.add(a);break;default:et(38017,{changeType:l})}}),new Rd(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=VN()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class w6{constructor(e){this.Ge=e,this.ze=new Map,this.je=ha(),this.Je=Yh(),this.He=Yh(),this.Ye=new Cs(Tt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:et(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((n,a)=>{this.rt(a)&&t(a)})}st(e){const t=e.targetId,n=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Vx(l))if(n===0){const u=new Ge(l.path);this.et(t,u,$n.newNoDocument(u,st.min()))}else $t(n===1,20013,{expectedCount:n});else{const u=this._t(t);if(u!==n){const h=this.ut(e),g=h?this.ct(h,e,u):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=lo(n).toUint8Array()}catch(g){if(g instanceof YS)return xc("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{h=new fy(u,a,l)}catch(g){return xc(g instanceof ku?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return h.ge===0?null:h}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let a=0;return n.forEach(l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)}),a}Tt(e){const t=new Map;this.ze.forEach((l,u)=>{const h=this.ot(u);if(h){if(l.current&&Vx(h.target)){const g=new Ge(h.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,$n.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}});let n=St();this.He.forEach((l,u)=>{let h=!0;u.forEachWhile(g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(n=n.add(l))}),this.je.forEach((l,u)=>u.setReadTime(e));const a=new Am(e,t,this.Ye,this.je,n);return this.je=ha(),this.Je=Yh(),this.He=Yh(),this.Ye=new Cs(Tt),a}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new UN,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new dn(Tt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new dn(Tt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new UN),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Yh(){return new Cs(Ge.comparator)}function VN(){return new Cs(Ge.comparator)}const N6={asc:"ASCENDING",desc:"DESCENDING"},j6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T6={and:"AND",or:"OR"};class S6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qx(s,e){return s.useProto3Json||wm(e)?e:{value:e}}function Of(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function E6(s,e){return Of(s,e.toTimestamp())}function Ei(s){return $t(!!s,49232),st.fromTimestamp(function(t){const n=oo(t);return new ps(n.seconds,n.nanos)}(s))}function my(s,e){return $x(s,e).canonicalString()}function $x(s,e){const t=function(a){return new ds(["projects",a.projectId,"databases",a.database])}(s).child("documents");return e===void 0?t:t.child(e)}function SE(s){const e=ds.fromString(s);return $t(IE(e),10190,{key:e.toString()}),e}function zx(s,e){return my(s.databaseId,e.path)}function Qp(s,e){const t=SE(e);if(t.get(1)!==s.databaseId.projectId)throw new De(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new De(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ge(AE(t))}function EE(s,e){return my(s.databaseId,e)}function A6(s){const e=SE(s);return e.length===4?ds.emptyPath():AE(e)}function Hx(s){return new ds(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function AE(s){return $t(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function FN(s,e,t){return{name:zx(s,e),fields:t.value.mapValue.fields}}function C6(s,e){let t;if("targetChange"in e){e.targetChange;const n=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:et(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?($t(y===void 0||typeof y=="string",58123),On.fromBase64String(y||"")):($t(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),On.fromUint8Array(y||new Uint8Array))}(s,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const y=p.code===void 0?ge.UNKNOWN:wE(p.code);return new De(y,p.message||"")}(u);t=new jE(n,a,l,h||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Qp(s,n.document.name),l=Ei(n.document.updateTime),u=n.document.createTime?Ei(n.document.createTime):st.min(),h=new lr({mapValue:{fields:n.document.fields}}),g=$n.newFoundDocument(a,l,u,h),p=n.targetIds||[],y=n.removedTargetIds||[];t=new cf(p,y,g.key,g)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Qp(s,n.document),l=n.readTime?Ei(n.readTime):st.min(),u=$n.newNoDocument(a,l),h=n.removedTargetIds||[];t=new cf([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Qp(s,n.document),l=n.removedTargetIds||[];t=new cf([],l,a,null)}else{if(!("filter"in e))return et(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:l}=n,u=new y6(a,l),h=n.targetId;t=new NE(h,u)}}return t}function R6(s,e){let t;if(e instanceof Cd)t={update:FN(s,e.key,e.value)};else if(e instanceof _E)t={delete:zx(s,e.key)};else if(e instanceof po)t={update:FN(s,e.key,e.data),updateMask:V6(e.fieldMask)};else{if(!(e instanceof g6))return et(16599,{Vt:e.type});t={verify:zx(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(l,u){const h=u.transform;if(h instanceof dd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof hd)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Mf)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw et(20930,{transform:u.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:E6(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:et(27497)}(s,e.precondition)),t}function I6(s,e){return s&&s.length>0?($t(e!==void 0,14353),s.map(t=>function(a,l){let u=a.updateTime?Ei(a.updateTime):Ei(l);return u.isEqual(st.min())&&(u=Ei(l)),new h6(u,a.transformResults||[])}(t,e))):[]}function D6(s,e){return{documents:[EE(s,e.path)]}}function k6(s,e){const t={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=EE(s,a);const l=function(p){if(p.length!==0)return RE(oi.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(p){if(p.length!==0)return p.map(y=>function(v){return{field:ec(v.field),direction:P6(v.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=qx(s,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:t,parent:a}}function M6(s){let e=A6(s.parent);const t=s.structuredQuery,n=t.from?t.from.length:0;let a=null;if(n>0){$t(n===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=function(w){const v=CE(w);return v instanceof oi&&rE(v)?v.getFilters():[v]}(t.where));let u=[];t.orderBy&&(u=function(w){return w.map(v=>function(R){return new ud(tc(R.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(v))}(t.orderBy));let h=null;t.limit&&(h=function(w){let v;return v=typeof w=="object"?w.value:w,wm(v)?null:v}(t.limit));let g=null;t.startAt&&(g=function(w){const v=!!w.before,A=w.values||[];return new kf(A,v)}(t.startAt));let p=null;return t.endAt&&(p=function(w){const v=!w.before,A=w.values||[];return new kf(A,v)}(t.endAt)),J3(e,a,u,l,h,"F",g,p)}function O6(s,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CE(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=tc(t.unaryFilter.field);return Qs.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=tc(t.unaryFilter.field);return Qs.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=tc(t.unaryFilter.field);return Qs.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=tc(t.unaryFilter.field);return Qs.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return et(61313);default:return et(60726)}}(s):s.fieldFilter!==void 0?function(t){return Qs.create(tc(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return et(58110);default:return et(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return oi.create(t.compositeFilter.filters.map(n=>CE(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return et(1026)}}(t.compositeFilter.op))}(s):et(30097,{filter:s})}function P6(s){return N6[s]}function L6(s){return j6[s]}function U6(s){return T6[s]}function ec(s){return{fieldPath:s.canonicalString()}}function tc(s){return kn.fromServerFormat(s.fieldPath)}function RE(s){return s instanceof Qs?function(t){if(t.op==="=="){if(EN(t.value))return{unaryFilter:{field:ec(t.field),op:"IS_NAN"}};if(SN(t.value))return{unaryFilter:{field:ec(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(EN(t.value))return{unaryFilter:{field:ec(t.field),op:"IS_NOT_NAN"}};if(SN(t.value))return{unaryFilter:{field:ec(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ec(t.field),op:L6(t.op),value:t.value}}}(s):s instanceof oi?function(t){const n=t.getFilters().map(a=>RE(a));return n.length===1?n[0]:{compositeFilter:{op:U6(t.op),filters:n}}}(s):et(54877,{filter:s})}function V6(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t,n,a,l=st.min(),u=st.min(),h=On.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.yt=e}}function B6(s){const e=M6({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Bx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(){this.Cn=new $6}addToCollectionParentIndex(e,t){return this.Cn.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(ao.min())}updateCollectionGroup(e,t,n){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class $6{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t]||new dn(ds.comparator),l=!a.has(n);return this.index[t]=a.add(n),l}has(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t];return a&&a.has(n)}getEntries(e){return(this.index[e]||new dn(ds.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DE=41943040;class or{static withCacheSize(e){return new or(e,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or(DE,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new _c(0)}static cr(){return new _c(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="LruGarbageCollector",z6=1048576;function $N([s,e],[t,n]){const a=Tt(s,t);return a===0?Tt(e,n):a}class H6{constructor(e){this.Ir=e,this.buffer=new dn($N),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();$N(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G6{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Oe(qN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dc(t)?Oe(qN,"Ignoring IndexedDB error during garbage collection: ",t):await Ic(t)}await this.Vr(3e5)})}}class W6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return ye.resolve(_m.ce);const n=new H6(t);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(BN)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BN):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,a,l,u,h,g,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,u=Date.now(),this.nthSequenceNumber(e,a))).next(w=>(n=w,h=Date.now(),this.removeTargets(e,n,t))).next(w=>(l=w,g=Date.now(),this.removeOrphanedDocuments(e,n))).next(w=>(p=Date.now(),Jl()<=Ct.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(g-h)+`ms
	Removed ${w} documents in `+(p-g)+`ms
Total Duration: ${p-y}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:w})))}}function Y6(s,e){return new W6(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(){this.changes=new ll(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?ye.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,t,n,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(n!==null&&Gu(n.mutation,a,wr.empty(),ps.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,St()).next(()=>n))}getLocalViewOfDocuments(e,t,n=St()){const a=zo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,n).next(l=>{let u=Du();return l.forEach((h,g)=>{u=u.insert(h,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const n=zo();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,St()))}populateOverlays(e,t,n){const a=[];return n.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,n,a){let l=ha();const u=Hu(),h=function(){return Hu()}();return t.forEach((g,p)=>{const y=n.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof po)?l=l.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),Gu(y.mutation,p,y.mutation.getFieldMask(),ps.now())):u.set(p.key,wr.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((p,y)=>u.set(p,y)),t.forEach((p,y)=>h.set(p,new Q6(y,u.get(p)??null))),h))}recalculateAndSaveOverlays(e,t){const n=Hu();let a=new Cs((u,h)=>u-h),l=St();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(g=>{const p=t.get(g);if(p===null)return;let y=n.get(g)||wr.empty();y=h.applyToLocalView(p,y),n.set(g,y);const w=(a.get(h.batchId)||St()).add(g);a=a.insert(h.batchId,w)})}).next(()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),p=g.key,y=g.value,w=fE();y.forEach(v=>{if(!l.has(v)){const A=vE(t.get(v),n.get(v));A!==null&&w.set(v,A),l=l.add(v)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,w))}return ye.waitFor(u)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,a){return function(u){return Ge.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,a):this.getDocumentsMatchingCollectionQuery(e,t,n,a)}getNextDocuments(e,t,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,a-l.size):ye.resolve(zo());let h=ad,g=l;return u.next(p=>ye.forEach(p,(y,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),l.get(y)?ye.resolve():this.remoteDocumentCache.getEntry(e,y).next(v=>{g=g.insert(y,v)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,g,p,St())).next(y=>({batchId:h,changes:hE(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(n=>{let a=Du();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,n,a){const l=t.collectionGroup;let u=Du();return this.indexManager.getCollectionParents(e,l).next(h=>ye.forEach(h,g=>{const p=function(w,v){return new kc(v,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,n,a).next(y=>{y.forEach((w,v)=>{u=u.insert(w,v)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,n,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,l,a))).next(u=>{l.forEach((g,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,$n.newInvalidDocument(y)))});let h=Du();return u.forEach((g,p)=>{const y=l.get(g);y!==void 0&&Gu(y.mutation,p,wr.empty(),ps.now()),Tm(t,p)&&(h=h.insert(g,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ye.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Ei(a.createTime)}}(t)),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(a){return{name:a.name,query:B6(a.bundledQuery),readTime:Ei(a.readTime)}}(t)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.overlays=new Cs(Ge.comparator),this.qr=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const n=zo();return ye.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&n.set(a,l)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((a,l)=>{this.St(e,t,l)}),ye.resolve()}removeOverlaysForBatchId(e,t,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(n)),ye.resolve()}getOverlaysForCollection(e,t,n){const a=zo(),l=t.length+1,u=new Ge(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const g=h.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>n&&a.set(g.getKey(),g)}return ye.resolve(a)}getOverlaysForCollectionGroup(e,t,n,a){let l=new Cs((p,y)=>p-y);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>n){let y=l.get(p.largestBatchId);y===null&&(y=zo(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=zo(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=a)););return ye.resolve(h)}St(e,t,n){const a=this.overlays.get(n.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new x6(t,n));let l=this.qr.get(t);l===void 0&&(l=St(),this.qr.set(t,l)),this.qr.set(t,l.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.Qr=new dn(Nn.$r),this.Ur=new dn(Nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Nn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Gr(new Nn(e,t))}zr(e,t){e.forEach(n=>this.removeReference(n,t))}jr(e){const t=new Ge(new ds([])),n=new Nn(t,e),a=new Nn(t,e+1),l=[];return this.Ur.forEachInRange([n,a],u=>{this.Gr(u),l.push(u.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ge(new ds([])),n=new Nn(t,e),a=new Nn(t,e+1);let l=St();return this.Ur.forEachInRange([n,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Nn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Nn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ge.comparator(e.key,t.key)||Tt(e.Yr,t.Yr)}static Kr(e,t){return Tt(e.Yr,t.Yr)||Ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new dn(Nn.$r)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new p6(l,t,n,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new Nn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ye.resolve(u)}lookupMutationBatch(e,t){return ye.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,a=this.ei(n),l=a<0?0:a;return ye.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?iy:this.tr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Nn(t,0),a=new Nn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([n,a],u=>{const h=this.Xr(u.Yr);l.push(h)}),ye.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new dn(Tt);return t.forEach(a=>{const l=new Nn(a,0),u=new Nn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],h=>{n=n.add(h.Yr)})}),ye.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,a=n.length+1;let l=n;Ge.isDocumentKey(l)||(l=l.child(""));const u=new Nn(new Ge(l),0);let h=new dn(Tt);return this.Zr.forEachWhile(g=>{const p=g.key.path;return!!n.isPrefixOf(p)&&(p.length===a&&(h=h.add(g.Yr)),!0)},u),ye.resolve(this.ti(h))}ti(e){const t=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){$t(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return ye.forEach(t.mutations,a=>{const l=new Nn(a.key,t.batchId);return n=n.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Nn(t,0),a=this.Zr.firstAfterOrEqual(n);return ye.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.ri=e,this.docs=function(){return new Cs(Ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,a=this.docs.get(n),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ye.resolve(n?n.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let n=ha();return t.forEach(a=>{const l=this.docs.get(a);n=n.insert(a,l?l.document.mutableCopy():$n.newInvalidDocument(a))}),ye.resolve(n)}getDocumentsMatchingQuery(e,t,n,a){let l=ha();const u=t.path,h=new Ge(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:p,value:{document:y}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||R3(C3(y),n)<=0||(a.has(y.key)||Tm(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ye.resolve(l)}getAllFromCollectionGroup(e,t,n,a){et(9500)}ii(e,t){return ye.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new nM(this)}getSize(e){return ye.resolve(this.size)}}class nM extends K6{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),ye.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.persistence=e,this.si=new ll(t=>ly(t),cy),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.oi=0,this._i=new gy,this.targetCount=0,this.ai=_c.ur()}forEachTarget(e,t){return this.si.forEach((n,a)=>t(a)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ye.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new _c(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.Pr(t),ye.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,n){let a=0;const l=[];return this.si.forEach((u,h)=>{h.sequenceNumber<=t&&n.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),ye.waitFor(l).next(()=>a)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ye.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ye.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),ye.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ye.resolve(n)}containsKey(e,t){return ye.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t){this.ui={},this.overlays={},this.ci=new _m(0),this.li=!1,this.li=!0,this.hi=new eM,this.referenceDelegate=e(this),this.Pi=new rM(this),this.indexManager=new q6,this.remoteDocumentCache=function(a){return new sM(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new F6(t),this.Ii=new J6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Z6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new tM(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Oe("MemoryPersistence","Starting transaction:",e);const a=new iM(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ai(e,t){return ye.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class iM extends D3{constructor(e){super(),this.currentSequenceNumber=e}}class py{constructor(e){this.persistence=e,this.Ri=new gy,this.Vi=null}static mi(e){return new py(e)}get fi(){if(this.Vi)return this.Vi;throw et(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ye.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.fi.add(l.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.fi,n=>{const a=Ge.fromPath(n);return this.gi(e,a).next(l=>{l||t.removeEntry(a,st.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ye.or([()=>ye.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Pf{constructor(e,t){this.persistence=e,this.pi=new ll(n=>O3(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=Y6(this,t)}static mi(e,t){return new Pf(e,t)}Ei(){}di(e){return ye.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(a=>n+a))}wr(e){let t=0;return this.pr(e,n=>{t++}).next(()=>t)}pr(e,t){return ye.forEach(this.pi,(n,a)=>this.br(e,n,a).next(l=>l?ye.resolve():t(a)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,u=>this.br(e,u,t).next(h=>{h||(n++,l.removeEntry(u,st.min()))})).next(()=>l.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ye.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ye.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ye.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=af(e.data.value)),t}br(e,t,n){return ye.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ye.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t,n,a){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=a}static As(e,t){let n=St(),a=St();for(const l of t.docChanges)switch(l.type){case 0:n=n.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new xy(e,t.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return o4()?8:k3(rT())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,a){const l={result:null};return this.ys(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ws(e,t,a,n).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new aM;return this.Ss(e,t,u).next(h=>{if(l.result=h,this.Vs)return this.bs(e,t,u,h.size)})}).next(()=>l.result)}bs(e,t,n,a){return n.documentReadCount<this.fs?(Jl()<=Ct.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",Zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ye.resolve()):(Jl()<=Ct.DEBUG&&Oe("QueryEngine","Query:",Zl(t),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Jl()<=Ct.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",Zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(t))):ye.resolve())}ys(e,t){if(IN(t))return ye.resolve(null);let n=Ti(t);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Bx(t,null,"F"),n=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(l=>{const u=St(...l);return this.ps.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,n).next(g=>{const p=this.Ds(t,h);return this.Cs(t,p,u,g.readTime)?this.ys(e,Bx(t,null,"F")):this.vs(e,p,t,g)}))})))}ws(e,t,n,a){return IN(t)||a.isEqual(st.min())?ye.resolve(null):this.ps.getDocuments(e,n).next(l=>{const u=this.Ds(t,l);return this.Cs(t,u,n,a)?ye.resolve(null):(Jl()<=Ct.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Zl(t)),this.vs(e,u,t,A3(a,ad)).next(h=>h))})}Ds(e,t){let n=new dn(uE(e));return t.forEach((a,l)=>{Tm(e,l)&&(n=n.add(l))}),n}Cs(e,t,n,a){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,n){return Jl()<=Ct.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Zl(t)),this.ps.getDocumentsMatchingQuery(e,t,ao.min(),n)}vs(e,t,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="LocalStore",lM=3e8;class cM{constructor(e,t,n,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Cs(Tt),this.xs=new ll(l=>ly(l),cy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function uM(s,e,t,n){return new cM(s,e,t,n)}async function ME(s,e){const t=rt(s);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let a;return t.mutationQueue.getAllMutationBatches(n).next(l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(n))).next(l=>{const u=[],h=[];let g=St();for(const p of a){u.push(p.batchId);for(const y of p.mutations)g=g.add(y.key)}for(const p of l){h.push(p.batchId);for(const y of p.mutations)g=g.add(y.key)}return t.localDocuments.getDocuments(n,g).next(p=>({Ls:p,removedBatchIds:u,addedBatchIds:h}))})})}function dM(s,e){const t=rt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return function(h,g,p,y){const w=p.batch,v=w.keys();let A=ye.resolve();return v.forEach(R=>{A=A.next(()=>y.getEntry(g,R)).next(z=>{const q=p.docVersions.get(R);$t(q!==null,48541),z.version.compareTo(q)<0&&(w.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),y.addEntry(z)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(g,w))}(t,n,e,l).next(()=>l.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(h){let g=St();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(g=g.add(h.batch.mutations[p].key));return g}(e))).next(()=>t.localDocuments.getDocuments(n,a))})}function OE(s){const e=rt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function hM(s,e){const t=rt(s),n=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach((y,w)=>{const v=a.get(w);if(!v)return;h.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,w).next(()=>t.Pi.addMatchingKeys(l,y.addedDocuments,w)));let A=v.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?A=A.withResumeToken(On.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,n)),a=a.insert(w,A),function(z,q,Q){return z.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=lM?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(v,A,y)&&h.push(t.Pi.updateTargetData(l,A))});let g=ha(),p=St();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))}),h.push(fM(l,u,e.documentUpdates).next(y=>{g=y.ks,p=y.qs})),!n.isEqual(st.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next(w=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,n));h.push(y)}return ye.waitFor(h).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,p)).next(()=>g)}).then(l=>(t.Ms=a,l))}function fM(s,e,t){let n=St(),a=St();return t.forEach(l=>n=n.add(l)),e.getEntries(s,n).next(l=>{let u=ha();return t.forEach((h,g)=>{const p=l.get(h);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),g.isNoDocument()&&g.version.isEqual(st.min())?(e.removeEntry(h,g.readTime),u=u.insert(h,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(h,g)):Oe(yy,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",g.version)}),{ks:u,qs:a}})}function mM(s,e){const t=rt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=iy),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function gM(s,e){const t=rt(s);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return t.Pi.getTargetData(n,e).next(l=>l?(a=l,ye.resolve(a)):t.Pi.allocateTargetId(n).next(u=>(a=new za(e,u,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=t.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n})}async function Gx(s,e,t){const n=rt(s),a=n.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",l,u=>n.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!Dc(u))throw u;Oe(yy,`Failed to update sequence numbers for target ${e}: ${u}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function zN(s,e,t){const n=rt(s);let a=st.min(),l=St();return n.persistence.runTransaction("Execute query","readwrite",u=>function(g,p,y){const w=rt(g),v=w.xs.get(y);return v!==void 0?ye.resolve(w.Ms.get(v)):w.Pi.getTargetData(p,y)}(n,u,Ti(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(u,h.targetId).next(g=>{l=g})}).next(()=>n.Fs.getDocumentsMatchingQuery(u,e,t?a:st.min(),t?l:St())).next(h=>(pM(n,e6(e),h),{documents:h,Qs:l})))}function pM(s,e,t){let n=s.Os.get(e)||st.min();t.forEach((a,l)=>{l.readTime.compareTo(n)>0&&(n=l.readTime)}),s.Os.set(e,n)}class HN{constructor(){this.activeTargetIds=a6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xM{constructor(){this.Mo=new HN,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new HN,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="ConnectivityMonitor";class WN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Oe(GN,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Oe(GN,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh=null;function Wx(){return Kh===null?Kh=function(){return 268435456+Math.round(2147483648*Math.random())}():Kh++,"0x"+Kh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="RestConnection",vM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===If?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,t,n,a,l){const u=Wx(),h=this.zo(e,t.toUriEncodedString());Oe(Xp,`Sending RPC '${e}' ${u}:`,h,n);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,l);const{host:p}=new URL(h),y=fo(p);return this.Jo(e,h,g,n,y).then(w=>(Oe(Xp,`Received RPC '${e}' ${u}: `,w),w),w=>{throw xc(Xp,`RPC '${e}' ${u} failed with error: `,w,"url: ",h,"request:",n),w})}Ho(e,t,n,a,l,u){return this.Go(e,t,n,a,l)}jo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),n&&n.headers.forEach((a,l)=>e[l]=a)}zo(e,t){const n=vM[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class wM extends bM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,a,l){const u=Wx();return new Promise((h,g)=>{const p=new LS;p.setWithCredentials(!0),p.listenOnce(US.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case rf.NO_ERROR:const w=p.getResponseJson();Oe(Bn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),h(w);break;case rf.TIMEOUT:Oe(Bn,`RPC '${e}' ${u} timed out`),g(new De(ge.DEADLINE_EXCEEDED,"Request time out"));break;case rf.HTTP_ERROR:const v=p.getStatus();if(Oe(Bn,`RPC '${e}' ${u} failed with status:`,v,"response text:",p.getResponseText()),v>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A==null?void 0:A.error;if(R&&R.status&&R.message){const z=function(Q){const pe=Q.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(pe)>=0?pe:ge.UNKNOWN}(R.status);g(new De(z,R.message))}else g(new De(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new De(ge.UNAVAILABLE,"Connection failed."));break;default:et(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Oe(Bn,`RPC '${e}' ${u} completed.`)}});const y=JSON.stringify(a);Oe(Bn,`RPC '${e}' ${u} sending request:`,a),p.send(t,"POST",y,n,15)})}T_(e,t,n){const a=Wx(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=BS(),h=FS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,n),g.encodeInitMessageHeaders=!0;const y=l.join("");Oe(Bn,`Creating RPC '${e}' stream ${a}: ${y}`,g);const w=u.createWebChannel(y,g);this.I_(w);let v=!1,A=!1;const R=new _M({Yo:q=>{A?Oe(Bn,`Not sending because RPC '${e}' stream ${a} is closed:`,q):(v||(Oe(Bn,`Opening RPC '${e}' stream ${a} transport.`),w.open(),v=!0),Oe(Bn,`RPC '${e}' stream ${a} sending:`,q),w.send(q))},Zo:()=>w.close()}),z=(q,Q,pe)=>{q.listen(Q,ee=>{try{pe(ee)}catch(fe){setTimeout(()=>{throw fe},0)}})};return z(w,Iu.EventType.OPEN,()=>{A||(Oe(Bn,`RPC '${e}' stream ${a} transport opened.`),R.o_())}),z(w,Iu.EventType.CLOSE,()=>{A||(A=!0,Oe(Bn,`RPC '${e}' stream ${a} transport closed`),R.a_(),this.E_(w))}),z(w,Iu.EventType.ERROR,q=>{A||(A=!0,xc(Bn,`RPC '${e}' stream ${a} transport errored. Name:`,q.name,"Message:",q.message),R.a_(new De(ge.UNAVAILABLE,"The operation could not be completed")))}),z(w,Iu.EventType.MESSAGE,q=>{var Q;if(!A){const pe=q.data[0];$t(!!pe,16349);const ee=pe,fe=(ee==null?void 0:ee.error)||((Q=ee[0])==null?void 0:Q.error);if(fe){Oe(Bn,`RPC '${e}' stream ${a} received error:`,fe);const be=fe.status;let Ee=function(I){const U=Ys[I];if(U!==void 0)return wE(U)}(be),L=fe.message;Ee===void 0&&(Ee=ge.INTERNAL,L="Unknown error status: "+be+" with message "+fe.message),A=!0,R.a_(new De(Ee,L)),w.close()}else Oe(Bn,`RPC '${e}' stream ${a} received:`,pe),R.u_(pe)}}),z(h,VS.STAT_EVENT,q=>{q.stat===Mx.PROXY?Oe(Bn,`RPC '${e}' stream ${a} detected buffering proxy`):q.stat===Mx.NOPROXY&&Oe(Bn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Jp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(s){return new S6(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,n=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-n);a>0&&Oe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="PersistentStream";class LE{constructor(e,t,n,a,l,u,h,g){this.Mi=e,this.S_=n,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new PE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(da(t.toString()),da("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===t&&this.G_(n,a)},n=>{e(()=>{const a=new De(ge.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Oe(YN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Oe(YN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NM extends LE{constructor(e,t,n,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=C6(this.serializer,e),n=function(l){if(!("targetChange"in l))return st.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?st.min():u.readTime?Ei(u.readTime):st.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Hx(this.serializer),t.addTarget=function(l,u){let h;const g=u.target;if(h=Vx(g)?{documents:D6(l,g)}:{query:k6(l,g).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=TE(l,u.resumeToken);const p=qx(l,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(st.min())>0){h.readTime=Of(l,u.snapshotVersion.toTimestamp());const p=qx(l,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const n=O6(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Hx(this.serializer),t.removeTarget=e,this.q_(t)}}class jM extends LE{constructor(e,t,n,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return $t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=I6(e.writeResults,e.commitTime),n=Ei(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Hx(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>R6(this.serializer,n))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{}class SM extends TM{constructor(e,t,n,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new De(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Go(e,$x(t,n),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new De(ge.UNKNOWN,l.toString())})}Ho(e,t,n,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Ho(e,$x(t,n),a,u,h,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new De(ge.UNKNOWN,u.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class EM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(da(t),this.aa=!1):Oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl="RemoteStore";class AM{constructor(e,t,n,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(u=>{n.enqueueAndForget(async()=>{cl(this)&&(Oe(tl,"Restarting streams for network reachability change."),await async function(g){const p=rt(g);p.Ea.add(4),await Id(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Rm(p)}(this))})}),this.Ra=new EM(n,a)}}async function Rm(s){if(cl(s))for(const e of s.da)await e(!0)}async function Id(s){for(const e of s.da)await e(!1)}function UE(s,e){const t=rt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),wy(t)?_y(t):Mc(t).O_()&&by(t,e))}function vy(s,e){const t=rt(s),n=Mc(t);t.Ia.delete(e),n.O_()&&VE(t,e),t.Ia.size===0&&(n.O_()?n.L_():cl(t)&&t.Ra.set("Unknown"))}function by(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(st.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mc(s).Y_(e)}function VE(s,e){s.Va.Ue(e),Mc(s).Z_(e)}function _y(s){s.Va=new w6({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Mc(s).start(),s.Ra.ua()}function wy(s){return cl(s)&&!Mc(s).x_()&&s.Ia.size>0}function cl(s){return rt(s).Ea.size===0}function FE(s){s.Va=void 0}async function CM(s){s.Ra.set("Online")}async function RM(s){s.Ia.forEach((e,t)=>{by(s,e)})}async function IM(s,e){FE(s),wy(s)?(s.Ra.ha(e),_y(s)):s.Ra.set("Unknown")}async function DM(s,e,t){if(s.Ra.set("Online"),e instanceof jE&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))}(s,e)}catch(n){Oe(tl,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Lf(s,n)}else if(e instanceof cf?s.Va.Ze(e):e instanceof NE?s.Va.st(e):s.Va.tt(e),!t.isEqual(st.min()))try{const n=await OE(s.localStore);t.compareTo(n)>=0&&await function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(g.resumeToken,u))}}),h.targetMismatches.forEach((g,p)=>{const y=l.Ia.get(g);if(!y)return;l.Ia.set(g,y.withResumeToken(On.EMPTY_BYTE_STRING,y.snapshotVersion)),VE(l,g);const w=new za(y.target,g,p,y.sequenceNumber);by(l,w)}),l.remoteSyncer.applyRemoteEvent(h)}(s,t)}catch(n){Oe(tl,"Failed to raise snapshot:",n),await Lf(s,n)}}async function Lf(s,e,t){if(!Dc(e))throw e;s.Ea.add(1),await Id(s),s.Ra.set("Offline"),t||(t=()=>OE(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Oe(tl,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Rm(s)})}function BE(s,e){return e().catch(t=>Lf(s,t,e))}async function Im(s){const e=rt(s),t=uo(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:iy;for(;kM(e);)try{const a=await mM(e.localStore,n);if(a===null){e.Ta.length===0&&t.L_();break}n=a.batchId,MM(e,a)}catch(a){await Lf(e,a)}qE(e)&&$E(e)}function kM(s){return cl(s)&&s.Ta.length<10}function MM(s,e){s.Ta.push(e);const t=uo(s);t.O_()&&t.X_&&t.ea(e.mutations)}function qE(s){return cl(s)&&!uo(s).x_()&&s.Ta.length>0}function $E(s){uo(s).start()}async function OM(s){uo(s).ra()}async function PM(s){const e=uo(s);for(const t of s.Ta)e.ea(t.mutations)}async function LM(s,e,t){const n=s.Ta.shift(),a=hy.from(n,e,t);await BE(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await Im(s)}async function UM(s,e){e&&uo(s).X_&&await async function(n,a){if(function(u){return v6(u)&&u!==ge.ABORTED}(a.code)){const l=n.Ta.shift();uo(n).B_(),await BE(n,()=>n.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Im(n)}}(s,e),qE(s)&&$E(s)}async function KN(s,e){const t=rt(s);t.asyncQueue.verifyOperationInProgress(),Oe(tl,"RemoteStore received new credentials");const n=cl(t);t.Ea.add(3),await Id(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Rm(t)}async function VM(s,e){const t=rt(s);e?(t.Ea.delete(2),await Rm(t)):e||(t.Ea.add(2),await Id(t),t.Ra.set("Unknown"))}function Mc(s){return s.ma||(s.ma=function(t,n,a){const l=rt(t);return l.sa(),new NM(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{Xo:CM.bind(null,s),t_:RM.bind(null,s),r_:IM.bind(null,s),H_:DM.bind(null,s)}),s.da.push(async e=>{e?(s.ma.B_(),wy(s)?_y(s):s.Ra.set("Unknown")):(await s.ma.stop(),FE(s))})),s.ma}function uo(s){return s.fa||(s.fa=function(t,n,a){const l=rt(t);return l.sa(),new jM(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:OM.bind(null,s),r_:UM.bind(null,s),ta:PM.bind(null,s),na:LM.bind(null,s)}),s.da.push(async e=>{e?(s.fa.B_(),await Im(s)):(await s.fa.stop(),s.Ta.length>0&&(Oe(tl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))})),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,t,n,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=a,this.removalCallback=l,this.deferred=new Yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,a,l){const u=Date.now()+n,h=new Ny(e,t,u,a,l);return h.start(n),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new De(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jy(s,e){if(da("AsyncQueue",`${e}: ${s}`),Dc(s))return new De(ge.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{static emptySet(e){return new ac(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ge.comparator(t.key,n.key):(t,n)=>Ge.comparator(t.key,n.key),this.keyedMap=Du(),this.sortedSet=new Cs(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ac)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=n.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ac;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.ga=new Cs(Ge.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):et(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class wc{constructor(e,t,n,a,l,u,h,g,p){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,n,a,l){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new wc(e,t,ac.emptySet(t),u,n,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==n[a].type||!t[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class BM{constructor(){this.queries=XN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const a=rt(t),l=a.queries;a.queries=XN(),l.forEach((u,h)=>{for(const g of h.Sa)g.onError(n)})})(this,new De(ge.ABORTED,"Firestore shutting down"))}}function XN(){return new ll(s=>cE(s),jm)}async function qM(s,e){const t=rt(s);let n=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(n=2):(l=new FM,n=e.Da()?0:1);try{switch(n){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=jy(u,`Initialization of query '${Zl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ty(t)}async function $M(s,e){const t=rt(s),n=e.query;let a=3;const l=t.queries.get(n);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function zM(s,e){const t=rt(s);let n=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(n=!0);u.wa=a}}n&&Ty(t)}function HM(s,e,t){const n=rt(s),a=n.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);n.queries.delete(e)}function Ty(s){s.Ca.forEach(e=>{e.next()})}var Yx,JN;(JN=Yx||(Yx={})).Ma="default",JN.Cache="cache";class GM{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new wc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=wc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.key=e}}class HE{constructor(e){this.key=e}}class WM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=St(),this.mutatedKeys=St(),this.eu=uE(e),this.tu=new ac(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new QN,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,w)=>{const v=a.get(y),A=Tm(this.query,w)?w:null,R=!!v&&this.mutatedKeys.has(v.key),z=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let q=!1;v&&A?v.data.isEqual(A.data)?R!==z&&(n.track({type:3,doc:A}),q=!0):this.su(v,A)||(n.track({type:2,doc:A}),q=!0,(g&&this.eu(A,g)>0||p&&this.eu(A,p)<0)&&(h=!0)):!v&&A?(n.track({type:0,doc:A}),q=!0):v&&!A&&(n.track({type:1,doc:v}),q=!0,(g||p)&&(h=!0)),q&&(A?(u=u.add(A),l=z?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),n.track({type:1,doc:y})}return{tu:u,iu:n,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort((y,w)=>function(A,R){const z=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et(20277,{Rt:q})}};return z(A)-z(R)}(y.type,w.type)||this.eu(y.doc,w.doc)),this.ou(n),a=a??!1;const h=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,p=g!==this.Za;return this.Za=g,u.length!==0||p?{snapshot:new wc(this.query,e.tu,l,u,e.mutatedKeys,g===0,p,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new QN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=St(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const t=[];return e.forEach(n=>{this.Xa.has(n)||t.push(new HE(n))}),this.Xa.forEach(n=>{e.has(n)||t.push(new zE(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=St();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return wc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sy="SyncEngine";class YM{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class KM{constructor(e){this.key=e,this.hu=!1}}class QM{constructor(e,t,n,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ll(h=>cE(h),jm),this.Iu=new Map,this.Eu=new Set,this.du=new Cs(Ge.comparator),this.Au=new Map,this.Ru=new gy,this.Vu={},this.mu=new Map,this.fu=_c.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XM(s,e,t=!0){const n=XE(s);let a;const l=n.Tu.get(e);return l?(n.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await GE(n,e,t,!0),a}async function JM(s,e){const t=XE(s);await GE(t,e,!0,!1)}async function GE(s,e,t,n){const a=await gM(s.localStore,Ti(e)),l=a.targetId,u=s.sharedClientState.addLocalQueryTarget(l,t);let h;return n&&(h=await ZM(s,e,l,u==="current",a.resumeToken)),s.isPrimaryClient&&t&&UE(s.remoteStore,a),h}async function ZM(s,e,t,n,a){s.pu=(w,v,A)=>async function(z,q,Q,pe){let ee=q.view.ru(Q);ee.Cs&&(ee=await zN(z.localStore,q.query,!1).then(({documents:L})=>q.view.ru(L,ee)));const fe=pe&&pe.targetChanges.get(q.targetId),be=pe&&pe.targetMismatches.get(q.targetId)!=null,Ee=q.view.applyChanges(ee,z.isPrimaryClient,fe,be);return ej(z,q.targetId,Ee.au),Ee.snapshot}(s,w,v,A);const l=await zN(s.localStore,e,!0),u=new WM(e,l.Qs),h=u.ru(l.documents),g=Rd.createSynthesizedTargetChangeForCurrentChange(t,n&&s.onlineState!=="Offline",a),p=u.applyChanges(h,s.isPrimaryClient,g);ej(s,t,p.au);const y=new YM(e,t,u);return s.Tu.set(e,y),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function eO(s,e,t){const n=rt(s),a=n.Tu.get(e),l=n.Iu.get(a.targetId);if(l.length>1)return n.Iu.set(a.targetId,l.filter(u=>!jm(u,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Gx(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),t&&vy(n.remoteStore,a.targetId),Kx(n,a.targetId)}).catch(Ic)):(Kx(n,a.targetId),await Gx(n.localStore,a.targetId,!0))}async function tO(s,e){const t=rt(s),n=t.Tu.get(e),a=t.Iu.get(n.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),vy(t.remoteStore,n.targetId))}async function sO(s,e,t){const n=cO(s);try{const a=await function(u,h){const g=rt(u),p=ps.now(),y=h.reduce((A,R)=>A.add(R.key),St());let w,v;return g.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=ha(),z=St();return g.Ns.getEntries(A,y).next(q=>{R=q,R.forEach((Q,pe)=>{pe.isValidDocument()||(z=z.add(Q))})}).next(()=>g.localDocuments.getOverlayedDocuments(A,R)).next(q=>{w=q;const Q=[];for(const pe of h){const ee=m6(pe,w.get(pe.key).overlayedDocument);ee!=null&&Q.push(new po(pe.key,ee,tE(ee.value.mapValue),Si.exists(!0)))}return g.mutationQueue.addMutationBatch(A,p,Q,h)}).next(q=>{v=q;const Q=q.applyToLocalDocumentSet(w,z);return g.documentOverlayCache.saveOverlays(A,q.batchId,Q)})}).then(()=>({batchId:v.batchId,changes:hE(w)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(u,h,g){let p=u.Vu[u.currentUser.toKey()];p||(p=new Cs(Tt)),p=p.insert(h,g),u.Vu[u.currentUser.toKey()]=p}(n,a.batchId,t),await Dd(n,a.changes),await Im(n.remoteStore)}catch(a){const l=jy(a,"Failed to persist write");t.reject(l)}}async function WE(s,e){const t=rt(s);try{const n=await hM(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t.Au.get(l);u&&($t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?$t(u.hu,14607):a.removedDocuments.size>0&&($t(u.hu,42227),u.hu=!1))}),await Dd(t,n,e)}catch(n){await Ic(n)}}function ZN(s,e,t){const n=rt(s);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const a=[];n.Tu.forEach((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)}),function(u,h){const g=rt(u);g.onlineState=h;let p=!1;g.queries.forEach((y,w)=>{for(const v of w.Sa)v.va(h)&&(p=!0)}),p&&Ty(g)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function nO(s,e,t){const n=rt(s);n.sharedClientState.updateQueryState(e,"rejected",t);const a=n.Au.get(e),l=a&&a.key;if(l){let u=new Cs(Ge.comparator);u=u.insert(l,$n.newNoDocument(l,st.min()));const h=St().add(l),g=new Am(st.min(),new Map,new Cs(Tt),u,h);await WE(n,g),n.du=n.du.remove(l),n.Au.delete(e),Ey(n)}else await Gx(n.localStore,e,!1).then(()=>Kx(n,e,t)).catch(Ic)}async function rO(s,e){const t=rt(s),n=e.batch.batchId;try{const a=await dM(t.localStore,e);KE(t,n,null),YE(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Dd(t,a)}catch(a){await Ic(a)}}async function iO(s,e,t){const n=rt(s);try{const a=await function(u,h){const g=rt(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return g.mutationQueue.lookupMutationBatch(p,h).next(w=>($t(w!==null,37113),y=w.keys(),g.mutationQueue.removeMutationBatch(p,w))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>g.localDocuments.getDocuments(p,y))})}(n.localStore,e);KE(n,e,t),YE(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Dd(n,a)}catch(a){await Ic(a)}}function YE(s,e){(s.mu.get(e)||[]).forEach(t=>{t.resolve()}),s.mu.delete(e)}function KE(s,e,t){const n=rt(s);let a=n.Vu[n.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function Kx(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const n of s.Iu.get(e))s.Tu.delete(n),t&&s.Pu.yu(n,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach(n=>{s.Ru.containsKey(n)||QE(s,n)})}function QE(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(vy(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Ey(s))}function ej(s,e,t){for(const n of t)n instanceof zE?(s.Ru.addReference(n.key,e),aO(s,n)):n instanceof HE?(Oe(Sy,"Document no longer in limbo: "+n.key),s.Ru.removeReference(n.key,e),s.Ru.containsKey(n.key)||QE(s,n.key)):et(19791,{wu:n})}function aO(s,e){const t=e.key,n=t.path.canonicalString();s.du.get(t)||s.Eu.has(n)||(Oe(Sy,"New document in limbo: "+t),s.Eu.add(n),Ey(s))}function Ey(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ge(ds.fromString(e)),n=s.fu.next();s.Au.set(n,new KM(t)),s.du=s.du.insert(t,n),UE(s.remoteStore,new za(Ti(uy(t.path)),n,"TargetPurposeLimboResolution",_m.ce))}}async function Dd(s,e,t){const n=rt(s),a=[],l=[],u=[];n.Tu.isEmpty()||(n.Tu.forEach((h,g)=>{u.push(n.pu(g,e,t).then(p=>{var y;if((p||t)&&n.isPrimaryClient){const w=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:y.current;n.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(p){a.push(p);const w=xy.As(g.targetId,p);l.push(w)}}))}),await Promise.all(u),n.Pu.H_(a),await async function(g,p){const y=rt(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ye.forEach(p,v=>ye.forEach(v.Es,A=>y.persistence.referenceDelegate.addReference(w,v.targetId,A)).next(()=>ye.forEach(v.ds,A=>y.persistence.referenceDelegate.removeReference(w,v.targetId,A)))))}catch(w){if(!Dc(w))throw w;Oe(yy,"Failed to update sequence numbers: "+w)}for(const w of p){const v=w.targetId;if(!w.fromCache){const A=y.Ms.get(v),R=A.snapshotVersion,z=A.withLastLimboFreeSnapshotVersion(R);y.Ms=y.Ms.insert(v,z)}}}(n.localStore,l))}async function oO(s,e){const t=rt(s);if(!t.currentUser.isEqual(e)){Oe(Sy,"User change. New user:",e.toKey());const n=await ME(t.localStore,e);t.currentUser=e,function(l,u){l.mu.forEach(h=>{h.forEach(g=>{g.reject(new De(ge.CANCELLED,u))})}),l.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Dd(t,n.Ls)}}function lO(s,e){const t=rt(s),n=t.Au.get(e);if(n&&n.hu)return St().add(n.key);{let a=St();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const h=t.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function XE(s){const e=rt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=WE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nO.bind(null,e),e.Pu.H_=zM.bind(null,e.eventManager),e.Pu.yu=HM.bind(null,e.eventManager),e}function cO(s){const e=rt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iO.bind(null,e),e}class Uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return uM(this.persistence,new oM,e.initialUser,this.serializer)}Cu(e){return new kE(py.mi,this.serializer)}Du(e){return new xM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uf.provider={build:()=>new Uf};class uO extends Uf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$t(this.persistence.referenceDelegate instanceof Pf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new G6(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?or.withCacheSize(this.cacheSizeBytes):or.DEFAULT;return new kE(n=>Pf.mi(n,t),this.serializer)}}class Qx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>ZN(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=oO.bind(null,this.syncEngine),await VM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new BM}()}createDatastore(e){const t=Cm(e.databaseInfo.databaseId),n=function(l){return new wM(l)}(e.databaseInfo);return function(l,u,h,g){return new SM(l,u,h,g)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,a,l,u,h){return new AM(n,a,l,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>ZN(this.syncEngine,t,0),function(){return WN.v()?new WN:new yM}())}createSyncEngine(e,t){return function(a,l,u,h,g,p,y){const w=new QM(a,l,u,h,g,p);return y&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=rt(a);Oe(tl,"RemoteStore shutting down."),l.Ea.add(5),await Id(l),l.Aa.shutdown(),l.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Qx.provider={build:()=>new Qx};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):da("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="FirestoreClient";class hO{constructor(e,t,n,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=a,this.user=qn.UNAUTHENTICATED,this.clientId=ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(n,async u=>{Oe(ho,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(n,u=>(Oe(ho,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=jy(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Zp(s,e){s.asyncQueue.verifyOperationInProgress(),Oe(ho,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let n=t.initialUser;s.setCredentialChangeListener(async a=>{n.isEqual(a)||(await ME(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function tj(s,e){s.asyncQueue.verifyOperationInProgress();const t=await fO(s);Oe(ho,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(n=>KN(e.remoteStore,n)),s.setAppCheckTokenChangeListener((n,a)=>KN(e.remoteStore,a)),s._onlineComponents=e}async function fO(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Oe(ho,"Using user provided OfflineComponentProvider");try{await Zp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ge.FAILED_PRECONDITION||a.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;xc("Error using user provided cache. Falling back to memory cache: "+t),await Zp(s,new Uf)}}else Oe(ho,"Using default OfflineComponentProvider"),await Zp(s,new uO(void 0));return s._offlineComponents}async function JE(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Oe(ho,"Using user provided OnlineComponentProvider"),await tj(s,s._uninitializedComponentsProvider._online)):(Oe(ho,"Using default OnlineComponentProvider"),await tj(s,new Qx))),s._onlineComponents}function mO(s){return JE(s).then(e=>e.syncEngine)}async function sj(s){const e=await JE(s),t=e.eventManager;return t.onListen=XM.bind(null,e.syncEngine),t.onUnlisten=eO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tO.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firestore.googleapis.com",rj=!0;class ij{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new De(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=e1,this.ssl=rj}else this.host=e.host,this.ssl=e.ssl??rj;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<z6)throw new De(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZE(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new De(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new De(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new De(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dm{constructor(e,t,n,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ij({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new De(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new De(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ij(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new x3;switch(n.type){case"firstParty":return new _3(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new De(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=nj.get(t);n&&(Oe("ComponentProvider","Removing Datastore"),nj.delete(t),n.terminate())}(this),Promise.resolve()}}function gO(s,e,t,n={}){var p;s=Ko(s,Dm);const a=fo(e),l=s._getSettings(),u={...l,emulatorOptions:s._getEmulatorOptions()},h=`${e}:${t}`;a&&(Xf(`https://${h}`),Jf("Firestore",!0)),l.host!==e1&&l.host!==h&&xc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:h,ssl:a,emulatorOptions:n};if(!Xu(g,u)&&(s._setSettings(g),n.mockUserToken)){let y,w;if(typeof n.mockUserToken=="string")y=n.mockUserToken,w=qn.MOCK_USER;else{y=x0(n.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const v=n.mockUserToken.sub||n.mockUserToken.user_id;if(!v)throw new De(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new qn(v)}s._authCredentials=new y3(new $S(y,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ul(this.firestore,e,this._query)}}class Zs{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zs(this.firestore,e,this._key)}toJSON(){return{type:Zs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ad(t,Zs._jsonSchema))return new Zs(e,n||null,new Ge(ds.fromString(t.referencePath)))}}Zs._jsonSchemaVersion="firestore/documentReference/1.0",Zs._jsonSchema={type:Js("string",Zs._jsonSchemaVersion),referencePath:Js("string")};class Ja extends ul{constructor(e,t,n){super(e,t,uy(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zs(this.firestore,null,new Ge(e))}withConverter(e){return new Ja(this.firestore,e,this._path)}}function aj(s,e,...t){if(s=xs(s),zS("collection","path",e),s instanceof Dm){const n=ds.fromString(e,...t);return xN(n),new Ja(s,null,n)}{if(!(s instanceof Zs||s instanceof Ja))throw new De(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(ds.fromString(e,...t));return xN(n),new Ja(s.firestore,null,n)}}function Xx(s,e,...t){if(s=xs(s),arguments.length===1&&(e=ry.newId()),zS("doc","path",e),s instanceof Dm){const n=ds.fromString(e,...t);return pN(n),new Zs(s,null,new Ge(n))}{if(!(s instanceof Zs||s instanceof Ja))throw new De(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(ds.fromString(e,...t));return pN(n),new Zs(s.firestore,s instanceof Ja?s.converter:null,new Ge(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="AsyncQueue";class lj{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new PE(this,"async_queue_retry"),this._c=()=>{const n=Jp();n&&Oe(oj,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Jp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Jp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Yo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dc(e))throw e;Oe(oj,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,da("INTERNAL UNHANDLED ERROR: ",cj(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Ny.createAndSchedule(this,e,t,n,l=>this.hc(l));return this.tc.push(a),a}uc(){this.nc&&et(47125,{Pc:cj(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function cj(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(s){return function(t,n){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of n)if(l in a&&typeof a[l]=="function")return!0;return!1}(s,["next","error","complete"])}class md extends Dm{constructor(e,t,n,a){super(e,t,n,a),this.type="firestore",this._queue=new lj,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lj(e),this._firestoreClient=void 0,await e}}}function pO(s,e){const t=typeof s=="object"?s:vd(),n=typeof s=="string"?s:If,a=rl(t,"firestore").getImmediate({identifier:n});if(!a._initialized){const l=Qf("firestore");l&&gO(a,...l)}return a}function t1(s){if(s._terminated)throw new De(ge.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||xO(s),s._firestoreClient}function xO(s){var n,a,l;const e=s._freezeSettings(),t=function(h,g,p,y){return new U3(h,g,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,ZE(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(s._databaseId,((n=s._app)==null?void 0:n.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new hO(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&function(h){const g=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(g),_online:g}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(On.fromBase64String(e))}catch(t){throw new De(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vr(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ad(e,Vr._jsonSchema))return Vr.fromBase64String(e.bytes)}}Vr._jsonSchemaVersion="firestore/bytes/1.0",Vr._jsonSchema={type:Js("string",Vr._jsonSchemaVersion),bytes:Js("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new De(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(Ad(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:Js("string",Ai._jsonSchemaVersion),latitude:Js("number"),longitude:Js("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let l=0;l<n.length;++l)if(n[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ad(e,Ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ci(e.vectorValues);throw new De(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ci._jsonSchemaVersion="firestore/vectorValue/1.0",Ci._jsonSchema={type:Js("string",Ci._jsonSchemaVersion),vectorValues:Js("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=/^__.*__$/;class vO{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new po(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cd(e,this.data,t,this.fieldTransforms)}}class s1{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new po(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function n1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et(40011,{Ac:s})}}class Ay{constructor(e,t,n,a,l,u){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ay({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(n1(this.Ac)&&yO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bO{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Cm(e)}Cc(e,t,n,a=!1){return new Ay({Ac:e,methodName:t,Dc:n,path:kn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cy(s){const e=s._freezeSettings(),t=Cm(s._databaseId);return new bO(s._databaseId,!!e.ignoreUndefinedProperties,t)}function _O(s,e,t,n,a,l={}){const u=s.Cc(l.merge||l.mergeFields?2:0,e,t,a);Iy("Data must be an object, but it was:",u,n);const h=r1(n,u);let g,p;if(l.merge)g=new wr(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const w of l.mergeFields){const v=Jx(e,w,t);if(!u.contains(v))throw new De(ge.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);a1(y,v)||y.push(v)}g=new wr(y),p=u.fieldTransforms.filter(w=>g.covers(w.field))}else g=null,p=u.fieldTransforms;return new vO(new lr(h),g,p)}class Om extends Mm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Om}}class Ry extends Mm{_toFieldTransform(e){return new u6(e.path,new dd)}isEqual(e){return e instanceof Ry}}function wO(s,e,t,n){const a=s.Cc(1,e,t);Iy("Data must be an object, but it was:",a,n);const l=[],u=lr.empty();go(n,(g,p)=>{const y=Dy(e,g,t);p=xs(p);const w=a.yc(y);if(p instanceof Om)l.push(y);else{const v=kd(p,w);v!=null&&(l.push(y),u.set(y,v))}});const h=new wr(l);return new s1(u,h,a.fieldTransforms)}function NO(s,e,t,n,a,l){const u=s.Cc(1,e,t),h=[Jx(e,n,t)],g=[a];if(l.length%2!=0)throw new De(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<l.length;v+=2)h.push(Jx(e,l[v])),g.push(l[v+1]);const p=[],y=lr.empty();for(let v=h.length-1;v>=0;--v)if(!a1(p,h[v])){const A=h[v];let R=g[v];R=xs(R);const z=u.yc(A);if(R instanceof Om)p.push(A);else{const q=kd(R,z);q!=null&&(p.push(A),y.set(A,q))}}const w=new wr(p);return new s1(y,w,u.fieldTransforms)}function jO(s,e,t,n=!1){return kd(t,s.Cc(n?4:3,e))}function kd(s,e){if(i1(s=xs(s)))return Iy("Unsupported field value:",e,s),r1(s,e);if(s instanceof Mm)return function(n,a){if(!n1(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const l=[];let u=0;for(const h of n){let g=kd(h,a.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}}(s,e)}return function(n,a){if((n=xs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return o6(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const l=ps.fromDate(n);return{timestampValue:Of(a.serializer,l)}}if(n instanceof ps){const l=new ps(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Of(a.serializer,l)}}if(n instanceof Ai)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Vr)return{bytesValue:TE(a.serializer,n._byteString)};if(n instanceof Zs){const l=a.databaseId,u=n.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:my(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Ci)return function(u,h){return{mapValue:{fields:{[ZS]:{stringValue:eE},[Df]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return dy(h.serializer,p)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${bm(n)}`)}(s,e)}function r1(s,e){const t={};return WS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(s,(n,a)=>{const l=kd(a,e.mc(n));l!=null&&(t[n]=l)}),{mapValue:{fields:t}}}function i1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ps||s instanceof Ai||s instanceof Vr||s instanceof Zs||s instanceof Mm||s instanceof Ci)}function Iy(s,e,t){if(!i1(t)||!HS(t)){const n=bm(t);throw n==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+n)}}function Jx(s,e,t){if((e=xs(e))instanceof km)return e._internalPath;if(typeof e=="string")return Dy(s,e);throw Vf("Field path arguments must be of type string or ",s,!1,void 0,t)}const TO=new RegExp("[~\\*/\\[\\]]");function Dy(s,e,t){if(e.search(TO)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new km(...e.split("."))._internalPath}catch{throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Vf(s,e,t,n,a){const l=n&&!n.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${n}`),u&&(g+=` in document ${a}`),g+=")"),new De(ge.INVALID_ARGUMENT,h+s+g)}function a1(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t,n,a,l){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Zs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ky("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SO extends o1{data(){return super.data()}}function ky(s,e){return typeof e=="string"?Dy(s,e):e instanceof km?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new De(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class My{}class l1 extends My{}function AO(s,e,...t){let n=[];e instanceof My&&n.push(e),n=n.concat(t),function(l){const u=l.filter(g=>g instanceof Py).length,h=l.filter(g=>g instanceof Oy).length;if(u>1||u>0&&h>0)throw new De(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)s=a._apply(s);return s}class Oy extends l1{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Oy(e,t,n)}_apply(e){const t=this._parse(e);return c1(e._query,t),new ul(e.firestore,e.converter,Fx(e._query,t))}_parse(e){const t=Cy(e.firestore);return function(l,u,h,g,p,y,w){let v;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new De(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){hj(w,y);const R=[];for(const z of w)R.push(dj(g,l,z));v={arrayValue:{values:R}}}else v=dj(g,l,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||hj(w,y),v=jO(h,u,w,y==="in"||y==="not-in");return Qs.create(p,y,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Py extends My{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Py(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:oi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const h=l.getFlattenedFilters();for(const g of h)c1(u,g),u=Fx(u,g)}(e._query,t),new ul(e.firestore,e.converter,Fx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ly extends l1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ly(e,t)}_apply(e){const t=function(a,l,u){if(a.startAt!==null)throw new De(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new De(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ud(l,u)}(e._query,this._field,this._direction);return new ul(e.firestore,e.converter,function(a,l){const u=a.explicitOrderBy.concat([l]);return new kc(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function CO(s,e="asc"){const t=e,n=ky("orderBy",s);return Ly._create(n,t)}function dj(s,e,t){if(typeof(t=xs(t))=="string"){if(t==="")throw new De(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lE(e)&&t.indexOf("/")!==-1)throw new De(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ds.fromString(t));if(!Ge.isDocumentKey(n))throw new De(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return TN(s,new Ge(n))}if(t instanceof Zs)return TN(s,t._key);throw new De(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bm(t)}.`)}function hj(s,e){if(!Array.isArray(s)||s.length===0)throw new De(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function c1(s,e){const t=function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(s.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new De(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new De(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class RO{convertValue(e,t="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw et(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return go(e,(a,l)=>{n[a]=this.convertValue(l,t)}),n}convertVectorValue(e){var n,a,l;const t=(l=(a=(n=e.fields)==null?void 0:n[Df].arrayValue)==null?void 0:a.values)==null?void 0:l.map(u=>Bs(u.doubleValue));return new Ci(t)}convertGeoPoint(e){return new Ai(Bs(e.latitude),Bs(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Nm(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(od(e));default:return null}}convertTimestamp(e){const t=oo(e);return new ps(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ds.fromString(e);$t(IE(n),9688,{name:e});const a=new ld(n.get(1),n.get(3)),l=new Ge(n.popFirst(5));return a.isEqual(t)||da(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(s,e,t){let n;return n=s?s.toFirestore(e):e,n}class Mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qo extends o1{constructor(e,t,n,a,l,u){super(e,t,n,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ky("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new De(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Qo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qo._jsonSchema={type:Js("string",Qo._jsonSchemaVersion),bundleSource:Js("string","DocumentSnapshot"),bundleName:Js("string"),bundle:Js("string")};class uf extends Qo{data(e={}){return super.data(e)}}class oc{constructor(e,t,n,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Mu(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new uf(this._firestore,this._userDataWriter,n.key,n,new Mu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(h=>{const g=new uf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Mu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const g=new uf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Mu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:DO(h.type),doc:g,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new De(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),n.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et(61501,{type:s})}}oc._jsonSchemaVersion="firestore/querySnapshot/1.0",oc._jsonSchema={type:Js("string",oc._jsonSchemaVersion),bundleSource:Js("string","QuerySnapshot"),bundleName:Js("string"),bundle:Js("string")};class u1 extends RO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zs(this.firestore,null,t)}}function fj(s,e,t,...n){s=Ko(s,Zs);const a=Ko(s.firestore,md),l=Cy(a);let u;return u=typeof(e=xs(e))=="string"||e instanceof km?NO(l,"updateDoc",s._key,e,t,n):wO(l,"updateDoc",s._key,e),d1(a,[u.toMutation(s._key,Si.exists(!0))])}function kO(s,e){const t=Ko(s.firestore,md),n=Xx(s),a=IO(s.converter,e);return d1(t,[_O(Cy(s.firestore),"addDoc",n._key,a,s.converter!==null,{}).toMutation(n._key,Si.exists(!1))]).then(()=>n)}function MO(s,...e){var g,p,y;s=xs(s);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||uj(e[n])||(t=e[n++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(uj(e[n])){const w=e[n];e[n]=(g=w.next)==null?void 0:g.bind(w),e[n+1]=(p=w.error)==null?void 0:p.bind(w),e[n+2]=(y=w.complete)==null?void 0:y.bind(w)}let l,u,h;if(s instanceof Zs)u=Ko(s.firestore,md),h=uy(s._key.path),l={next:w=>{e[n]&&e[n](OO(u,s,w))},error:e[n+1],complete:e[n+2]};else{const w=Ko(s,ul);u=Ko(w.firestore,md),h=w._query;const v=new u1(u);l={next:A=>{e[n]&&e[n](new oc(u,v,w,A))},error:e[n+1],complete:e[n+2]},EO(s._query)}return function(v,A,R,z){const q=new dO(z),Q=new GM(A,q,R);return v.asyncQueue.enqueueAndForget(async()=>qM(await sj(v),Q)),()=>{q.Nu(),v.asyncQueue.enqueueAndForget(async()=>$M(await sj(v),Q))}}(t1(u),h,a,l)}function d1(s,e){return function(n,a){const l=new Yo;return n.asyncQueue.enqueueAndForget(async()=>sO(await mO(n),a,l)),l.promise}(t1(s),e)}function OO(s,e,t){const n=t.docs.get(e._key),a=new u1(s);return new Qo(s,a,e._key,n,new Mu(t.hasPendingWrites,t.fromCache),e.converter)}function ex(){return new Ry("serverTimestamp")}(function(e,t=!0){(function(a){Rc=a})(b0),ai(new Br("firestore",(n,{instanceIdentifier:a,options:l})=>{const u=n.getProvider("app").getImmediate(),h=new md(new v3(n.getProvider("auth-internal")),new w3(u,n.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new De(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ld(p.options.projectId,y)}(u,a),u);return l={useFetchStreams:t,...l},h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),zn(hN,fN,e),zn(hN,fN,"esm2020")})();const Pm={apiKey:"AIzaSyAkooeomw80N2p89zUaSB5L2AwoB-SSpKg",authDomain:"tradingpourlesnuls-e7da4.firebaseapp.com",databaseURL:"https://tradingpourlesnuls-e7da4-default-rtdb.firebaseio.com",projectId:"tradingpourlesnuls-e7da4",storageBucket:"tradingpourlesnuls-e7da4.appspot.com",messagingSenderId:"742975995598",appId:"1:742975995598:web:a873ce4b7b3fb5af899a9f",measurementId:"G-4SVCDJXSYN"},PO=rm(Pm),Qh=pO(PO),h1=rm(Pm),Xs=CS(h1,Pm.databaseURL);f3(h1);const Ho=async s=>{try{const e=Object.fromEntries(Object.entries(s).filter(([a,l])=>l!==void 0));console.log(" Message nettoy avant envoi Firebase:",e);const t=Ks(Xs,"messages");return{id:ym(t,{...e,timestamp:sy()}).key||"",content:e.content,author:e.author,author_type:e.author_type,author_avatar:e.author_avatar,timestamp:new Date().toISOString(),channel_id:e.channel_id,attachment_data:e.attachment_data,attachment_type:e.attachment_type,attachment_name:e.attachment_name}}catch(e){return console.error("Erreur ajout message Firebase:",e),null}},Ff=async s=>{try{const e=Ks(Xs,"messages"),t=Qa(e,Zo("channel_id"),Ed(s),Ka(50)),n=await io(t),a=[];return n.exists()&&n.forEach(l=>{const u=l.val();a.push({id:l.key,...u})}),a.sort((l,u)=>Number(l.timestamp)-Number(u.timestamp)),console.log(` Messages chargs depuis Firebase pour ${s}:`,a.length),a}catch(e){return console.error("Erreur rcupration messages Firebase:",e),[]}},Bf=(s,e)=>{const t=Ks(Xs,"messages"),n=Qa(t,Zo("channel_id"),Ed(s),Ka(3)),a=new Set;return{unsubscribe:Sd(n,u=>{u.forEach(h=>{const g=h.val(),p=h.key;a.has(p)||(a.add(p),e({id:p,...g}))})})}},Uy=async s=>{try{console.log(" Dbut upload image Firebase:",s.name,"Taille:",s.size);const e=new FileReader;return new Promise(t=>{e.onload=n=>{var l;const a=(l=n.target)==null?void 0:l.result;console.log(" Image convertie en base64"),t(a)},e.readAsDataURL(s)})}catch(e){return console.error(" ERREUR upload image Firebase:",e),null}},f1=async s=>{try{const e=Ks(Xs,"signals"),t=await io(e),n=t.exists()?Object.values(t.val()):[],a=String(n.length+1).padStart(3,"0"),l=Ks(Xs,"signals");return{id:ym(l,{...s,referenceNumber:`#${a}`,timestamp:sy()}).key,...s,referenceNumber:`#${a}`,timestamp:new Date().toISOString()}}catch(e){return console.error("Erreur ajout signal Firebase:",e),null}},Za=async(s,e=3,t)=>{try{console.log(" getSignals appel avec channelId:",s,"limit:",e,"beforeTimestamp:",t);const n=Ks(Xs,"signals");let a=[];if(s&&s!=="all"&&a.push(Zo("channel_id"),Ed(s)),t){const l=Qa(n,...a,Zo("timestamp"),SS(t),Ka(e)),u=await io(l),h=[];return u.exists()&&u.forEach(g=>{const p=g.val();h.push({id:g.key,...p})}),h.sort((g,p)=>new Date(g.timestamp).getTime()-new Date(p.timestamp).getTime()),console.log(` Signaux chargs (avant ${t}):`,h.length),h}else{const l=s&&s!=="all"?Qa(n,...a,Ka(e)):Qa(n,Ka(e)),u=await io(l),h=[];return u.exists()&&u.forEach(g=>{const p=g.val();h.push({id:g.key,...p})}),h.sort((g,p)=>new Date(g.timestamp).getTime()-new Date(p.timestamp).getTime()),console.log(" Signaux chargs (filtrs):",h.length),h}}catch(n){return console.error(" Erreur rcupration signaux Firebase:",n),[]}},qf=(s,e)=>{const t=Ks(Xs,"signals"),n=Qa(t,Zo("channel_id"),Ed(s),Ka(3)),a=new Set;return{unsubscribe:Sd(n,u=>{u.forEach(h=>{const g=h.val(),p=h.key;a.has(p)||(a.add(p),e({id:p,...g}))})})}},Ou=async(s,e,t)=>{try{const n=Ks(Xs,`signals/${s}`);return await pc(n,{status:e,pnl:t}),!0}catch(n){return console.error("Erreur mise  jour signal Firebase:",n),!1}},Zx=async(s,e)=>{try{const t=Ks(Xs,`signals/${s}`);return await pc(t,{reactions:e}),!0}catch(t){return console.error("Erreur mise  jour ractions Firebase:",t),!1}},Vy=async(s,e)=>{try{const t=Ks(Xs,`messageReactions/${s}`);return await pc(t,e),console.log(" Ractions message mises  jour dans Firebase:",s,e),!0}catch(t){return console.error(" Erreur mise  jour ractions message Firebase:",t),!1}},Fy=async s=>{try{const e=Ks(Xs,`messageReactions/${s}`),t=await io(e);return t.exists()?t.val():null}catch(e){return console.error(" Erreur rcupration ractions message Firebase:",e),null}},m1=()=>"user_unified",Md=async()=>{const s=m1();return localStorage.setItem("user_id",s),console.log(" ID utilisateur unifi synchronis:",s),s},By=async s=>{try{console.log(" Ajout trade personnel Firebase:",s);const e=await Md();let t,n;s.image1&&typeof s.image1=="object"&&s.image1 instanceof File?t=await new Promise(p=>{const y=new FileReader;y.onload=()=>p(y.result),y.readAsDataURL(s.image1)}):typeof s.image1=="string"&&(t=s.image1),s.image2&&typeof s.image2=="object"&&s.image2 instanceof File?n=await new Promise(p=>{const y=new FileReader;y.onload=()=>p(y.result),y.readAsDataURL(s.image2)}):typeof s.image2=="string"&&(n=s.image2);const a={...s,image1:t||null,image2:n||null,user_id:e,created_at:new Date().toISOString()},l=Object.fromEntries(Object.entries(a).filter(([p,y])=>y!==void 0)),u=Ks(Xs,`personal_trades/${e}`),h=ym(u);await ty(h,l);const g={id:h.key,...l};return console.log(" Trade personnel sauvegard Firebase:",g),g}catch(e){return console.error(" Erreur ajout trade personnel Firebase:",e),null}},lc=async(s=100)=>{try{console.log(" Rcupration trades personnels Firebase...");const e=await Md(),t=Ks(Xs,`personal_trades/${e}`),n=Qa(t,Zo("created_at"),Ka(s)),a=await io(n);console.log(" Snapshot Firebase:",a.exists()?"EXISTE":"VIDE"),console.log(" Donnes snapshot:",a.val());const l=[];return a.exists()&&a.forEach(u=>{const h=u.val();console.log(" Trade trouv:",u.key,h),l.push({id:u.key,...h})}),l.sort((u,h)=>new Date(h.created_at||h.timestamp).getTime()-new Date(u.created_at||u.timestamp).getTime()),console.log(` ${l.length} trades personnels rcuprs Firebase`),console.log(" Dtail des trades:",l),l}catch(e){return console.error(" Erreur rcupration trades personnels Firebase:",e),[]}},qy=(s,e)=>{const t=Ks(Xs,`messageReactions/${s}`);return Sd(t,n=>{n.exists()?e(n.val()):e(null)})},g1=Object.freeze(Object.defineProperty({__proto__:null,addMessage:Ho,addPersonalTrade:By,addSignal:f1,database:Xs,generateUserId:m1,getMessageReactions:Fy,getMessages:Ff,getPersonalTrades:lc,getSignals:Za,subscribeToMessageReactions:qy,subscribeToMessages:Bf,subscribeToSignals:qf,syncUserId:Md,updateMessageReactions:Vy,updateSignalReactions:Zx,updateSignalStatus:Ou,uploadImage:Uy},Symbol.toStringTag,{value:"Module"})),Go=({channelId:s,currentUserId:e,supabase:t})=>(console.log("ProfitLoss component rendering with props:",{channelId:s,currentUserId:e,supabase:t}),r.jsx("div",{className:"w-full h-full bg-blue-500 flex items-center justify-center",children:r.jsx("div",{className:"text-white text-2xl font-bold",children:" CHAT SALON ACTIF"})})),LO="modulepreload",UO=function(s){return"/"+s},mj={},fa=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(t.map(g=>{if(g=UO(g),g in mj)return;mj[g]=!0;const p=g.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const w=document.createElement("link");if(w.rel=p?"stylesheet":LO,p||(w.as="script"),w.crossOrigin="",w.href=g,h&&w.setAttribute("nonce",h),document.head.appendChild(w),p)return new Promise((v,A)=>{w.addEventListener("load",v),w.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},VO=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>fa(async()=>{const{default:n}=await Promise.resolve().then(()=>Oc);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};let $y=class extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}};class FO extends $y{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gj extends $y{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class pj extends $y{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var e0;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(e0||(e0={}));var BO=function(s,e,t,n){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(y){try{p(n.next(y))}catch(w){u(w)}}function g(y){try{p(n.throw(y))}catch(w){u(w)}}function p(y){y.done?l(y.value):a(y.value).then(h,g)}p((n=n.apply(s,e||[])).next())})};class qO{constructor(e,{headers:t={},customFetch:n,region:a=e0.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=VO(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return BO(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:u}=t;let h={},{region:g}=t;g||(g=this.region);const p=new URL(`${this.url}/${e}`);g&&g!=="any"&&(h["x-region"]=g,p.searchParams.set("forceFunctionRegion",g));let y;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(h["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(h["Content-Type"]="application/json",y=JSON.stringify(u)));const w=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:y}).catch(z=>{throw new FO(z)}),v=w.headers.get("x-relay-error");if(v&&v==="true")throw new gj(w);if(!w.ok)throw new pj(w);let A=((n=w.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),R;return A==="application/json"?R=yield w.json():A==="application/octet-stream"?R=yield w.blob():A==="text/event-stream"?R=w:A==="multipart/form-data"?R=yield w.formData():R=yield w.text(),{data:R,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof pj||a instanceof gj?a.context:void 0}}})}}var _n={},ql={},$l={},zl={},Hl={},Gl={},$O=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},Nc=$O();const zO=Nc.fetch,p1=Nc.fetch.bind(Nc),x1=Nc.Headers,HO=Nc.Request,GO=Nc.Response,Oc=Object.freeze(Object.defineProperty({__proto__:null,Headers:x1,Request:HO,Response:GO,default:p1,fetch:zO},Symbol.toStringTag,{value:"Module"})),WO=OC(Oc);var Xh={},xj;function y1(){if(xj)return Xh;xj=1,Object.defineProperty(Xh,"__esModule",{value:!0});class s extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Xh.default=s,Xh}var yj;function v1(){if(yj)return Gl;yj=1;var s=Gl&&Gl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Gl,"__esModule",{value:!0});const e=s(WO),t=s(y1());class n{constructor(l){var u,h;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(h=l.isMaybeSingle)!==null&&h!==void 0?h:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let g=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var y,w,v,A;let R=null,z=null,q=null,Q=p.status,pe=p.statusText;if(p.ok){if(this.method!=="HEAD"){const Ee=await p.text();Ee===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?z=Ee:z=JSON.parse(Ee))}const fe=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),be=(v=p.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");fe&&be&&be.length>1&&(q=parseInt(be[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(z)&&(z.length>1?(R={code:"PGRST116",details:`Results contain ${z.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},z=null,q=null,Q=406,pe="Not Acceptable"):z.length===1?z=z[0]:z=null)}else{const fe=await p.text();try{R=JSON.parse(fe),Array.isArray(R)&&p.status===404&&(z=[],R=null,Q=200,pe="OK")}catch{p.status===404&&fe===""?(Q=204,pe="No Content"):R={message:fe}}if(R&&this.isMaybeSingle&&(!((A=R==null?void 0:R.details)===null||A===void 0)&&A.includes("0 rows"))&&(R=null,Q=200,pe="OK"),R&&this.shouldThrowOnError)throw new t.default(R)}return{error:R,data:z,count:q,status:Q,statusText:pe}});return this.shouldThrowOnError||(g=g.catch(p=>{var y,w,v;return{error:{message:`${(y=p==null?void 0:p.name)!==null&&y!==void 0?y:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(w=p==null?void 0:p.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(v=p==null?void 0:p.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),g.then(l,u)}returns(){return this}overrideTypes(){return this}}return Gl.default=n,Gl}var vj;function b1(){if(vj)return Hl;vj=1;var s=Hl&&Hl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hl,"__esModule",{value:!0});const e=s(v1());class t extends e.default{select(a){let l=!1;const u=(a??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:u,foreignTable:h,referencedTable:g=h}={}){const p=g?`${g}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${a}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:u=l}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,l,{foreignTable:u,referencedTable:h=u}={}){const g=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:u=!1,buffers:h=!1,wal:g=!1,format:p="text"}={}){var y;const w=[a?"analyze":null,l?"verbose":null,u?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),v=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${v}"; options=${w};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Hl.default=t,Hl}var bj;function zy(){if(bj)return zl;bj=1;var s=zl&&zl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(zl,"__esModule",{value:!0});const e=s(b1());class t extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const u=Array.from(new Set(l)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:u,type:h}={}){let g="";h==="plain"?g="pl":h==="phrase"?g="ph":h==="websearch"&&(g="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${g}fts${p}.${l}`),this}match(a){return Object.entries(a).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(a,l,u){return this.url.searchParams.append(a,`not.${l}.${u}`),this}or(a,{foreignTable:l,referencedTable:u=l}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,l,u){return this.url.searchParams.append(a,`${l}.${u}`),this}}return zl.default=t,zl}var _j;function _1(){if(_j)return $l;_j=1;var s=$l&&$l.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($l,"__esModule",{value:!0});const e=s(zy());class t{constructor(a,{headers:l={},schema:u,fetch:h}){this.url=a,this.headers=new Headers(l),this.schema=u,this.fetch=h}select(a,{head:l=!1,count:u}={}){const h=l?"HEAD":"GET";let g=!1;const p=(a??"*").split("").map(y=>/\s/.test(y)&&!g?"":(y==='"'&&(g=!g),y)).join("");return this.url.searchParams.set("select",p),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:u=!0}={}){var h;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((y,w)=>y.concat(Object.keys(w)),[]);if(p.length>0){const y=[...new Set(p)].map(w=>`"${w}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:u=!1,count:h,defaultToNull:g=!0}={}){var p;const y="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),h&&this.headers.append("Prefer",`count=${h}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const w=a.reduce((v,A)=>v.concat(Object.keys(A)),[]);if(w.length>0){const v=[...new Set(w)].map(A=>`"${A}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var u;const h="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:a}={}){var l;const u="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return $l.default=t,$l}var wj;function YO(){if(wj)return ql;wj=1;var s=ql&&ql.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ql,"__esModule",{value:!0});const e=s(_1()),t=s(zy());class n{constructor(l,{headers:u={},schema:h,fetch:g}={}){this.url=l,this.headers=new Headers(u),this.schemaName=h,this.fetch=g}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new n(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:h=!1,get:g=!1,count:p}={}){var y;let w;const v=new URL(`${this.url}/rpc/${l}`);let A;h||g?(w=h?"HEAD":"GET",Object.entries(u).filter(([z,q])=>q!==void 0).map(([z,q])=>[z,Array.isArray(q)?`{${q.join(",")}}`:`${q}`]).forEach(([z,q])=>{v.searchParams.append(z,q)})):(w="POST",A=u);const R=new Headers(this.headers);return p&&R.set("Prefer",`count=${p}`),new t.default({method:w,url:v,headers:R,schema:this.schemaName,body:A,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return ql.default=n,ql}var Nj;function KO(){if(Nj)return _n;Nj=1;var s=_n&&_n.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(_n,"__esModule",{value:!0}),_n.PostgrestError=_n.PostgrestBuilder=_n.PostgrestTransformBuilder=_n.PostgrestFilterBuilder=_n.PostgrestQueryBuilder=_n.PostgrestClient=void 0;const e=s(YO());_n.PostgrestClient=e.default;const t=s(_1());_n.PostgrestQueryBuilder=t.default;const n=s(zy());_n.PostgrestFilterBuilder=n.default;const a=s(b1());_n.PostgrestTransformBuilder=a.default;const l=s(v1());_n.PostgrestBuilder=l.default;const u=s(y1());return _n.PostgrestError=u.default,_n.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:u.default},_n}var QO=KO();const XO=MC(QO),{PostgrestClient:JO,PostgrestQueryBuilder:sU,PostgrestFilterBuilder:nU,PostgrestTransformBuilder:rU,PostgrestBuilder:iU,PostgrestError:aU}=XO;class ZO{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const eP="2.15.1",tP=`realtime-js/${eP}`,sP="1.0.0",t0=1e4,nP=1e3,rP=100;var Wu;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Wu||(Wu={}));var on;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(on||(on={}));var ti;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ti||(ti={}));var s0;(function(s){s.websocket="websocket"})(s0||(s0={}));var qo;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(qo||(qo={}));class iP{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const a=t.getUint8(1),l=t.getUint8(2);let u=this.HEADER_LENGTH+2;const h=n.decode(e.slice(u,u+a));u=u+a;const g=n.decode(e.slice(u,u+l));u=u+l;const p=JSON.parse(n.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:g,payload:p}}}class w1{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ls;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(ls||(ls={}));const jj=(s,e,t={})=>{var n;const a=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((l,u)=>(l[u]=aP(u,s,e,a),l),{})},aP=(s,e,t,n)=>{const a=e.find(h=>h.name===s),l=a==null?void 0:a.type,u=t[s];return l&&!n.includes(l)?N1(l,u):n0(u)},N1=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return uP(e,t)}switch(s){case ls.bool:return oP(e);case ls.float4:case ls.float8:case ls.int2:case ls.int4:case ls.int8:case ls.numeric:case ls.oid:return lP(e);case ls.json:case ls.jsonb:return cP(e);case ls.timestamp:return dP(e);case ls.abstime:case ls.date:case ls.daterange:case ls.int4range:case ls.int8range:case ls.money:case ls.reltime:case ls.text:case ls.time:case ls.timestamptz:case ls.timetz:case ls.tsrange:case ls.tstzrange:return n0(e);default:return n0(e)}},n0=s=>s,oP=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},lP=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},cP=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},uP=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let l;const u=s.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(h=>N1(e,h))}return s},dP=s=>typeof s=="string"?s.replace(" ","T"):s,j1=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class tx{constructor(e,t,n={},a=t0){this.channel=e,this.event=t,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tj;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Tj||(Tj={}));class Yu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yu.syncState(this.state,a,l,u),this.pendingDiffs.forEach(g=>{this.state=Yu.syncDiff(this.state,g,l,u)}),this.pendingDiffs=[],h()}),this.channel._on(n.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Yu.syncDiff(this.state,a,l,u),h())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,a){const l=this.cloneDeep(e),u=this.transformState(t),h={},g={};return this.map(l,(p,y)=>{u[p]||(g[p]=y)}),this.map(u,(p,y)=>{const w=l[p];if(w){const v=y.map(q=>q.presence_ref),A=w.map(q=>q.presence_ref),R=y.filter(q=>A.indexOf(q.presence_ref)<0),z=w.filter(q=>v.indexOf(q.presence_ref)<0);R.length>0&&(h[p]=R),z.length>0&&(g[p]=z)}else h[p]=y}),this.syncDiff(l,{joins:h,leaves:g},n,a)}static syncDiff(e,t,n,a){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(l,(h,g)=>{var p;const y=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),y.length>0){const w=e[h].map(A=>A.presence_ref),v=y.filter(A=>w.indexOf(A.presence_ref)<0);e[h].unshift(...v)}n(h,y,g)}),this.map(u,(h,g)=>{let p=e[h];if(!p)return;const y=g.map(w=>w.presence_ref);p=p.filter(w=>y.indexOf(w.presence_ref)<0),e[h]=p,a(h,p,g),p.length===0&&delete e[h]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const a=e[n];return"metas"in a?t[n]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[n]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sj;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Sj||(Sj={}));var Ku;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Ku||(Ku={}));var ra;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(ra||(ra={}));class Hy{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=on.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new tx(this,ti.join,this.params,this.timeout),this.rejoinTimer=new w1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=on.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=on.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ti.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Yu(this),this.broadcastEndpointURL=j1(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==on.closed){const{config:{broadcast:l,presence:u,private:h}}=this.params,g=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[Ku.PRESENCE]&&this.bindings[Ku.PRESENCE].length>0,y={},w={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:g,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(ra.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(ra.CLOSED)),this.updateJoinPayload(Object.assign({config:w},y)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:v})=>{var A;if(this.socket.setAuth(),v===void 0){e==null||e(ra.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,z=(A=R==null?void 0:R.length)!==null&&A!==void 0?A:0,q=[];for(let Q=0;Q<z;Q++){const pe=R[Q],{filter:{event:ee,schema:fe,table:be,filter:Ee}}=pe,L=v&&v[Q];if(L&&L.event===ee&&L.schema===fe&&L.table===be&&L.filter===Ee)q.push(Object.assign(Object.assign({},pe),{id:L.id}));else{this.unsubscribe(),this.state=on.errored,e==null||e(ra.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,e&&e(ra.SUBSCRIBED);return}}).receive("error",v=>{this.state=on.errored,e==null||e(ra.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ra.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===on.joined&&e===Ku.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,h,g;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=on.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ti.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new tx(this,ti.leave,{},e),n.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=on.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const a=new AbortController,l=setTimeout(()=>a.abort(),n),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),u}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new tx(this,e,t,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>rP){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var a,l;const u=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:y}=ti;if(n&&[h,g,p,y].indexOf(u)>=0&&n!==this._joinRef())return;let v=this._onMessage(u,t,n);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(A=>{var R,z,q;return((R=A.filter)===null||R===void 0?void 0:R.event)==="*"||((q=(z=A.filter)===null||z===void 0?void 0:z.event)===null||q===void 0?void 0:q.toLocaleLowerCase())===u}).map(A=>A.callback(v,n)):(l=this.bindings[u])===null||l===void 0||l.filter(A=>{var R,z,q,Q,pe,ee;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in A){const fe=A.id,be=(R=A.filter)===null||R===void 0?void 0:R.event;return fe&&((z=t.ids)===null||z===void 0?void 0:z.includes(fe))&&(be==="*"||(be==null?void 0:be.toLocaleLowerCase())===((q=t.data)===null||q===void 0?void 0:q.type.toLocaleLowerCase()))}else{const fe=(pe=(Q=A==null?void 0:A.filter)===null||Q===void 0?void 0:Q.event)===null||pe===void 0?void 0:pe.toLocaleLowerCase();return fe==="*"||fe===((ee=t==null?void 0:t.event)===null||ee===void 0?void 0:ee.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===u}).map(A=>{if(typeof v=="object"&&"ids"in v){const R=v.data,{schema:z,table:q,commit_timestamp:Q,type:pe,errors:ee}=R;v=Object.assign(Object.assign({},{schema:z,table:q,commit_timestamp:Q,eventType:pe,new:{},old:{},errors:ee}),this._getPayloadRecords(R))}A.callback(v,n)})}_isClosed(){return this.state===on.closed}_isJoined(){return this.state===on.joined}_isJoining(){return this.state===on.joining}_isLeaving(){return this.state===on.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:n};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===n&&Hy.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ti.close,{},e)}_onError(e){this._on(ti.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=on.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=jj(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=jj(e.columns,e.old_record)),t}}const Ej=()=>{},Jh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hP=[1e3,2e3,5e3,1e4],fP=1e4,mP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gP{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=t0,this.transport=null,this.heartbeatIntervalMs=Jh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ej,this.ref=0,this.reconnectTimer=null,this.logger=Ej,this.conn=null,this.sendBuffer=[],this.serializer=new iP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...u)=>fa(async()=>{const{default:h}=await Promise.resolve().then(()=>Oc);return{default:h}},void 0).then(({default:h})=>h(...u)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${s0.websocket}`,this.httpEndpoint=j1(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZO.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sP}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wu.connecting:return qo.Connecting;case Wu.open:return qo.Open;case Wu.closing:return qo.Closing;default:return qo.Closed}}isConnected(){return this.connectionState()===qo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===n);if(a)return a;{const l=new Hy(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:n,payload:a,ref:l}=e,u=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${t} ${n} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(nP,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Jh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:l,ref:u}=t,h=u?`(${u})`:"",g=l.status||"";this.log("receive",`${g} ${n} ${a} ${h}`.trim(),l),this.channels.filter(p=>p._isMember(n)).forEach(p=>p._trigger(a,l,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ti.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${n}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([mP],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const a={access_token:t,version:tP};t&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(ti.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new w1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Jh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,a,l,u,h,g,p;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:t0,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Jh.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:y=>hP[y-1]||fP,this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:(y,w)=>w(JSON.stringify(y)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Gy extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ln(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class pP extends Gy{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class r0 extends Gy{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var xP=function(s,e,t,n){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(y){try{p(n.next(y))}catch(w){u(w)}}function g(y){try{p(n.throw(y))}catch(w){u(w)}}function p(y){y.done?l(y.value):a(y.value).then(h,g)}p((n=n.apply(s,e||[])).next())})};const T1=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>fa(async()=>{const{default:n}=await Promise.resolve().then(()=>Oc);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},yP=()=>xP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fa(()=>Promise.resolve().then(()=>Oc),void 0)).Response:Response}),i0=s=>{if(Array.isArray(s))return s.map(t=>i0(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=i0(n)}),e},vP=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var dl=function(s,e,t,n){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(y){try{p(n.next(y))}catch(w){u(w)}}function g(y){try{p(n.throw(y))}catch(w){u(w)}}function p(y){y.done?l(y.value):a(y.value).then(h,g)}p((n=n.apply(s,e||[])).next())})};const sx=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),bP=(s,e,t)=>dl(void 0,void 0,void 0,function*(){const n=yield yP();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(a=>{const l=s.status||500,u=(a==null?void 0:a.statusCode)||l+"";e(new pP(sx(a),l,u))}).catch(a=>{e(new r0(sx(a),a))}):e(new r0(sx(s),s))}),_P=(s,e,t,n)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!n?a:(vP(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Od(s,e,t,n,a,l){return dl(this,void 0,void 0,function*(){return new Promise((u,h)=>{s(t,_P(e,n,a,l)).then(g=>{if(!g.ok)throw g;return n!=null&&n.noResolveJson?g:g.json()}).then(g=>u(g)).catch(g=>bP(g,h,n))})})}function $f(s,e,t,n){return dl(this,void 0,void 0,function*(){return Od(s,"GET",e,t,n)})}function wi(s,e,t,n,a){return dl(this,void 0,void 0,function*(){return Od(s,"POST",e,n,a,t)})}function a0(s,e,t,n,a){return dl(this,void 0,void 0,function*(){return Od(s,"PUT",e,n,a,t)})}function wP(s,e,t,n){return dl(this,void 0,void 0,function*(){return Od(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function S1(s,e,t,n,a){return dl(this,void 0,void 0,function*(){return Od(s,"DELETE",e,n,a,t)})}var er=function(s,e,t,n){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(y){try{p(n.next(y))}catch(w){u(w)}}function g(y){try{p(n.throw(y))}catch(w){u(w)}}function p(y){y.done?l(y.value):a(y.value).then(h,g)}p((n=n.apply(s,e||[])).next())})};const NP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Aj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jP{constructor(e,t={},n,a){this.url=e,this.headers=t,this.bucketId=n,this.fetch=T1(a)}uploadOrUpdate(e,t,n,a){return er(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Aj),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl),g&&l.append("metadata",this.encodeMetadata(g))):(l=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),a!=null&&a.headers&&(h=Object.assign(Object.assign({},h),a.headers));const p=this._removeEmptyFolders(t),y=this._getFinalPath(p),w=yield(e=="PUT"?a0:wi)(this.fetch,`${this.url}/object/${y}`,l,Object.assign({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(l){if(ln(l))return{data:null,error:l};throw l}})}upload(e,t,n){return er(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,a){return er(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",t);try{let g;const p=Object.assign({upsert:Aj.upsert},a),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&n instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",n)):typeof FormData<"u"&&n instanceof FormData?(g=n,g.append("cacheControl",p.cacheControl)):(g=n,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const w=yield a0(this.fetch,h.toString(),g,{headers:y});return{data:{path:l,fullPath:w.Key},error:null}}catch(g){if(ln(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return er(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const l=yield wi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),u=new URL(this.url+l.url),h=u.searchParams.get("token");if(!h)throw new Gy("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(n){if(ln(n))return{data:null,error:n};throw n}})}update(e,t,n){return er(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return er(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(ln(a))return{data:null,error:a};throw a}})}copy(e,t,n){return er(this,void 0,void 0,function*(){try{return{data:{path:(yield wi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(ln(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,n){return er(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield wi(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(a){if(ln(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,n){return er(this,void 0,void 0,function*(){try{const a=yield wi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(a){if(ln(a))return{data:null,error:a};throw a}})}download(e,t){return er(this,void 0,void 0,function*(){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),u=l?`?${l}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield $f(this.fetch,`${this.url}/${a}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(ln(h))return{data:null,error:h};throw h}})}info(e){return er(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield $f(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:i0(n),error:null}}catch(n){if(ln(n))return{data:null,error:n};throw n}})}exists(e){return er(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield wP(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ln(n)&&n instanceof r0){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),a=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const h=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&a.push(g);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${n}${p}`)}}}remove(e){return er(this,void 0,void 0,function*(){try{return{data:yield S1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ln(t))return{data:null,error:t};throw t}})}list(e,t,n){return er(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},NP),t),{prefix:e||""});return{data:yield wi(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(ln(a))return{data:null,error:a};throw a}})}listV2(e,t){return er(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield wi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(ln(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const TP="2.11.0",SP={"X-Client-Info":`storage-js/${TP}`};var Wl=function(s,e,t,n){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(y){try{p(n.next(y))}catch(w){u(w)}}function g(y){try{p(n.throw(y))}catch(w){u(w)}}function p(y){y.done?l(y.value):a(y.value).then(h,g)}p((n=n.apply(s,[])).next())})};class EP{constructor(e,t={},n,a){const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},SP),t),this.fetch=T1(n)}listBuckets(){return Wl(this,void 0,void 0,function*(){try{return{data:yield $f(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ln(e))return{data:null,error:e};throw e}})}getBucket(e){return Wl(this,void 0,void 0,function*(){try{return{data:yield $f(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ln(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Wl(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ln(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Wl(this,void 0,void 0,function*(){try{return{data:yield a0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ln(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Wl(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ln(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Wl(this,void 0,void 0,function*(){try{return{data:yield S1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ln(t))return{data:null,error:t};throw t}})}}class AP extends EP{constructor(e,t={},n,a){super(e,t,n,a)}from(e){return new jP(this.url,this.headers,e,this.fetch)}}const CP="2.56.0";let Pu="";typeof Deno<"u"?Pu="deno":typeof document<"u"?Pu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pu="react-native":Pu="node";const RP={"X-Client-Info":`supabase-js-${Pu}/${CP}`},IP={headers:RP},DP={schema:"public"},kP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},MP={};var OP=function(s,e,t,n){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(y){try{p(n.next(y))}catch(w){u(w)}}function g(y){try{p(n.throw(y))}catch(w){u(w)}}function p(y){y.done?l(y.value):a(y.value).then(h,g)}p((n=n.apply(s,e||[])).next())})};const PP=s=>{let e;return s?e=s:typeof fetch>"u"?e=p1:e=fetch,(...t)=>e(...t)},LP=()=>typeof Headers>"u"?x1:Headers,UP=(s,e,t)=>{const n=PP(t),a=LP();return(l,u)=>OP(void 0,void 0,void 0,function*(){var h;const g=(h=yield e())!==null&&h!==void 0?h:s;let p=new a(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",s),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),n(l,Object.assign(Object.assign({},u),{headers:p}))})};var VP=function(s,e,t,n){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(y){try{p(n.next(y))}catch(w){u(w)}}function g(y){try{p(n.throw(y))}catch(w){u(w)}}function p(y){y.done?l(y.value):a(y.value).then(h,g)}p((n=n.apply(s,[])).next())})};function FP(s){return s.endsWith("/")?s:s+"/"}function BP(s,e){var t,n;const{db:a,auth:l,realtime:u,global:h}=s,{db:g,auth:p,realtime:y,global:w}=e,v={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},y),u),storage:{},global:Object.assign(Object.assign(Object.assign({},w),h),{headers:Object.assign(Object.assign({},(t=w==null?void 0:w.headers)!==null&&t!==void 0?t:{}),(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>VP(this,void 0,void 0,function*(){return""})};return s.accessToken?v.accessToken=s.accessToken:delete v.accessToken,v}const E1="2.71.1",sc=30*1e3,o0=3,nx=o0*sc,qP="http://localhost:9999",$P="supabase.auth.token",zP={"X-Client-Info":`gotrue-js/${E1}`},l0="X-Supabase-Api-Version",A1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},HP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,GP=10*60*1e3;class Wy extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function lt(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class WP extends Wy{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function YP(s){return lt(s)&&s.name==="AuthApiError"}class C1 extends Wy{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class xo extends Wy{constructor(e,t,n,a){super(e,n,a),this.name=t,this.status=n}}class Ba extends xo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function KP(s){return lt(s)&&s.name==="AuthSessionMissingError"}class Zh extends xo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ef extends xo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class tf extends xo{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function QP(s){return lt(s)&&s.name==="AuthImplicitGrantRedirectError"}class Cj extends xo{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class c0 extends xo{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function rx(s){return lt(s)&&s.name==="AuthRetryableFetchError"}class Rj extends xo{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class u0 extends xo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ij=` 	
\r=`.split(""),XP=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<Ij.length;e+=1)s[Ij[e].charCodeAt(0)]=-2;for(let e=0;e<zf.length;e+=1)s[zf[e].charCodeAt(0)]=e;return s})();function Dj(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(zf[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(zf[n]),e.queuedBits-=6}}function R1(s,e,t){const n=XP[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function kj(s){const e=[],t=u=>{e.push(String.fromCodePoint(u))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=u=>{eL(u,n,t)};for(let u=0;u<s.length;u+=1)R1(s.charCodeAt(u),a,l);return e.join("")}function JP(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function ZP(s,e){for(let t=0;t<s.length;t+=1){let n=s.charCodeAt(t);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(s.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}JP(n,e)}}function eL(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let n=1;n<6;n+=1)if((s>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function tL(s){const e=[],t={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<s.length;a+=1)R1(s.charCodeAt(a),t,n);return new Uint8Array(e)}function sL(s){const e=[];return ZP(s,t=>e.push(t)),new Uint8Array(e)}function nL(s){const e=[],t={queue:0,queuedBits:0},n=a=>{e.push(a)};return s.forEach(a=>Dj(a,t,n)),Dj(null,t,n),e.join("")}function rL(s){return Math.round(Date.now()/1e3)+s}function iL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const ei=()=>typeof window<"u"&&typeof document<"u",Lo={tested:!1,writable:!1},I1=()=>{if(!ei())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Lo.tested)return Lo.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Lo.tested=!0,Lo.writable=!0}catch{Lo.tested=!0,Lo.writable=!1}return Lo.writable};function aL(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((n,a)=>{e[a]=n}),e}const D1=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>fa(async()=>{const{default:n}=await Promise.resolve().then(()=>Oc);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},oL=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",nc=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Uo=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Fa=async(s,e)=>{await s.removeItem(e)};class Lm{constructor(){this.promise=new Lm.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Lm.promiseConstructor=Promise;function ix(s){const e=s.split(".");if(e.length!==3)throw new u0("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!HP.test(e[n]))throw new u0("JWT not in base64url format");return{header:JSON.parse(kj(e[0])),payload:JSON.parse(kj(e[1])),signature:tL(e[2]),raw:{header:e[0],payload:e[1]}}}async function lL(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function cL(s,e){return new Promise((n,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await s(l);if(!e(l,null,u)){n(u);return}}catch(u){if(!e(l,u)){a(u);return}}})()})}function uL(s){return("0"+s.toString(16)).substr(-2)}function dL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,uL).join("")}async function hL(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(n);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function fL(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await hL(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yl(s,e,t=!1){const n=dL();let a=n;t&&(a+="/PASSWORD_RECOVERY"),await nc(s,`${e}-code-verifier`,a);const l=await fL(n);return[l,n===l?"plain":"s256"]}const mL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gL(s){const e=s.headers.get(l0);if(!e||!e.match(mL))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function pL(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function xL(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kl(s){if(!yL.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ax(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mj(s){return JSON.parse(JSON.stringify(s))}var vL=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(t[n[a]]=s[n[a]]);return t};const Bo=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),bL=[502,503,504];async function Oj(s){var e;if(!oL(s))throw new c0(Bo(s),0);if(bL.includes(s.status))throw new c0(Bo(s),s.status);let t;try{t=await s.json()}catch(l){throw new C1(Bo(l),l)}let n;const a=gL(s);if(a&&a.getTime()>=A1["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Rj(Bo(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ba}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Rj(Bo(t),s.status,t.weak_password.reasons);throw new WP(Bo(t),s.status||500,n)}const _L=(s,e,t,n)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),t))};async function Nt(s,e,t,n){var a;const l=Object.assign({},n==null?void 0:n.headers);l[l0]||(l[l0]=A1["2024-01-01"].name),n!=null&&n.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const u=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(u.redirect_to=n.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await wL(s,e,t+h,{headers:l,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(g):{data:Object.assign({},g),error:null}}async function wL(s,e,t,n,a,l){const u=_L(e,n,a,l);let h;try{h=await s(t,Object.assign({},u))}catch(g){throw console.error(g),new c0(Bo(g),0)}if(h.ok||await Oj(h),n!=null&&n.noResolveJson)return h;try{return await h.json()}catch(g){await Oj(g)}}function na(s){var e;let t=null;SL(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=rL(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function Pj(s){const e=na(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function qa(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function NL(s){return{data:s,error:null}}function jL(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:a,verification_type:l}=s,u=vL(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:t,hashed_token:n,redirect_to:a,verification_type:l},g=Object.assign({},u);return{data:{properties:h,user:g},error:null}}function TL(s){return s}function SL(s){return s.access_token&&s.refresh_token&&s.expires_in}const ox=["global","local","others"];var EL=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(t[n[a]]=s[n[a]]);return t};class AL{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=D1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ox[0]){if(ox.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ox.join(", ")}`);try{return await Nt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:qa})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=EL(e,["options"]),a=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:jL,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(lt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Nt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qa})}catch(t){if(lt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,a,l,u,h,g;try{const p={nextPage:null,lastPage:0,total:0},y=await Nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:TL});if(y.error)throw y.error;const w=await y.json(),v=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,A=(g=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return A.length>0&&(A.forEach(R=>{const z=parseInt(R.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(R.split(";")[1].split("=")[1]);p[`${q}Page`]=z}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(lt(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Kl(e);try{return await Nt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qa})}catch(t){if(lt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Kl(e);try{return await Nt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:qa})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Kl(e);try{return await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:qa})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Kl(e.userId);try{const{data:t,error:n}=await Nt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:n}}catch(t){if(lt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Kl(e.userId),Kl(e.id);try{return{data:await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(lt(t))return{data:null,error:t};throw t}}}function Lj(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function CL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ql={debug:!!(globalThis&&I1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class k1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class RL extends k1{}async function IL(s,e,t){Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,a.name);try{return await t()}finally{Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,a.name)}}else{if(e===0)throw Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new RL(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Ql.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}CL();const DL={url:qP,storageKey:$P,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Uj(s,e,t){return await t()}const Xl={};class gd{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gd.nextInstanceID,gd.nextInstanceID+=1,this.instanceID>0&&ei()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},DL),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new AL({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=D1(a.fetch),this.lock=a.lock||Uj,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ei()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=IL:this.lock=Uj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:I1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Lj(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Lj(this.memoryStorage)),ei()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Xl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Xl[this.storageKey]=Object.assign(Object.assign({},Xl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Xl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Xl[this.storageKey]=Object.assign(Object.assign({},Xl[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${E1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=aL(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),ei()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,n);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),QP(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return lt(t)?{error:t}:{error:new C1("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,a;try{const l=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:na}),{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const g=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(l){if(lt(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var t,n,a;try{let l;if("email"in e){const{email:y,password:w,options:v}=e;let A=null,R=null;this.flowType==="pkce"&&([A,R]=await Yl(this.storage,this.storageKey)),l=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:y,password:w,data:(t=v==null?void 0:v.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:A,code_challenge_method:R},xform:na})}else if("phone"in e){const{phone:y,password:w,options:v}=e;l=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:w,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(a=v==null?void 0:v.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:na})}else throw new ef("You must provide either an email or phone number and a password");const{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const g=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(l){if(lt(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:u,options:h}=e;t=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Pj})}else if("phone"in e){const{phone:l,password:u,options:h}=e;t=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Pj})}else throw new ef("You must provide either an email or phone number and a password");const{data:n,error:a}=t;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Zh}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(t){if(lt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,a,l,u,h,g,p,y,w,v,A;let R,z;if("message"in e)R=e.message,z=e.signature;else{const{chain:q,wallet:Q,statement:pe,options:ee}=e;let fe;if(ei())if(typeof Q=="object")fe=Q;else{const Ee=window;if("solana"in Ee&&typeof Ee.solana=="object"&&("signIn"in Ee.solana&&typeof Ee.solana.signIn=="function"||"signMessage"in Ee.solana&&typeof Ee.solana.signMessage=="function"))fe=Ee.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Q!="object"||!(ee!=null&&ee.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");fe=Q}const be=new URL((t=ee==null?void 0:ee.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in fe&&fe.signIn){const Ee=await fe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},ee==null?void 0:ee.signInWithSolana),{version:"1",domain:be.host,uri:be.href}),pe?{statement:pe}:null));let L;if(Array.isArray(Ee)&&Ee[0]&&typeof Ee[0]=="object")L=Ee[0];else if(Ee&&typeof Ee=="object"&&"signedMessage"in Ee&&"signature"in Ee)L=Ee;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)R=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),z=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in fe)||typeof fe.signMessage!="function"||!("publicKey"in fe)||typeof fe!="object"||!fe.publicKey||!("toBase58"in fe.publicKey)||typeof fe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");R=[`${be.host} wants you to sign in with your Solana account:`,fe.publicKey.toBase58(),...pe?["",pe,""]:[""],"Version: 1",`URI: ${be.href}`,`Issued At: ${(a=(n=ee==null?void 0:ee.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=ee==null?void 0:ee.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${ee.signInWithSolana.notBefore}`]:[],...!((u=ee==null?void 0:ee.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${ee.signInWithSolana.expirationTime}`]:[],...!((h=ee==null?void 0:ee.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${ee.signInWithSolana.chainId}`]:[],...!((g=ee==null?void 0:ee.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${ee.signInWithSolana.nonce}`]:[],...!((p=ee==null?void 0:ee.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${ee.signInWithSolana.requestId}`]:[],...!((w=(y=ee==null?void 0:ee.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||w===void 0)&&w.length?["Resources",...ee.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const Ee=await fe.signMessage(new TextEncoder().encode(R),"utf8");if(!Ee||!(Ee instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");z=Ee}}try{const{data:q,error:Q}=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:R,signature:nL(z)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:na});if(Q)throw Q;return!q||!q.session||!q.user?{data:{user:null,session:null},error:new Zh}:(q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),{data:Object.assign({},q),error:Q})}catch(q){if(lt(q))return{data:{user:null,session:null},error:q};throw q}}async _exchangeCodeForSession(e){const t=await Uo(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(t??"").split("/");try{const{data:l,error:u}=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:na});if(await Fa(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Zh}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(lt(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:t,provider:n,token:a,access_token:l,nonce:u}=e,h=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:na}),{data:g,error:p}=h;return p?{data:{user:null,session:null},error:p}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Zh}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:p})}catch(t){if(lt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,a,l,u;try{if("email"in e){const{email:h,options:g}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Yl(this.storage,this.storageKey));const{error:w}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(n=g==null?void 0:g.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:y}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(u=g==null?void 0:g.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y}}throw new ef("You must provide either an email or phone number.")}catch(h){if(lt(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var t,n;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:u,error:h}=await Nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:na});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,p=u.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(a){if(lt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,n,a;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await Yl(this.storage,this.storageKey)),await Nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:NL})}catch(l){if(lt(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Ba;const{error:a}=await Nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(lt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:l}=e,{error:u}=await Nt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:n,type:a,options:l}=e,{data:u,error:h}=await Nt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new ef("You must provide either an email or phone number and a type")}catch(t){if(lt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Uo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<nx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const u=await Uo(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=ax()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,p,y)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,p,y))})}return{data:{session:e},error:null}}const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qa}):await this._useSession(async t=>{var n,a,l;const{data:u,error:h}=t;if(h)throw h;return!(!((n=u.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ba}:await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:qa})})}catch(t){if(lt(t))return KP(t)&&(await this._removeSession(),await Fa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:a,error:l}=n;if(l)throw l;if(!a.session)throw new Ba;const u=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Yl(this.storage,this.storageKey));const{data:p,error:y}=await Nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:u.access_token,xform:qa});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ba;const t=Date.now()/1e3;let n=t,a=!0,l=null;const{payload:u}=ix(e.access_token);if(u.exp&&(n=u.exp,a=n<=t),a){const{session:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(t){if(lt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:u,error:h}=t;if(h)throw h;e=(n=u.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ba;const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(lt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ei())throw new tf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new tf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Cj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tf("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Cj("No code detected.");const{data:pe,error:ee}=await this._exchangeCodeForSession(e.code);if(ee)throw ee;const fe=new URL(window.location.href);return fe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",fe.toString()),{data:{session:pe.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:h,expires_at:g,token_type:p}=e;if(!l||!h||!u||!p)throw new tf("No session defined in URL");const y=Math.round(Date.now()/1e3),w=parseInt(h);let v=y+w;g&&(v=parseInt(g));const A=v-y;A*1e3<=sc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${w}s`);const R=v-w;y-R>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",R,v,y):y-R<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",R,v,y);const{data:z,error:q}=await this._getUser(l);if(q)throw q;const Q={provider_token:n,provider_refresh_token:a,access_token:l,expires_in:w,expires_at:v,refresh_token:u,token_type:p,user:z.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Q,redirectType:e.type},error:null}}catch(n){if(lt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Uo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:a,error:l}=t;if(l)return{error:l};const u=(n=a.session)===null||n===void 0?void 0:n.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(YP(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Fa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=iL(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,a;try{const{data:{session:l},error:u}=t;if(u)throw u;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Yl(this.storage,this.storageKey,!0));try{return await Nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(lt(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(lt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:a}=await this._useSession(async l=>{var u,h,g,p,y;const{data:w,error:v}=l;if(v)throw v;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Nt(this.fetch,"GET",A,{headers:this.headers,jwt:(y=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return ei()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(lt(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,a;const{data:l,error:u}=t;if(u)throw u;return await Nt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(lt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await cL(async a=>(a>0&&await lL(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:na})),(a,l)=>{const u=200*Math.pow(2,a);return l&&rx(l)&&Date.now()+u-n<sc})}catch(n){if(this._debug(t,"error",n),lt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),ei()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Uo(this.storage,this.storageKey);if(a&&this.userStorage){let u=await Uo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await nc(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:ax()}else if(a&&!a.user&&!a.user){const u=await Uo(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(a.user=u.user,await Fa(this.storage,this.storageKey+"-user"),await nc(this.storage,this.storageKey,a)):a.user=ax()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<nx;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${nx}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),rx(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(a.access_token);!h&&(u!=null&&u.user)?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(n,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Ba;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Lm;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Ba;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={session:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),lt(l)){const u={session:null,error:l};return rx(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(u),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await nc(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=Mj(a);await nc(this.storage,this.storageKey,l)}else{const a=Mj(t);await nc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Fa(this.storage,this.storageKey),await Fa(this.storage,this.storageKey+"-code-verifier"),await Fa(this.storage,this.storageKey+"-user"),this.userStorage&&await Fa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ei()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),sc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/sc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${sc}ms, refresh threshold is ${o0} ticks`),a<=o0&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof k1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ei()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const a=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[l,u]=await Yl(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(n!=null&&n.queryParams){const l=new URLSearchParams(n.queryParams);a.push(l.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:a,error:l}=t;return l?{data:null,error:l}:await Nt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(lt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,a;const{data:l,error:u}=t;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:g,error:p}=await Nt(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(t){if(lt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:a,error:l}=t;if(l)return{data:null,error:l};const{data:u,error:h}=await Nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(t){if(lt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:a,error:l}=t;return l?{data:null,error:l}:await Nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(lt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],a=n.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=n.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:n,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=ix(a.access_token);let h=null;u.aal&&(h=u.aal);let g=h;((n=(t=a.user.factors)===null||t===void 0?void 0:t.filter(w=>w.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(g="aal2");const y=u.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(h=>h.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(h=>h.kid===e),n&&this.jwks_cached_at+GP>a)return n;const{data:l,error:u}=await Nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,n=l.keys.find(h=>h.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:A,error:R}=await this.getSession();if(R||!A.session)return{data:null,error:R};n=A.session.access_token}const{header:a,payload:l,signature:u,raw:{header:h,payload:g}}=ix(n);t!=null&&t.allowExpired||pL(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:A}=await this.getUser(n);if(A)throw A;return{data:{claims:l,header:a,signature:u},error:null}}const y=xL(a.alg),w=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,w,u,sL(`${h}.${g}`)))throw new u0("Invalid JWT signature");return{data:{claims:l,header:a,signature:u},error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}}gd.nextInstanceID=0;const kL=gd;class ML extends kL{constructor(e){super(e)}}var OL=function(s,e,t,n){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(y){try{p(n.next(y))}catch(w){u(w)}}function g(y){try{p(n.throw(y))}catch(w){u(w)}}function p(y){y.done?l(y.value):a(y.value).then(h,g)}p((n=n.apply(s,[])).next())})};class PL{constructor(e,t,n){var a,l,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=FP(e),g=new URL(h);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const p=`sb-${g.hostname.split(".")[0]}-auth-token`,y={db:DP,realtime:MP,auth:Object.assign(Object.assign({},kP),{storageKey:p}),global:IP},w=BP(n??{},y);this.storageKey=(a=w.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=w.global.headers)!==null&&l!==void 0?l:{},w.accessToken?(this.accessToken=w.accessToken,this.auth=new Proxy({},{get:(v,A)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(A)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=w.auth)!==null&&u!==void 0?u:{},this.headers,w.global.fetch),this.fetch=UP(t,this._getAccessToken.bind(this),w.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},w.realtime)),this.rest=new JO(new URL("rest/v1",g).href,{headers:this.headers,schema:w.db.schema,fetch:this.fetch}),this.storage=new AP(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),w.accessToken||this._listenForAuthEvents()}get functions(){return new qO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return OL(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:a,storageKey:l,flowType:u,lock:h,debug:g},p,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ML({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),p),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:a,flowType:u,lock:h,debug:g,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new gP(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const M1=(s,e,t)=>new PL(s,e,t);function LL(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}LL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const O1="@firebase/installations",Yy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=1e4,L1=`w:${Yy}`,U1="FIS_v2",UL="https://firebaseinstallations.googleapis.com/v1",VL=60*60*1e3,FL="installations",BL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},sl=new Zf(FL,BL,qL);function V1(s){return s instanceof ma&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1({projectId:s}){return`${UL}/projects/${s}/installations`}function B1(s){return{token:s.token,requestStatus:2,expiresIn:zL(s.expiresIn),creationTime:Date.now()}}async function q1(s,e){const n=(await e.json()).error;return sl.create("request-failed",{requestName:s,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function $1({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function $L(s,{refreshToken:e}){const t=$1(s);return t.append("Authorization",HL(e)),t}async function z1(s){const e=await s();return e.status>=500&&e.status<600?s():e}function zL(s){return Number(s.replace("s","000"))}function HL(s){return`${U1} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const n=F1(s),a=$1(s),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={fid:t,authVersion:U1,appId:s.appId,sdkVersion:L1},h={method:"POST",headers:a,body:JSON.stringify(u)},g=await z1(()=>fetch(n,h));if(g.ok){const p=await g.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:B1(p.authToken)}}else throw await q1("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=/^[cdef][\w-]{21}$/,d0="";function KL(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=QL(s);return YL.test(t)?t:d0}catch{return d0}}function QL(s){return WL(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=new Map;function W1(s,e){const t=Um(s);Y1(t,e),XL(t,e)}function Y1(s,e){const t=G1.get(s);if(t)for(const n of t)n(e)}function XL(s,e){const t=JL();t&&t.postMessage({key:s,fid:e}),ZL()}let Wo=null;function JL(){return!Wo&&"BroadcastChannel"in self&&(Wo=new BroadcastChannel("[Firebase] FID Change"),Wo.onmessage=s=>{Y1(s.data.key,s.data.fid)}),Wo}function ZL(){G1.size===0&&Wo&&(Wo.close(),Wo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="firebase-installations-database",t2=1,nl="firebase-installations-store";let lx=null;function Ky(){return lx||(lx=sm(e2,t2,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(nl)}}})),lx}async function Hf(s,e){const t=Um(s),a=(await Ky()).transaction(nl,"readwrite"),l=a.objectStore(nl),u=await l.get(t);return await l.put(e,t),await a.done,(!u||u.fid!==e.fid)&&W1(s,e.fid),e}async function K1(s){const e=Um(s),n=(await Ky()).transaction(nl,"readwrite");await n.objectStore(nl).delete(e),await n.done}async function Vm(s,e){const t=Um(s),a=(await Ky()).transaction(nl,"readwrite"),l=a.objectStore(nl),u=await l.get(t),h=e(u);return h===void 0?await l.delete(t):await l.put(h,t),await a.done,h&&(!u||u.fid!==h.fid)&&W1(s,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qy(s){let e;const t=await Vm(s.appConfig,n=>{const a=s2(n),l=n2(s,a);return e=l.registrationPromise,l.installationEntry});return t.fid===d0?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function s2(s){const e=s||{fid:KL(),registrationStatus:0};return Q1(e)}function n2(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(sl.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=r2(s,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:i2(s)}:{installationEntry:e}}async function r2(s,e){try{const t=await GL(s,e);return Hf(s.appConfig,t)}catch(t){throw V1(t)&&t.customData.serverCode===409?await K1(s.appConfig):await Hf(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function i2(s){let e=await Vj(s.appConfig);for(;e.registrationStatus===1;)await H1(100),e=await Vj(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await Qy(s);return n||t}return e}function Vj(s){return Vm(s,e=>{if(!e)throw sl.create("installation-not-found");return Q1(e)})}function Q1(s){return a2(s)?{fid:s.fid,registrationStatus:0}:s}function a2(s){return s.registrationStatus===1&&s.registrationTime+P1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2({appConfig:s,heartbeatServiceProvider:e},t){const n=l2(s,t),a=$L(s,t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={installation:{sdkVersion:L1,appId:s.appId}},h={method:"POST",headers:a,body:JSON.stringify(u)},g=await z1(()=>fetch(n,h));if(g.ok){const p=await g.json();return B1(p)}else throw await q1("Generate Auth Token",g)}function l2(s,{fid:e}){return`${F1(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xy(s,e=!1){let t;const n=await Vm(s.appConfig,l=>{if(!X1(l))throw sl.create("not-registered");const u=l.authToken;if(!e&&d2(u))return l;if(u.requestStatus===1)return t=c2(s,e),l;{if(!navigator.onLine)throw sl.create("app-offline");const h=f2(l);return t=u2(s,h),h}});return t?await t:n.authToken}async function c2(s,e){let t=await Fj(s.appConfig);for(;t.authToken.requestStatus===1;)await H1(100),t=await Fj(s.appConfig);const n=t.authToken;return n.requestStatus===0?Xy(s,e):n}function Fj(s){return Vm(s,e=>{if(!X1(e))throw sl.create("not-registered");const t=e.authToken;return m2(t)?{...e,authToken:{requestStatus:0}}:e})}async function u2(s,e){try{const t=await o2(s,e),n={...e,authToken:t};return await Hf(s.appConfig,n),t}catch(t){if(V1(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await K1(s.appConfig);else{const n={...e,authToken:{requestStatus:0}};await Hf(s.appConfig,n)}throw t}}function X1(s){return s!==void 0&&s.registrationStatus===2}function d2(s){return s.requestStatus===2&&!h2(s)}function h2(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+VL}function f2(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function m2(s){return s.requestStatus===1&&s.requestTime+P1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(s){const e=s,{installationEntry:t,registrationPromise:n}=await Qy(e);return n?n.catch(console.error):Xy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(s,e=!1){const t=s;return await x2(t),(await Xy(t,e)).token}async function x2(s){const{registrationPromise:e}=await Qy(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(s){if(!s||!s.options)throw cx("App Configuration");if(!s.name)throw cx("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw cx(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function cx(s){return sl.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="installations",v2="installations-internal",b2=s=>{const e=s.getProvider("app").getImmediate(),t=y2(e),n=rl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},_2=s=>{const e=s.getProvider("app").getImmediate(),t=rl(e,J1).getImmediate();return{getId:()=>g2(t),getToken:a=>p2(t,a)}};function w2(){ai(new Br(J1,b2,"PUBLIC")),ai(new Br(v2,_2,"PRIVATE"))}w2();zn(O1,Yy);zn(O1,Yy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="/firebase-messaging-sw.js",j2="/firebase-cloud-messaging-push-scope",Z1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",T2="https://fcmregistrations.googleapis.com/v1",eA="google.c.a.c_id",S2="google.c.a.c_l",E2="google.c.a.ts",A2="google.c.a.e",Bj=1e4;var qj;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(qj||(qj={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var pd;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(pd||(pd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(s){const e=new Uint8Array(s);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function C2(s){const e="=".repeat((4-s.length%4)%4),t=(s+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),a=new Uint8Array(n.length);for(let l=0;l<n.length;++l)a[l]=n.charCodeAt(l);return a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="fcm_token_details_db",R2=5,$j="fcm_token_object_Store";async function I2(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(l=>l.name).includes(ux))return null;let e=null;return(await sm(ux,R2,{upgrade:async(n,a,l,u)=>{if(a<2||!n.objectStoreNames.contains($j))return;const h=u.objectStore($j),g=await h.index("fcmSenderId").get(s);if(await h.clear(),!!g){if(a===2){const p=g;if(!p.auth||!p.p256dh||!p.endpoint)return;e={token:p.fcmToken,createTime:p.createTime??Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:typeof p.vapidKey=="string"?p.vapidKey:ia(p.vapidKey)}}}else if(a===3){const p=g;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:ia(p.auth),p256dh:ia(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:ia(p.vapidKey)}}}else if(a===4){const p=g;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:ia(p.auth),p256dh:ia(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:ia(p.vapidKey)}}}}}})).close(),await Up(ux),await Up("fcm_vapid_details_db"),await Up("undefined"),D2(e)?e:null}function D2(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:e}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="firebase-messaging-database",M2=1,xd="firebase-messaging-store";let dx=null;function tA(){return dx||(dx=sm(k2,M2,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(xd)}}})),dx}async function O2(s){const e=sA(s),n=await(await tA()).transaction(xd).objectStore(xd).get(e);if(n)return n;{const a=await I2(s.appConfig.senderId);if(a)return await Jy(s,a),a}}async function Jy(s,e){const t=sA(s),a=(await tA()).transaction(xd,"readwrite");return await a.objectStore(xd).put(e,t),await a.done,e}function sA({appConfig:s}){return s.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Hn=new Zf("messaging","Messaging",P2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(s,e){const t=await ev(s),n=nA(e),a={method:"POST",headers:t,body:JSON.stringify(n)};let l;try{l=await(await fetch(Zy(s.appConfig),a)).json()}catch(u){throw Hn.create("token-subscribe-failed",{errorInfo:u==null?void 0:u.toString()})}if(l.error){const u=l.error.message;throw Hn.create("token-subscribe-failed",{errorInfo:u})}if(!l.token)throw Hn.create("token-subscribe-no-token");return l.token}async function U2(s,e){const t=await ev(s),n=nA(e.subscriptionOptions),a={method:"PATCH",headers:t,body:JSON.stringify(n)};let l;try{l=await(await fetch(`${Zy(s.appConfig)}/${e.token}`,a)).json()}catch(u){throw Hn.create("token-update-failed",{errorInfo:u==null?void 0:u.toString()})}if(l.error){const u=l.error.message;throw Hn.create("token-update-failed",{errorInfo:u})}if(!l.token)throw Hn.create("token-update-no-token");return l.token}async function V2(s,e){const n={method:"DELETE",headers:await ev(s)};try{const l=await(await fetch(`${Zy(s.appConfig)}/${e}`,n)).json();if(l.error){const u=l.error.message;throw Hn.create("token-unsubscribe-failed",{errorInfo:u})}}catch(a){throw Hn.create("token-unsubscribe-failed",{errorInfo:a==null?void 0:a.toString()})}}function Zy({projectId:s}){return`${T2}/projects/${s}/registrations`}async function ev({appConfig:s,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function nA({p256dh:s,auth:e,endpoint:t,vapidKey:n}){const a={web:{endpoint:t,auth:e,p256dh:s}};return n!==Z1&&(a.web.applicationPubKey=n),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=7*24*60*60*1e3;async function B2(s){const e=await $2(s.swRegistration,s.vapidKey),t={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:e.endpoint,auth:ia(e.getKey("auth")),p256dh:ia(e.getKey("p256dh"))},n=await O2(s.firebaseDependencies);if(n){if(z2(n.subscriptionOptions,t))return Date.now()>=n.createTime+F2?q2(s,{token:n.token,createTime:Date.now(),subscriptionOptions:t}):n.token;try{await V2(s.firebaseDependencies,n.token)}catch(a){console.warn(a)}return zj(s.firebaseDependencies,t)}else return zj(s.firebaseDependencies,t)}async function q2(s,e){try{const t=await U2(s.firebaseDependencies,e),n={...e,token:t,createTime:Date.now()};return await Jy(s.firebaseDependencies,n),t}catch(t){throw t}}async function zj(s,e){const n={token:await L2(s,e),createTime:Date.now(),subscriptionOptions:e};return await Jy(s,n),n.token}async function $2(s,e){const t=await s.pushManager.getSubscription();return t||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:C2(e)})}function z2(s,e){const t=e.vapidKey===s.vapidKey,n=e.endpoint===s.endpoint,a=e.auth===s.auth,l=e.p256dh===s.p256dh;return t&&n&&a&&l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(s){const e={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return H2(e,s),G2(e,s),W2(e,s),e}function H2(s,e){if(!e.notification)return;s.notification={};const t=e.notification.title;t&&(s.notification.title=t);const n=e.notification.body;n&&(s.notification.body=n);const a=e.notification.image;a&&(s.notification.image=a);const l=e.notification.icon;l&&(s.notification.icon=l)}function G2(s,e){e.data&&(s.data=e.data)}function W2(s,e){var a,l,u,h;if(!e.fcmOptions&&!((a=e.notification)!=null&&a.click_action))return;s.fcmOptions={};const t=((l=e.fcmOptions)==null?void 0:l.link)??((u=e.notification)==null?void 0:u.click_action);t&&(s.fcmOptions.link=t);const n=(h=e.fcmOptions)==null?void 0:h.analytics_label;n&&(s.fcmOptions.analyticsLabel=n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(s){return typeof s=="object"&&!!s&&eA in s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(s){if(!s||!s.options)throw hx("App Configuration Object");if(!s.name)throw hx("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=s;for(const n of e)if(!t[n])throw hx(n);return{appName:s.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function hx(s){return Hn.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=K2(e);this.firebaseDependencies={app:e,appConfig:a,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(s){try{s.swRegistration=await navigator.serviceWorker.register(N2,{scope:j2}),s.swRegistration.update().catch(()=>{}),await J2(s.swRegistration)}catch(e){throw Hn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function J2(s){return new Promise((e,t)=>{const n=setTimeout(()=>t(new Error(`Service worker not registered after ${Bj} ms`)),Bj),a=s.installing||s.waiting;s.active?(clearTimeout(n),e()):a?a.onstatechange=l=>{var u;((u=l.target)==null?void 0:u.state)==="activated"&&(a.onstatechange=null,clearTimeout(n),e())}:(clearTimeout(n),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(s,e){if(!e&&!s.swRegistration&&await X2(s),!(!e&&s.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Hn.create("invalid-sw-registration");s.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(s,e){e?s.vapidKey=e:s.vapidKey||(s.vapidKey=Z1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(s,e){if(!navigator)throw Hn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Hn.create("permission-blocked");return await e5(s,e==null?void 0:e.vapidKey),await Z2(s,e==null?void 0:e.serviceWorkerRegistration),B2(s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t5(s,e,t){const n=s5(e);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:t[eA],message_name:t[S2],message_time:t[E2],message_device_time:Math.floor(Date.now()/1e3)})}function s5(s){switch(s){case pd.NOTIFICATION_CLICKED:return"notification_open";case pd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(s,e){const t=e.data;if(!t.isFirebaseMessaging)return;s.onMessageHandler&&t.messageType===pd.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(Hj(t)):s.onMessageHandler.next(Hj(t)));const n=t.data;Y2(n)&&n[A2]==="1"&&await t5(s,t.messageType,n)}const Gj="@firebase/messaging",Wj="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=s=>{const e=new Q2(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>n5(e,t)),e},i5=s=>{const e=s.getProvider("messaging").getImmediate();return{getToken:n=>rA(e,n)}};function a5(){ai(new Br("messaging",r5,"PUBLIC")),ai(new Br("messaging-internal",i5,"PRIVATE")),zn(Gj,Wj),zn(Gj,Wj,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o5(){try{await oT()}catch{return!1}return typeof window<"u"&&aT()&&l4()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(s,e){if(!navigator)throw Hn.create("only-available-in-window");return s.onMessageHandler=e,()=>{s.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(s=vd()){return o5().then(e=>{if(!e)throw Hn.create("unsupported-browser")},e=>{throw Hn.create("indexed-db-unsupported")}),rl(xs(s),"messaging").getImmediate()}async function u5(s,e){return s=xs(s),rA(s,e)}function d5(s,e){return s=xs(s),l5(s,e)}a5();const h5=rm(Pm);let Fm=null;try{typeof window<"u"&&"serviceWorker"in navigator&&(Fm=c5(h5))}catch{console.log(" Firebase Messaging non support dans ce navigateur")}const f5=async()=>{if(!("Notification"in window))return console.log(" Ce navigateur ne supporte pas les notifications"),!1;if(Notification.permission==="granted")return console.log(" Permission de notifications dj accorde"),!0;if(Notification.permission==="denied")return console.log(" Permission de notifications refuse"),!1;try{const s=await Notification.requestPermission();return console.log(" Permission notifications:",s),s==="granted"&&await iA(),s==="granted"}catch(s){return console.error(" Erreur demande permission notifications:",s),!1}},iA=async()=>{try{if("serviceWorker"in navigator){const s=await navigator.serviceWorker.register("/sw.js");console.log(" Service Worker enregistr:",s);const e=await u5(Fm,{vapidKey:"BKATJNvQG6Ix5oelm4oKxaskNzNk9uTcXqrwRr8wBalBJZDvcGGZdG2KxeLbM8hfCWtlmHxpu_yXiNzMdiD-bP0",serviceWorkerRegistration:s});return e?(console.log(" Token FCM obtenu:",e),localStorage.setItem("fcmToken",e),e):(console.log(" Aucun token FCM disponible"),null)}else return console.log(" Service Worker non support"),null}catch(s){return console.error(" Erreur obtention token FCM:",s),null}},Gf=s=>{if(console.log(" Envoi notification locale..."),!("Notification"in window)||Notification.permission!=="granted"){console.log(" Notifications non disponibles");return}try{const e=new Notification(s.title,{body:s.body,icon:s.icon||"/logo.png",badge:s.badge||"/logo.png",tag:s.tag||"trading-signal",data:s.data,requireInteraction:!0,silent:!1});e.onclick=t=>{var n;t.preventDefault(),e.close(),window.focus(),(n=s.data)!=null&&n.channelId&&window.dispatchEvent(new CustomEvent("signalNotificationClicked",{detail:{channelId:s.data.channelId}}))},setTimeout(()=>{e.close()},1e4),console.log(" Notification locale envoye:",s.title)}catch(e){console.error(" Erreur envoi notification locale:",e)}},Wf=s=>{console.log(" Notification nouveau signal:",s);const e={title:"Signal Trade",body:`${s.type} ${s.symbol} - Entre: ${s.entry} | TP: ${s.takeProfit} | SL: ${s.stopLoss}`,icon:"/logo.png",badge:"/logo.png",tag:`signal-${s.id}`,data:{signalId:s.id,channelId:s.channel_id,type:"new_signal"}};console.log(" Debug notifications:",{serviceWorker:"serviceWorker"in navigator,notification:"Notification"in window,permission:Notification.permission}),"serviceWorker"in navigator&&"Notification"in window&&Notification.permission==="granted"?(console.log(" Envoi notification via Service Worker..."),navigator.serviceWorker.ready.then(t=>{t.showNotification(e.title,{body:e.body,icon:e.icon,badge:e.badge,tag:e.tag,data:e.data,requireInteraction:!0}),console.log(" Notification envoye via Service Worker")}).catch(t=>{console.error(" Erreur Service Worker notification:",t),Gf(e)})):(console.log(" Fallback notification locale (Service Worker non disponible)"),Gf(e))},h0=s=>{const e=s.status==="WIN"?"":s.status==="LOSS"?"":"",t=s.status==="WIN"?"GAGNANT":s.status==="LOSS"?"PERDANT":"BREAK-EVEN",n={title:`${e} Signal ${s.symbol} ${t}`,body:`P&L: ${s.pnl||"N/A"} - ${s.closeMessage||"Position ferme"}`,icon:"/logo.png",badge:"/logo.png",tag:`signal-closed-${s.id}`,data:{signalId:s.id,channelId:s.channel_id,type:"signal_closed"}};Fm?console.log(" Tentative notification push signal ferm..."):(console.log(" Fallback notification locale signal ferm"),Gf(n))},tv=async()=>{console.log(" Initialisation du systme de notifications push...");try{if(await f5()){console.log(" Notifications actives");try{const e=await iA();if(e){console.log(" Token FCM obtenu pour notifications push:",e);try{console.log(" Tentative sauvegarde token FCM dans Firebase...");const{ref:t,set:n}=await fa(async()=>{const{ref:u,set:h}=await Promise.resolve().then(()=>IS);return{ref:u,set:h}},void 0),{database:a}=await fa(async()=>{const{database:u}=await Promise.resolve().then(()=>g1);return{database:u}},void 0);console.log(" Imports Firebase russis");const l=t(a,`fcm_tokens/${e.replace(/[.#$[\]]/g,"_")}`);console.log(" Rfrence Firebase cre:",l.key),await n(l,{token:e,timestamp:Date.now(),userAgent:navigator.userAgent}),console.log(" Token FCM sauvegard dans Firebase Database")}catch(t){console.error(" Erreur sauvegarde token FCM:",t),console.error(" Dtails erreur:",t.message)}}}catch(e){console.error(" Erreur enregistrement FCM:",e)}d5(Fm,e=>{console.log(" Message FCM reu:",e);const t=e.notification;t&&Gf({title:t.title||"Nouvelle notification",body:t.body||"",icon:t.icon||"/logo.png",data:e.data})}),window.addEventListener("signalNotificationClicked",e=>{const{channelId:t}=e.detail;console.log(" Notification clique, canal:",t),window.dispatchEvent(new CustomEvent("navigateToChannel",{detail:{channelId:t}}))})}else console.log(" Notifications non autorises")}catch(s){console.error(" Erreur initialisation notifications:",s)}},Yj={url:"https://bamwcozzfshuozsfmjah.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXdjb3p6ZnNodW96c2ZtamFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxMDM0ODcsImV4cCI6MjA2NTY3OTQ4N30.NWSUKoYLl0oGS-dXf4jhtmLRiSuBSk-0lV3NRHJLvrs"},df=M1(Yj.url,Yj.anonKey),aA=async(s,e)=>{try{console.log(" Synchronisation photo de profil...");const t=s==="admin"?"adminProfileImage":"userProfileImage";localStorage.setItem(t,e),console.log(" Sauvegard dans localStorage");const n=s==="admin"?"admin_user":"default_user",{data:a}=await df.from("user_profiles").select("*").eq("user_id",n).eq("user_type",s).single();return a?(await df.from("user_profiles").update({profile_image:e,updated_at:new Date().toISOString()}).eq("user_id",n),console.log(" Profil mis  jour dans Supabase")):(await df.from("user_profiles").insert({user_id:n,user_type:s,profile_image:e,display_name:s==="admin"?"Admin":"TheTheTrader"}),console.log(" Nouveau profil cr dans Supabase")),{success:!0}}catch(t){return console.error(" Erreur sync profile:",t),{success:!1,error:t}}},m5=async s=>{try{const e=s==="admin"?"adminProfileImage":"userProfileImage",t=localStorage.getItem(e);if(t)return console.log(" Photo trouve dans localStorage"),t;const n=s==="admin"?"admin_user":"default_user",{data:a}=await df.from("user_profiles").select("profile_image").eq("user_id",n).eq("user_type",s).single();return a!=null&&a.profile_image?(localStorage.setItem(e,a.profile_image),console.log(" Photo trouve dans Supabase et sauvegarde localement"),a.profile_image):(console.log(" Aucune photo de profil trouve"),null)}catch(e){return console.error(" Erreur rcupration profile:",e),null}},g5=async s=>await m5(s);function p5(){const[s,e]=K.useState([]),[t,n]=K.useState({totalPnL:0,winRate:0,totalTrades:0,avgWin:0,avgLoss:0,activeSignals:0}),a=async()=>{try{console.log(" [STATS-SYNC] Chargement de TOUS les signaux pour synchronisation...");const p=["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"];let y=[];for(const w of p)try{const v=await Za(w,100);v&&v.length>0&&(console.log(` [STATS-SYNC] Signaux bruts de ${w}:`,v),v.forEach(A=>{console.log(` [STATS-SYNC] Signal ${A.id} de ${w}:`,{image:A.image,attachment_data:A.attachment_data,ALL_KEYS:Object.keys(A)})}),y=[...y,...v])}catch(v){console.error(` [STATS-SYNC] Erreur chargement signaux pour ${w}:`,v)}if(y.length>0){const w=y.map(v=>{var z,q,Q;const R=v.status&&v.status!=="ACTIVE"?new Date(v.timestamp||Date.now()).toISOString():new Date(v.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return{id:v.id||"",type:v.type,symbol:v.symbol,timeframe:v.timeframe,entry:((z=v.entry)==null?void 0:z.toString())||"N/A",takeProfit:((q=v.takeProfit)==null?void 0:q.toString())||"N/A",stopLoss:((Q=v.stopLoss)==null?void 0:Q.toString())||"N/A",description:v.description||"",image:v.image,timestamp:R,originalTimestamp:v.timestamp||Date.now(),status:v.status||"ACTIVE",channel_id:v.channel_id,reactions:v.reactions||[],pnl:v.pnl,closeMessage:v.closeMessage,attachment_data:v.attachment_data,attachment_type:v.attachment_type,attachment_name:v.attachment_name}});e(w),console.log(` [STATS-SYNC] ${w.length} signaux synchroniss`)}}catch(p){console.error(" [STATS-SYNC] Erreur synchronisation:",p)}},l=p=>{const y=p.filter(ee=>ee.status!=="ACTIVE"),w=p.filter(ee=>ee.status==="ACTIVE"),v=ee=>{if(!ee)return 0;const fe=ee.replace(/[$,]/g,"").trim(),be=Number(fe);return isNaN(be)?0:be},A=y.filter(ee=>ee.pnl&&ee.pnl!=="0"&&ee.pnl!=="$0").reduce((ee,fe)=>ee+v(fe.pnl),0),R=y.length>0?Math.round(y.filter(ee=>ee.status==="WIN").length/y.length*100):0,z=y.filter(ee=>ee.status==="WIN"&&ee.pnl&&ee.pnl!=="0"&&ee.pnl!=="$0"),q=y.filter(ee=>ee.status==="LOSS"&&ee.pnl&&ee.pnl!=="0"&&ee.pnl!=="$0"),Q=z.length>0?Math.round(z.reduce((ee,fe)=>ee+v(fe.pnl),0)/z.length):0,pe=q.length>0?Math.round(q.reduce((ee,fe)=>ee+Math.abs(v(fe.pnl)),0)/q.length):0;return{totalPnL:Math.round(A),winRate:R,totalTrades:y.length,avgWin:Q,avgLoss:pe,activeSignals:w.length}};return K.useEffect(()=>{const p=l(s);n(p)},[s]),K.useEffect(()=>{a();const p=setInterval(a,3e4);return()=>clearInterval(p)},[]),{allSignalsForStats:s,stats:t,refreshStats:a,getWeeklyBreakdown:()=>{const p=new Date,y=p.getMonth(),w=p.getFullYear(),v=[];for(let A=1;A<=5;A++){const R=new Date(w,y,(A-1)*7+1),z=new Date(w,y,A*7),q=s.filter(L=>{const D=new Date(L.originalTimestamp);return D>=R&&D<=z&&D.getMonth()===y&&D.getFullYear()===w}),Q=q.filter(L=>L.status!=="ACTIVE"),pe=Q.reduce((L,D)=>{if(!D.pnl)return L;const I=D.pnl.replace(/[$,]/g,"").trim(),U=Number(I);return L+(isNaN(U)?0:U)},0),ee=Q.filter(L=>L.status==="WIN").length,fe=Q.filter(L=>L.status==="LOSS").length,be=Math.ceil(p.getDate()/7),Ee=A===be;v.push({week:`Week ${A}`,trades:q.length,pnl:pe,wins:ee,losses:fe,isCurrentWeek:Ee})}return v},getTodaySignals:()=>{const p=new Date;return s.filter(y=>{const w=new Date(y.originalTimestamp);return w.getDate()===p.getDate()&&w.getMonth()===p.getMonth()&&w.getFullYear()===p.getFullYear()})},getThisMonthSignals:()=>{const p=new Date;return s.filter(y=>{const w=new Date(y.originalTimestamp);return w.getMonth()===p.getMonth()&&w.getFullYear()===p.getFullYear()})}}}function x5(){const[s,e]=K.useState({dailyData:{},totalPnL:0,totalTrades:0,winRate:0,avgWin:0,avgLoss:0}),t=async()=>{try{console.log(" [CALENDAR-SYNC] Chargement des donnes du calendrier...");const l=["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"];let u=[];for(const h of l)try{const g=await Za(h,100);g&&g.length>0&&(u=[...u,...g])}catch(g){console.error(` [CALENDAR-SYNC] Erreur chargement signaux pour ${h}:`,g)}if(u.length>0){console.log(" [CALENDAR-SYNC] Signaux bruts reus:",u);const h=u.map(Q=>{var pe,ee,fe;return console.log(" [CALENDAR-SYNC] Signal individuel COMPLET:",{id:Q.id,symbol:Q.symbol,image:Q.image,attachment_data:Q.attachment_data,attachment_type:Q.attachment_type,attachment_name:Q.attachment_name,status:Q.status,timestamp:Q.timestamp,ALL_KEYS:Object.keys(Q)}),{id:Q.id||"",type:Q.type,symbol:Q.symbol,timeframe:Q.timeframe,entry:((pe=Q.entry)==null?void 0:pe.toString())||"N/A",takeProfit:((ee=Q.takeProfit)==null?void 0:ee.toString())||"N/A",stopLoss:((fe=Q.stopLoss)==null?void 0:fe.toString())||"N/A",description:Q.description||"",timestamp:Q.timestamp||Date.now(),status:Q.status||"ACTIVE",channel_id:Q.channel_id,pnl:Q.pnl,closeMessage:Q.closeMessage,image:Q.image,attachment_data:Q.attachment_data,attachment_type:Q.attachment_type,attachment_name:Q.attachment_name}}),g={};h.forEach(Q=>{const pe=new Date(Q.timestamp),ee=`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}-${String(pe.getDate()).padStart(2,"0")}`;if(g[ee]||(g[ee]={signals:[],pnl:0,trades:0}),g[ee].signals.push(Q),g[ee].trades++,Q.pnl&&Q.status!=="ACTIVE"){const fe=Q.pnl.replace(/[$,]/g,"").trim(),be=Number(fe);isNaN(be)||(g[ee].pnl+=be)}});const p=h.filter(Q=>Q.status!=="ACTIVE"),y=p.reduce((Q,pe)=>{if(!pe.pnl)return Q;const ee=pe.pnl.replace(/[$,]/g,"").trim(),fe=Number(ee);return Q+(isNaN(fe)?0:fe)},0),w=p.length,v=w>0?Math.round(p.filter(Q=>Q.status==="WIN").length/w*100):0,A=p.filter(Q=>Q.status==="WIN"&&Q.pnl),R=p.filter(Q=>Q.status==="LOSS"&&Q.pnl),z=A.length>0?Math.round(A.reduce((Q,pe)=>{const ee=pe.pnl.replace(/[$,]/g,"").trim(),fe=Number(ee);return Q+(isNaN(fe)?0:fe)},0)/A.length):0,q=R.length>0?Math.round(R.reduce((Q,pe)=>{const ee=pe.pnl.replace(/[$,]/g,"").trim(),fe=Number(ee);return Q+Math.abs(isNaN(fe)?0:fe)},0)/R.length):0;e({dailyData:g,totalPnL:Math.round(y),totalTrades:w,winRate:v,avgWin:z,avgLoss:q}),console.log(` [CALENDAR-SYNC] ${h.length} signaux organiss par date`)}}catch(l){console.error(" [CALENDAR-SYNC] Erreur synchronisation:",l)}},n=l=>{const u=l.getMonth(),h=l.getFullYear();let g=0,p=0,y=0,w=0;Object.entries(s.dailyData).forEach(([A,R])=>{const z=new Date(A);z.getMonth()===u&&z.getFullYear()===h&&(g+=R.pnl,p+=R.trades,y+=R.signals.filter(q=>q.status==="WIN").length,w+=R.signals.filter(q=>q.status==="LOSS").length)});const v=p>0?Math.round(y/p*100):0;return{totalPnL:g,totalTrades:p,winRate:v,avgWin:y>0?Math.round(g/y):0,avgLoss:w>0?Math.round(Math.abs(g)/w):0}},a=l=>{const u=l||new Date,h=u.getMonth(),g=u.getFullYear(),p=[];for(let y=1;y<=5;y++){const w=new Date(g,h,(y-1)*7+1),v=new Date(g,h,y*7);let A=0,R=0,z=0,q=0;Object.entries(s.dailyData).forEach(([be,Ee])=>{const L=new Date(be);L>=w&&L<=v&&L.getMonth()===h&&L.getFullYear()===g&&(A+=Ee.trades,R+=Ee.pnl,z+=Ee.signals.filter(D=>D.status==="WIN").length,q+=Ee.signals.filter(D=>D.status==="LOSS").length)});const Q=new Date,pe=Math.ceil(Q.getDate()/7),ee=y===pe&&Q.getMonth()===h&&Q.getFullYear()===g,fe=[];Object.entries(s.dailyData).forEach(([be,Ee])=>{const L=new Date(be);L>=w&&L<=v&&L.getMonth()===h&&L.getFullYear()===g&&fe.push(...Ee.signals)}),p.push({week:`Week ${y}`,weekNum:y,trades:A,pnl:R,wins:z,losses:q,isCurrentWeek:ee,signals:fe})}return p};return K.useEffect(()=>{t();const l=setInterval(t,3e4);return()=>clearInterval(l)},[]),{calendarStats:s,getMonthlyStats:n,getWeeklyBreakdown:a,refreshCalendar:t}}const y5="https://bamwcozzfshuozsfmjah.supabase.co",v5="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXdjb3p6ZnNodW96c2ZtamFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxMDM0ODcsImV4cCI6MjA2NTY3OTQ4N30.NWSUKoYLl0oGS-dXf4jhtmLRiSuBSk-0lV3NRHJLvrs",Kj=M1(y5,v5);function b5(){var es;const{stats:s,allSignalsForStats:e}=p5(),{getMonthlyStats:t,getWeeklyBreakdown:n}=x5();K.useEffect(()=>{const N=localStorage.getItem("messageReactions");if(N)try{p(JSON.parse(N))}catch(F){console.error("Erreur lors du chargement des ractions:",F)}},[]),K.useEffect(()=>{Kj.auth.getSession().then(({data:{session:F}})=>{F!=null&&F.user&&w({id:F.user.id,email:F.user.email||""})});const{data:{subscription:N}}=Kj.auth.onAuthStateChange((F,Y)=>{Y!=null&&Y.user?w({id:Y.user.id,email:Y.user.email||""}):w(null)});return()=>N.unsubscribe()},[]);const[a,l]=K.useState(!1),[u,h]=K.useState(!1),[g,p]=K.useState({}),[y,w]=K.useState(null),[v,A]=K.useState({id:"general-chat",name:"general-chat"}),[R,z]=K.useState("signals"),[q,Q]=K.useState("channels"),[pe,ee]=K.useState(""),[fe,be]=K.useState({}),[Ee,L]=K.useState(!1),[D,I]=K.useState(!1),[U,$]=K.useState(!1),[X,P]=K.useState(!1),[zt,Rt]=K.useState(!1),[oe,Ce]=K.useState(null),[re,Le]=K.useState(null),[O,le]=K.useState(""),[Re,je]=K.useState(null),[Te,Ye]=K.useState(!1),[Pe,hs]=K.useState(0),[_t,qt]=K.useState({}),[jt,en]=K.useState({}),[Ps,tn]=K.useState([]),nr=async N=>{try{const F=await Ff(N),B=(["general-chat","general-chat-2","general-chat-3","general-chat-4","profit-loss","video"].includes(N)?F.slice(-20):F.reverse()).map(ie=>({id:ie.id||"",text:ie.content,timestamp:new Date(ie.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),author:ie.author,author_avatar:ie.author_avatar,attachment:void 0,attachment_data:ie.attachment_data}));be(ie=>({...ie,[N]:B.map(de=>({id:de.id,text:de.text,user:de.author,author:de.author,author_avatar:de.author_avatar,timestamp:de.timestamp,attachment_data:de.attachment_data}))})),console.log(` Messages chargs pour ${N}:`,B.length),["calendrier","trading-journal","forex-signaux","crypto-signaux","futures-signaux"].includes(N)||setTimeout(()=>{hr()},100)}catch(F){console.error(" Erreur chargement messages:",F)}};K.useEffect(()=>{const N=async()=>{try{const F=Object.values(fe).flat(),Y=F.map(async ce=>{const Se=await Fy(ce.id);return Se?{messageId:ce.id,reactions:Se}:null}),B=await Promise.all(Y),ie={};B.forEach(ce=>{ce&&(ie[ce.messageId]=ce.reactions)}),p(ie),console.log(" Ractions messages charges depuis Firebase:",Object.keys(ie).length);const de=F.map(ce=>qy(ce.id,Se=>{Se&&p(Xe=>({...Xe,[ce.id]:Se}))}));return()=>{de.forEach(ce=>{ce&&typeof ce=="function"&&ce()})}}catch(F){console.error(" Erreur chargement ractions messages Firebase:",F)}};Object.keys(fe).length>0&&N()},[fe]);const Gn=async N=>{try{console.log(" Dbut chargement signaux utilisateur pour:",N);const F=await Za(N,3);console.log(" Signaux bruts utilisateur:",F);const Y=F.map(B=>{var ie,de,ce;return{id:B.id||"",type:B.type,symbol:B.symbol,timeframe:B.timeframe,entry:((ie=B.entry)==null?void 0:ie.toString())||"N/A",takeProfit:((de=B.takeProfit)==null?void 0:de.toString())||"N/A",stopLoss:((ce=B.stopLoss)==null?void 0:ce.toString())||"N/A",description:B.description||"",image:null,timestamp:new Date(B.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:B.status||"ACTIVE",channel_id:B.channel_id,reactions:[],pnl:B.pnl,closeMessage:B.closeMessage}});if(tn(Y.reverse()),console.log(` Signaux chargs pour ${N}:`,Y.length),console.log(" Signaux formats utilisateur:",Y),console.log(" tat signals utilisateur aprs setSignals:",Y),Y.length>0){const B=Y[0];Wf(B)}["calendrier","trading-journal","forex-signaux","crypto-signaux","futures-signaux"].includes(N)||setTimeout(()=>{hr()},100)}catch(F){console.error(" Erreur chargement signaux:",F)}};K.useEffect(()=>{(async()=>{await nr(v.id),await Gn(v.id),await tv()})()},[]),K.useEffect(()=>{const F=["fondamentaux","letsgooo-model","general-chat","general-chat-2","general-chat-3","general-chat-4","profit-loss"].map(Y=>Bf(Y,B=>{console.log(` Nouveau message reu dans ${Y}:`,B),v.id!==Y&&(console.log(` Incrementing unread count for ${Y}`),qt(ie=>({...ie,[Y]:(ie[Y]||0)+1})))}));return()=>{F.forEach(Y=>Y.unsubscribe())}},[]),K.useEffect(()=>{console.log(" Changement de canal utilisateur:",v.id),nr(v.id),Gn(v.id);const N=qf(v.id,Y=>{console.log(" Signal mis  jour reu:",Y),tn(B=>B.map(ie=>ie.id===Y.id?{...ie,reactions:Y.reactions||[]}:ie)),Y.status!=="ACTIVE"&&Y.closeMessage&&h0(Y)}),F=qf(v.id,Y=>{var ie,de,ce;console.log(" Nouveau signal reu utilisateur:",Y);const B={id:Y.id||"",type:Y.type,symbol:Y.symbol,timeframe:Y.timeframe,entry:((ie=Y.entry)==null?void 0:ie.toString())||"N/A",takeProfit:((de=Y.takeProfit)==null?void 0:de.toString())||"N/A",stopLoss:((ce=Y.stopLoss)==null?void 0:ce.toString())||"N/A",description:Y.description||"",image:null,timestamp:new Date(Y.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:Y.status||"ACTIVE",channel_id:Y.channel_id,reactions:[],pnl:Y.pnl,closeMessage:Y.closeMessage};tn(Se=>{const Xe=Se.filter(it=>it.channel_id===v.id);return[...Se.filter(it=>it.channel_id!==v.id),...Xe,B]}),Wf(B),["calendrier","trading-journal","forex-signaux","crypto-signaux","futures-signaux"].includes(v.id)||setTimeout(()=>{hr()},100)});return()=>{N.unsubscribe(),F.unsubscribe()}},[v.id]);const[ys,$r]=K.useState(""),[qs,ur]=K.useState(null);K.useEffect(()=>{(async()=>{console.log(" Initialisation profil utilisateur..."),console.log(" PWA Mode:",window.matchMedia("(display-mode: standalone)").matches),console.log(" User Agent:",navigator.userAgent.includes("Mobile")?"MOBILE":"DESKTOP");const F=await g5("user");F?(ur(F),console.log(" Photo de profil utilisateur charge")):console.log(" Aucune photo de profil utilisateur trouve")})()},[]),K.useEffect(()=>{const F=["fondamentaux","letsgooo-model","general-chat","general-chat-2","general-chat-3","general-chat-4","profit-loss","trading-journal"].map(Y=>Bf(Y,B=>{const ie=jt[Y]||0,de=typeof B.timestamp=="number"?B.timestamp:Date.now();(ie===0||de>ie)&&v.id!==Y&&(qt(ce=>({...ce,[Y]:(ce[Y]||0)+1})),console.log(` Unread message added to ${Y}: ${B.content}`))}));return()=>{F.forEach(Y=>Y.unsubscribe())}},[v.id,jt]);const[li,zr]=K.useState(!1),[pa,Mi]=K.useState(""),[$s,xa]=K.useState(""),[fs,Ls]=K.useState(0),[Pn,Hr]=K.useState(!1),[ns,ya]=K.useState(()=>{const N=localStorage.getItem("selectedDate");return N?new Date(N):null});K.useEffect(()=>{ns?localStorage.setItem("selectedDate",ns.toISOString()):localStorage.removeItem("selectedDate")},[ns]);const _s=(N,F)=>{v.id==="trading-journal"&&N!=="trading-journal"&&ya(null),A({id:N,name:F}),z("signals"),en(Y=>({...Y,[N]:Date.now()})),qt(Y=>({...Y,[N]:0})),console.log(` Channel opened: ${N} at ${new Date().toLocaleTimeString()}`),setTimeout(()=>{["general-chat","general-chat-2","general-chat-3","general-chat-4","profit-loss","video"].includes(N)?hr():["calendrier","trading-journal","forex-signaux","crypto-signaux","futures-signaux"].includes(N)||Tn()},200)},[Wt,Ft]=K.useState([]),[tt,Ot]=K.useState({symbol:"",type:"BUY",entry:"",exit:"",stopLoss:"",pnl:"",status:"WIN",notes:"",image1:null,image2:null});K.useEffect(()=>{(async()=>{const F=await Md();console.log(" ID utilisateur synchronis au dmarrage PWA:",F)})()},[]),K.useEffect(()=>{(async()=>{console.log(" Chargement trades personnels depuis Firebase [PWA]...");const F=await lc();Ft(F),console.log(` ${F.length} trades chargs depuis Firebase [PWA]`)})()},[v.id]),K.useEffect(()=>{v.id==="trading-journal"&&(async()=>{console.log(" Rechargement automatique trades pour Journal Perso [PWA]...");const F=localStorage.getItem("user_id");console.log(" ID utilisateur PWA (rechargement):",F);const Y=await lc();Ft(Y),console.log(` ${Y.length} trades rechargs automatiquement [PWA]`)})()},[v.id]),K.useEffect(()=>{console.log(" DEBUG TRADES:",Wt),console.log(" Nombre de trades:",Wt.length),console.log(" Channel actuel:",v.id),console.log(" View actuel:",R)},[Wt,v.id,R]),K.useEffect(()=>{console.log(" Unread messages state:",_t)},[_t]);const[Us,vs]=K.useState({type:"BUY",symbol:"",timeframe:"",entry:"",takeProfit:"",stopLoss:"",description:"",image:null}),[ci,Oi]=K.useState(!1),[rs,is]=K.useState(""),[hn,Ke]=K.useState(!1),[Ht,Ve]=K.useState(!1),[fn,jn]=K.useState(""),[Qe,Zt]=K.useState(new Date),Gr=K.useRef(null),Yt=K.useRef(null),Nr=()=>{Zt(N=>{const F=new Date(N);return F.setMonth(N.getMonth()-1),F})},Pi=()=>{Zt(N=>{const F=new Date(N);return F.setMonth(N.getMonth()+1),F})},Li=N=>["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"][N.getMonth()],qe=N=>{if(!N)return 0;const F=N.replace(/[^\d.-]/g,"");return parseFloat(F)||0},[Wn,ws]=K.useState([]);K.useEffect(()=>{(async()=>{try{console.log(" Chargement de TOUS les signaux pour statistiques et calendrier...");const F=["fondamentaux","letsgooo-model"];let Y=[];for(const B of F)try{console.log(` Chargement signaux pour ${B}...`);const ie=await Za(B,100);ie&&ie.length>0&&(Y=[...Y,...ie],console.log(` ${ie.length} signaux chargs pour ${B}`))}catch(ie){console.error(` Erreur chargement signaux pour ${B}:`,ie)}if(Y.length>0){const B=Y.map(ie=>{var de,ce,Se;return{id:ie.id||"",type:ie.type,symbol:ie.symbol,timeframe:ie.timeframe,entry:((de=ie.entry)==null?void 0:de.toString())||"N/A",takeProfit:((ce=ie.takeProfit)==null?void 0:ce.toString())||"N/A",stopLoss:((Se=ie.stopLoss)==null?void 0:Se.toString())||"N/A",description:ie.description||"",image:null,timestamp:new Date(ie.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),originalTimestamp:ie.timestamp||Date.now(),status:ie.status||"ACTIVE",channel_id:ie.channel_id,reactions:ie.reactions||[],pnl:ie.pnl,closeMessage:ie.closeMessage}});ws(B),console.log(` ${B.length} signaux formats chargs pour statistiques au total`),console.log(" Signaux par canal:",F.map(ie=>({channel:ie,count:B.filter(de=>de.channel_id===ie).length})))}else console.log(" Aucun signal trouv pour les statistiques")}catch(F){console.error(" Erreur chargement signaux pour statistiques:",F)}})()},[]);const ft=()=>e.filter(F=>{const Y=new Date(F.originalTimestamp||F.timestamp),B=new Date(Qe);return Y.getDate()===B.getDate()&&Y.getMonth()===B.getMonth()&&Y.getFullYear()===B.getFullYear()}).length,dr=()=>e.filter(F=>{const Y=new Date(F.originalTimestamp||F.timestamp);return Y.getMonth()===Qe.getMonth()&&Y.getFullYear()===Qe.getFullYear()}).length,zs=()=>e.filter(F=>{const Y=new Date(F.originalTimestamp||F.timestamp);return Y.getMonth()===Qe.getMonth()&&Y.getFullYear()===Qe.getFullYear()}).reduce((F,Y)=>Y.pnl?F+qe(Y.pnl):F,0),jr=()=>{const N=e.filter(Y=>{const B=new Date(Y.originalTimestamp||Y.timestamp);return B.getMonth()===Qe.getMonth()&&B.getFullYear()===Qe.getFullYear()});if(N.length===0)return 0;const F=N.filter(Y=>Y.status==="WIN").length;return Math.round(F/N.length*100)},rr=()=>{const N=e.filter(ie=>{const de=new Date(ie.originalTimestamp||ie.timestamp);return de.getMonth()===Qe.getMonth()&&de.getFullYear()===Qe.getFullYear()}),F=[],Y=new Date(Qe.getFullYear(),Qe.getMonth(),1),B=new Date;for(let ie=1;ie<=5;ie++){const de=new Date(Y);de.setDate(1+(ie-1)*7);const ce=new Date(de);ce.setDate(de.getDate()+6);const Se=N.filter(bs=>{const ht=new Date(bs.originalTimestamp||bs.timestamp);return ht>=de&&ht<=ce}),Xe=Se.filter(bs=>bs.status==="WIN").length,$e=Se.filter(bs=>bs.status==="LOSS").length,it=Se.reduce((bs,ht)=>ht.pnl?bs+qe(ht.pnl):bs,0),Bt=B>=de&&B<=ce;F.push({week:`Week ${ie}`,weekNum:ie,trades:Se.length,wins:Xe,losses:$e,pnl:Math.round(it),isCurrentWeek:Bt})}return F},Wr=()=>s.totalPnL,Tr=()=>s.winRate,ms=N=>Wt.filter(F=>{const Y=new Date(F.date);return Y.getMonth()===N.getMonth()&&Y.getFullYear()===N.getFullYear()}),Et=()=>ms(Qe).reduce((F,Y)=>F+qe(Y.pnl),0),mn=()=>{const N=ms(Qe);if(N.length===0)return 0;const F=N.filter(Y=>Y.status==="WIN").length;return Math.round(F/N.length*100)},Ns=()=>{const F=ms(Qe).filter(B=>B.status==="WIN");if(F.length===0)return 0;const Y=F.reduce((B,ie)=>B+qe(ie.pnl),0);return Math.round(Y/F.length)},Yn=()=>{const F=ms(Qe).filter(B=>B.status==="LOSS");if(F.length===0)return 0;const Y=F.reduce((B,ie)=>B+Math.abs(qe(ie.pnl)),0);return Math.round(Y/F.length)},Kt=()=>{const N=new Date,F=N.toISOString().split("T")[0],Y=ms(Qe);return Qe.getMonth()===N.getMonth()&&Qe.getFullYear()===N.getFullYear()?Y.filter(B=>B.date===F):[]},ui=()=>ms(Qe),di=()=>{const N=Qe.getMonth(),F=Qe.getFullYear(),Y=[];for(let B=1;B<=4;B++){const ie=new Date(F,N,(B-1)*7+1),de=new Date(F,N,B*7),ce=Wt.filter(at=>{const ct=new Date(at.date);return ct>=ie&&ct<=de&&ct.getMonth()===N&&ct.getFullYear()===F}),Se=ce.reduce((at,ct)=>at+qe(ct.pnl),0),Xe=ce.filter(at=>at.status==="WIN").length,$e=ce.filter(at=>at.status==="LOSS").length,it=new Date,Bt=N===it.getMonth()&&F===it.getFullYear(),bs=Math.ceil(it.getDate()/7),ht=Bt&&B===bs;Y.push({week:`Week ${B}`,weekNum:B,trades:ce.length,pnl:Se,wins:Xe,losses:$e,isCurrentWeek:ht})}return Y},Rs=(N,F,Y)=>{const B=parseFloat(N),ie=parseFloat(F),de=parseFloat(Y);if(isNaN(B)||isNaN(ie)||isNaN(de))return"N/A";const ce=Math.abs(B-de),Se=Math.abs(ie-B);return ce===0?"N/A":(Se/ce).toFixed(2)},js=async N=>{try{if(console.log(" handleAddReaction called:",{messageId:N}),!N){console.error(" messageId invalide:",N);return}const F=(y==null?void 0:y.email)||"Anonymous";console.log(" Utilisateur actuel:",F),p(de=>{if(!de||typeof de!="object")return console.error(" messageReactions n'est pas un objet:",de),de;const ce=de[N]||{fire:0,users:[]},Se=Array.isArray(ce.users)?ce.users.indexOf(F):-1;return Se===-1?(console.log(" Ajouter raction pour:",N),{...de,[N]:{fire:(ce.fire||0)+1,users:[...ce.users||[],F]}}):(console.log(" Retirer raction pour:",N),{...de,[N]:{fire:Math.max(0,(ce.fire||0)-1),users:(ce.users||[]).filter((Xe,$e)=>$e!==Se)}})});const Y=g[N]||{fire:0,users:[]},B=Array.isArray(Y.users)?Y.users.indexOf(F):-1;let ie;B===-1?ie={fire:(Y.fire||0)+1,users:[...Y.users||[],F]}:ie={fire:Math.max(0,(Y.fire||0)-1),users:(Y.users||[]).filter((de,ce)=>ce!==B)},console.log(" Sauvegarde Firebase:",{messageId:N,newReactions:ie,currentUser:F}),await Vy(N,ie),console.log(" Raction message synchronise:",N,ie,"par utilisateur:",F)}catch(F){console.error(" Erreur raction message:",F),console.error("Erreur lors de l'ajout de la raction")}},Tn=()=>{Yt.current&&["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4","profit-loss","video"].includes(v.id)?Yt.current.scrollTop=0:window.scrollTo({top:0,behavior:"smooth"})},hr=()=>{console.log(" Scrolling to bottom user...",{hasRef:!!Yt.current,channelId:v.id}),Yt.current&&(Yt.current.scrollTop=Yt.current.scrollHeight);const N=document.querySelector(".overflow-y-auto.overflow-x-hidden.p-4.space-y-4.pb-32");N&&(N.scrollTop=N.scrollHeight,console.log(" Scroll with CSS selector worked")),document.querySelectorAll('[class*="overflow-y-auto"]').forEach((Y,B)=>{Y.scrollTop=Y.scrollHeight,console.log(` Scrolled container ${B}`)}),setTimeout(()=>{Yt.current&&(Yt.current.scrollTop=Yt.current.scrollHeight)},50),setTimeout(()=>{Yt.current&&(Yt.current.scrollTop=Yt.current.scrollHeight)},200),console.log(" Scroll to bottom user completed")},hi=()=>{const N=localStorage.getItem("userProfileImage");localStorage.clear(),N&&localStorage.setItem("userProfileImage",N),window.location.href="/"},fi=N=>{var Y;const F=(Y=N.target.files)==null?void 0:Y[0];if(console.log(" USER File selected:",F?F.name:"NO FILE"),F&&F.type.startsWith("image/")){console.log(" USER Processing image...");const B=new FileReader;B.onload=async ie=>{var Se;const de=(Se=ie.target)==null?void 0:Se.result;console.log(" USER Syncing to localStorage AND Supabase..."),ur(de);const ce=await aA("user",de);ce.success?console.log(" USER Profile image synchronized across all devices!"):console.error(" USER Sync failed:",ce.error)},B.readAsDataURL(F)}};K.useEffect(()=>{["calendrier","trading-journal"].includes(v.id)||setTimeout(()=>{Yt.current&&(Yt.current.scrollTop=Yt.current.scrollHeight)},100)},[fe,v.id,Ps]);const Sr=[{id:"general-chat-2",name:"general-chat-2",emoji:"",fullName:"Indices"},{id:"general-chat-3",name:"general-chat-3",emoji:"",fullName:"Crypto"},{id:"general-chat-4",name:"general-chat-4",emoji:"",fullName:"Forex"},{id:"fondamentaux",name:"fondamentaux",emoji:"",fullName:"Fondamentaux"},{id:"letsgooo-model",name:"letsgooo-model",emoji:"",fullName:"Letsgooo model"},{id:"general-chat",name:"general-chat",emoji:"",fullName:"Gnral chat"},{id:"profit-loss",name:"profit-loss",emoji:"",fullName:"Profit loss"},{id:"calendrier",name:"calendrier",emoji:"",fullName:"Journal Signaux"},{id:"trading-journal",name:"trading-journal",emoji:"",fullName:"Journal Perso"},{id:"video",name:"video",emoji:"",fullName:"Livestream"}],ir=()=>{Hr(!0)},Er=async()=>{if(!tt.symbol||!tt.entry||!tt.exit||!tt.pnl){console.warn("Veuillez remplir les champs obligatoires (Symbol, Entry, Exit, PnL)");return}const N=B=>{const ie=B.getFullYear(),de=String(B.getMonth()+1).padStart(2,"0"),ce=String(B.getDate()).padStart(2,"0");return`${ie}-${de}-${ce}`},F={date:N(ns||new Date),symbol:tt.symbol,type:tt.type,entry:tt.entry,exit:tt.exit,stopLoss:tt.stopLoss,pnl:tt.pnl,status:tt.status,notes:tt.notes,image1:tt.image1,image2:tt.image2,timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})},Y=await By(F);Y?(Ft(B=>[Y,...B]),Ot({symbol:"",type:"BUY",entry:"",exit:"",stopLoss:"",pnl:"",status:"WIN",notes:"",image1:null,image2:null}),Hr(!1),console.log(" Trade ajout avec succs dans Firebase !")):console.error(" Erreur lors de la sauvegarde du trade")},Sn=N=>{var de,ce,Se,Xe;N.preventDefault();const F=N.clipboardData.getData("text/html")||"",Y=N.clipboardData.getData("text")||"";console.log("Pasted HTML:",F),console.log("Pasted Text:",Y);const B={};let ie=!1;if(F.includes("data-tradingview-clip"))try{const $e=/data-tradingview-clip="([^"]+)"/,it=F.match($e);if(it&&it[1]){const Bt=it[1].replace(/&(?:quot|#34);/g,'"'),bs=JSON.parse(Bt);console.log("TradingView data:",bs);const ht=(ce=(de=bs.sources)==null?void 0:de[0])==null?void 0:ce.source,at=ht==null?void 0:ht.points,ct=ht==null?void 0:ht.state,ot=ct==null?void 0:ct.stopLevel,gs=ct==null?void 0:ct.profitLevel;if(at&&at.length>=2){ie=!0;let _=(ct==null?void 0:ct.symbol)||"",C=_.split(":")[1]||_;C.startsWith("NQ1")?C="NQ":C.startsWith("ES1")?C="ES":C.startsWith("MNQ")&&(C="MNQ"),B.symbol=C;const V=ht==null?void 0:ht.type;V==="LineToolRiskRewardLong"||/long/i.test(V)?B.tradeType="buy":(V==="LineToolRiskRewardShort"||/short/i.test(V))&&(B.tradeType="sell");const k=(Se=at[0])==null?void 0:Se.price;if(k!==void 0&&(B.entryPrice=k.toString()),at.length>1){const G=(Xe=at[at.length-1])==null?void 0:Xe.price;G!==void 0&&(B.exitPrice=G.toString())}if(ot!==void 0&&gs!==void 0){const G=Math.round(gs/ot*100)/100;if(B.rr=G.toString(),k!==void 0){let se;if(B.tradeType==="buy"){const ue=ot/4;se=k-ue}else{const ue=ot/4;se=k+ue}B.stopLoss=se.toString()}}}}}catch($e){console.error("Error parsing TradingView data:",$e)}if(!ie){const $e=Y.match(/([A-Z]{3,6})/),it=Y.match(/(BUY|SELL|LONG|SHORT)/i),Bt=Y.match(/\d+(?:\.\d+)?/g);$e&&(B.symbol=$e[1]),it&&(B.tradeType=it[1].toLowerCase()),Bt&&Bt.length>=1&&(B.entryPrice=Bt[0]),Bt&&Bt.length>=2&&(B.exitPrice=Bt[1]),Bt&&Bt.length>=3&&(B.stopLoss=Bt[2])}B.symbol&&Ot($e=>({...$e,symbol:B.symbol})),B.tradeType&&Ot($e=>({...$e,type:B.tradeType==="buy"||B.tradeType==="long"?"BUY":"SELL"})),B.entryPrice&&Ot($e=>({...$e,entry:B.entryPrice})),B.exitPrice&&Ot($e=>({...$e,exit:B.exitPrice})),B.stopLoss&&Ot($e=>({...$e,stopLoss:B.stopLoss})),ie||Object.keys(B).length>0?console.log(` Donnes importes - Symbole: ${B.symbol}, Entre: ${B.entryPrice}, Sortie: ${B.exitPrice}, Stop Loss: ${B.stopLoss}`):console.warn(" Aucune donne dtecte. Essayez de coller depuis TradingView (Risk/Reward tool)")},Pt=N=>{try{const F=N.getFullYear(),Y=String(N.getMonth()+1).padStart(2,"0"),B=String(N.getDate()).padStart(2,"0"),ie=`${F}-${Y}-${B}`;if(console.log("Recherche trades pour date:",ie),console.log("Tous les trades:",Wt),!Array.isArray(Wt))return console.error("personalTrades n'est pas un tableau:",Wt),[];const de=Wt.filter(ce=>!ce||!ce.date?(console.log("Trade invalide:",ce),!1):ce.date===ie);return console.log("Trades filtrs:",de),de}catch(F){return console.error("Erreur dans getTradesForDate:",F),[]}},Yr=N=>{try{if(!Array.isArray(Wt))return console.error("personalTrades n'est pas un tableau:",Wt),[];console.log(" DEBUG getTradesForWeek - Tous les trades:",Wt),console.log(" DEBUG getTradesForWeek - Semaine demande:",N);const F=new Date,Y=F.getMonth(),B=F.getFullYear(),de=new Date(B,Y,1).getDay(),ce=new Date(B,Y,1+(N-1)*7-de),Se=new Date(ce);Se.setDate(ce.getDate()+6),console.log(` Recherche trades pour semaine ${N}:`,ce.toDateString(),"",Se.toDateString()),console.log(" Dates des trades:",Wt.map($e=>$e.date));const Xe=Wt.filter($e=>{if(!$e||!$e.date)return console.log(" Trade invalide:",$e),!1;const it=new Date($e.date),Bt=it>=ce&&it<=Se;return console.log(` Trade ${$e.date} (${it.toDateString()}) dans semaine ${N}?`,Bt),Bt});return console.log(` Trades trouvs pour semaine ${N}:`,Xe.length),Xe}catch(F){return console.error(" Erreur dans getTradesForWeek:",F),[]}},Ar=N=>{const F=new Date(N.getFullYear(),N.getMonth(),N.getDate()),Y=e.filter(B=>{const ie=new Date(B.originalTimestamp||B.timestamp);return new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()).getTime()===F.getTime()});return console.log(` [CALENDAR] Signaux trouvs pour ${F.toDateString()}:`,Y.length),Y.forEach(B=>{console.log(" [CALENDAR] Signal avec image:",{id:B.id,symbol:B.symbol,hasImage:!!B.image,hasAttachment:!!B.attachment_data,image:B.image,attachment_data:B.attachment_data,attachment_type:B.attachment_type,attachment_name:B.attachment_name,ALL_KEYS:Object.keys(B)})}),Y},fr=N=>{const Y=n().find(B=>B.weekNum===N);return(Y==null?void 0:Y.signals)||[]},Kn=async()=>{var N;if(a){console.log(" Message dj en cours d'envoi, ignor");return}if(ys.trim()){l(!0),console.log(" Dbut envoi message ct:",window.matchMedia("(display-mode: standalone)").matches?"PWA":"Desktop"),console.log(" Message  envoyer:",ys),console.log(" Canal slectionn:",v.id),console.log(" Messages actuels avant envoi:",((N=fe[v.id])==null?void 0:N.length)||0);try{const F={id:`local-${Date.now()}`,text:ys,user:"TheTheTrader",author:"TheTheTrader",author_avatar:qs||void 0,timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),attachment_data:void 0};console.log(" Message local cr (pas encore affich):",F);const Y={channel_id:v.id,content:ys,author:"TheTheTrader",author_type:"user",author_avatar:qs||void 0};console.log(" Envoi vers Firebase:",Y);const B=await Ho(Y);B?console.log(" Message envoy  Firebase:",B):(console.error(" Erreur envoi message Firebase"),be(ie=>{const de=ie[v.id]||[];return{...ie,[v.id]:[...de,F]}}))}catch(F){console.error(" ERREUR envoi message:",F),console.log(" Message local conserv en cas d'erreur")}setTimeout(()=>{hr()},50),$r("")}l(!1)},Kr=async N=>{var Y;const F=(Y=N.target.files)==null?void 0:Y[0];if(F){const B=await Uy(F);try{const ie={channel_id:v.id,content:"",author:"TheTheTrader",author_type:"user",author_avatar:qs||void 0,attachment_data:B,attachment_type:F.type,attachment_name:F.name};console.log(" Message data envoy utilisateur:",ie);const de=await Ho(ie);console.log(" Message sauvegard utilisateur:",de),de?console.log(" Image envoye utilisateur  Firebase:",de):console.error(" Erreur envoi image utilisateur Firebase")}catch(ie){console.error(" ERREUR upload image utilisateur:",ie)}N.target.value="",setTimeout(()=>{hr()},50)}},Ln=()=>(console.log(" getTradingCalendar appel pour channel:",v.id),console.log(" personalTrades dans calendrier:",Wt.length),r.jsxs("div",{className:"bg-gray-900 text-white p-2 md:p-4 h-full overflow-y-auto",style:{paddingTop:v.id==="trading-journal"?"60px":"20px"},children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6 md:mb-8 border-b border-gray-600 pb-4 gap-4 md:gap-0",children:[r.jsxs("div",{className:"hidden md:block",children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:v.id==="trading-journal"?"Mon Journal Perso":"Journal des Signaux"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:v.id==="trading-journal"?"Journal tous tes trades":"Suivi des performances des signaux"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 text-white",children:[r.jsx("button",{onClick:Nr,className:"p-2 hover:bg-gray-700 rounded-lg text-lg font-bold",children:""}),r.jsxs("span",{className:"px-4 text-lg font-semibold min-w-[120px] text-center",children:[Li(Qe)," ",Qe.getFullYear()]}),r.jsx("button",{onClick:Pi,className:"p-2 hover:bg-gray-700 rounded-lg text-lg font-bold",children:""})]}),v.id==="trading-journal"&&r.jsx("button",{onClick:ir,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Trade"})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[r.jsxs("div",{className:"flex-1 w-full",children:[r.jsx("div",{className:"grid grid-cols-7 gap-0.5 md:gap-1 mb-4 w-full",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(N=>r.jsx("div",{className:"text-center text-gray-400 font-semibold py-3 text-sm uppercase tracking-wide",children:N.substring(0,3)},N))}),r.jsx("div",{className:"grid grid-cols-7 gap-0.5 md:gap-1 w-full",children:(()=>{const N=new Date(Qe.getFullYear(),Qe.getMonth(),1),Y=new Date(Qe.getFullYear(),Qe.getMonth()+1,0).getDate(),B=N.getDay(),ie=B===0?6:B-1,de=Math.ceil((ie+Y)/7)*7;return Array.from({length:de},(ce,Se)=>{const Xe=Se-ie+1,$e=new Date,it=Xe===$e.getDate()&&Qe.getMonth()===$e.getMonth()&&Qe.getFullYear()===$e.getFullYear();if(Xe<1)return r.jsx("div",{className:"border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 bg-gray-800 border-gray-700",style:{minHeight:"64px"}},Se);if(Xe>Y)return r.jsx("div",{className:"border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 bg-gray-800 border-gray-700",style:{minHeight:"64px"}},Se);const Bt=v.id==="trading-journal"?Wt.filter(ct=>{const ot=new Date(ct.date);return ot.getDate()===Xe&&ot.getMonth()===Qe.getMonth()&&ot.getFullYear()===Qe.getFullYear()}):[],bs=v.id!=="trading-journal"?e.filter(ct=>{const ot=new Date(ct.originalTimestamp||ct.timestamp);return isNaN(ot.getTime())?!1:ot.getDate()===Xe&&ot.getMonth()===Qe.getMonth()&&ot.getFullYear()===Qe.getFullYear()}):[];let ht="bg-gray-700 border-gray-600 text-gray-400",at=0;if(v.id==="trading-journal"){if(Bt.length>0){at=Bt.length;const ct=Bt.some(_=>_.status==="WIN"),ot=Bt.some(_=>_.status==="LOSS"),gs=Bt.some(_=>_.status==="BE");ct&&!ot?ht="bg-green-500/60 border-green-400/50 text-white":ot&&!ct?ht="bg-red-500/60 border-red-400/50 text-white":(gs||ct&&ot)&&(ht="bg-blue-500/60 border-blue-400/50 text-white")}}else if(bs.length>0){at=bs.length;const ct=bs.reduce((ot,gs)=>gs.pnl?ot+qe(gs.pnl):ot,0);ct>0?ht="bg-green-400/40 border-green-300/30 text-white":ct<0?ht="bg-red-500/60 border-red-400/50 text-white":ht="bg-blue-500/60 border-blue-400/50 text-white"}return r.jsx("div",{onClick:ct=>{try{ct.preventDefault(),ct.stopPropagation();const ot=new Date(Qe.getFullYear(),Qe.getMonth(),Xe);if(v.id==="trading-journal"){ya(ot);const gs=Pt(ot);console.log("Clic sur jour:",Xe,"Trades trouvs:",gs.length),gs.length>0&&(console.log("Trades trouvs, ouverture modal..."),Ce(ot),P(!0))}else Ar(ot).length>0&&(Le(ot),Rt(!0))}catch(ot){console.error("Erreur lors du clic sur le jour:",ot),console.error("Erreur lors du clic sur le jour:",ot)}},className:`
                    border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 cursor-pointer transition-all hover:shadow-md
                      ${ht}
                    ${it?"ring-2 ring-blue-400":""}
                      ${v.id==="trading-journal"&&ns&&ns.getDate()===Xe&&ns.getMonth()===Qe.getMonth()&&ns.getFullYear()===Qe.getFullYear()?"ring-2 ring-purple-400":""}
                  `,style:{minHeight:"64px"},children:r.jsxs("div",{className:"flex flex-col h-full justify-between",children:[r.jsx("div",{className:"text-xs md:text-sm font-semibold",children:Xe}),at>0&&r.jsxs("div",{className:"text-xs font-bold text-center hidden md:block",children:[at," ",v.id==="trading-journal"?"trade":"signal",at>1?"s":""]})]})},Se)})})()},`calendar-${v.id}-${Wt.length}-${Qe.getMonth()}-${Qe.getFullYear()}`),r.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4 pt-3 border-t border-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500/60 border border-green-400/50 rounded"}),r.jsx("span",{className:"text-xs text-gray-300",children:"WIN"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500/60 border border-red-400/50 rounded"}),r.jsx("span",{className:"text-xs text-gray-300",children:"LOSS"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500/60 border border-blue-400/50 rounded"}),r.jsx("span",{className:"text-xs text-gray-300",children:"BREAK"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-gray-700 border border-gray-600 rounded"}),r.jsx("span",{className:"text-xs text-gray-300",children:"NO TRADE"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 border-2 border-blue-400 rounded"}),r.jsx("span",{className:"text-xs text-gray-300",children:"Today"})]})]})]}),r.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-xl p-4 md:p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-6",children:v.id==="trading-journal"?"Mon Journal Perso":"Statistiques Signaux"}),r.jsxs("div",{className:"space-y-4 mb-8",children:[r.jsxs("div",{className:`border rounded-lg p-4 border ${(v.id==="trading-journal"?Et():zs())>=0?"bg-green-600/20 border-green-500/30":"bg-red-600/20 border-red-500/30"}`,children:[r.jsx("div",{className:`text-sm mb-1 ${(v.id==="trading-journal"?Et():zs())>=0?"text-green-300":"text-red-300"}`,children:"P&L Total"}),r.jsxs("div",{className:`text-2xl font-bold ${(v.id==="trading-journal"?Et():zs())>=0?"text-green-200":"text-red-200"}`,children:[(v.id==="trading-journal"?Et():zs())>=0?"+":"","$",v.id==="trading-journal"?Et():zs()]})]}),r.jsxs("div",{className:"bg-blue-600/20 border-blue-500/30 rounded-lg p-4 border",children:[r.jsx("div",{className:"text-sm text-blue-300 mb-1",children:"Win Rate"}),r.jsxs("div",{className:"text-2xl font-bold text-blue-200",children:[v.id==="trading-journal"?mn():jr(),"%"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Aujourd'hui"}),r.jsx("div",{className:"text-lg font-bold text-blue-400",children:v.id==="trading-journal"?Kt().length:ft()})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Ce mois"}),r.jsx("div",{className:"text-lg font-bold text-white",children:v.id==="trading-journal"?ui().length:dr()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Win"}),r.jsx("div",{className:"text-lg font-bold text-green-400",children:v.id==="trading-journal"?Ns()>0?`+$${Ns()}`:"-":t(Qe).avgWin>0?`+$${t(Qe).avgWin}`:"-"})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Loss"}),r.jsx("div",{className:"text-lg font-bold text-red-400",children:v.id==="trading-journal"?Yn()>0?`-$${Yn()}`:"-":t(Qe).avgLoss>0?`-$${t(Qe).avgLoss}`:"-"})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Weekly Breakdown"}),r.jsx("div",{className:"space-y-2",children:(v.id==="trading-journal"?di():rr()).map((N,F)=>r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer hover:bg-gray-600/50 transition-colors ${N.isCurrentWeek?"bg-blue-600/20 border-blue-500/30":"bg-gray-700/50 border-gray-600"}`,onClick:()=>{hs(N.weekNum),Ye(!0)},children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`text-sm font-medium ${N.isCurrentWeek?"text-blue-300":"text-gray-300"}`,children:N.week}),r.jsxs("div",{className:"text-xs text-gray-400",children:[N.trades," trade",N.trades!==1?"s":""]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[N.wins>0||N.losses>0?r.jsxs("div",{className:"flex items-center gap-1",children:[N.wins>0&&r.jsxs("div",{className:"text-sm bg-green-500 text-white px-3 py-1 rounded-lg font-bold shadow-lg",children:[N.wins,"W"]}),N.losses>0&&r.jsxs("div",{className:"text-sm bg-red-500 text-white px-3 py-1 rounded-lg font-bold shadow-lg",children:[N.losses,"L"]})]}):r.jsx("div",{className:"text-sm text-gray-500 px-3 py-1",children:"-"}),r.jsx("div",{className:`text-xs ${N.pnl>0?"text-green-400":N.pnl<0?"text-red-400":"text-gray-500"}`,children:N.pnl!==0?`${N.pnl>0?"+":""}$${N.pnl}`:""})]})]},F))})]}),r.jsx("div",{className:"h-24 md:h-32"})]})]})]}));return r.jsxs("div",{className:"h-screen w-full bg-gray-900 text-white overflow-hidden flex",style:{paddingTop:"0px"},children:[r.jsxs("div",{className:"hidden md:flex w-56 bg-gray-800 flex-col",children:[r.jsx("div",{className:"p-4 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("input",{type:"file",onChange:fi,className:"hidden",accept:"image/*"}),r.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:qs?r.jsx("img",{src:qs,alt:"Profile",className:"w-full h-full object-cover"}):"TT"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:"TheTheTrader"}),r.jsx("p",{className:"text-xs text-gray-400",children:"En ligne"})]})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"DUCATION"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("button",{onClick:()=>_s("fondamentaux","fondamentaux"),className:`w-full text-left px-3 py-2 rounded text-sm ${v.id==="fondamentaux"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:" Fondamentaux"}),r.jsx("button",{onClick:()=>_s("letsgooo-model","letsgooo-model"),className:`w-full text-left px-3 py-2 rounded text-sm ${v.id==="letsgooo-model"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:" Letsgooo-model"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"SIGNAUX"}),r.jsx("div",{className:"space-y-1",children:Sr.filter(N=>["general-chat-2","general-chat-3","general-chat-4"].includes(N.id)).map(N=>r.jsxs("button",{onClick:()=>_s(N.id,N.name),className:`w-full text-left px-3 py-2 rounded text-sm ${v.id===N.id?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[N.emoji," ",N.fullName]},N.id))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"TRADING HUB"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("button",{onClick:()=>_s("profit-loss","profit-loss"),className:`w-full text-left px-3 py-2 rounded text-sm ${v.id==="profit-loss"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:" Profit-loss"}),r.jsx("button",{onClick:()=>_s("calendrier","calendrier"),className:`w-full text-left px-3 py-2 rounded text-sm ${v.id==="calendrier"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:" Journal Signaux"}),r.jsx("button",{onClick:()=>_s("trading-journal","trading-journal"),className:`w-full text-left px-3 py-2 rounded text-sm ${v.id==="trading-journal"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:" Journal Perso"}),r.jsx("button",{onClick:()=>{window.open("/trading-live.html","_blank")},className:"w-full text-left px-3 py-2 rounded text-sm text-gray-400 hover:text-white hover:bg-gray-700",children:" Formation Live"}),r.jsx("button",{onClick:()=>_s("video","video"),className:`w-full text-left px-3 py-2 rounded text-sm ${v.id==="video"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:" Livestream"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Statistiques"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Win Rate:"}),r.jsxs("span",{className:"text-blue-400",children:[Tr(),"%"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Total Trades:"}),r.jsx("span",{className:"text-purple-400",children:e.length})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Signaux actifs:"}),r.jsx("span",{className:"text-yellow-400",children:e.filter(N=>N.status==="ACTIVE").length})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"P&L Total:"}),r.jsxs("span",{className:Wr()>=0?"text-green-400":"text-red-400",children:[Wr()>=0?"+":"","$",Wr()]})]})]})]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx("div",{className:"md:hidden bg-gray-800 border-b border-gray-700 p-3 fixed top-0 left-0 right-0 z-30",style:{height:"60px"},children:q==="channels"?r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("input",{type:"file",onChange:fi,className:"hidden",accept:"image/*"}),r.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:qs?r.jsx("img",{src:qs,alt:"Profile",className:"w-full h-full object-cover"}):"TT"})]}),r.jsx("div",{children:r.jsx("p",{className:"text-sm font-medium",children:"TheTheTrader"})})]}),r.jsx("button",{onClick:hi,className:"text-gray-400 hover:text-white",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})]}):r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("button",{onClick:()=>Q("channels"),className:"flex items-center gap-2 text-gray-400 hover:text-white",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),r.jsx("span",{className:"text-sm font-medium",children:R==="calendar"?" Journal Signaux":((es=Sr.find(N=>N.id===v.id))==null?void 0:es.fullName)||v.name})]})})}),r.jsxs("div",{className:"md:hidden relative flex-1 overflow-hidden",style:{paddingTop:"60px"},children:[r.jsx("div",{className:`absolute inset-0 bg-gray-800 transform transition-transform duration-300 ease-in-out z-10 ${q==="channels"?"translate-x-0":"-translate-x-full"}`,children:r.jsxs("div",{className:"p-4 space-y-6 h-full overflow-y-auto",style:{paddingTop:"80px"},children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"DUCATION"}),r.jsx("div",{className:"space-y-2",children:Sr.filter(N=>["fondamentaux","letsgooo-model"].includes(N.id)).map(N=>r.jsx("button",{onClick:()=>{_s(N.id,N.name),Q("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:N.emoji}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:N.fullName}),r.jsx("p",{className:"text-sm text-gray-400",children:"Contenu ducatif"})]})]})},N.id))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"SIGNAUX"}),r.jsx("div",{className:"space-y-2",children:Sr.filter(N=>["general-chat-2","general-chat-3","general-chat-4"].includes(N.id)).map(N=>r.jsx("button",{onClick:()=>{_s(N.id,N.name),Q("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:N.emoji}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:N.fullName}),r.jsx("p",{className:"text-sm text-gray-400",children:"Canal de signaux"})]})]})},N.id))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"TRADING HUB"}),r.jsxs("div",{className:"space-y-2",children:[Sr.filter(N=>["","profit-loss","video"].includes(N.id)).map(N=>r.jsx("button",{onClick:()=>{_s(N.id,N.name),Q("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:N.emoji}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:N.fullName}),r.jsx("p",{className:"text-sm text-gray-400",children:"Hub de trading"})]})]})},N.id)),r.jsx("button",{onClick:()=>{_s("calendrier","calendrier"),Q("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:"Journal Signaux"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Suivi des performances"})]})]})}),r.jsx("button",{onClick:()=>{_s("trading-journal","trading-journal"),Q("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:"Journal Perso"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Journal personnel"})]})]})}),r.jsx("button",{onClick:()=>{window.open("/trading-live.html","_blank")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:"Formation Live"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Formation en direct"})]})]})})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium mb-3",children:"Statistiques"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Win Rate:"}),r.jsxs("span",{className:"text-blue-400",children:[jr(),"%"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Signaux actifs:"}),r.jsx("span",{className:"text-yellow-400",children:e.filter(N=>N.status==="ACTIVE").length})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"P&L Total:"}),r.jsxs("span",{className:zs()>=0?"text-green-400":"text-red-400",children:[zs()>=0?"+":"","$",zs()]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Total Trades:"}),r.jsx("span",{className:"text-purple-400",children:e.length})]})]}),r.jsx("div",{className:"text-xs text-green-500 text-center mt-2",children:" Stats synchronises"})]})]})}),r.jsx("div",{className:`absolute inset-0 bg-gray-900 transform transition-transform duration-300 ease-in-out z-10 ${q==="content"?"translate-x-0":"translate-x-full"}`,children:R==="calendar"||v.id==="trading-journal"||v.id==="calendrier"||v.id==="video"?r.jsxs("div",{className:"bg-gray-900 text-white p-4 md:p-6 h-full overflow-y-auto overflow-x-hidden",style:{paddingTop:"0px"},children:[v.id==="trading-journal"&&r.jsxs("div",{className:"hidden md:flex justify-between items-center mb-6 border-b border-gray-600 pb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Mon Journal Perso"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Journal tous tes trades"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:ir,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Trade"})})]}),(R==="calendar"||v.id==="calendrier")&&v.id!=="trading-journal"&&r.jsx("div",{className:"flex justify-between items-center mb-6 border-b border-gray-600 pb-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Journal des Signaux"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Suivi des performances des signaux"})]})}),(v.id==="calendrier"||v.id==="trading-journal")&&Ln(),v.id==="video"&&r.jsx("div",{className:"flex flex-col h-full bg-gray-900",children:r.jsxs("div",{className:"text-center space-y-4 w-full p-4 pt-16",children:[r.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Livestream"}),r.jsx("p",{className:"text-gray-400",children:"Attache ta ceinture cousin"}),r.jsxs("div",{className:"w-full relative",children:[r.jsx("button",{onClick:()=>{const N=document.querySelector('iframe[src*="100ms.live"]');N&&N.requestFullscreen&&N.requestFullscreen()},className:"absolute top-4 right-4 z-10 text-white text-4xl font-bold hover:text-gray-300 transition-colors",children:""}),r.jsx("iframe",{src:"https://tote-livestream-033.app.100ms.live/streaming/meeting/hzs-ukns-nts",width:"100%",height:"400px",style:{border:"none",borderRadius:"8px"},allow:"camera; microphone; display-capture; fullscreen",allowFullScreen:!0})]})]})}),(console.log("Vrification affichage trades:",{channel:v.id,selectedDate:ns,shouldShow:v.id==="trading-journal"&&ns,tradesCount:ns?Pt(ns).length:0}),v.id==="trading-journal"&&ns)&&r.jsxs("div",{className:"mt-8 border-t border-gray-600 pt-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Trades du ",ns.toLocaleDateString("fr-FR")]}),Pt(ns).length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Aucun trade pour cette date"}):r.jsx("div",{className:"space-y-4",children:Pt(ns).map(N=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${N.status==="WIN"?"bg-green-500 text-white":N.status==="LOSS"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:N.status}),r.jsx("span",{className:"text-white font-semibold",children:N.symbol}),r.jsx("span",{className:"text-gray-400",children:N.type})]}),r.jsxs("span",{className:`text-lg font-bold ${parseFloat(N.pnl)>=0?"text-green-400":"text-red-400"}`,children:[parseFloat(N.pnl)>=0?"+":"",N.pnl,"$"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Entry:"}),r.jsx("span",{className:"text-white ml-2",children:N.entry})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Exit:"}),r.jsx("span",{className:"text-white ml-2",children:N.exit})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Stop Loss:"}),r.jsx("span",{className:"text-white ml-2",children:N.stopLoss||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Time:"}),r.jsx("span",{className:"text-white ml-2",children:N.timestamp})]})]}),N.notes&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Notes:"}),r.jsx("p",{className:"text-white text-sm mt-1",children:N.notes})]}),(N.image1||N.image2)&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Images:"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[N.image1&&r.jsx("img",{src:N.image1,alt:"Trade screenshot 1",className:"w-20 h-20 object-cover rounded border border-gray-600"}),N.image2&&r.jsx("img",{src:N.image2,alt:"Trade screenshot 2",className:"w-20 h-20 object-cover rounded border border-gray-600"})]})]})]},N.id))})]})]}):r.jsxs("div",{className:"p-4 md:p-6 space-y-4 w-full h-full overflow-y-auto",style:{paddingTop:"80px",paddingBottom:"100px"},children:[R==="signals"&&v.id==="calendrier"?Ln():null,R==="signals"&&!["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4","profit-loss","video","","calendrier"].includes(v.id)?r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex justify-center pt-2 sticky top-0 bg-gray-900 p-2 rounded z-10",children:r.jsx("button",{onClick:async()=>{try{const N=Ps.filter(F=>F.channel_id===v.id);if(N.length>0){const F=N[N.length-1],Y=new Date(F.timestamp).getTime();console.log(" Chargement de signaux plus anciens avant:",Y);const B=await Za(v.id,10,Y);if(B&&B.length>0){const ie=B.map(Se=>{var Xe,$e,it;return{id:Se.id||"",type:Se.type,symbol:Se.symbol,timeframe:Se.timeframe,entry:((Xe=Se.entry)==null?void 0:Xe.toString())||"N/A",takeProfit:(($e=Se.takeProfit)==null?void 0:$e.toString())||"N/A",stopLoss:((it=Se.stopLoss)==null?void 0:it.toString())||"N/A",description:Se.description||"",image:null,timestamp:new Date(Se.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:Se.status||"ACTIVE",channel_id:Se.channel_id,reactions:Se.reactions||[],pnl:Se.pnl,closeMessage:Se.closeMessage}}),de=new Set(N.map(Se=>Se.id)),ce=ie.filter(Se=>!de.has(Se.id));ce.length>0?(tn(Se=>[...Se,...ce]),console.log(` ${ce.length} nouveaux signaux ajouts`)):console.log(" Aucun nouveau signal  ajouter")}else console.log(" Aucun signal plus ancien trouv")}}catch(N){console.error(" Erreur lors du chargement de signaux supplmentaires:",N)}},className:"px-4 py-2 text-sm rounded bg-gray-700 hover:bg-gray-600 text-white",children:"Voir plus (+10)"})}),Ps.filter(N=>N.channel_id===v.id).length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Aucun signal pour le moment"}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:'Crez votre premier signal avec le bouton "+"'})]}):Ps.filter(N=>N.channel_id===v.id).map(N=>r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:qs?r.jsx("img",{src:qs,alt:"Profile",className:"w-full h-full object-cover"}):"TT"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),r.jsx("span",{className:"text-xs text-gray-400",children:N.timestamp})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 max-w-2xl md:max-w-2xl max-w-full",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${N.status==="ACTIVE"?"bg-green-500":"bg-gray-500"}`}),r.jsxs("h3",{className:"font-bold text-white text-lg",children:["Signal ",N.type," ",N.symbol,"  ",N.timeframe]})]}),r.jsxs("div",{className:"space-y-2",children:[N.entry!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Entre : ",N.entry," USD"]})]}),N.stopLoss!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Stop Loss : ",N.stopLoss," USD"]})]}),N.takeProfit!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Take Profit : ",N.takeProfit," USD"]})]})]}),N.entry!=="N/A"&&N.takeProfit!=="N/A"&&N.stopLoss!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-red-400 text-sm",children:""}),r.jsxs("span",{className:"text-white text-sm",children:["Ratio R:R :  ",Rs(N.entry,N.takeProfit,N.stopLoss)]})]}),N.closeMessage&&r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-yellow-400 text-sm",children:""}),r.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:N.closeMessage})]})]})}),N.image&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:URL.createObjectURL(N.image),alt:"Signal screenshot",className:"max-w-full md:max-w-2xl rounded-lg border border-gray-600"})})]})]},N.id))]}):v.id==="profit-loss"?r.jsx(Go,{channelId:"profit-loss",currentUserId:"user"}):["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"].includes(v.id)?r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{ref:Yt,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4 pb-32",children:[v.id==="fondamentaux"&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[r.jsxs("div",{className:"text-center mb-8 p-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl text-white",children:[r.jsx("div",{className:"flex justify-center mb-0",children:r.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-48 w-auto object-cover",style:{clipPath:"inset(10% 5% 15% 5%)"}})}),r.jsx("p",{className:"text-xl opacity-90 -mt-3",children:"Guide complet des concepts fondamentaux et stratgies avances"})]}),r.jsxs("div",{className:"space-y-6 text-gray-300",children:[r.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4",children:r.jsxs("p",{className:"text-yellow-200",children:[r.jsx("strong",{children:" Avertissement :"})," Ce guide prsente un ensemble de concepts appris et expriments sur les marchs financiers. Il ne s'agit pas d'inventions originales, mais d'un setup personnel bas sur l'observation et l'exprience pratique."]})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"1.  Introduction"}),r.jsx("p",{children:"Ce document vous prsente les fondamentaux essentiels pour comprendre comment les charts voluent et ce qui influence leurs mouvements. L'objectif est de construire une base solide avant d'aborder les stratgies avances."})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"2.  Fondamentaux des Charts"}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:" Qu'est-ce qu'une Chart ?"}),r.jsx("p",{className:"mb-3",children:"Une chart (ou graphique) est une reprsentation visuelle du prix d'un actif financier dans le temps (Bitcoin, or, actions, etc.)."}),r.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[r.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Elle permet de :"}),r.jsxs("ul",{className:"space-y-1 text-sm",children:[r.jsx("li",{children:" Voir comment le prix volue"}),r.jsx("li",{children:" Trouver des points d'entre/sortie"}),r.jsx("li",{children:" Comprendre le comportement du march"})]})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:" Comprendre les Bougies"}),r.jsx("p",{className:"mb-3",children:"Chaque bougie montre l'volution du prix sur une priode donne (1 min, 1h, 1 jour, etc.)"}),r.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[r.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Composition d'une bougie :"}),r.jsxs("ul",{className:"space-y-1 text-sm",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Le corps (body) :"})," diffrence entre ouverture et clture"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Les mches (wicks) :"})," les plus hauts et plus bas atteints"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Couleur :"})," verte/blanche si clture > ouverture, rouge/noire si clture < ouverture"]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"3.  Mouvement des Prix (Modle AMD)"}),r.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 mb-4",children:r.jsxs("p",{children:[r.jsx("strong",{children:" Analogie :"})," Le prix, c'est comme un voyage de A  B. Pour avancer, il a besoin de liquidit, comme une voiture a besoin d'essence."]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"1"}),r.jsx("div",{className:"font-semibold mb-2",children:"Accumulation"}),r.jsx("p",{className:"text-sm",children:"Le prix se prpare "})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"2"}),r.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),r.jsx("p",{className:"text-sm",children:"Il pige les traders "})]}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"3"}),r.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),r.jsx("p",{className:"text-sm",children:"Le vrai mouvement "})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"4.  Support et Rsistance"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[r.jsx("strong",{className:"text-green-300",children:" Support"}),r.jsx("br",{}),r.jsx("span",{className:"text-sm",children:"Zone o le prix rebondit vers le haut "})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[r.jsx("strong",{className:"text-red-300",children:" Rsistance"}),r.jsx("br",{}),r.jsx("span",{className:"text-sm",children:"Zone o le prix bloque et redescend "})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"5.  Concepts Avancs"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:" ORDER BLOCK (OB)"}),r.jsx("p",{className:"mb-2",children:"Un Order Block reprsente la dernire bougie haussire (ou baissire) avant un mouvement impulsif majeur dans la direction oppose."}),r.jsxs("div",{className:"text-sm text-blue-300",children:[" Ces zones deviennent des repres de liquidit",r.jsx("br",{})," Souvent retestes par le prix",r.jsx("br",{})," Offrent des points d'entre  fort potentiel"]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:" FVG  Fair Value Gap"}),r.jsx("p",{className:"mb-2",children:"Un FVG est une zone de dsquilibre cre lors d'un mouvement rapide et violent du march ."}),r.jsxs("div",{className:"text-sm text-blue-300",children:[" Le prix revient frquemment combler ces gaps",r.jsx("br",{})," Zones intressantes pour entrer ou sortir d'une position"]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:" Unicorn"}),r.jsx("p",{className:"mb-2",children:"C'est un setup form par l'association d'un Breaker (BRKR)  et d'un Fair Value Gap (FVG) ."}),r.jsxs("div",{className:"text-sm text-blue-300",children:[" Zone  forte probabilit de raction du prix",r.jsx("br",{})," Rassemble deux zones institutionnelles cls",r.jsx("br",{})," Point d'entre ou de prise de profit idal"]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"6.  CRT  Candle Range Theory"}),r.jsx("p",{className:"mb-4",children:"La Candle Range Theory (CRT) est une mthode d'analyse base sur 3 bougies conscutives."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"1"}),r.jsx("div",{className:"font-semibold mb-2",children:"La Range"}),r.jsxs("p",{className:"text-sm",children:["Bougie avec grand corps",r.jsx("br",{}),"Zone de stagnation"]})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"2"}),r.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),r.jsxs("p",{className:"text-sm",children:["Va chercher la liquidit",r.jsx("br",{}),"Pige les traders"]})]}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"3"}),r.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),r.jsxs("p",{className:"text-sm",children:["Bougie directionnelle",r.jsx("br",{}),"Zone d'entre"]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:'7.  Le Setup "A+"'}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 mb-4",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"PRINCIPE DU MODLE"}),r.jsx("p",{className:"mb-2",children:"Le principe du modle, c'est de prendre position aprs la phase de manipulation , sur la timeframe basse (LTF) du contexte dfini sur la timeframe haute (HTF) ."}),r.jsx("p",{children:" Cela permet d'viter les piges des faux breakouts  et de s'aligner avec la vraie direction du mouvement ."})]})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold mb-2",children:" Avertissement Lgal"}),r.jsx("p",{className:"text-sm",children:"Ce document est fourni  des fins ducatives uniquement. Le trading comporte des risques significatifs de perte financire. Il est essentiel de bien comprendre les risques avant de trader et ne jamais risquer plus que ce que vous pouvez vous permettre de perdre."})]})]})]}),(fe[v.id]||[]).length>0&&(fe[v.id]||[]).map(N=>{var F,Y,B;return r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:N.author_avatar?r.jsx("img",{src:N.author_avatar,alt:"Profile",className:"w-full h-full object-cover"}):N.author==="Admin"?"A":"TT"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-semibold text-white",children:N.author}),r.jsx("span",{className:"text-xs text-gray-400",children:N.timestamp})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 hover:shadow-lg hover:shadow-gray-900/50 transition-shadow duration-200 max-w-full break-words","data-signal-id":N.text.includes("[SIGNAL_ID:")?(F=N.text.match(/\[SIGNAL_ID:([^\]]+)\]/))==null?void 0:F[1]:void 0,children:[r.jsx("div",{className:"text-white",children:N.text.includes("[SIGNAL_ID:")?r.jsxs(r.Fragment,{children:[N.text.split("[SIGNAL_ID:")[0],r.jsxs("span",{className:"text-gray-700 text-xs",children:["[SIGNAL_ID:",N.text.split("[SIGNAL_ID:")[1].split("]")[0],"]"]}),N.text.split("]").slice(1).join("]"),(()=>{const ie=N.text.includes("SIGNAL FERM");return console.log(" Debug flche USER - message.text:",N.text),console.log(" Debug flche USER - isClosureMessage:",ie),ie&&console.log(" Flche USER devrait apparatre !"),ie})()&&r.jsx("span",{className:"ml-2 text-blue-400 hover:text-blue-300 cursor-pointer text-2xl transition-colors inline-block bg-blue-500/20 px-2 py-1 rounded-lg hover:bg-blue-500/30",onClick:()=>{const ie=N.text.match(/\[SIGNAL_ID:([^\]]+)\]/),de=ie?ie[1]:"";console.log(" Debug flche USER - signalId extrait:",de),console.log(" Debug flche USER - message.text:",N.text);const ce=document.querySelector(`[data-signal-id="${de}"]`);console.log(" Debug flche USER - lment trouv:",ce),console.log(" Debug flche USER - slecteur utilis:",`[data-signal-id="${de}"]`);const Se=document.querySelectorAll("[data-signal-id]");if(console.log(" Debug flche USER - tous les lments signal:",Se),ce&&ce.offsetParent!==null)console.log(" Debug flche USER - scroll vers lment:",ce),console.log(" Debug flche USER - lment visible:",ce.offsetParent!==null),console.log(" Debug flche USER - lment dans viewport:",ce.getBoundingClientRect()),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{ce.scrollIntoView({behavior:"smooth",block:"center"}),ce.classList.add("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20"),setTimeout(()=>{ce.classList.remove("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20")},5e3)},500),console.log(" Navigation USER vers le signal original russie");else{console.log(" Signal original USER non trouv"),console.log(" Debug flche USER - recherche alternative...");const Xe=document.querySelectorAll("div");let $e=null;for(let it of Xe)if(it.textContent&&it.textContent.includes(de)&&it.classList.contains("bg-gray-700")){$e=it,console.log(" Debug flche USER - message trouv par contenu:",$e);break}$e?($e.scrollIntoView({behavior:"smooth",block:"center"}),$e.classList.add("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20"),setTimeout(()=>{$e.classList.remove("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20")},5e3),console.log(" Navigation USER russie par contenu")):console.log(" Aucun message trouv avec ce signalId dans toute la page")}},title:"Aller au signal original",children:""})]}):N.text}),N.text.includes("[SIGNAL_ID:")&&!N.text.includes("SIGNAL FERM")&&(()=>{const ie=N.text.match(/\[SIGNAL_ID:([^\]]+)\]/),de=ie?ie[1]:"",ce=Ps.find(Xe=>Xe.id===de),Se=ce&&["WIN","LOSS","BE"].includes(ce.status);return r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Rsultat du signal:"}),r.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${Se&&(ce==null?void 0:ce.status)==="WIN"?"bg-green-500 text-white border-2 border-green-400 shadow-lg":Se&&(ce==null?void 0:ce.status)==="LOSS"?"bg-red-500 text-white border-2 border-red-400 shadow-lg":Se&&(ce==null?void 0:ce.status)==="BE"?"bg-blue-500 text-white border-2 border-blue-400 shadow-lg":"bg-gray-500/30 text-gray-400 border border-gray-500/30"}`,children:Se&&(ce==null?void 0:ce.status)==="WIN"?" WIN":Se&&(ce==null?void 0:ce.status)==="LOSS"?" LOSS":Se&&(ce==null?void 0:ce.status)==="BE"?" BE":" EN ATTENTE"})]}),Se&&r.jsx("div",{className:"mt-2 text-xs text-gray-400",children:r.jsxs("span",{className:"cursor-pointer text-blue-400 hover:text-blue-300 underline",onClick:()=>{const Xe=document.querySelector(`[data-signal-id="${de}"]`);Xe&&Xe.offsetParent!==null&&(Xe.scrollIntoView({behavior:"smooth",block:"center"}),Xe.classList.add("ring-2","ring-blue-400","ring-opacity-50"),setTimeout(()=>{Xe.classList.remove("ring-2","ring-blue-400","ring-opacity-50")},3e3))},children:["Signal ",(ce==null?void 0:ce.referenceNumber)||""," ferm avec ",ce!=null&&ce.pnl?`P&L: ${ce.pnl}`:"aucun P&L"]})})]})})(),N.attachment_data&&r.jsx("div",{className:"mt-2",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:N.attachment_data,alt:"Attachment",className:"mt-2 max-w-3xl max-h-96 object-contain rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>je(N.attachment_data)}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Cliquez pour agrandir"})]})})]}),r.jsx("div",{className:"mt-2 flex justify-start",children:r.jsxs("button",{onClick:()=>js(N.id),className:`flex items-center gap-1 px-2 py-1 rounded text-xs transition-colors ${(((Y=g[N.id])==null?void 0:Y.users)||[]).includes((y==null?void 0:y.email)||"Anonymous")?"bg-orange-500 text-white hover:bg-orange-600":"bg-gray-600 text-gray-300 hover:bg-gray-500 hover:text-white"}`,children:["",r.jsx("span",{className:"text-xs",children:((B=g[N.id])==null?void 0:B.fire)||0})]})})]})]},N.id)}),r.jsx("div",{ref:Gr})]}),r.jsx("div",{className:"border-t border-gray-700 p-4 fixed bottom-0 left-0 right-0 bg-gray-800 z-30 md:left-64",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:ys,onChange:N=>$r(N.target.value),onKeyDown:N=>N.key==="Enter"&&Kn(),placeholder:"Tapez votre message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("input",{type:"file",onChange:Kr,className:"hidden",accept:"image/*,.pdf,.doc,.docx"}),r.jsx("span",{className:"bg-gray-600 hover:bg-gray-500 p-2 rounded-lg text-gray-300 hover:text-white",children:""})]}),r.jsx("button",{onClick:Kn,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white",children:"Envoyer"})]})})]}):null]})})]}),r.jsx("div",{className:"hidden md:block flex-1 overflow-y-auto overflow-x-hidden",children:R==="calendar"||v.id==="trading-journal"?Ln():r.jsxs("div",{className:"p-4 md:p-6 space-y-4 w-full",style:{paddingTop:"80px"},children:[R==="signals"&&v.id==="calendrier"?Ln():null,R==="signals"&&!["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4","profit-loss","video","","calendrier"].includes(v.id)?r.jsx("div",{className:"space-y-4",children:Ps.filter(N=>N.channel_id===v.id).length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Aucun signal pour le moment"}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:'Crez votre premier signal avec le bouton "+"'})]}):Ps.filter(N=>N.channel_id===v.id).map(N=>r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:qs?r.jsx("img",{src:qs,alt:"Profile",className:"w-full h-full object-cover"}):"TT"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),r.jsx("span",{className:"text-xs text-gray-400",children:N.timestamp})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 max-w-full md:max-w-2xl",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${N.status==="ACTIVE"?"bg-green-500":"bg-gray-500"}`}),r.jsxs("h3",{className:"font-bold text-white text-lg",children:["Signal ",N.type," ",N.symbol,"  ",N.timeframe]})]}),r.jsxs("div",{className:"space-y-2",children:[N.entry!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Entre : ",N.entry," USD"]})]}),N.stopLoss!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Stop Loss : ",N.stopLoss," USD"]})]}),N.takeProfit!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Take Profit : ",N.takeProfit," USD"]})]})]}),N.entry!=="N/A"&&N.takeProfit!=="N/A"&&N.stopLoss!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-red-400 text-sm",children:""}),r.jsxs("span",{className:"text-white text-sm",children:["Ratio R:R :  ",Rs(N.entry,N.takeProfit,N.stopLoss)]})]}),N.closeMessage&&r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-yellow-400 text-sm",children:""}),r.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:N.closeMessage})]})]})}),N.image&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:URL.createObjectURL(N.image),alt:"Signal screenshot",className:"max-w-full md:max-w-2xl rounded-lg border border-gray-600"})})]})]},N.id))}):v.id==="profit-loss"?r.jsx(Go,{}):v.id==="video"?r.jsx("div",{className:"flex flex-col h-full bg-gray-900",children:r.jsx("div",{className:"flex-1 flex flex-col gap-4 p-2",children:r.jsx("div",{className:"flex-1 bg-gray-900 rounded-lg overflow-hidden",children:r.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 pt-16",children:r.jsxs("div",{className:"text-center space-y-4 w-full",children:[r.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Livestream"}),r.jsx("p",{className:"text-gray-400",children:"Attache ta ceinture cousin"}),r.jsxs("div",{className:"w-full relative",children:[r.jsx("button",{onClick:()=>{const N=document.querySelector('iframe[src*="100ms.live"]');N&&N.requestFullscreen&&N.requestFullscreen()},className:"absolute top-4 right-4 z-10 text-white text-4xl font-bold hover:text-gray-300 transition-colors",children:""}),r.jsx("iframe",{src:"https://tote-livestream-033.app.100ms.live/streaming/meeting/hzs-ukns-nts",width:"100%",height:"600px",style:{border:"none",borderRadius:"8px"},allow:"camera; microphone; display-capture; fullscreen",allowFullScreen:!0})]})]})})})})}):v.id==="video"?r.jsx("div",{className:"flex flex-col h-full bg-gray-900",children:r.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 p-4",children:[r.jsx("div",{className:"flex-1 bg-gray-900 rounded-lg overflow-hidden",children:r.jsx("div",{className:"h-full flex flex-col items-center justify-center p-8",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto",children:r.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M8 5v14l11-7z"})})}),r.jsx("h2",{className:"text-xl font-bold text-white",children:"Livestream Trading"}),r.jsx("p",{className:"text-gray-400",children:"Session de trading en direct"}),r.jsxs("div",{className:"w-full max-w-7xl relative",children:[r.jsx("button",{onClick:()=>{const N=document.querySelector('iframe[src*="100ms.live"]');N&&N.requestFullscreen&&N.requestFullscreen()},className:"absolute top-4 right-4 z-10 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:" Plein cran"}),r.jsx("iframe",{src:"https://admintrading.app.100ms.live/meeting/kor-inbw-yiz",width:"100%",height:"1200px",style:{border:"none",borderRadius:"8px"},allow:"camera; microphone; display-capture; fullscreen",allowFullScreen:!0})]})]})})}),r.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-lg flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-700",children:[r.jsx("h3",{className:"font-semibold text-white",children:" Chat Live"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Commentaires en direct"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:(fe.video||[]).length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Aucun message"}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Soyez le premier  commenter !"})]}):(fe.video||[]).map(N=>r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"h-6 w-6 bg-blue-500 rounded-full flex items-center justify-center text-xs",children:"T"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium text-white text-sm",children:N.author}),r.jsx("span",{className:"text-xs text-gray-400",children:N.timestamp})]}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:r.jsx("p",{className:"text-white text-sm",children:N.text})})]})]},N.id))}),r.jsx("div",{className:"p-4 border-t border-gray-700",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:ys,onChange:N=>$r(N.target.value),onKeyDown:N=>N.key==="Enter"&&Kn(),placeholder:"Commenter le stream...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 text-sm"}),r.jsx("button",{onClick:Kn,className:"bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-white text-sm",children:"Envoyer"})]})})]})]})}):["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"].includes(v.id)?r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{ref:Yt,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4 pb-32",children:[["general-chat-2","general-chat-3","general-chat-4","profit-loss","video"].includes(v.id)&&(fe[v.id]||[]).length>=20&&r.jsx("div",{className:"flex justify-center pt-2 sticky top-0 bg-gray-900 p-2 rounded z-10",children:r.jsx("button",{onClick:async()=>{const N=await Ff(v.id),Y=(["general-chat-2","general-chat-3","general-chat-4","profit-loss","video"].includes(v.id)?N:N.reverse()).map(B=>({id:B.id||"",text:B.content,timestamp:new Date(B.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),author:B.author,author_avatar:B.author_avatar,attachment:void 0,attachment_data:B.attachment_data}));be(B=>({...B,[v.id]:Y.map(ie=>({id:ie.id,text:ie.text,user:ie.author,author:ie.author,author_avatar:ie.author_avatar,timestamp:ie.timestamp,attachment_data:ie.attachment_data}))}))},className:"px-4 py-2 text-sm rounded bg-gray-700 hover:bg-gray-600 text-white",children:"Voir plus de messages"})}),(fe[v.id]||[]).length>0&&(fe[v.id]||[]).map(N=>{var F,Y;return r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:N.author_avatar?r.jsx("img",{src:N.author_avatar,alt:"Profile",className:"w-full h-full object-cover"}):N.author==="Admin"?"A":"TT"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-semibold text-white",children:N.author}),r.jsx("span",{className:"text-xs text-gray-400",children:N.timestamp})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 hover:shadow-lg hover:shadow-gray-900/50 transition-shadow duration-200 max-w-full break-words",children:[r.jsx("div",{className:"text-white",children:N.text.includes("[SIGNAL_ID:")?r.jsxs(r.Fragment,{children:[N.text.split("[SIGNAL_ID:")[0],r.jsxs("span",{className:"text-gray-700 text-xs",children:["[SIGNAL_ID:",N.text.split("[SIGNAL_ID:")[1].split("]")[0],"]"]}),N.text.split("]").slice(1).join("]"),(()=>{const B=N.text.includes("SIGNAL FERM");return console.log(" Debug flche USER - message.text:",N.text),console.log(" Debug flche USER - isClosureMessage:",B),B&&console.log(" Flche USER devrait apparatre !"),B})()&&r.jsx("span",{className:"ml-2 text-blue-400 hover:text-blue-300 cursor-pointer text-2xl transition-colors inline-block bg-blue-500/20 px-2 py-1 rounded-lg hover:bg-blue-500/30",onClick:()=>{const B=N.text.match(/\[SIGNAL_ID:([^\]]+)\]/),ie=B?B[1]:"";console.log(" Debug flche USER - signalId extrait:",ie),console.log(" Debug flche USER - message.text:",N.text);const de=document.querySelector(`[data-signal-id="${ie}"]`);console.log(" Debug flche USER - lment trouv:",de),console.log(" Debug flche USER - slecteur utilis:",`[data-signal-id="${ie}"]`);const ce=document.querySelectorAll("[data-signal-id]");if(console.log(" Debug flche USER - tous les lments signal:",ce),de&&de.offsetParent!==null)console.log(" Debug flche USER - scroll vers lment:",de),console.log(" Debug flche USER - lment visible:",de.offsetParent!==null),console.log(" Debug flche USER - lment dans viewport:",de.getBoundingClientRect()),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{de.scrollIntoView({behavior:"smooth",block:"center"}),de.classList.add("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20"),setTimeout(()=>{de.classList.remove("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20")},5e3)},500),console.log(" Navigation USER vers le signal original russie");else{console.log(" Signal original USER non trouv"),console.log(" Debug flche USER - recherche alternative...");const Se=document.querySelectorAll("div");let Xe=null;for(let $e of Se)if($e.textContent&&$e.textContent.includes(ie)&&$e.classList.contains("bg-gray-700")){Xe=$e,console.log(" Debug flche USER - message trouv par contenu:",Xe);break}Xe?(Xe.scrollIntoView({behavior:"smooth",block:"center"}),Xe.classList.add("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20"),setTimeout(()=>{Xe.classList.remove("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20")},5e3),console.log(" Navigation USER russie par contenu")):console.log(" Aucun message trouv avec ce signalId dans toute la page")}},title:"Aller au signal original",children:""})]}):N.text}),N.text.includes("[SIGNAL_ID:")&&!N.text.includes("SIGNAL FERM")&&(()=>{const B=N.text.match(/\[SIGNAL_ID:([^\]]+)\]/),ie=B?B[1]:"",de=Ps.find(Se=>Se.id===ie),ce=de&&["WIN","LOSS","BE"].includes(de.status);return r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Rsultat du signal:"}),r.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${ce&&(de==null?void 0:de.status)==="WIN"?"bg-green-500 text-white border-2 border-green-400 shadow-lg":ce&&(de==null?void 0:de.status)==="LOSS"?"bg-red-500 text-white border-2 border-red-400 shadow-lg":ce&&(de==null?void 0:de.status)==="BE"?"bg-blue-500 text-white border-2 border-blue-400 shadow-lg":"bg-gray-500/30 text-gray-400 border border-gray-500/30"}`,children:ce&&(de==null?void 0:de.status)==="WIN"?" WIN":ce&&(de==null?void 0:de.status)==="LOSS"?" LOSS":ce&&(de==null?void 0:de.status)==="BE"?" BE":" EN ATTENTE"})]}),ce&&r.jsx("div",{className:"mt-2 text-xs text-gray-400",children:r.jsxs("span",{className:"cursor-pointer text-blue-400 hover:text-blue-300 underline",onClick:()=>{const Se=document.querySelector(`[data-signal-id="${ie}"]`);Se&&Se.offsetParent!==null&&(Se.scrollIntoView({behavior:"smooth",block:"center"}),Se.classList.add("ring-2","ring-blue-400","ring-opacity-50"),setTimeout(()=>{Se.classList.remove("ring-2","ring-blue-400","ring-opacity-50")},3e3))},children:["Signal ",(de==null?void 0:de.referenceNumber)||""," ferm avec ",de!=null&&de.pnl?`P&L: ${de.pnl}`:"aucun P&L"]})})]})})(),N.attachment_data&&r.jsx("div",{className:"mt-2",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:N.attachment_data,alt:"Attachment",className:"mt-2 max-w-3xl max-h-96 object-contain rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>je(N.attachment_data)}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Cliquez pour agrandir"})]})})]}),r.jsx("div",{className:"mt-2 flex justify-start",children:r.jsxs("button",{onClick:()=>js(N.id),className:`flex items-center gap-1 px-2 py-1 rounded text-xs transition-colors ${(((F=g[N.id])==null?void 0:F.users)||[]).includes((y==null?void 0:y.email)||"Anonymous")?"bg-orange-500 text-white hover:bg-orange-600":"bg-gray-600 text-gray-300 hover:bg-gray-500 hover:text-white"}`,children:["",r.jsx("span",{className:"text-xs",children:((Y=g[N.id])==null?void 0:Y.fire)||0})]})})]})]},N.id)}),r.jsx("div",{ref:Gr})]}),r.jsx("div",{className:"border-t border-gray-700 p-4 fixed bottom-0 left-0 right-0 bg-gray-800 z-10 md:left-64 md:right-0",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:ys,onChange:N=>$r(N.target.value),onKeyDown:N=>N.key==="Enter"&&Kn(),placeholder:"Tapez votre message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("input",{type:"file",onChange:Kr,className:"hidden",accept:"image/*,.pdf,.doc,.docx"}),r.jsx("span",{className:"bg-gray-600 hover:bg-gray-500 p-2 rounded-lg text-gray-300 hover:text-white",children:""})]}),r.jsx("button",{onClick:Kn,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white",children:"Envoyer"})]})})]}):null]})})]}),Pn&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Ajouter un trade"}),r.jsx("button",{onClick:()=>Hr(!1),className:"text-gray-400 hover:text-white",children:""})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" Coller donnes TradingView"}),r.jsx("div",{className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 min-h-[80px] flex items-center justify-center cursor-pointer",onPaste:Sn,onDrop:N=>{N.preventDefault();const F=N.dataTransfer.getData("text");F&&Sn({preventDefault:()=>{},clipboardData:{getData:B=>B==="text/html"?"":B==="text"?F:""}})},onDragOver:N=>N.preventDefault(),children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:" Cliquez ici et collez (Ctrl+V)"}),r.jsx("div",{className:"text-xs text-gray-500",children:"ou glissez-dposez du texte"})]})}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Collez directement depuis TradingView"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Ot({...tt,type:"BUY"}),className:`px-3 py-2 rounded text-sm ${tt.type==="BUY"?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:" BUY"}),r.jsx("button",{onClick:()=>Ot({...tt,type:"SELL"}),className:`px-3 py-2 rounded text-sm ${tt.type==="SELL"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:" SELL"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Symbole *"}),r.jsx("input",{type:"text",value:tt.symbol,onChange:N=>Ot({...tt,symbol:N.target.value}),placeholder:"BTC, ETH, NQ1!, etc.",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix d'entre *"}),r.jsx("input",{type:"text",value:tt.entry,onChange:N=>Ot({...tt,entry:N.target.value}),placeholder:"45000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix de sortie *"}),r.jsx("input",{type:"text",value:tt.exit,onChange:N=>Ot({...tt,exit:N.target.value}),placeholder:"46000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stop Loss"}),r.jsx("input",{type:"text",value:tt.stopLoss,onChange:N=>Ot({...tt,stopLoss:N.target.value}),placeholder:"44000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"P&L *"}),r.jsx("input",{type:"text",value:tt.pnl,onChange:N=>Ot({...tt,pnl:N.target.value}),placeholder:"+500 ou -200",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rsultat"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Ot({...tt,status:"WIN"}),className:`px-3 py-2 rounded text-sm ${tt.status==="WIN"?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:" WIN"}),r.jsx("button",{onClick:()=>Ot({...tt,status:"LOSS"}),className:`px-3 py-2 rounded text-sm ${tt.status==="LOSS"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:" LOSS"}),r.jsx("button",{onClick:()=>Ot({...tt,status:"BE"}),className:`px-3 py-2 rounded text-sm ${tt.status==="BE"?"bg-blue-600 text-white":"bg-gray-600 text-gray-300"}`,children:" BE"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),r.jsx("textarea",{value:tt.notes,onChange:N=>Ot({...tt,notes:N.target.value}),placeholder:"Notes sur le trade...",rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Image 1"}),r.jsx("input",{type:"file",accept:"image/*",onChange:N=>{var Y;const F=(Y=N.target.files)==null?void 0:Y[0];F&&Ot({...tt,image1:F})},className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Image 2"}),r.jsx("input",{type:"file",accept:"image/*",onChange:N=>{var Y;const F=(Y=N.target.files)==null?void 0:Y[0];F&&Ot({...tt,image2:F})},className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:()=>Hr(!1),className:"flex-1 bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Annuler"}),r.jsx("button",{onClick:Er,className:"flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white",children:"Ajouter le trade"})]})]})]})})}),X&&oe&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white",children:["Trades du ",oe.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),r.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-white text-2xl",children:""})]}),r.jsx("div",{className:"space-y-4",children:Pt(oe).map(N=>r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${N.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:N.type}),r.jsx("span",{className:"text-lg font-bold text-white",children:N.symbol})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:`text-lg font-bold ${N.pnl&&parseFloat(N.pnl)>=0?"text-green-400":"text-red-400"}`,children:[N.pnl&&parseFloat(N.pnl)>=0?"+":"",N.pnl||"0","$"]}),r.jsx("button",{onClick:()=>{Ft(F=>F.filter(Y=>Y.id!==N.id)),P(!1)},className:"text-red-400 hover:text-red-300 text-xl font-bold",title:"Supprimer ce trade",children:""})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),r.jsx("span",{className:"text-white ml-2",children:N.entry})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Exit:"}),r.jsx("span",{className:"text-white ml-2",children:N.exit})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),r.jsx("span",{className:"text-white ml-2",children:N.stopLoss})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Status:"}),r.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${N.status==="WIN"?"bg-green-600 text-white":N.status==="LOSS"?"bg-red-600 text-white":"bg-blue-600 text-white"}`,children:N.status})]})]}),N.notes&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Notes:"}),r.jsx("p",{className:"text-white mt-1",children:N.notes})]}),(N.image1||N.image2)&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Images:"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[N.image1&&r.jsx("div",{className:"relative",children:r.jsx("img",{src:N.image1 instanceof File?URL.createObjectURL(N.image1):N.image1,alt:"Trade image 1",className:"w-20 h-20 object-cover rounded border border-gray-600"})}),N.image2&&r.jsx("div",{className:"relative",children:r.jsx("img",{src:N.image2 instanceof File?URL.createObjectURL(N.image2):N.image2,alt:"Trade image 2",className:"w-20 h-20 object-cover rounded border border-gray-600"})})]})]}),r.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400",children:r.jsxs("span",{children:["Ajout le ",N.timestamp]})})]},N.id))}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:r.jsx("button",{onClick:()=>P(!1),className:"w-full bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Fermer"})})]})})}),zt&&re&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white",children:[v.id==="trading-journal"?"Trades du":"Signaux du"," ",re.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),r.jsx("button",{onClick:()=>Rt(!1),className:"text-gray-400 hover:text-white text-2xl",children:""})]}),r.jsx("div",{className:"space-y-4",children:(v.id==="trading-journal"?Pt(re).length>0:Ar(re).length>0)?(()=>{const N=v.id==="trading-journal"?Pt(re):Ar(re);return console.log(" [POPUP] Donnes reues dans le popup:",N),N.forEach(F=>{console.log(" [POPUP] Signal individuel COMPLET:",{id:F.id,symbol:F.symbol,image:F.image,attachment_data:F.attachment_data,attachment_type:F.attachment_type,attachment_name:F.attachment_name,status:F.status,timestamp:F.timestamp,ALL_KEYS:Object.keys(F)})}),N.map(F=>r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${F.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:F.type}),r.jsx("span",{className:"text-lg font-bold text-white",children:F.symbol}),r.jsx("span",{className:"text-sm text-gray-400",children:F.timeframe})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${F.status==="WIN"?"bg-green-600 text-white":F.status==="LOSS"?"bg-red-600 text-white":F.status==="BE"?"bg-blue-600 text-white":"bg-yellow-600 text-white"}`,children:F.status})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),r.jsx("span",{className:"text-white ml-2",children:F.entry})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Take Profit:"}),r.jsx("span",{className:"text-white ml-2",children:F.takeProfit})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),r.jsx("span",{className:"text-white ml-2",children:F.stopLoss})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"PnL:"}),r.jsx("span",{className:`ml-2 font-bold ${F.pnl&&F.pnl.includes("-")?"text-red-400":"text-green-400"}`,children:F.pnl||"N/A"})]})]}),(F.image||F.attachment_data)&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Images:"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[F.image&&r.jsx("img",{src:typeof F.image=="string"?F.image:URL.createObjectURL(F.image),alt:"Signal image",className:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>je(typeof F.image=="string"?F.image:URL.createObjectURL(F.image))}),F.attachment_data&&r.jsx("img",{src:F.attachment_data,alt:"Signal attachment",className:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>je(F.attachment_data)})]})]})]},F.id))})():r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-lg mb-2",children:""}),r.jsx("div",{className:"text-gray-300 text-lg font-medium",children:v.id==="trading-journal"?"Aucun trade pour ce jour":"Aucun signal pour ce jour"}),r.jsx("div",{className:"text-gray-500 text-sm mt-1",children:v.id==="trading-journal"?'Ajoute tes trades avec le bouton "+" pour les voir ici':"Les signaux apparatront ici quand ils seront crs"})]})}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:r.jsx("button",{onClick:()=>Rt(!1),className:"w-full bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Fermer"})})]})})}),Te&&r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-white",children:[v.id==="trading-journal"?"Trades de la Semaine":"Signaux de la Semaine"," ",Pe]}),r.jsx("button",{onClick:()=>Ye(!1),className:"text-gray-400 hover:text-white text-2xl",children:""})]}),r.jsx("div",{className:"space-y-4",children:v.id==="trading-journal"?Yr(Pe).length>0?Yr(Pe).map(N=>r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${N.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:N.type}),r.jsx("span",{className:"text-lg font-bold text-white",children:N.symbol}),r.jsx("span",{className:"text-sm text-gray-400",children:N.date})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${N.status==="WIN"?"bg-green-600 text-white":N.status==="LOSS"?"bg-red-600 text-white":N.status==="BE"?"bg-blue-600 text-white":"bg-yellow-600 text-white"}`,children:N.status})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),r.jsx("span",{className:"text-white ml-2",children:N.entry})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Exit:"}),r.jsx("span",{className:"text-white ml-2",children:N.exit})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),r.jsx("span",{className:"text-white ml-2",children:N.stopLoss})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"PnL:"}),r.jsx("span",{className:`ml-2 font-bold ${N.pnl&&N.pnl.includes("-")?"text-red-400":"text-green-400"}`,children:N.pnl||"N/A"})]})]}),N.notes&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Notes:"}),r.jsx("p",{className:"text-white mt-1",children:N.notes})]}),(N.image1||N.image2)&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Images:"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[N.image1&&r.jsx("img",{src:N.image1,alt:"Trade image 1",className:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>je(N.image1)}),N.image2&&r.jsx("img",{src:N.image2,alt:"Trade image 2",className:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>je(N.image2)})]})]}),r.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400",children:r.jsxs("span",{children:["Cr le ",N.timestamp]})})]},N.id)):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-lg mb-2",children:""}),r.jsx("div",{className:"text-gray-300 text-lg font-medium",children:"Aucun trade pour cette semaine"}),r.jsx("div",{className:"text-gray-500 text-sm mt-1",children:"Tes trades apparatront ici quand tu les ajouteras"})]}):fr(Pe).length>0?fr(Pe).map(N=>r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${N.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:N.type}),r.jsx("span",{className:"text-lg font-bold text-white",children:N.symbol}),r.jsx("span",{className:"text-sm text-gray-400",children:N.timeframe})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${N.status==="WIN"?"bg-green-600 text-white":N.status==="LOSS"?"bg-red-600 text-white":N.status==="BE"?"bg-blue-600 text-white":"bg-yellow-600 text-white"}`,children:N.status})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),r.jsx("span",{className:"text-white ml-2",children:N.entry})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Take Profit:"}),r.jsx("span",{className:"text-white ml-2",children:N.takeProfit})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),r.jsx("span",{className:"text-white ml-2",children:N.stopLoss})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"PnL:"}),r.jsx("span",{className:`ml-2 font-bold ${N.pnl&&N.pnl.includes("-")?"text-red-400":"text-green-400"}`,children:N.pnl||"N/A"})]})]}),(N.image||N.attachment_data)&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Images:"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[N.image&&r.jsx("img",{src:typeof N.image=="string"?N.image:URL.createObjectURL(N.image),alt:"Signal image",className:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>je(typeof N.image=="string"?N.image:URL.createObjectURL(N.image))}),N.attachment_data&&r.jsx("img",{src:N.attachment_data,alt:"Signal attachment",className:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>je(N.attachment_data)})]})]})]},N.id)):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-lg mb-2",children:""}),r.jsx("div",{className:"text-gray-300 text-lg font-medium",children:"Aucun signal pour cette semaine"}),r.jsx("div",{className:"text-gray-500 text-sm mt-1",children:"Les signaux apparatront ici quand ils seront crs"})]})}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:r.jsx("button",{onClick:()=>Ye(!1),className:"w-full bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Fermer"})})]})})}),Re&&r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>je(null),children:r.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[r.jsx("img",{src:Re,alt:"Image agrandie",className:"max-w-full max-h-full object-contain rounded-lg",onClick:N=>N.stopPropagation()}),r.jsx("button",{onClick:()=>je(null),className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white rounded-full w-10 h-10 flex items-center justify-center text-xl",children:""})]})})]})}function _5({onLogin:s}){const[e,t]=K.useState(""),[n,a]=K.useState(""),l=()=>{e==="admin"&&n==="admin123"?(localStorage.setItem("adminAuthenticated","true"),s()):console.warn("Identifiants incorrects")};return r.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-gray-900 rounded-lg p-8 w-full max-w-md",children:[r.jsx("h2",{className:"text-white text-2xl font-bold mb-6 text-center",children:" Accs Admin"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:"Nom d'utilisateur",value:e,onChange:u=>t(u.target.value),className:"w-full p-3 bg-gray-800 text-white rounded border border-gray-700 focus:border-blue-500"}),r.jsx("input",{type:"password",placeholder:"Mot de passe",value:n,onChange:u=>a(u.target.value),className:"w-full p-3 bg-gray-800 text-white rounded border border-gray-700 focus:border-blue-500"}),r.jsx("button",{onClick:l,className:"w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700 transition-colors",children:"Se connecter"})]})]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="type.googleapis.com/google.protobuf.Int64Value",N5="type.googleapis.com/google.protobuf.UInt64Value";function oA(s,e){const t={};for(const n in s)s.hasOwnProperty(n)&&(t[n]=e(s[n]));return t}function Yf(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>Yf(e));if(typeof s=="function"||typeof s=="object")return oA(s,e=>Yf(e));throw new Error("Data cannot be encoded in JSON: "+s)}function jc(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case w5:case N5:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>jc(e)):typeof s=="function"||typeof s=="object"?oA(s,e=>jc(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cr extends ma{constructor(e,t,n){super(`${sv}/${e}`,t||""),this.details=n,Object.setPrototypeOf(this,cr.prototype)}}function j5(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Kf(s,e){let t=j5(s),n=t,a;try{const l=e&&e.error;if(l){const u=l.status;if(typeof u=="string"){if(!Qj[u])return new cr("internal","internal");t=Qj[u],n=u}const h=l.message;typeof h=="string"&&(n=h),a=l.details,a!==void 0&&(a=jc(a))}}catch{}return t==="ok"?null:new cr(t,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,t,n,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,nm(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||n.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a==null||a.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:t,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="us-central1",S5=/^data: (.*?)(?:\n|$)/;function E5(s){let e=null;return{promise:new Promise((t,n)=>{e=setTimeout(()=>{n(new cr("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class A5{constructor(e,t,n,a,l=f0,u=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new T5(e,t,n,a),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(l);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=f0}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function C5(s,e,t){const n=fo(e);s.emulatorOrigin=`http${n?"s":""}://${e}:${t}`,n&&(Xf(s.emulatorOrigin+"/backends"),Jf("Functions",!0))}function R5(s,e,t){const n=a=>D5(s,e,a,{});return n.stream=(a,l)=>M5(s,e,a,l),n}function lA(s){return s.emulatorOrigin&&fo(s.emulatorOrigin)?"include":void 0}async function I5(s,e,t,n,a){t["Content-Type"]="application/json";let l;try{l=await n(s,{method:"POST",body:JSON.stringify(e),headers:t,credentials:lA(a)})}catch{return{status:0,json:null}}let u=null;try{u=await l.json()}catch{}return{status:l.status,json:u}}async function cA(s,e){const t={},n=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(t.Authorization="Bearer "+n.authToken),n.messagingToken&&(t["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=n.appCheckToken),t}function D5(s,e,t,n){const a=s._url(e);return k5(s,a,t,n)}async function k5(s,e,t,n){t=Yf(t);const a={data:t},l=await cA(s,n),u=n.timeout||7e4,h=E5(u),g=await Promise.race([I5(e,a,l,s.fetchImpl,s),h.promise,s.cancelAllRequests]);if(h.cancel(),!g)throw new cr("cancelled","Firebase Functions instance was deleted.");const p=Kf(g.status,g.json);if(p)throw p;if(!g.json)throw new cr("internal","Response is not valid JSON object.");let y=g.json.data;if(typeof y>"u"&&(y=g.json.result),typeof y>"u")throw new cr("internal","Response is missing data field.");return{data:jc(y)}}function M5(s,e,t,n){const a=s._url(e);return O5(s,a,t,n||{})}async function O5(s,e,t,n){var v;t=Yf(t);const a={data:t},l=await cA(s,n);l["Content-Type"]="application/json",l.Accept="text/event-stream";let u;try{u=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:l,signal:n==null?void 0:n.signal,credentials:lA(s)})}catch(A){if(A instanceof Error&&A.name==="AbortError"){const z=new cr("cancelled","Request was cancelled.");return{data:Promise.reject(z),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(z)}}}}}}const R=Kf(0,null);return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}let h,g;const p=new Promise((A,R)=>{h=A,g=R});(v=n==null?void 0:n.signal)==null||v.addEventListener("abort",()=>{const A=new cr("cancelled","Request was cancelled.");g(A)});const y=u.body.getReader(),w=P5(y,h,g,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const A=w.getReader();return{async next(){const{value:R,done:z}=await A.read();return{value:R,done:z}},async return(){return await A.cancel(),{done:!0,value:void 0}}}}},data:p}}function P5(s,e,t,n){const a=(u,h)=>{const g=u.match(S5);if(!g)return;const p=g[1];try{const y=JSON.parse(p);if("result"in y){e(jc(y.result));return}if("message"in y){h.enqueue(jc(y.message));return}if("error"in y){const w=Kf(0,y);h.error(w),t(w);return}}catch(y){if(y instanceof cr){h.error(y),t(y);return}}},l=new TextDecoder;return new ReadableStream({start(u){let h="";return g();async function g(){if(n!=null&&n.aborted){const p=new cr("cancelled","Request was cancelled");return u.error(p),t(p),Promise.resolve()}try{const{value:p,done:y}=await s.read();if(y){h.trim()&&a(h.trim(),u),u.close();return}if(n!=null&&n.aborted){const v=new cr("cancelled","Request was cancelled");u.error(v),t(v),await s.cancel();return}h+=l.decode(p,{stream:!0});const w=h.split(`
`);h=w.pop()||"";for(const v of w)v.trim()&&a(v.trim(),u);return g()}catch(p){const y=p instanceof cr?p:Kf(0,null);u.error(y),t(y)}}},cancel(){return s.cancel()}})}const Xj="@firebase/functions",Jj="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="auth-internal",U5="app-check-internal",V5="messaging-internal";function F5(s){const e=(t,{instanceIdentifier:n})=>{const a=t.getProvider("app").getImmediate(),l=t.getProvider(L5),u=t.getProvider(V5),h=t.getProvider(U5);return new A5(a,l,u,h,n)};ai(new Br(sv,e,"PUBLIC").setMultipleInstances(!0)),zn(Xj,Jj,s),zn(Xj,Jj,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(s=vd(),e=f0){const n=rl(xs(s),sv).getImmediate({identifier:e}),a=Qf("functions");return a&&q5(n,...a),n}function q5(s,e,t){C5(xs(s),e,t)}function $5(s,e,t){return R5(xs(s),e)}F5();function z5(){var gs;const[s,e]=K.useState({id:"fondamentaux",name:"fondamentaux"}),[t,n]=K.useState("signals"),[a,l]=K.useState("channels"),[u,h]=K.useState(!0),[g,p]=K.useState(""),[y,w]=K.useState({}),[v,A]=K.useState(!1),[R,z]=K.useState(!1),[q,Q]=K.useState(!1),[pe,ee]=K.useState(!1),[fe,be]=K.useState(!1),[Ee,L]=K.useState(!1),[D,I]=K.useState(null),[U,$]=K.useState(null),[X,P]=K.useState(""),[zt,Rt]=K.useState(null),[oe,Ce]=K.useState({});K.useEffect(()=>{const _=async()=>{try{const C=Object.values(y).flat(),V=C.map(async ue=>{const _e=await Fy(ue.id);return _e?{messageId:ue.id,reactions:_e}:null}),k=await Promise.all(V),G={};k.forEach(ue=>{ue&&(G[ue.messageId]=ue.reactions)}),Ce(G),console.log(" Ractions messages admin charges depuis Firebase:",Object.keys(G).length);const se=C.map(ue=>qy(ue.id,_e=>{_e&&(Ce(Ne=>({...Ne,[ue.id]:_e})),console.log(" Raction message mise  jour en temps rel:",ue.id,_e))}));return()=>{se.forEach(ue=>{ue&&typeof ue=="function"&&ue()})}}catch(C){console.error(" Erreur chargement ractions messages admin Firebase:",C)}};Object.keys(y).length>0&&_()},[y]),K.useEffect(()=>{console.log(" Admin: Abonnement global aux changements de ractions");const _=Ks(Xs,"messageReactions"),C=Sd(_,V=>{if(V.exists()){const k=V.val();console.log(" Admin: Ractions reues en temps rel:",k),Ce(k)}});return()=>{console.log(" Admin: Dsabonnement global des ractions"),C()}},[]),K.useEffect(()=>{const C=["fondamentaux","letsgooo-model","general-chat","general-chat-2","general-chat-3","general-chat-4"].map(V=>qf(V,k=>{console.log(" Signal mis  jour reu:",k),Re(G=>G.map(se=>se.id===k.id?{...se,reactions:k.reactions||[]}:se))}));return()=>{C.forEach(V=>{V&&typeof V.unsubscribe=="function"&&V.unsubscribe()})}},[]);const re=async _=>{const C="Admin";try{Ce(se=>{const ue=se[_]||{fire:0,users:[]},_e=ue.users.indexOf(C);if(_e===-1)return{...se,[_]:{fire:ue.fire+1,users:[...ue.users,C]}};{const Ne=ue.users.filter((We,mt)=>mt!==_e);return{...se,[_]:{fire:ue.fire-1,users:Ne}}}});const V=oe[_]||{fire:0,users:[]},k=V.users.indexOf(C);let G;k===-1?G={fire:V.fire+1,users:[...V.users,C]}:G={fire:V.fire-1,users:V.users.filter((se,ue)=>ue!==k)},await Vy(_,G),console.log(" Raction message admin synchronise avec Firebase:",_,G,"par utilisateur:",C)}catch(V){console.error(" Erreur synchronisation raction admin Firebase:",V),Ce(k=>{const G=k[_]||{fire:0,users:[]};return{...k,[_]:G}})}},[Le,O]=K.useState({}),[le,Re]=K.useState([]),je=async _=>{try{const V=(await Ff(_)).map(k=>({id:k.id||"",text:k.content,timestamp:new Date(k.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),author:k.author,author_avatar:k.author_avatar,attachment:k.attachment_data?{type:k.attachment_type||"image/jpeg",name:k.attachment_name||"image.jpg"}:void 0,attachment_data:k.attachment_data}));tt(k=>({...k,[_]:V})),console.log(` Messages chargs pour ${_}:`,V.length),setTimeout(()=>{Ar()},5)}catch(C){console.error(" Erreur chargement messages:",C)}};K.useEffect(()=>{const C=["fondamentaux","letsgooo-model","general-chat","general-chat-2","general-chat-3","general-chat-4"].map(V=>Bf(V,k=>{console.log(` Nouveau message reu dans ${V}:`,k),s.id!==V&&console.log(` Message reu dans ${V} (canal non actif)`)}));return()=>{C.forEach(V=>V.unsubscribe())}},[]),K.useEffect(()=>{Oi(s.id),tv()},[]),K.useEffect(()=>{je(s.id),Oi(s.id),setTimeout(()=>{Ar()},50)},[s.id]),K.useEffect(()=>{Re(_=>_.map(C=>({...C,status:C.status||"ACTIVE"})))},[]);const[Te,Ye]=K.useState(""),[Pe,hs]=K.useState(null);K.useEffect(()=>{(async()=>{console.log(" Initialisation profil admin..."),console.log(" PWA Mode:",window.matchMedia("(display-mode: standalone)").matches),console.log(" User Agent:",navigator.userAgent.includes("Mobile")?"MOBILE":"DESKTOP");const C=localStorage.getItem("adminProfileImage");C?(hs(C),console.log(" Photo de profil admin charge depuis localStorage:",C)):console.log(" Aucune photo de profil admin trouve")})()},[]);const[_t,qt]=K.useState(!1),[jt,en]=K.useState(""),[Ps,tn]=K.useState(""),[nr,Gn]=K.useState(0),[ys,$r]=K.useState([]),[qs,ur]=K.useState(!1),[li,zr]=K.useState(!1),[pa,Mi]=K.useState(null),[$s,xa]=K.useState({email:"",password:""}),[fs,Ls]=K.useState(""),[Pn,Hr]=K.useState("all"),[ns,ya]=K.useState("created_at"),[_s,Wt]=K.useState("desc"),[Ft,tt]=K.useState({});K.useEffect(()=>{},[]),K.useEffect(()=>{console.log(" Profile image state:",Pe)},[Pe]);const[Ot,Us]=K.useState(!1),[vs,ci]=K.useState(()=>{const _=localStorage.getItem("selectedDate");return _?new Date(_):null});K.useEffect(()=>{vs?localStorage.setItem("selectedDate",vs.toISOString()):localStorage.removeItem("selectedDate")},[vs]);const Oi=async _=>{try{console.log(" Dbut loadSignals pour channel:",_);const C=performance.now(),V=await Za(_),k=performance.now();console.log(` getSignals a pris ${k-C} millisecondes`),console.log(" Signaux reus pour channel",_,":",V);const G=V.map(se=>{var ue,_e,Ne;return{id:se.id||"",type:se.type,symbol:se.symbol,timeframe:se.timeframe,entry:((ue=se.entry)==null?void 0:ue.toString())||"N/A",takeProfit:((_e=se.takeProfit)==null?void 0:_e.toString())||"N/A",stopLoss:((Ne=se.stopLoss)==null?void 0:Ne.toString())||"N/A",description:se.description||"",image:null,timestamp:new Date(se.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:se.status||"ACTIVE",channel_id:se.channel_id,reactions:se.reactions||[],pnl:se.pnl,closeMessage:se.closeMessage}});Re(G.reverse()),console.log(` Signaux chargs pour ${_}:`,G.length),console.log(" tat signals admin aprs setSignals:",G)}catch(C){console.error(" Erreur chargement signaux:",C)}},rs=(_,C)=>{s.id==="trading-journal"&&_!=="trading-journal"&&ci(null),e({id:_,name:C}),n("signals"),Yr(),console.log(` Channel changed to ${_}`)},[is,hn]=K.useState([]),[Ke,Ht]=K.useState({symbol:"",type:"BUY",entry:"",exit:"",stopLoss:"",pnl:"",status:"WIN",notes:"",image1:null,image2:null});K.useEffect(()=>{(async()=>{const C=await Md();console.log(" ID utilisateur synchronis au dmarrage ADMIN:",C)})()},[]),K.useEffect(()=>{(async()=>{console.log(" Chargement trades personnels depuis Firebase...");const C=await lc();hn(C),console.log(` ${C.length} trades chargs depuis Firebase`)})()},[s.id]),K.useEffect(()=>{s.id==="trading-journal"&&(async()=>{console.log(" Rechargement automatique trades pour Journal Perso...");const C=await lc();hn(C),console.log(` ${C.length} trades rechargs automatiquement`)})()},[s.id]),K.useEffect(()=>{console.log("Trades chargs:",is)},[is]),K.useEffect(()=>{console.log(" useEffect loadSignals appel pour channel:",s.id),Oi(s.id)},[s.id]);const[Ve,fn]=K.useState({type:"BUY",symbol:"",timeframe:"",entry:"",takeProfit:"",stopLoss:"",description:"",image:null}),[jn,Qe]=K.useState(!1),[Zt,Gr]=K.useState(""),[Yt,Nr]=K.useState(!1),[Pi,Li]=K.useState(""),[qe,Wn]=K.useState(new Date);K.useEffect(()=>{const _=new Date;console.log(" [ADMIN] Mise  jour currentDate vers la date actuelle:",_.toDateString()),Wn(_)},[]);const ws=K.useRef(null),ft=K.useRef(null),dr=_=>{const C=[];return _.symbol&&C.push(`Symbol: ${_.symbol}`),_.tradeType&&C.push(`Type: ${_.tradeType.toUpperCase()}`),_.entryPrice&&C.push(`Entry: ${_.entryPrice}`),_.exitPrice&&C.push(`Exit: ${_.exitPrice}`),_.stopLoss&&C.push(`SL: ${_.stopLoss}`),_.rr&&C.push(`R:R: ${_.rr}`),_.session&&C.push(`Session: ${_.session}`),_.tradeDuration&&C.push(`Duration: ${_.tradeDuration}`),`[Auto-extracted] ${C.join(" | ")}`},zs=_=>{fn(C=>({...C,..._}))},jr=_=>{var se,ue,_e,Ne,We,mt,ut;_.preventDefault();const C=_.clipboardData.getData("text/html")||"",V=_.clipboardData.getData("text")||"";jn&&Gr(`HTML: ${C.slice(0,300)}...
Text: ${V.slice(0,300)}...`);const k={};let G=!1;if(C.includes("data-tradingview-clip"))try{const ze=/data-tradingview-clip="([^"]+)"/,ke=C.match(ze);if(ke&&ke[1]){const Ie=ke[1].replace(/&(?:quot|#34);/g,'"'),Me=JSON.parse(Ie);jn&&Gr(JSON.stringify(Me,null,2));const Fe=(ue=(se=Me.sources)==null?void 0:se[0])==null?void 0:ue.source,gt=Fe==null?void 0:Fe.points,ts=Fe==null?void 0:Fe.state,Vs=ts==null?void 0:ts.stopLevel,Ts=ts==null?void 0:ts.profitLevel;if(gt&&gt.length>=2){G=!0;let gn=(ts==null?void 0:ts.symbol)||"",Qt=gn.split(":")[1]||gn;Qt.startsWith("NQ1")?Qt="NQ":Qt.startsWith("ES1")?Qt="ES":Qt.startsWith("MNQ")&&(Qt="MNQ"),k.symbol=Qt;const mr=Fe==null?void 0:Fe.type;mr==="LineToolRiskRewardLong"||/long/i.test(mr)?(k.tradeType="buy",k.outcome="WIN"):(mr==="LineToolRiskRewardShort"||/short/i.test(mr))&&(k.tradeType="sell",k.outcome="WIN");const Qn=(_e=gt[0])==null?void 0:_e.price;if(Qn!==void 0&&(k.entryPrice=Qn.toString()),gt.length>1){const Un=(Ne=gt[gt.length-1])==null?void 0:Ne.price;Un!==void 0&&(k.exitPrice=Un.toString())}if(Vs!==void 0&&Ts!==void 0&&Qn!==void 0){const Un=Math.round(Ts/Vs*100)/100;k.rr=Un.toString();let Is,pn;if(k.tradeType==="buy"){const gr=Vs/4,Ui=Ts/4;Is=Qn-gr,pn=Qn+Ui}else{const gr=Vs/4,Ui=Ts/4;Is=Qn+gr,pn=Qn-Ui}k.stopLoss=Is.toString(),k.takeProfit=pn.toString()}if((We=gt[0])!=null&&We.time_t){const Un=gt[0].time_t,pn=new Date(Un*1e3).toTimeString().split(" ")[0].slice(0,5);if(k.entryTime=pn,gt.length>1&&((mt=gt[1])!=null&&mt.time_t)){const gr=gt[1].time_t,va=new Date(gr*1e3).toTimeString().split(" ")[0].slice(0,5);k.exitTime=va;const Pc=(gr-Un)*1e3,mi=Math.round(Pc/6e4);if(mi<60)k.tradeDuration=`${mi}m`;else{const Vi=Math.floor(mi/60),hl=mi%60;k.tradeDuration=`${Vi}h ${hl}m`}}}if((ut=gt[0])!=null&&ut.time_t){let Is=new Date(gt[0].time_t*1e3).getUTCHours()-4;Is<0&&(Is+=24);let pn="";Is>=0&&Is<3?pn="Asian Session":Is>=3&&Is<8?pn="London":Is>=8&&Is<12?pn="London/NY Overlap":Is>=12&&Is<17&&(pn="New York PM"),pn&&(k.session=pn)}}}}catch(ze){console.error("Error parsing TradingView data:",ze),jn&&Gr(`Error parsing: ${ze instanceof Error?ze.message:typeof ze=="symbol"?ze.toString():String(ze)}`)}if(!G){/long/i.test(V)?(k.tradeType="buy",k.outcome="WIN",G=!0):/short/i.test(V)&&(k.tradeType="sell",k.outcome="WIN",G=!0);const ze=V.match(/\b([A-Z]{1,6}\d*(?:USD|BTC|ETH|EUR)?)\b/);ze&&(k.symbol=ze[1],G=!0);const ke=V.match(/\b\d+(\.\d+)?\b/g)||[];ke.length>=2&&(k.entryPrice=ke[0],k.exitPrice=ke[1],ke.length>=3&&(k.rr=ke[2]),G=!0)}if(G){if(zs({type:k.tradeType==="buy"?"BUY":"SELL",symbol:k.symbol||Ve.symbol,entry:k.entryPrice||Ve.entry,takeProfit:k.takeProfit||Ve.takeProfit,stopLoss:k.stopLoss||Ve.stopLoss}),Object.keys(k).length>0){const ze=dr(k);zs({description:Ve.description?`${Ve.description}

${ze}`:ze})}Li("")}else zs({description:`Pasted text:
${V}

${Ve.description||""}`}),Li("Could not extract structured trade data; added raw text to description.");Nr(!1)},rr=()=>{Wn(_=>{const C=new Date(_);return C.setMonth(_.getMonth()-1),C})},Wr=()=>{Wn(_=>{const C=new Date(_);return C.setMonth(_.getMonth()+1),C})},Tr=_=>["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"][_.getMonth()],ms=_=>{if(!_)return 0;const C=_.replace(/[^\d.-]/g,"");return parseFloat(C)||0},[Et,mn]=K.useState([]);K.useEffect(()=>{(async()=>{try{console.log(" [ADMIN] Chargement de TOUS les signaux pour statistiques et calendrier...");const C=["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"];let V=[];for(const k of C)try{console.log(` [ADMIN] Chargement signaux pour ${k}...`);const G=await Za(k,100);G&&G.length>0&&(V=[...V,...G],console.log(` [ADMIN] ${G.length} signaux chargs pour ${k}`))}catch(G){console.error(` [ADMIN] Erreur chargement signaux pour ${k}:`,G)}if(V.length>0){const k=V.map(G=>{var _e,Ne,We;const ue=G.status&&G.status!=="ACTIVE"?new Date(G.timestamp||Date.now()).toISOString():new Date(G.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return{id:G.id||"",type:G.type,symbol:G.symbol,timeframe:G.timeframe,entry:((_e=G.entry)==null?void 0:_e.toString())||"N/A",takeProfit:((Ne=G.takeProfit)==null?void 0:Ne.toString())||"N/A",stopLoss:((We=G.stopLoss)==null?void 0:We.toString())||"N/A",description:G.description||"",image:G.image,attachment_data:G.attachment_data,attachment_type:G.attachment_type,attachment_name:G.attachment_name,timestamp:ue,originalTimestamp:G.timestamp||Date.now(),status:G.status||"ACTIVE",channel_id:G.channel_id,reactions:G.reactions||[],pnl:G.pnl,closeMessage:G.closeMessage}});mn(k),console.log(` [ADMIN] ${k.length} signaux formats chargs pour statistiques au total`),console.log(" [ADMIN] Signaux par canal:",C.map(G=>({channel:G,count:k.filter(se=>se.channel_id===G).length})))}else console.log(" [ADMIN] Aucun signal trouv pour les statistiques")}catch(C){console.error(" [ADMIN] Erreur chargement signaux pour statistiques:",C)}})()},[s.id]),K.useEffect(()=>{le.length>0&&(console.log(" [ADMIN] Mise  jour temps rel des statistiques..."),console.log(" [ADMIN] Signaux actuels dans le fil:",le.length),mn(_=>{const C=new Set(_.map(k=>k.id)),V=le.filter(k=>!C.has(k.id));if(V.length>0){console.log(` [ADMIN] ${V.length} nouveaux signaux ajouts aux stats`);const k=V.map(G=>({...G,originalTimestamp:G.timestamp||Date.now(),attachment_data:G.attachment_data,attachment_type:G.attachment_type,attachment_name:G.attachment_name}));return[..._,...k]}return _}))},[le]);const Ns=()=>{console.log(" [ADMIN] calculateTotalPnL - allSignalsForStats:",Et.length);const C=Rs().filter(k=>k.pnl&&k.status!=="ACTIVE");console.log(" [ADMIN] Signaux avec PnL et ferms:",C.length);const V=C.reduce((k,G)=>k+ms(G.pnl),0);return console.log(" [ADMIN] Total PnL calcul:",V),V},Yn=()=>{console.log(" [ADMIN] calculateWinRate - allSignalsForStats:",Et.length);const C=Rs().filter(G=>G.status!=="ACTIVE");if(console.log(" [ADMIN] Signaux ferms:",C.length),C.length===0)return 0;const V=C.filter(G=>G.status==="WIN").length,k=Math.round(V/C.length*100);return console.log(" [ADMIN] Win Rate calcul:",k+"%"),k},Kt=()=>{console.log(" [ADMIN] calculateAvgWin - allSignalsForStats:",Et.length);const C=Rs().filter(G=>G.status==="WIN"&&G.pnl);if(console.log(" [ADMIN] Signaux gagnants avec PnL:",C.length),C.length===0)return 0;const V=C.reduce((G,se)=>G+ms(se.pnl),0),k=Math.round(V/C.length);return console.log(" [ADMIN] Moyenne gains calcule:",k),k},ui=()=>{console.log(" [ADMIN] calculateAvgLoss - allSignalsForStats:",Et.length);const C=Rs().filter(G=>G.status==="LOSS"&&G.pnl);if(console.log(" [ADMIN] Signaux perdants avec PnL:",C.length),C.length===0)return 0;const V=C.reduce((G,se)=>G+Math.abs(ms(se.pnl)),0),k=Math.round(V/C.length);return console.log(" [ADMIN] Moyenne pertes calcule:",k),k},di=()=>{console.log(" [ADMIN] getTodaySignals - allSignalsForStats:",Et.length),console.log(" [ADMIN] Date slectionne:",qe.toDateString());const _=Et.filter(C=>{const V=new Date(C.originalTimestamp||C.timestamp);return isNaN(V.getTime())?!1:V.getDate()===qe.getDate()&&V.getMonth()===qe.getMonth()&&V.getFullYear()===qe.getFullYear()});return console.log(" [ADMIN] Signaux pour la date slectionne:",_.length),_},Rs=()=>{console.log(" [ADMIN] getThisMonthSignals - allSignalsForStats:",Et.length),console.log(" [ADMIN] Mois slectionn:",qe.getMonth()+1,qe.getFullYear());const _=Et.filter(C=>{const V=new Date(C.originalTimestamp||C.timestamp);return isNaN(V.getTime())?!1:V.getMonth()===qe.getMonth()&&V.getFullYear()===qe.getFullYear()});return console.log(" [ADMIN] Signaux pour le mois slectionn:",_.length),_},js=()=>is.filter(C=>{const V=new Date(C.date);return V.getMonth()===qe.getMonth()&&V.getFullYear()===qe.getFullYear()}).reduce((C,V)=>C+ms(V.pnl),0),Tn=()=>{const _=is.filter(V=>{const k=new Date(V.date);return k.getMonth()===qe.getMonth()&&k.getFullYear()===qe.getFullYear()});if(_.length===0)return 0;const C=_.filter(V=>V.status==="WIN").length;return Math.round(C/_.length*100)},hr=()=>{const C=is.filter(k=>{const G=new Date(k.date);return G.getMonth()===qe.getMonth()&&G.getFullYear()===qe.getFullYear()}).filter(k=>k.status==="WIN");if(C.length===0)return 0;const V=C.reduce((k,G)=>k+ms(G.pnl),0);return Math.round(V/C.length)},hi=()=>{const C=is.filter(k=>{const G=new Date(k.date);return G.getMonth()===qe.getMonth()&&G.getFullYear()===qe.getFullYear()}).filter(k=>k.status==="LOSS");if(C.length===0)return 0;const V=C.reduce((k,G)=>k+Math.abs(ms(G.pnl)),0);return Math.round(V/C.length)},fi=()=>{const _=qe.toISOString().split("T")[0];return is.filter(C=>C.date===_)},Sr=()=>is.filter(_=>{const C=new Date(_.date);return C.getMonth()===qe.getMonth()&&C.getFullYear()===qe.getFullYear()}),ir=(_,C,V)=>{const k=parseFloat(_),G=parseFloat(C),se=parseFloat(V);if(isNaN(k)||isNaN(G)||isNaN(se))return"N/A";const ue=Math.abs(k-se),_e=Math.abs(G-k);return ue===0?"N/A":(_e/ue).toFixed(2)},Er=()=>{const _=qe.getMonth(),C=qe.getFullYear(),V=new Date(C,_+1,0),k=Math.ceil(V.getDate()/7);console.log(` [ADMIN] Mois ${_+1}/${C} - ${V.getDate()} jours - ${k} semaines`);const G=[];for(let se=1;se<=k;se++){const ue=new Date(C,_,(se-1)*7+1),_e=new Date(C,_,Math.min(se*7,V.getDate()));console.log(` [ADMIN] Week ${se} - Dbut:`,ue.toDateString(),"Fin:",_e.toDateString());const Ne=Et.filter(Ie=>{const Me=new Date(Ie.originalTimestamp||Ie.timestamp);if(isNaN(Me.getTime()))return console.log(" [ADMIN] Weekly - Date invalide, signal ignor"),!1;const Fe=Me>=ue&&Me<=_e&&Me.getMonth()===_&&Me.getFullYear()===C;return se===4&&console.log(" [ADMIN] Week 4 - Signal:",Ie.symbol,"Date:",Me.toDateString(),"Dans semaine 4?",Fe),console.log(" [ADMIN] Weekly - Signal date:",Me.toDateString(),"Dans semaine",se,"?",Fe),Fe}),We=Ne.filter(Ie=>Ie.status!=="ACTIVE");We.reduce((Ie,Me)=>Ie+ms(Me.pnl||"0"),0);const mt=We.filter(Ie=>Ie.status==="WIN").length,ut=We.filter(Ie=>Ie.status==="LOSS").length,ze=Math.ceil(qe.getDate()/7),ke=se===ze;G.push({week:`Week ${se}`,weekNum:se,trades:Ne.length,pnl:0,wins:mt,losses:ut,isCurrentWeek:ke})}return G},Sn=()=>{const _=qe.getMonth(),C=qe.getFullYear(),V=new Date(C,_+1,0),k=Math.ceil(V.getDate()/7),G=[];for(let se=1;se<=k;se++){const ue=new Date(C,_,(se-1)*7+1),_e=new Date(C,_,Math.min(se*7,V.getDate())),Ne=is.filter(Ie=>{const Me=new Date(Ie.date);return Me>=ue&&Me<=_e&&Me.getMonth()===_&&Me.getFullYear()===C}),We=Ne.reduce((Ie,Me)=>Ie+ms(Me.pnl),0),mt=Ne.filter(Ie=>Ie.status==="WIN").length,ut=Ne.filter(Ie=>Ie.status==="LOSS").length,ze=Math.ceil(qe.getDate()/7),ke=se===ze;G.push({week:`Week ${se}`,weekNum:se,trades:Ne.length,pnl:We,wins:mt,losses:ut,isCurrentWeek:ke})}return G},Pt=async(_,C)=>{Re(V=>V.map(k=>{if(k.id===_){const G=k.reactions||[];if(G.includes(C)){const ue=G.filter(_e=>_e!==C);return Zx(_,ue),{...k,reactions:ue}}else{const ue=[...G,C];return Zx(_,ue),{...k,reactions:ue}}}return k}))},Yr=()=>{ft.current&&["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"].includes(s.id)?ft.current.scrollTop=0:window.scrollTo({top:0,behavior:"smooth"})},Ar=()=>{console.log(" Scrolling to bottom admin...",{hasRef:!!ft.current,channelId:s.id}),ft.current&&(ft.current.scrollTop=ft.current.scrollHeight);const _=document.querySelector(".overflow-y-auto.overflow-x-hidden.p-4.space-y-4.pb-32");_&&(_.scrollTop=_.scrollHeight,console.log(" Scroll with CSS selector worked")),document.querySelectorAll('[class*="overflow-y-auto"]').forEach((V,k)=>{V.scrollTop=V.scrollHeight,console.log(` Scrolled container ${k}`)}),setTimeout(()=>{ft.current&&(ft.current.scrollTop=ft.current.scrollHeight)},50),setTimeout(()=>{ft.current&&(ft.current.scrollTop=ft.current.scrollHeight)},200),console.log(" Scroll to bottom admin completed")},fr=()=>{const _=localStorage.getItem("adminProfileImage");console.log(" ADMIN Sauvegarde photo avant dconnexion:",_?"TROUVE":"PAS TROUVE"),["signals","chat_messages","trading_stats","user_session"].forEach(V=>localStorage.removeItem(V)),console.log(" Nettoyage slectif du localStorage (avatar prserv)"),_&&console.log(" ADMIN Photo de profil prserve pendant la dconnexion"),window.location.href="/"},Kn=_=>{var V;const C=(V=_.target.files)==null?void 0:V[0];if(console.log(" ADMIN File selected:",C?C.name:"NO FILE"),C&&C.type.startsWith("image/")){console.log(" ADMIN Processing image...");const k=new FileReader;k.onload=async G=>{var _e;const se=(_e=G.target)==null?void 0:_e.result;console.log(" ADMIN Syncing to localStorage AND Supabase..."),hs(se);const ue=await aA("admin",se);ue.success?console.log(" ADMIN Profile image synchronized across all devices!"):console.error(" ADMIN Sync failed:",ue.error)},k.readAsDataURL(C)}},Kr=()=>{if(!jt.trim()){console.warn("Veuillez entrer un titre pour votre stream");return}qt(!0),Gn(Math.floor(Math.random()*50)+10)},Ln=()=>{qt(!1),Gn(0)},es=()=>{navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30,max:60}},audio:!0}).then(_=>{console.log("Stream obtenu:",_);const C=document.createElement("video");C.className="w-full h-full object-contain",C.autoplay=!0,C.muted=!0,C.playsInline=!0,C.srcObject=_,C.style.imageRendering="crisp-edges",C.style.imageRendering="-webkit-optimize-contrast";const V=_.getVideoTracks()[0];if(V){const G=V.getSettings();console.log(" Paramtres vido:",G),V.applyConstraints({width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}}).then(()=>{console.log(" Qualit vido optimise:",{width:V.getSettings().width,height:V.getSettings().height,frameRate:V.getSettings().frameRate})}).catch(se=>console.log(" Contraintes non appliques:",se))}const k=document.querySelectorAll(".bg-gray-900 .bg-black.flex.items-center.justify-center");if(console.log("Conteneurs  trouvs:",k.length),k.length===0){const G=document.querySelectorAll(".bg-black.flex.items-center.justify-center");console.log("Tous les conteneurs trouvs:",G.length),G.forEach((se,ue)=>{console.log(`Remplacer conteneur ${ue}`),se.innerHTML="";const _e=C.cloneNode(!0);se.appendChild(_e),_e.play().then(()=>{console.log(`Vido ${ue} en cours de lecture`)}).catch(Ne=>{console.error(`Erreur lecture vido ${ue}:`,Ne)})})}else k.forEach((G,se)=>{console.log(`Remplacer conteneur  ${se}`),G.innerHTML="";const ue=C.cloneNode(!0);G.appendChild(ue),ue.play().then(()=>{console.log(`Vido  ${se} en cours de lecture`)}).catch(_e=>{console.error(`Erreur lecture vido  ${se}:`,_e)})});qt(!0),Gn(15)}).catch(_=>{console.error("Erreur partage d'cran:",_),console.error("Erreur lors du partage d'cran:",_.message)}):console.error("Partage d'cran non support sur ce navigateur")},N=async(_,C)=>{const V=le.find(k=>k.id===_);if(V){if(console.log(" [ADMIN] === CHANGEMENT STATUT SIGNAL ==="),console.log(" [ADMIN] Signal ID:",_,"Ancien statut:",V.status,"Nouveau statut:",C),V.status===C){const k={...V,status:"ACTIVE",pnl:void 0,closeMessage:void 0};Re(se=>se.map(ue=>ue.id===_?k:ue));const G=await Ou(_,"ACTIVE");console.log(" [ADMIN] Firebase mise  jour:",G?"SUCCS":"CHEC"),mn(se=>se.map(ue=>ue.id===_?{...ue,status:"ACTIVE",pnl:void 0,closeMessage:void 0}:ue)),console.log(" [ADMIN] Signal remis en ACTIVE - allSignalsForStats mis  jour pour les stats")}else if(C==="ACTIVE"){const k={...V,status:"ACTIVE",pnl:void 0,closeMessage:void 0};Re(se=>se.map(ue=>ue.id===_?k:ue));const G=await Ou(_,"ACTIVE");console.log(" [ADMIN] Firebase mise  jour:",G?"SUCCS":"CHEC"),mn(se=>se.map(ue=>ue.id===_?{...ue,status:"ACTIVE",pnl:void 0,closeMessage:void 0}:ue)),console.log(" [ADMIN] Signal remis en ACTIVE - allSignalsForStats mis  jour pour les stats")}else{const k=prompt("Entrez le P&L final pour ce signal (ex: +$150 ou -$50):");if(k!==null){const se=`Position ${C==="WIN"?"gagnante":C==="LOSS"?"perdante":"break-even"} ferme - P&L: ${k}`;console.log(" Debug signal dans handleSignalStatus:",V),console.log(" Debug referenceNumber dans handleSignalStatus:",V.referenceNumber);const ue={...V,status:C,pnl:k,closeMessage:se};Re(ze=>ze.map(ke=>ke.id===_?ue:ke));const _e=await Ou(_,C,k);console.log(" [ADMIN] Firebase mise  jour:",_e?"SUCCS":"CHEC");const Ne=Ks(Xs,`signals/${_}`);await pc(Ne,{closeMessage:se}),h0({...V,status:C,pnl:k,closeMessage:se});const mt={channel_id:"general-chat-2",content:` SIGNAL FERM 

Signal ${V.referenceNumber||""} ferm
Rsultat: ${C==="WIN"?" GAGNANT":C==="LOSS"?" PERDANT":" BREAK-EVEN"}
${C!=="BE"?`P&L: ${k}`:""}
[SIGNAL_ID:${_}]`,author:"Admin",author_type:"admin",author_avatar:Pe||void 0,timestamp:new Date().toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},ut=push(Ks(Xs,"messages/general-chat-2"));await set(ut,mt),mn(ze=>ze.map(ke=>ke.id===_?{...ke,status:C,pnl:k,closeMessage:se}:ke)),console.log(" [ADMIN] Signal ferm - allSignalsForStats mis  jour pour les stats")}}console.log(" [ADMIN] === FIN CHANGEMENT STATUT ===")}};K.useEffect(()=>{setTimeout(()=>{ft.current&&(ft.current.scrollTop=ft.current.scrollHeight)},100)},[Ft,s.id]);const F=[{id:"general-chat-2",name:"general-chat-2",emoji:"",fullName:"Indices"},{id:"general-chat-3",name:"general-chat-3",emoji:"",fullName:"Crypto"},{id:"general-chat-4",name:"general-chat-4",emoji:"",fullName:"Forex"},{id:"fondamentaux",name:"fondamentaux",emoji:"",fullName:"Fondamentaux"},{id:"letsgooo-model",name:"letsgooo-model",emoji:"",fullName:"Letsgooo model"},{id:"livestream",name:"livestream",emoji:"",fullName:"Livestream"},{id:"general-chat",name:"general-chat",emoji:"",fullName:"Gnral chat"},{id:"profit-loss",name:"profit-loss",emoji:"",fullName:"Profit loss"},{id:"chat",name:"chat",emoji:"",fullName:"Chat"},{id:"calendrier",name:"calendrier",emoji:"",fullName:"Journal Signaux"},{id:"trading-journal",name:"trading-journal",emoji:"",fullName:"Journal Perso"},{id:"user-management",name:"user-management",emoji:"",fullName:"Gestion Utilisateurs"}],Y=()=>{ee(!0)},B=()=>{Us(!0)},ie=async()=>{if(!Ke.symbol||!Ke.entry||!Ke.exit||!Ke.pnl){console.warn("Veuillez remplir les champs obligatoires (Symbol, Entry, Exit, PnL)");return}const _=k=>{const G=k.getFullYear(),se=String(k.getMonth()+1).padStart(2,"0"),ue=String(k.getDate()).padStart(2,"0");return`${G}-${se}-${ue}`},C={date:_(vs||new Date),symbol:Ke.symbol,type:Ke.type,entry:Ke.entry,exit:Ke.exit,stopLoss:Ke.stopLoss,pnl:Ke.pnl,status:Ke.status,notes:Ke.notes,image1:Ke.image1,image2:Ke.image2,timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})},V=await By(C);V?(hn(k=>[V,...k]),Ht({symbol:"",type:"BUY",entry:"",exit:"",stopLoss:"",pnl:"",status:"WIN",notes:"",image1:null,image2:null}),Us(!1),console.log(" Trade ajout avec succs dans Firebase !")):console.error(" Erreur lors de la sauvegarde du trade")},de=()=>{let _=[...ys];return fs&&(_=_.filter(C=>C.email.toLowerCase().includes(fs.toLowerCase()))),Pn!=="all"&&(_=_.filter(C=>C.status===Pn)),_.sort((C,V)=>{let k,G;switch(ns){case"email":k=C.email,G=V.email;break;case"created_at":k=new Date(C.created_at),G=new Date(V.created_at);break;case"last_sign_in_at":k=C.last_sign_in_at?new Date(C.last_sign_in_at):new Date(0),G=V.last_sign_in_at?new Date(V.last_sign_in_at):new Date(0);break;default:return 0}return _s==="asc"?k>G?1:-1:k<G?1:-1}),_},ce=()=>{const _=ys.length,C=ys.filter(se=>se.status==="active").length,V=ys.filter(se=>se.status==="inactive").length,k=new Date;k.setDate(k.getDate()-7);const G=ys.filter(se=>new Date(se.created_at)>k).length;return{total:_,active:C,inactive:V,newThisWeek:G}},Se=async()=>{console.warn(" User creation not implemented with Firebase yet"),console.log(" User creation not implemented with Firebase yet")},Xe=async _=>{console.warn(" User deletion not implemented with Firebase yet"),console.log(" User deletion not implemented with Firebase yet")},$e=_=>{var se,ue,_e,Ne;_.preventDefault();const C=_.clipboardData.getData("text/html")||"",V=_.clipboardData.getData("text")||"";console.log("Pasted HTML:",C),console.log("Pasted Text:",V);const k={};let G=!1;if(C.includes("data-tradingview-clip"))try{const We=/data-tradingview-clip="([^"]+)"/,mt=C.match(We);if(mt&&mt[1]){const ut=mt[1].replace(/&(?:quot|#34);/g,'"'),ze=JSON.parse(ut);console.log("TradingView data:",ze);const ke=(ue=(se=ze.sources)==null?void 0:se[0])==null?void 0:ue.source,Ie=ke==null?void 0:ke.points,Me=ke==null?void 0:ke.state,Fe=Me==null?void 0:Me.stopLevel,gt=Me==null?void 0:Me.profitLevel;if(Ie&&Ie.length>=2){G=!0;let ts=(Me==null?void 0:Me.symbol)||"",Vs=ts.split(":")[1]||ts;Vs.startsWith("NQ1")?Vs="NQ":Vs.startsWith("ES1")?Vs="ES":Vs.startsWith("MNQ")&&(Vs="MNQ"),k.symbol=Vs;const Ts=ke==null?void 0:ke.type;Ts==="LineToolRiskRewardLong"||/long/i.test(Ts)?k.tradeType="buy":(Ts==="LineToolRiskRewardShort"||/short/i.test(Ts))&&(k.tradeType="sell");const gn=(_e=Ie[0])==null?void 0:_e.price;if(gn!==void 0&&(k.entryPrice=gn.toString()),Ie.length>1){const Qt=(Ne=Ie[Ie.length-1])==null?void 0:Ne.price;Qt!==void 0&&(k.exitPrice=Qt.toString())}if(Fe!==void 0&&gt!==void 0){const Qt=Math.round(gt/Fe*100)/100;if(k.rr=Qt.toString(),gn!==void 0){let mr;if(k.tradeType==="buy"){const Qn=Fe/4;mr=gn-Qn}else{const Qn=Fe/4;mr=gn+Qn}k.stopLoss=mr.toString()}}}}}catch(We){console.error("Error parsing TradingView data:",We)}if(!G){const We=V.match(/([A-Z]{3,6})/),mt=V.match(/(BUY|SELL|LONG|SHORT)/i),ut=V.match(/\d+(?:\.\d+)?/g);We&&(k.symbol=We[1]),mt&&(k.tradeType=mt[1].toLowerCase()),ut&&ut.length>=1&&(k.entryPrice=ut[0]),ut&&ut.length>=2&&(k.exitPrice=ut[1]),ut&&ut.length>=3&&(k.stopLoss=ut[2])}k.symbol&&Ht(We=>({...We,symbol:k.symbol})),k.tradeType&&Ht(We=>({...We,type:k.tradeType==="buy"||k.tradeType==="long"?"BUY":"SELL"})),k.entryPrice&&Ht(We=>({...We,entry:k.entryPrice})),k.exitPrice&&Ht(We=>({...We,exit:k.exitPrice})),k.stopLoss&&Ht(We=>({...We,stopLoss:k.stopLoss})),G||Object.keys(k).length>0?console.log(` Donnes importes - Symbole: ${k.symbol}, Entre: ${k.entryPrice}, Sortie: ${k.exitPrice}, Stop Loss: ${k.stopLoss}`):console.warn(" Aucune donne dtecte. Essayez de coller depuis TradingView (Risk/Reward tool)")},it=_=>{try{const C=_.getFullYear(),V=String(_.getMonth()+1).padStart(2,"0"),k=String(_.getDate()).padStart(2,"0"),G=`${C}-${V}-${k}`;if(console.log("Recherche trades pour date:",G),console.log("Tous les trades:",is),!Array.isArray(is))return console.error("personalTrades n'est pas un tableau:",is),[];const se=is.filter(ue=>!ue||!ue.date?(console.log("Trade invalide:",ue),!1):ue.date===G);return console.log("Trades filtrs:",se),se}catch(C){return console.error("Erreur dans getTradesForDate:",C),[]}},Bt=_=>Et.filter(C=>{const V=new Date(C.originalTimestamp||C.timestamp);return isNaN(V.getTime())?!1:V.getDate()===_.getDate()&&V.getMonth()===_.getMonth()&&V.getFullYear()===_.getFullYear()}),bs=async()=>{if(!Ve.symbol&&!Ve.entry&&!Ve.takeProfit&&!Ve.stopLoss&&!Ve.description){console.warn("Veuillez remplir au moins un champ pour crer le signal");return}const _={channel_id:s.id,type:Ve.type,symbol:Ve.symbol||"N/A",timeframe:Ve.timeframe||"1 min",entry:Ve.entry||"0",takeProfit:Ve.takeProfit||"0",stopLoss:Ve.stopLoss||"0",description:Ve.description||"",author:"Admin",image:Ve.image,status:"ACTIVE"},C=await f1(_);if(C){console.log(" Signal sauv en Firebase:",C);try{const V=B5(),k=$5(V,"sendNotification"),G=[];try{const se=Ks(Xs,"fcm_tokens"),ue=await io(se);if(ue.exists()){const _e=ue.val();Object.values(_e).forEach(Ne=>{Ne.token&&G.push(Ne.token)}),console.log(" Tokens FCM rcuprs depuis Firebase:",G.length)}}catch(se){console.error(" Erreur rcupration tokens FCM:",se)}if(G.length>0){console.log(" Envoi notification push via Firebase Function...");const se=await k({signal:C,tokens:G});console.log(" Notification push envoye:",se.data)}else console.log(" Aucun token FCM trouv, notification locale seulement"),Wf(C)}catch(V){console.error(" Erreur envoi notification push:",V),Wf(C)}if(["general-chat-2","general-chat-3","general-chat-4"].includes(s.id)){const V=parseFloat(Ve.entry)||0,k=parseFloat(Ve.takeProfit)||0,G=parseFloat(Ve.stopLoss)||0;let se="N/A";if(V>0&&k>0&&G>0)if(Ve.type==="BUY"){const _e=Math.abs(k-V),Ne=Math.abs(V-G);se=_e>0&&Ne>0?(_e/Ne).toFixed(2):"N/A"}else{const _e=Math.abs(V-k),Ne=Math.abs(G-V);se=_e>0&&Ne>0?(_e/Ne).toFixed(2):"N/A"}console.log(" Debug savedSignal:",C),console.log(" Debug referenceNumber:",C.referenceNumber);const ue=` **${Ve.type} ${Ve.symbol||"N/A"}** ${C.referenceNumber||""}
 Entry: ${Ve.entry||"N/A"} TP: ${Ve.takeProfit||"N/A"} SL: ${Ve.stopLoss||"N/A"}
 R:R  ${se}
 ${Ve.timeframe||"1 min"}
[SIGNAL_ID:${C.id}]`;try{let _e;if(Ve.image){const We=new FileReader;_e=await new Promise(mt=>{We.onload=()=>mt(We.result),We.readAsDataURL(Ve.image)})}const Ne={channel_id:s.id,content:ue,author:"Admin",author_type:"admin",author_avatar:Pe||void 0,attachment_data:_e,attachment_type:Ve.image?Ve.image.type:void 0,attachment_name:Ve.image?Ve.image.name:void 0};await Ho(Ne),console.log(" Message signal avec image envoy dans general-chat-2")}catch(_e){console.error(" Erreur envoi message signal:",_e)}}s.id!=="general-chat-2"&&console.log("Signal cr et sauv en base ! ")}else{console.error(" Erreur sauvegarde signal"),console.error("Erreur lors de la sauvegarde du signal");return}fn({type:"BUY",symbol:"",timeframe:"",entry:"",takeProfit:"",stopLoss:"",description:"",image:null}),ee(!1)},ht=async(_,C)=>{try{const V=_.match(/\[SIGNAL_ID:([^\]]+)\]/);if(!V){console.error(" ID du signal non trouv dans le message");return}const k=V[1];console.log(` [ADMIN] Changement statut signal ${k} vers ${C}`);let G,se=null;if(C!=="BE"){const ze=document.createElement("div");ze.style.cssText=`
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
        `,ze.innerHTML=`
          <div style="
            background: #1f2937;
            padding: 24px;
            border-radius: 12px;
            min-width: 400px;
            border: 1px solid #374151;
            color: white;
          ">
            <h3 style="margin: 0 0 20px 0; font-size: 18px; font-weight: 600;">
               Fermer le signal ${C==="WIN"?" GAGNANT":" PERDANT"}
            </h3>
            
            <div style="margin-bottom: 20px;">
              <label style="display: block; margin-bottom: 8px; color: #d1d5db;">
                P&L Final (ex: +$150 ou -$50):
              </label>
              <input 
                id="pnlInput"
                type="text" 
                placeholder="+$150"
                style="
                  width: 100%;
                  padding: 8px 12px;
                  border: 1px solid #4b5563;
                  border-radius: 6px;
                  background: #374151;
                  color: white;
                  font-size: 14px;
                "
              />
            </div>
            
            <div style="margin-bottom: 20px;">
              <label style="display: block; margin-bottom: 8px; color: #d1d5db;">
                 Photo de conclusion (optionnel):
              </label>
              <input 
                id="photoInput"
                type="file" 
                accept="image/*"
                style="
                  width: 100%;
                  padding: 8px 12px;
                  border: 1px solid #4b5563;
                  border-radius: 6px;
                  background: #374151;
                  color: white;
                  font-size: 14px;
                "
              />
            </div>
            
            <div style="display: flex; gap: 12px; justify-content: flex-end;">
              <button 
                id="cancelBtn"
                style="
                  padding: 8px 16px;
                  border: 1px solid #6b7280;
                  border-radius: 6px;
                  background: #374151;
                  color: #d1d5db;
                  cursor: pointer;
                  font-size: 14px;
                "
              >
                Annuler
              </button>
              <button 
                id="confirmBtn"
                style="
                  padding: 8px 16px;
                  border: none;
                  border-radius: 6px;
                  background: #3b82f6;
                  color: white;
                  cursor: pointer;
                  font-size: 14px;
                  font-weight: 500;
                "
              >
                Confirmer
              </button>
            </div>
          </div>
        `,document.body.appendChild(ze);const ke=ze.querySelector("#pnlInput"),Ie=ze.querySelector("#photoInput"),Me=ze.querySelector("#cancelBtn"),Fe=ze.querySelector("#confirmBtn"),gt=await new Promise((ts,Vs)=>{Me.onclick=()=>{document.body.removeChild(ze),Vs(new Error("Annul par l'utilisateur"))},Fe.onclick=()=>{var Qt;const Ts=ke.value.trim();if(!Ts){console.warn("Veuillez entrer le P&L");return}const gn=((Qt=Ie.files)==null?void 0:Qt[0])||null;document.body.removeChild(ze),ts({pnl:Ts,photo:gn})}});G=gt.pnl,se=gt.photo}const ue=C==="WIN"?"gagnante":C==="LOSS"?"perdante":"break-even",_e=C==="BE"?`Position ${ue} ferme - Break-even`:`Position ${ue} ferme - P&L: ${G}`,Ne={id:k,status:C,pnl:G,closeMessage:_e};Re(ze=>ze.map(ke=>ke.id===k?{...ke,...Ne}:ke)),mn(ze=>ze.map(ke=>ke.id===k?{...ke,...Ne}:ke));const We=await Ou(k,C,G);console.log(" [ADMIN] Firebase mise  jour:",We?"SUCCS":"CHEC");const mt=Ks(Xs,`signals/${k}`);await pc(mt,{closeMessage:_e}),h0({...Ne,channel_id:"general-chat-2"}),console.log(" Debug updatedSignal:",Ne),console.log(" Debug referenceNumber:",Ne.referenceNumber);const ut=` SIGNAL FERM 

Signal ${Ne.referenceNumber||""} ferm
Rsultat: ${C==="WIN"?" GAGNANT":C==="LOSS"?" PERDANT":" BREAK-EVEN"}
${C!=="BE"?`P&L: ${G}`:""}
[SIGNAL_ID:${k}]`;try{let ze;if(se){const Ie=new FileReader;ze=await new Promise(Me=>{Ie.onload=()=>Me(Ie.result),Ie.readAsDataURL(se)})}const ke={channel_id:"general-chat-2",content:ut,author:"Admin",author_type:"admin",author_avatar:Pe||void 0,attachment_data:ze,attachment_type:se?se.type:void 0,attachment_name:se?se.name:void 0};await Ho(ke),console.log(" Message de conclusion avec image envoy dans general-chat-2")}catch(ze){console.error(" Erreur envoi message conclusion:",ze)}console.log(` [ADMIN] Signal ${k} ferm avec succs - Statut: ${C}, P&L: ${G}`)}catch(V){console.error(" [ADMIN] Erreur handleSignalStatusFromMessage:",V),console.error("Erreur lors de la mise  jour du statut")}},at=async()=>{if(Te.trim()){try{console.log(" Tentative envoi message PWA...",{channel:s.id,content:Te});const _={channel_id:s.id,content:Te,author:"Admin",author_type:"admin",author_avatar:Pe||void 0},C=await Ho(_);C?console.log(" Message envoy  Firebase:",C):console.error(" Erreur envoi message Firebase")}catch(_){console.error(" ERREUR PWA:",_);const C={id:Date.now().toString(),text:Te,timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),author:"Admin (Offline)"};tt(V=>({...V,[s.id]:[...V[s.id]||[],C]})),console.warn(" Mode offline activ - message local uniquement")}Ye(""),setTimeout(()=>{Ar()},10)}},ct=async _=>{var V;const C=(V=_.target.files)==null?void 0:V[0];if(C)try{const k=await Uy(C),G={channel_id:s.id,content:"",author:"Admin",author_type:"admin",author_avatar:Pe||void 0,attachment_data:k,attachment_type:C.type,attachment_name:C.name};console.log(" Message data envoy:",G);const se=await Ho(G);console.log(" Message sauvegard:",se),se?console.log(" Image envoye  Firebase:",se):console.error(" Erreur envoi image Firebase"),_.target.value="",setTimeout(()=>{Ar()},10)}catch(k){console.error(" ERREUR upload image:",k)}},ot=()=>{if(s.id==="user-management"){const _=ce(),C=de();return r.jsx("div",{className:"bg-gray-900 text-white p-2 md:p-4 h-full overflow-y-auto",style:{paddingTop:"80px"},children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"border-b border-gray-600 pb-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-red-500",children:" NOUVEAU CODE v3.0 CHARG ! "}),r.jsx("p",{className:"text-sm text-yellow-400 mt-1",children:"SI TU VOIS CE TEXTE ROUGE/JAUNE = A MARCHE !"})]}),r.jsx("button",{onClick:()=>ur(!0),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Utilisateur"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-blue-600 rounded-lg p-4 border-4 border-blue-400",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:_.total||99}),r.jsx("div",{className:"text-sm text-white font-bold",children:" TOTAL USERS"})]}),r.jsxs("div",{className:"bg-green-600 rounded-lg p-4 border-4 border-green-400",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:_.active||77}),r.jsx("div",{className:"text-sm text-white font-bold",children:" ACTIFS"})]}),r.jsxs("div",{className:"bg-red-600 rounded-lg p-4 border-4 border-red-400",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:_.inactive||22}),r.jsx("div",{className:"text-sm text-white font-bold",children:" INACTIFS"})]}),r.jsxs("div",{className:"bg-purple-600 rounded-lg p-4 border-4 border-purple-400",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:_.newThisWeek||5}),r.jsx("div",{className:"text-sm text-white font-bold",children:" NOUVEAUX"})]})]})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Rechercher"}),r.jsx("input",{type:"text",placeholder:"Email utilisateur...",value:fs,onChange:V=>Ls(V.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Statut"}),r.jsxs("select",{value:Pn,onChange:V=>Hr(V.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"Tous"}),r.jsx("option",{value:"active",children:"Actifs"}),r.jsx("option",{value:"inactive",children:"Inactifs"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Trier par"}),r.jsxs("select",{value:ns,onChange:V=>ya(V.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500",children:[r.jsx("option",{value:"created_at",children:"Date cration"}),r.jsx("option",{value:"last_sign_in_at",children:"Dernire connexion"}),r.jsx("option",{value:"email",children:"Email"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Ordre"}),r.jsxs("select",{value:_s,onChange:V=>Wt(V.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500",children:[r.jsx("option",{value:"desc",children:"Dcroissant"}),r.jsx("option",{value:"asc",children:"Croissant"})]})]})]})}),r.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cr le"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Dernire connexion"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-700",children:C.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-400",children:fs||Pn!=="all"?"Aucun utilisateur trouv avec ces critres":"Aucun utilisateur pour le moment"})}):C.map(V=>r.jsxs("tr",{className:"hover:bg-gray-700",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:V.email}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${V.status==="active"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:V.status==="active"?"Actif":"Inactif"})}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:new Date(V.created_at).toLocaleDateString("fr-FR")}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:V.last_sign_in_at?new Date(V.last_sign_in_at).toLocaleDateString("fr-FR"):"Jamais"}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{console.log("Fonctionnalit de rinitialisation du mot de passe  venir")},className:"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-xs",title:"Rinitialiser mot de passe",children:""}),r.jsx("button",{onClick:()=>{console.log("Fonctionnalit de dsactivation/ractivation  venir")},className:"bg-yellow-600 hover:bg-yellow-700 px-3 py-1 rounded text-xs",title:V.status==="active"?"Dsactiver":"Ractiver",children:V.status==="active"?"":""}),r.jsx("button",{onClick:()=>{Mi(V),zr(!0)},className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-xs",title:"Supprimer utilisateur",children:""})]})})]},V.id))})]})})})]})})}return r.jsxs("div",{className:"bg-gray-900 text-white p-2 md:p-4 h-full overflow-y-auto",style:{paddingTop:"80px"},children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6 md:mb-8 border-b border-gray-600 pb-4 gap-4 md:gap-0",children:[r.jsxs("div",{className:"hidden md:block",children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:s.id==="trading-journal"?"Mon Journal Perso":"Journal des Signaux"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.id==="trading-journal"?"Journal tous tes trades":"Suivi des performances des signaux"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 text-white",children:[r.jsx("button",{onClick:rr,className:"p-2 hover:bg-gray-700 rounded-lg text-lg font-bold",children:""}),r.jsxs("span",{className:"px-4 text-lg font-semibold min-w-[120px] text-center",children:[Tr(qe)," ",qe.getFullYear()]}),r.jsx("button",{onClick:Wr,className:"p-2 hover:bg-gray-700 rounded-lg text-lg font-bold",children:""})]}),s.id==="trading-journal"&&r.jsx("button",{onClick:B,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Trade"})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[r.jsxs("div",{className:"flex-1 w-full",children:[r.jsx("div",{className:"grid grid-cols-7 gap-0.5 md:gap-1 mb-4 w-full",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(_=>r.jsx("div",{className:"text-center text-gray-400 font-semibold py-3 text-sm uppercase tracking-wide",children:_.substring(0,3)},_))}),r.jsx("div",{className:"grid grid-cols-7 gap-0.5 md:gap-1 w-full",children:(()=>{const _=new Date(qe.getFullYear(),qe.getMonth(),1),V=new Date(qe.getFullYear(),qe.getMonth()+1,0).getDate(),k=_.getDay(),G=k===0?6:k-1,se=Math.ceil((G+V)/7)*7;return Array.from({length:se},(ue,_e)=>{const Ne=_e-G+1,We=new Date,mt=Ne===We.getDate()&&qe.getMonth()===We.getMonth()&&qe.getFullYear()===We.getFullYear();if(Ne<1)return r.jsx("div",{className:"border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 bg-gray-800 border-gray-700",style:{minHeight:"64px"}},_e);if(Ne>V)return r.jsx("div",{className:"border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 bg-gray-800 border-gray-700",style:{minHeight:"64px"}},_e);s.id==="trading-journal"&&Ne===29&&(console.log(" [ADMIN] === DEBUG JOUR 29 ==="),console.log(" [ADMIN] Total personalTrades:",is.length),console.log(" [ADMIN] Toutes les dates des trades:",is.map(Me=>({date:Me.date,status:Me.status})))),s.id!=="trading-journal"&&Ne===30&&(console.log(" [ADMIN] === DEBUG JOUR 30 ==="),console.log(" [ADMIN] allSignalsForStats total:",Et.length),console.log(" [ADMIN] Signaux avec timestamp HH:MM:",Et.filter(Me=>typeof Me.timestamp=="string"&&Me.timestamp.includes(":")).length),console.log(" [ADMIN] Signaux avec vraie date:",Et.filter(Me=>!(typeof Me.timestamp=="string"&&Me.timestamp.includes(":"))).length));const ut=s.id==="trading-journal"?is.filter(Me=>{console.log(" [ADMIN] Filtrage trade pour jour",Ne,"Trade date:",Me.date,"Type:",typeof Me.date);const Fe=new Date(Me.date);console.log(" [ADMIN] Trade date parse:",Fe.toDateString());const gt=Fe.getDate()===Ne&&Fe.getMonth()===qe.getMonth()&&Fe.getFullYear()===qe.getFullYear();return console.log(" [ADMIN] Trade correspond au jour",Ne,"?",gt),gt}):[],ze=s.id!=="trading-journal"?Et.filter(Me=>{const Fe=new Date(Me.originalTimestamp||Me.timestamp);if(isNaN(Fe.getTime()))return!1;const gt=Fe.getDate()===Ne&&Fe.getMonth()===qe.getMonth()&&Fe.getFullYear()===qe.getFullYear();return(Ne===29||Ne===30)&&console.log(" [ADMIN] Jour",Ne,"- Signal:",Me.symbol,"originalTimestamp:",Me.originalTimestamp,"date parse:",Fe.toDateString(),"match:",gt),gt}):[];let ke="bg-gray-700 border-gray-600 text-gray-400",Ie=0;if(s.id==="trading-journal"){if(ut.length>0){Ie=ut.length;const Me=ut.some(ts=>ts.status==="WIN"),Fe=ut.some(ts=>ts.status==="LOSS"),gt=ut.some(ts=>ts.status==="BE");Me&&!Fe?ke="bg-green-500/60 border-green-400/50 text-white":Fe&&!Me?ke="bg-red-500/60 border-red-400/50 text-white":(gt||Me&&Fe)&&(ke="bg-blue-500/60 border-blue-400/50 text-white")}}else if(ze.length>0){Ie=ze.length;const Me=ze.reduce((Fe,gt)=>gt.pnl?Fe+ms(gt.pnl):Fe,0);Ne===30&&(console.log(" [ADMIN] === DEBUG JOUR 30 ==="),console.log(" [ADMIN] daySignals:",ze.length),console.log(" [ADMIN] PnL total:",Me),ze.forEach(Fe=>{console.log(" [ADMIN] Signal:",Fe.symbol,"PnL:",Fe.pnl,"Parsed:",ms(Fe.pnl))})),Me>0?(ke="bg-green-400/40 border-green-300/30 text-white",Ne===30&&console.log(" [ADMIN] Jour 30: Couleur VERTE (PnL positif)")):Me<0?(ke="bg-red-500/60 border-red-400/50 text-white",Ne===30&&console.log(" [ADMIN] Jour 30: Couleur ROUGE (PnL ngatif)")):(ke="bg-blue-500/60 border-blue-400/50 text-white",Ne===30&&console.log(" [ADMIN] Jour 30: Couleur BLEUE (PnL = 0)"))}return r.jsx("div",{onClick:Me=>{try{Me.preventDefault(),Me.stopPropagation();const Fe=new Date(qe.getFullYear(),qe.getMonth(),Ne);if(s.id==="trading-journal"){ci(Fe);const gt=it(Fe);console.log("Clic sur jour:",Ne,"Trades trouvs:",gt.length),gt.length>0&&(console.log("Trades trouvs, ouverture modal..."),I(Fe),be(!0))}else Bt(Fe).length>0&&($(Fe),L(!0))}catch(Fe){console.error("Erreur lors du clic sur le jour:",Fe),console.error("Erreur lors du clic sur le jour:",Fe)}},className:`
                      border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 cursor-pointer transition-all hover:shadow-md
                      ${ke}
                      ${mt?"ring-2 ring-blue-400":""}
                      ${s.id==="trading-journal"&&vs&&vs.getDate()===Ne&&vs.getMonth()===qe.getMonth()&&vs.getFullYear()===qe.getFullYear()?"ring-2 ring-purple-400":""}
                    `,style:{minHeight:"64px"},children:r.jsxs("div",{className:"flex flex-col h-full justify-between",children:[r.jsx("div",{className:"text-xs md:text-sm font-semibold",children:Ne}),Ie>0&&r.jsxs("div",{className:"text-xs font-bold text-center hidden md:block",children:[Ie," ",s.id==="trading-journal"?"trade":"signal",Ie>1?"s":""]})]})},_e)})})()}),r.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4 pt-3 border-t border-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500/60 border border-green-400/50 rounded"}),r.jsx("span",{className:"text-xs text-gray-300",children:"WIN"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500/60 border border-red-400/50 rounded"}),r.jsx("span",{className:"text-xs text-gray-300",children:"LOSS"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500/60 border border-blue-400/50 rounded"}),r.jsx("span",{className:"text-xs text-gray-300",children:"BREAK"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-gray-700 border border-gray-600 rounded"}),r.jsx("span",{className:"text-xs text-gray-300",children:"NO TRADE"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 border-2 border-blue-400 rounded"}),r.jsx("span",{className:"text-xs text-gray-300",children:"Today"})]})]})]}),r.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-xl p-4 md:p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-6",children:s.id==="trading-journal"?"Mon Journal Perso":"Statistiques Signaux"}),r.jsxs("div",{className:"space-y-4 mb-8",children:[r.jsxs("div",{className:`border rounded-lg p-4 border ${(s.id==="trading-journal"?js():Ns())>=0?"bg-green-600/20 border-green-500/30":"bg-red-600/20 border-red-500/30"}`,children:[r.jsx("div",{className:`text-sm mb-1 ${(s.id==="trading-journal"?js():Ns())>=0?"text-green-300":"text-red-300"}`,children:"P&L Total"}),r.jsxs("div",{className:`text-2xl font-bold ${(s.id==="trading-journal"?js():Ns())>=0?"text-green-200":"text-red-200"}`,children:[(s.id==="trading-journal"?js():Ns())>=0?"+":"","$",s.id==="trading-journal"?js():Ns()]})]}),r.jsxs("div",{className:"bg-blue-600/20 border-blue-500/30 rounded-lg p-4 border",children:[r.jsx("div",{className:"text-sm text-blue-300 mb-1",children:"Win Rate"}),r.jsxs("div",{className:"text-2xl font-bold text-blue-200",children:[s.id==="trading-journal"?Tn():Yn(),"%"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Aujourd'hui"}),r.jsx("div",{className:"text-lg font-bold text-blue-400",children:s.id==="trading-journal"?fi().length:di().length})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Ce mois"}),r.jsx("div",{className:"text-lg font-bold text-white",children:s.id==="trading-journal"?Sr().length:Rs().length})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Win"}),r.jsx("div",{className:"text-lg font-bold text-green-400",children:s.id==="trading-journal"?hr()>0?`+$${hr()}`:"-":Kt()>0?`+$${Kt()}`:"-"})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Loss"}),r.jsx("div",{className:"text-lg font-bold text-red-400",children:s.id==="trading-journal"?hi()>0?`-$${hi()}`:"-":ui()>0?`-$${ui()}`:"-"})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Weekly Breakdown"}),r.jsx("div",{className:"space-y-2",children:(s.id==="trading-journal"?Sn():Er()).map((_,C)=>r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${_.isCurrentWeek?"bg-blue-600/20 border-blue-500/30":"bg-gray-700/50 border-gray-600"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`text-sm font-medium ${_.isCurrentWeek?"text-blue-300":"text-gray-300"}`,children:_.week}),r.jsxs("div",{className:"text-xs text-gray-400",children:[_.trades," trade",_.trades!==1?"s":""]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[_.wins>0||_.losses>0?r.jsxs("div",{className:"flex items-center gap-1",children:[_.wins>0&&r.jsxs("div",{className:"text-sm bg-green-800/30 text-green-200 px-3 py-1 rounded-lg font-bold shadow-lg border border-green-600/20",children:[_.wins,"W"]}),_.losses>0&&r.jsxs("div",{className:"text-sm bg-red-800/30 text-red-200 px-3 py-1 rounded-lg font-bold shadow-lg border border-red-600/20",children:[_.losses,"L"]})]}):r.jsx("div",{className:"text-sm text-gray-500 px-3 py-1",children:"-"}),r.jsx("div",{className:`text-xs ${_.pnl>0?"text-green-400":_.pnl<0?"text-red-400":"text-gray-500"}`,children:_.pnl!==0?`${_.pnl>0?"+":""}$${_.pnl}`:""})]})]},C))})]})]})]})]})};return r.jsxs("div",{className:"h-screen w-full bg-gray-900 text-white overflow-hidden flex",style:{paddingTop:"0px"},children:[r.jsxs("div",{className:"hidden md:flex w-56 bg-gray-800 flex-col",children:[r.jsx("div",{className:"p-4 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("input",{type:"file",onChange:Kn,className:"hidden",accept:"image/*"}),r.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:Pe?r.jsx("img",{src:Pe,alt:"Profile",className:"w-full h-full object-cover"}):"TT"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:"Admin"}),r.jsx("p",{className:"text-xs text-gray-400",children:"En ligne"})]})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"DUCATION"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("button",{onClick:()=>rs("fondamentaux","fondamentaux"),className:`w-full text-left px-3 py-2 rounded text-sm ${s.id==="fondamentaux"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:" Fondamentaux"}),r.jsx("button",{onClick:()=>rs("letsgooo-model","letsgooo-model"),className:`w-full text-left px-3 py-2 rounded text-sm ${s.id==="letsgooo-model"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:" Letsgooo-model"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"SIGNAUX"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("button",{onClick:()=>rs("general-chat-2","general-chat-2"),className:`w-full text-left px-3 py-2 rounded text-sm ${s.id==="general-chat-2"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:" Indices"}),r.jsx("button",{onClick:()=>rs("general-chat-3","general-chat-3"),className:`w-full text-left px-3 py-2 rounded text-sm ${s.id==="general-chat-3"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:" Crypto"}),r.jsx("button",{onClick:()=>rs("general-chat-4","general-chat-4"),className:`w-full text-left px-3 py-2 rounded text-sm ${s.id==="general-chat-4"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:" Forex"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"TRADING HUB"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("button",{onClick:()=>rs("profit-loss","profit-loss"),className:`w-full text-left px-3 py-2 rounded text-sm ${s.id==="profit-loss"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:" Profit-loss"}),r.jsx("button",{onClick:()=>rs("chat","chat"),className:`w-full text-left px-3 py-2 rounded text-sm ${s.id==="chat"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:" Chat"}),r.jsx("button",{onClick:()=>{s.id==="trading-journal"&&ci(null),e({id:"calendar",name:"calendar"}),n("calendar"),Yr()},className:`w-full text-left px-3 py-2 rounded text-sm ${t==="calendar"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:" Journal Signaux"}),r.jsx("button",{onClick:()=>rs("trading-journal","trading-journal"),className:`w-full text-left px-3 py-2 rounded text-sm ${s.id==="trading-journal"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:" Journal Perso"}),r.jsx("button",{onClick:()=>{window.setCurrentPage&&window.setCurrentPage("livestream")},className:"w-full text-left px-3 py-2 rounded text-sm text-gray-400 hover:text-white hover:bg-gray-700",children:" Livestream"}),r.jsx("button",{onClick:()=>{window.open("/trading-live.html","_blank")},className:"w-full text-left px-3 py-2 rounded text-sm text-gray-400 hover:text-white hover:bg-gray-700",children:" Formation Live"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Statistiques"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Win Rate:"}),r.jsxs("span",{className:"text-blue-400",children:[Yn(),"%"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Total Trades:"}),r.jsx("span",{className:"text-purple-400",children:Et.length})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Signaux actifs:"}),r.jsx("span",{className:"text-yellow-400",children:Et.filter(_=>_.status==="ACTIVE").length})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"P&L Total:"}),r.jsxs("span",{className:Ns()>=0?"text-green-400":"text-red-400",children:[Ns()>=0?"+":"","$",Ns()]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"ADMIN"}),r.jsx("div",{className:"space-y-1",children:r.jsx("button",{onClick:()=>rs("user-management","user-management"),className:`w-full text-left px-3 py-2 rounded text-sm ${s.id==="user-management"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:" Gestion Utilisateurs"})})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:r.jsxs("button",{onClick:fr,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white rounded-lg transition-colors",children:[r.jsx("span",{className:"text-lg",children:""}),r.jsx("span",{className:"text-sm",children:"Retour accueil"})]})})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx("div",{className:"md:hidden bg-gray-800 border-b border-gray-700 p-3 fixed top-0 left-0 right-0 z-30",style:{height:"60px"},children:a==="channels"?r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("input",{type:"file",onChange:Kn,className:"hidden",accept:"image/*"}),r.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:Pe?r.jsx("img",{src:Pe,alt:"Profile",className:"w-full h-full object-cover"}):"TT"})]}),r.jsx("div",{children:r.jsx("p",{className:"text-sm font-medium",children:"Admin"})})]}),r.jsx("button",{onClick:fr,className:"text-gray-400 hover:text-white",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})]}):r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("button",{onClick:()=>l("channels"),className:"flex items-center gap-2 text-gray-400 hover:text-white",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),r.jsx("span",{className:"text-sm font-medium",children:t==="calendar"?" Journal Signaux":((gs=F.find(_=>_.id===s.id))==null?void 0:gs.fullName)||s.name})]})})}),r.jsxs("div",{className:"md:hidden relative flex-1 overflow-hidden",style:{paddingTop:"60px"},children:[r.jsx("div",{className:`absolute inset-0 bg-gray-800 transform transition-transform duration-300 ease-in-out z-10 ${a==="channels"?"translate-x-0":"-translate-x-full"}`,children:r.jsxs("div",{className:"p-4 space-y-6 h-full overflow-y-auto",style:{paddingTop:"80px"},children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"DUCATION"}),r.jsx("div",{className:"space-y-2",children:F.filter(_=>["fondamentaux","letsgooo-model"].includes(_.id)).map(_=>r.jsx("button",{onClick:()=>{rs(_.id,_.name),l("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:_.emoji}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:_.fullName}),r.jsx("p",{className:"text-sm text-gray-400",children:"Contenu ducatif"})]})]})},_.id))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"TRADING HUB"}),r.jsxs("div",{className:"space-y-2",children:[F.filter(_=>["profit-loss","chat"].includes(_.id)).map(_=>r.jsx("button",{onClick:()=>{rs(_.id,_.name),l("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:_.emoji}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:_.fullName}),r.jsx("p",{className:"text-sm text-gray-400",children:"Hub de trading"})]})]})},_.id)),r.jsx("button",{onClick:()=>{s.id==="trading-journal"&&ci(null),n("calendar"),l("content"),Yr()},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:"Journal Signaux"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Suivi des performances"})]})]})}),r.jsx("button",{onClick:()=>{rs("trading-journal","trading-journal"),l("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:"Journal Perso"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Journal de trading"})]})]})}),r.jsx("button",{onClick:()=>{rs("livestream","livestream"),l("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:"Livestream"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Streaming en direct"})]})]})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"ADMIN"}),r.jsx("div",{className:"space-y-2",children:F.filter(_=>["user-management"].includes(_.id)).map(_=>r.jsx("button",{onClick:()=>{rs(_.id,_.name),l("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:_.emoji}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:_.fullName}),r.jsx("p",{className:"text-sm text-gray-400",children:"Gestion des utilisateurs"})]})]})},_.id))})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium mb-3",children:"Statistiques"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Win Rate:"}),r.jsxs("span",{className:"text-blue-400",children:[Yn(),"%"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Signaux actifs:"}),r.jsx("span",{className:"text-yellow-400",children:Et.filter(_=>_.status==="ACTIVE").length})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"P&L Total:"}),r.jsxs("span",{className:Ns()>=0?"text-green-400":"text-red-400",children:[Ns()>=0?"+":"","$",Ns()]})]})]})]})]})}),r.jsx("div",{className:`absolute inset-0 bg-gray-900 transform transition-transform duration-300 ease-in-out z-10 ${a==="content"?"translate-x-0":"translate-x-full"}`,children:t==="calendar"||s.id==="trading-journal"||s.id==="user-management"?r.jsxs("div",{className:"bg-gray-900 text-white p-2 md:p-4 h-full overflow-y-auto",style:{paddingTop:"0px"},children:[s.id==="trading-journal"&&r.jsxs("div",{className:"hidden md:flex justify-between items-center mb-6 border-b border-gray-600 pb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Mon Journal Perso"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Journal tous tes trades"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:async()=>{console.log(" Rechargement des trades...");const _=await lc();hn(_),console.log(` ${_.length} trades rechargs depuis Firebase`)},className:"bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded-lg text-sm font-medium",title:"Recharger les trades depuis Firebase",children:" Recharger"}),r.jsx("button",{onClick:()=>{const _=localStorage.getItem("user_id");navigator.clipboard.writeText(_||""),alert(`ID copi dans le presse-papier: ${_||"Aucun ID trouv"}`)},className:"bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-lg text-sm font-medium",title:"Copier ton ID utilisateur",children:" Copier ID"}),r.jsx("button",{onClick:async()=>{console.log(" DEBUG: Vrification Firebase...");const _=localStorage.getItem("user_id");console.log(" ID utilisateur:",_);const{ref:C,get:V,query:k,orderByChild:G,limitToLast:se}=await fa(async()=>{const{ref:_e,get:Ne,query:We,orderByChild:mt,limitToLast:ut}=await Promise.resolve().then(()=>IS);return{ref:_e,get:Ne,query:We,orderByChild:mt,limitToLast:ut}},void 0),{database:ue}=await fa(async()=>{const{database:_e}=await Promise.resolve().then(()=>g1);return{database:_e}},void 0);try{const _e=C(ue,`personal_trades/${_}`),Ne=k(_e,G("created_at"),se(10)),We=await V(Ne);console.log(" Snapshot existe:",We.exists()),console.log(" Nombre de trades:",We.numChildren()),We.exists()&&We.forEach(mt=>{console.log(" Trade trouv:",mt.key,mt.val())})}catch(_e){console.error(" Erreur Firebase:",_e)}},className:"bg-green-600 hover:bg-green-500 px-4 py-2 rounded-lg text-sm font-medium",title:"Debug Firebase",children:" Debug Firebase"}),r.jsx("button",{onClick:B,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Trade"})]})]}),t==="calendar"&&s.id!=="trading-journal"&&r.jsx("div",{className:"flex justify-between items-center mb-6 border-b border-gray-600 pb-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Journal des Signaux"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Suivi des performances des signaux"})]})}),s.id==="user-management"?r.jsxs("div",{className:"space-y-6",style:{paddingTop:"80px"},children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-600 pb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Gestion Utilisateurs"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Grer tous les utilisateurs de la plateforme"})]}),r.jsx("button",{onClick:()=>ur(!0),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Utilisateur"})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cr le"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Dernire connexion"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-700",children:ys.map(_=>r.jsxs("tr",{className:"hover:bg-gray-700",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:_.email}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_.status==="active"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:_.status==="active"?"Actif":"Inactif"})}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:new Date(_.created_at).toLocaleDateString("fr-FR")}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:_.last_sign_in_at?new Date(_.last_sign_in_at).toLocaleDateString("fr-FR"):"Jamais"}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:r.jsx("button",{onClick:()=>{Mi(_),zr(!0)},className:"text-red-400 hover:text-red-300",children:""})})]},_.id))})]})})})]}):ot(),(console.log("Vrification affichage trades:",{channel:s.id,selectedDate:vs,shouldShow:s.id==="trading-journal"&&vs,tradesCount:vs?it(vs).length:0}),s.id==="trading-journal"&&vs)&&r.jsxs("div",{className:"mt-8 border-t border-gray-600 pt-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Trades du ",vs.toLocaleDateString("fr-FR")]}),it(vs).length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Aucun trade pour cette date"}):r.jsx("div",{className:"space-y-4",children:it(vs).map(_=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${_.status==="WIN"?"bg-green-500 text-white":_.status==="LOSS"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:_.status}),r.jsx("span",{className:"text-white font-semibold",children:_.symbol}),r.jsx("span",{className:"text-gray-400",children:_.type})]}),r.jsxs("span",{className:`text-lg font-bold ${parseFloat(_.pnl)>=0?"text-green-400":"text-red-400"}`,children:[parseFloat(_.pnl)>=0?"+":"",_.pnl,"$"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Entry:"}),r.jsx("span",{className:"text-white ml-2",children:_.entry})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Exit:"}),r.jsx("span",{className:"text-white ml-2",children:_.exit})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Stop Loss:"}),r.jsx("span",{className:"text-white ml-2",children:_.stopLoss||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Time:"}),r.jsx("span",{className:"text-white ml-2",children:_.timestamp})]})]}),_.notes&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Notes:"}),r.jsx("p",{className:"text-white text-sm mt-1",children:_.notes})]}),(_.image1||_.image2)&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Images:"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[_.image1&&r.jsx("img",{src:_.image1,alt:"Trade screenshot 1",className:"w-20 h-20 object-cover rounded border border-gray-600"}),_.image2&&r.jsx("img",{src:_.image2,alt:"Trade screenshot 2",className:"w-20 h-20 object-cover rounded border border-gray-600"})]})]})]},_.id))})]})]}):r.jsx("div",{className:"p-4 md:p-6 space-y-4 w-full h-full overflow-y-auto",style:{paddingTop:"80px",paddingBottom:"100px"},children:t==="signals"&&!["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4","profit-loss",""].includes(s.id)?r.jsx("div",{className:"space-y-4",children:le.filter(_=>_.channel_id===s.id).length===0?r.jsx("div",{}):le.filter(_=>_.channel_id===s.id).map(_=>{var C,V,k,G;return r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:Pe?r.jsx("img",{src:Pe,alt:"Profile",className:"w-full h-full object-cover"}):"A"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-semibold text-white",children:"Admin"}),r.jsx("span",{className:"text-xs text-gray-400",children:_.timestamp})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 max-w-2xl md:max-w-2xl max-w-full",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${_.status==="ACTIVE"?"bg-green-500":"bg-gray-500"}`}),r.jsxs("h3",{className:"font-bold text-white text-lg",children:["Signal ",_.type," ",_.symbol," ",_.referenceNumber||"","  ",_.timeframe]})]}),r.jsxs("div",{className:"space-y-2",children:[_.entry!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Entre : ",_.entry," USD"]})]}),_.stopLoss!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Stop Loss : ",_.stopLoss," USD"]})]}),_.takeProfit!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Take Profit : ",_.takeProfit," USD"]})]})]}),_.entry!=="N/A"&&_.takeProfit!=="N/A"&&_.stopLoss!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-red-400 text-sm",children:""}),r.jsxs("span",{className:"text-white text-sm",children:["Ratio R:R :  ",ir(_.entry,_.takeProfit,_.stopLoss)]})]}),_.closeMessage&&r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-yellow-400 text-sm",children:""}),r.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:_.closeMessage})]})]})}),_.image&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:URL.createObjectURL(_.image),alt:"Signal screenshot",className:"max-w-full md:max-w-2xl rounded-lg border border-gray-600"})}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[r.jsx("button",{onClick:()=>N(_.id,_.status==="WIN"?"ACTIVE":"WIN"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${_.status==="WIN"?"bg-green-500 text-white shadow-lg shadow-green-500/20":"bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white"}`,children:" WIN"}),r.jsx("button",{onClick:()=>N(_.id,_.status==="LOSS"?"ACTIVE":"LOSS"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${_.status==="LOSS"?"bg-red-500 text-white shadow-lg shadow-red-500/20":"bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white"}`,children:" LOSS"}),r.jsx("button",{onClick:()=>N(_.id,_.status==="BE"?"ACTIVE":"BE"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${_.status==="BE"?"bg-blue-500 text-white shadow-lg shadow-blue-500/20":"bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white"}`,children:" BE"})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[r.jsxs("button",{onClick:()=>Pt(_.id,""),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:[" ",((C=_.reactions)==null?void 0:C.filter(se=>se==="").length)||0]}),r.jsxs("button",{onClick:()=>Pt(_.id,""),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:[" ",((V=_.reactions)==null?void 0:V.filter(se=>se==="").length)||0]}),r.jsxs("button",{onClick:()=>Pt(_.id,""),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:[" ",((k=_.reactions)==null?void 0:k.filter(se=>se==="").length)||0]}),r.jsxs("button",{onClick:()=>Pt(_.id,""),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:[" ",((G=_.reactions)==null?void 0:G.filter(se=>se==="").length)||0]})]})]})]},_.id)})}):s.id==="profit-loss"?r.jsx("div",{className:"flex flex-col h-full w-full",children:r.jsx(Go,{channelId:"profit-loss",currentUserId:"admin"})}):s.id==="chat"?r.jsx("div",{className:"flex flex-col h-full w-full",children:r.jsx(Go,{channelId:"chat",currentUserId:"admin"})}):["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"].includes(s.id)?r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{ref:ft,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4 pb-32",children:[s.id==="fondamentaux"&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[r.jsxs("div",{className:"text-center mb-8 p-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl text-white",children:[r.jsx("div",{className:"flex justify-center mb-0",children:r.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-48 w-auto object-cover",style:{clipPath:"inset(10% 5% 15% 5%)"}})}),r.jsx("p",{className:"text-xl opacity-90 -mt-3",children:"Guide complet des concepts fondamentaux et stratgies avances"})]}),r.jsxs("div",{className:"space-y-6 text-gray-300",children:[r.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4",children:r.jsxs("p",{className:"text-yellow-200",children:[r.jsx("strong",{children:" Avertissement :"})," Ce guide prsente un ensemble de concepts appris et expriments sur les marchs financiers. Il ne s'agit pas d'inventions originales, mais d'un setup personnel bas sur l'observation et l'exprience pratique."]})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"1.  Introduction"}),r.jsx("p",{children:"Ce document vous prsente les fondamentaux essentiels pour comprendre comment les charts voluent et ce qui influence leurs mouvements. L'objectif est de construire une base solide avant d'aborder les stratgies avances."})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"2.  Fondamentaux des Charts"}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:" Qu'est-ce qu'une Chart ?"}),r.jsx("p",{className:"mb-3",children:"Une chart (ou graphique) est une reprsentation visuelle du prix d'un actif financier dans le temps (Bitcoin, or, actions, etc.)."}),r.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[r.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Elle permet de :"}),r.jsxs("ul",{className:"space-y-1 text-sm",children:[r.jsx("li",{children:" Voir comment le prix volue"}),r.jsx("li",{children:" Trouver des points d'entre/sortie"}),r.jsx("li",{children:" Comprendre le comportement du march"})]})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:" Comprendre les Bougies"}),r.jsx("p",{className:"mb-3",children:"Chaque bougie montre l'volution du prix sur une priode donne (1 min, 1h, 1 jour, etc.)"}),r.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[r.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Composition d'une bougie :"}),r.jsxs("ul",{className:"space-y-1 text-sm",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Le corps (body) :"})," diffrence entre ouverture et clture"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Les mches (wicks) :"})," les plus hauts et plus bas atteints"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Couleur :"})," verte/blanche si clture > ouverture, rouge/noire si clture < ouverture"]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"3.  Mouvement des Prix (Modle AMD)"}),r.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 mb-4",children:r.jsxs("p",{children:[r.jsx("strong",{children:" Analogie :"})," Le prix, c'est comme un voyage de A  B. Pour avancer, il a besoin de liquidit, comme une voiture a besoin d'essence."]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"1"}),r.jsx("div",{className:"font-semibold mb-2",children:"Accumulation"}),r.jsx("p",{className:"text-sm",children:"Le prix se prpare "})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"2"}),r.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),r.jsx("p",{className:"text-sm",children:"Il pige les traders "})]}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"3"}),r.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),r.jsx("p",{className:"text-sm",children:"Le vrai mouvement "})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"4.  Support et Rsistance"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[r.jsx("strong",{className:"text-green-300",children:" Support"}),r.jsx("br",{}),r.jsx("span",{className:"text-sm",children:"Zone o le prix rebondit vers le haut "})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[r.jsx("strong",{className:"text-red-300",children:" Rsistance"}),r.jsx("br",{}),r.jsx("span",{className:"text-sm",children:"Zone o le prix bloque et redescend "})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"5.  Concepts Avancs"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:" ORDER BLOCK (OB)"}),r.jsx("p",{className:"mb-2",children:"Un Order Block reprsente la dernire bougie haussire (ou baissire) avant un mouvement impulsif majeur dans la direction oppose."}),r.jsxs("div",{className:"text-sm text-blue-300",children:[" Ces zones deviennent des repres de liquidit",r.jsx("br",{})," Souvent retestes par le prix",r.jsx("br",{})," Offrent des points d'entre  fort potentiel"]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:" FVG  Fair Value Gap"}),r.jsx("p",{className:"mb-2",children:"Un FVG est une zone de dsquilibre cre lors d'un mouvement rapide et violent du march ."}),r.jsxs("div",{className:"text-sm text-blue-300",children:[" Le prix revient frquemment combler ces gaps",r.jsx("br",{})," Zones intressantes pour entrer ou sortir d'une position"]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:" Unicorn"}),r.jsx("p",{className:"mb-2",children:"C'est un setup form par l'association d'un Breaker (BRKR)  et d'un Fair Value Gap (FVG) ."}),r.jsxs("div",{className:"text-sm text-blue-300",children:[" Zone  forte probabilit de raction du prix",r.jsx("br",{})," Rassemble deux zones institutionnelles cls",r.jsx("br",{})," Point d'entre ou de prise de profit idal"]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"6.  CRT  Candle Range Theory"}),r.jsx("p",{className:"mb-4",children:"La Candle Range Theory (CRT) est une mthode d'analyse base sur 3 bougies conscutives."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"1"}),r.jsx("div",{className:"font-semibold mb-2",children:"La Range"}),r.jsxs("p",{className:"text-sm",children:["Bougie avec grand corps",r.jsx("br",{}),"Zone de stagnation"]})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"2"}),r.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),r.jsxs("p",{className:"text-sm",children:["Va chercher la liquidit",r.jsx("br",{}),"Pige les traders"]})]}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"3"}),r.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),r.jsxs("p",{className:"text-sm",children:["Bougie directionnelle",r.jsx("br",{}),"Zone d'entre"]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:'7.  Le Setup "A+"'}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 mb-4",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"PRINCIPE DU MODLE"}),r.jsx("p",{className:"mb-2",children:"Le principe du modle, c'est de prendre position aprs la phase de manipulation , sur la timeframe basse (LTF) du contexte dfini sur la timeframe haute (HTF) ."}),r.jsx("p",{children:" Cela permet d'viter les piges des faux breakouts  et de s'aligner avec la vraie direction du mouvement ."})]})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold mb-2",children:" Avertissement Lgal"}),r.jsx("p",{className:"text-sm",children:"Ce document est fourni  des fins ducatives uniquement. Le trading comporte des risques significatifs de perte financire. Il est essentiel de bien comprendre les risques avant de trader et ne jamais risquer plus que ce que vous pouvez vous permettre de perdre."})]})]})]}),(Ft[s.id]||[]).length>0&&(Ft[s.id]||[]).map(_=>{var C,V;return r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:_.author_avatar?r.jsx("img",{src:_.author_avatar,alt:"Profile",className:"w-full h-full object-cover"}):_.author==="Admin"?"A":"TT"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-semibold text-white",children:_.author}),r.jsx("span",{className:"text-xs text-gray-400",children:_.timestamp})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 hover:shadow-lg hover:shadow-gray-900/50 transition-shadow duration-200 max-w-full break-words",children:[_.text&&r.jsx("div",{className:"text-white",children:_.text.includes(" **Session Trading Live")?r.jsxs("div",{className:"bg-purple-900/30 border border-purple-500 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-purple-400",children:""}),r.jsx("span",{className:"font-semibold text-purple-300",children:"Session Trading Live - QUALIT HAUTE"})]}),r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("a",{href:"https://admintrading.app.100ms.live/meeting/kor-inbw-yiz",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"Rejoignez la room"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{className:"text-green-300",children:"Latence: ~100ms"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-orange-400",children:""}),r.jsx("span",{className:"text-orange-300",children:"Partage d'cran 1080p activ"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-yellow-400",children:""}),r.jsx("span",{className:"text-yellow-300",children:"Qualit optimise pour le trading"})]})]}),r.jsx("button",{onClick:()=>window.open("https://admintrading.app.100ms.live/meeting/kor-inbw-yiz","_blank"),className:"mt-3 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-white text-sm font-medium w-full",children:" Cliquez pour rejoindre instantanment"})]}):r.jsx("p",{children:_.text})}),_.attachment_data&&r.jsx("div",{className:"mt-2",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:_.attachment_data,alt:"Attachment",className:"mt-2 max-w-xs max-h-48 rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{const k=window.open();k.document.write(`<img src="${_.attachment_data}" style="max-width: 100%; height: auto;" />`),k.document.title="Image en grand"}}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Cliquez pour agrandir"})]})})]}),r.jsx("div",{className:"mt-2 flex items-center gap-2",children:r.jsxs("button",{onClick:()=>re(_.id),className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs transition-all duration-200 ${(((C=oe[_.id])==null?void 0:C.users)||[]).includes("Admin")?"bg-orange-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300 hover:text-white"}`,children:["",r.jsx("span",{className:"ml-1",children:((V=oe[_.id])==null?void 0:V.fire)||0})]})})]})]},_.id)}),r.jsx("div",{ref:ws})]}),r.jsx("div",{className:"border-t border-gray-700 p-4 fixed bottom-0 left-0 right-0 bg-gray-800 z-30 md:left-64",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:Te,onChange:_=>Ye(_.target.value),onKeyPress:_=>_.key==="Enter"&&at(),placeholder:"Tapez votre message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("input",{type:"file",onChange:ct,className:"hidden",accept:"image/*,.pdf,.doc,.docx"}),r.jsx("span",{className:"bg-gray-600 hover:bg-gray-500 p-2 rounded-lg text-gray-300 hover:text-white",children:""})]}),r.jsx("button",{onClick:Y,className:"bg-green-600 hover:bg-green-700 px-3 py-2 rounded-lg text-white text-sm font-medium",children:"+ Signal"}),r.jsx("button",{onClick:at,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white",children:"Envoyer"})]})})]}):s.id==="livestream"?r.jsx("div",{className:"flex flex-col h-full bg-gray-900",children:r.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 p-4",children:[r.jsx("div",{className:"flex-1 bg-gray-900 rounded-lg overflow-hidden",children:r.jsx("div",{className:"h-full flex flex-col items-center justify-center p-8",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto",children:r.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M8 5v14l11-7z"})})}),r.jsx("h2",{className:"text-xl font-bold text-white",children:"Livestream Trading"}),r.jsx("p",{className:"text-gray-400",children:"Session de trading en direct"}),r.jsxs("div",{className:"w-full max-w-7xl relative",children:[r.jsx("button",{onClick:()=>{const _=document.querySelector('iframe[src*="100ms.live"]');_&&_.requestFullscreen&&_.requestFullscreen()},className:"absolute top-4 right-4 z-10 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:" Plein cran"}),r.jsx("iframe",{src:"https://admintrading.app.100ms.live/meeting/kor-inbw-yiz",width:"100%",height:"1200px",style:{border:"none",borderRadius:"8px"},allow:"camera; microphone; display-capture; fullscreen",allowFullScreen:!0})]})]})})}),r.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-lg flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-700",children:[r.jsx("h3",{className:"font-semibold text-white",children:" Chat Live"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Commentaires en direct"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:(Ft.livestream||[]).length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Aucun message"}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Soyez le premier  commenter !"})]}):(Ft.livestream||[]).map(_=>r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"h-6 w-6 bg-blue-500 rounded-full flex items-center justify-center text-xs",children:"T"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium text-white text-sm",children:_.author}),r.jsx("span",{className:"text-xs text-gray-400",children:_.timestamp})]}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:r.jsx("p",{className:"text-white text-sm",children:_.text})})]})]},_.id))}),r.jsx("div",{className:"p-4 border-t border-gray-700",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:Te,onChange:_=>Ye(_.target.value),onKeyPress:_=>_.key==="Enter"&&at(),placeholder:"Commenter le stream...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 text-sm"}),r.jsx("button",{onClick:at,className:"bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-white text-sm",children:"Envoyer"})]})})]})]})}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Bienvenue sur Admin"}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Plateforme de trading en cours de dveloppement"})]})})})]}),r.jsx("div",{className:"hidden md:block flex-1 overflow-y-auto overflow-x-hidden",children:t==="calendar"||s.id==="trading-journal"||s.id==="user-management"?ot():r.jsx("div",{className:"p-4 md:p-6 space-y-4 w-full",style:{paddingTop:"80px"},children:t==="signals"&&!["fondamentaux","letsgooo-model","general-chat","general-chat-2","general-chat-3","general-chat-4",""].includes(s.id)?r.jsx("div",{className:"space-y-4",children:le.filter(_=>_.channel_id===s.id).length===0?r.jsx("div",{}):le.filter(_=>_.channel_id===s.id).reverse().map(_=>{var C,V,k,G;return r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-semibold text-white",children:"Admin"}),r.jsx("span",{className:"text-xs text-gray-400",children:_.timestamp})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 max-w-full md:max-w-2xl",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${_.status==="ACTIVE"?"bg-green-500":"bg-gray-500"}`}),r.jsxs("h3",{className:"font-bold text-white text-lg",children:["Signal ",_.type," ",_.symbol," ",_.referenceNumber||"","  ",_.timeframe]})]}),r.jsxs("div",{className:"space-y-2",children:[_.entry!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Entre : ",_.entry," USD"]})]}),_.stopLoss!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Stop Loss : ",_.stopLoss," USD"]})]}),_.takeProfit!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsxs("span",{className:"text-white",children:["Take Profit : ",_.takeProfit," USD"]})]})]}),_.entry!=="N/A"&&_.takeProfit!=="N/A"&&_.stopLoss!=="N/A"&&r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-red-400 text-sm",children:""}),r.jsxs("span",{className:"text-white text-sm",children:["Ratio R:R :  ",ir(_.entry,_.takeProfit,_.stopLoss)]})]}),_.closeMessage&&r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-yellow-400 text-sm",children:""}),r.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:_.closeMessage})]})]})}),_.image&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:URL.createObjectURL(_.image),alt:"Signal screenshot",className:"max-w-full md:max-w-2xl rounded-lg border border-gray-600"})}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[r.jsx("button",{onClick:()=>N(_.id,_.status==="WIN"?"ACTIVE":"WIN"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${_.status==="WIN"?"bg-green-500 text-white shadow-lg shadow-green-500/20":"bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white"}`,children:" WIN"}),r.jsx("button",{onClick:()=>N(_.id,_.status==="LOSS"?"ACTIVE":"LOSS"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${_.status==="LOSS"?"bg-red-500 text-white shadow-lg shadow-red-500/20":"bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white"}`,children:" LOSS"}),r.jsx("button",{onClick:()=>N(_.id,_.status==="BE"?"ACTIVE":"BE"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${_.status==="BE"?"bg-blue-500 text-white shadow-lg shadow-blue-500/20":"bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white"}`,children:" BE"})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[r.jsxs("button",{onClick:()=>Pt(_.id,""),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:[" ",((C=_.reactions)==null?void 0:C.filter(se=>se==="").length)||0]}),r.jsxs("button",{onClick:()=>Pt(_.id,""),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:[" ",((V=_.reactions)==null?void 0:V.filter(se=>se==="").length)||0]}),r.jsxs("button",{onClick:()=>Pt(_.id,""),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:[" ",((k=_.reactions)==null?void 0:k.filter(se=>se==="").length)||0]}),r.jsxs("button",{onClick:()=>Pt(_.id,""),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:[" ",((G=_.reactions)==null?void 0:G.filter(se=>se==="").length)||0]})]})]})]},_.id)})}):s.id===""?r.jsx("div",{className:"flex flex-col h-full",children:r.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 p-4",children:[r.jsx("div",{className:"flex-1 bg-gray-900 rounded-lg overflow-hidden",children:_t?r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"bg-gray-800 p-4 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-white",children:jt}),r.jsx("p",{className:"text-sm text-gray-400",children:Ps})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[r.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm font-medium",children:"EN DIRECT"})]}),r.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[r.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),r.jsxs("span",{className:"text-sm",children:[nr," spectateurs"]})]}),r.jsx("button",{onClick:Ln,className:"bg-gray-600 hover:bg-gray-500 px-3 py-1 rounded text-sm text-white",children:"Arrter"})]})]})}),r.jsx("div",{className:"flex-1 bg-black flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-gray-400",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-lg flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})})}),r.jsx("p",{className:"text-sm",children:"Stream en cours..."}),r.jsx("p",{className:"text-xs mt-1",children:"Partagez votre cran TradingView"})]})})]}):r.jsx("div",{className:"h-full flex flex-col items-center justify-center p-8",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto",children:r.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M8 5v14l11-7z"})})}),r.jsx("h2",{className:"text-xl font-bold text-white",children:"Aucun stream en cours"}),r.jsx("p",{className:"text-gray-400",children:"Commencez votre session de trading en direct"}),r.jsxs("div",{className:"space-y-3 max-w-md mx-auto",children:[r.jsx("input",{type:"text",placeholder:"Titre du stream (ex: Session TradingView - EURUSD)",value:jt,onChange:_=>en(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),r.jsx("textarea",{placeholder:"Description (optionnel)",value:Ps,onChange:_=>tn(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500",rows:2}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:Kr,className:"flex-1 bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-white font-medium",children:" Dmarrer Stream"}),r.jsx("button",{onClick:es,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white",children:" Partager cran"})]})]})]})})}),r.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-lg flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-700",children:[r.jsx("h3",{className:"font-semibold text-white",children:" Chat Live"}),r.jsxs("p",{className:"text-xs text-gray-400",children:[nr," spectateurs en ligne"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:(Ft[""]||[]).length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Aucun message"}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Soyez le premier  commenter !"})]}):(Ft[""]||[]).map(_=>r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"h-6 w-6 bg-blue-500 rounded-full flex items-center justify-center text-xs",children:"T"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-medium text-white text-sm",children:_.author}),r.jsx("span",{className:"text-xs text-gray-400",children:_.timestamp})]}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:r.jsx("p",{className:"text-white text-sm",children:_.text})})]})]},_.id))}),r.jsx("div",{className:"p-4 border-t border-gray-700",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:Te,onChange:_=>Ye(_.target.value),onKeyPress:_=>_.key==="Enter"&&at(),placeholder:"Commenter le stream...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 text-sm"}),r.jsx("button",{onClick:at,className:"bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-white text-sm",children:"Envoyer"})]})})]})]})}):s.id==="profit-loss"?r.jsx("div",{className:"flex flex-col h-full w-full",children:r.jsx(Go,{channelId:"profit-loss",currentUserId:"admin"})}):s.id==="chat"?r.jsx("div",{className:"flex flex-col h-full w-full",children:r.jsx(Go,{channelId:"chat",currentUserId:"admin"})}):["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"].includes(s.id)?r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{ref:ft,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4 pb-32",children:[(Ft[s.id]||[]).length>0&&(Ft[s.id]||[]).map(_=>{var C,V,k;return r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:_.author==="Admin"&&Pe?r.jsx("img",{src:Pe,alt:"Profile",className:"w-full h-full object-cover"}):_.author_avatar?r.jsx("img",{src:_.author_avatar,alt:"Profile",className:"w-full h-full object-cover"}):"A"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-semibold text-white",children:_.author}),r.jsx("span",{className:"text-xs text-gray-400",children:_.timestamp})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 hover:shadow-lg hover:shadow-gray-900/50 transition-shadow duration-200 max-w-full break-words","data-signal-id":_.text.includes("[SIGNAL_ID:")?(C=_.text.match(/\[SIGNAL_ID:([^\]]+)\]/))==null?void 0:C[1]:void 0,children:[r.jsx("div",{className:"text-white",children:_.text.includes("[SIGNAL_ID:")?r.jsxs(r.Fragment,{children:[_.text.split("[SIGNAL_ID:")[0],r.jsxs("span",{className:"text-gray-700 text-xs",children:["[SIGNAL_ID:",_.text.split("[SIGNAL_ID:")[1].split("]")[0],"]"]}),_.text.split("]").slice(1).join("]"),(()=>{const G=_.text.includes("SIGNAL FERM");return console.log(" Debug flche - message.text:",_.text),console.log(" Debug flche - isClosureMessage:",G),G})()&&r.jsx("span",{className:"ml-2 text-blue-400 hover:text-blue-300 cursor-pointer text-lg transition-colors inline-block",onClick:()=>{const G=_.text.match(/\[SIGNAL_ID:([^\]]+)\]/),se=G?G[1]:"";console.log(" Debug flche - signalId extrait:",se),console.log(" Debug flche - message.text:",_.text);const ue=document.querySelector(`[data-signal-id="${se}"]`);console.log(" Debug flche - lment trouv:",ue),ue?(ue.scrollIntoView({behavior:"smooth",block:"center"}),ue.classList.add("ring-2","ring-blue-400","ring-opacity-50"),setTimeout(()=>{ue.classList.remove("ring-2","ring-blue-400","ring-opacity-50")},3e3),console.log(" Navigation vers le signal original russie")):console.log(" Signal original non trouv")},title:"Aller au signal original",children:""})]}):_.text}),_.attachment_data&&r.jsx("div",{className:"mt-2",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:_.attachment_data,alt:"Attachment",className:"mt-2 max-w-xs max-h-48 rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Rt(_.attachment_data)}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Cliquez pour agrandir"})]})}),_.text.includes("[SIGNAL_ID:")&&!_.text.includes("SIGNAL FERM")&&(()=>{const G=_.text.match(/\[SIGNAL_ID:([^\]]+)\]/),se=G?G[1]:"",ue=le.find(Ne=>Ne.id===se),_e=ue&&["WIN","LOSS","BE"].includes(ue.status);return r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Rsultat du signal:"}),r.jsx("button",{onClick:()=>ht(_.text,"WIN"),disabled:_e,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${_e&&(ue==null?void 0:ue.status)==="WIN"?"bg-green-500 text-white border-2 border-green-400 shadow-lg scale-105":_e?"bg-gray-500/30 text-gray-400 border border-gray-500/30 cursor-not-allowed opacity-50":"bg-green-400/20 hover:bg-green-400/30 text-green-300 border border-green-400/30 hover:scale-105"}`,children:" WIN"}),r.jsx("button",{onClick:()=>ht(_.text,"LOSS"),disabled:_e,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${_e&&(ue==null?void 0:ue.status)==="LOSS"?"bg-red-500 text-white border-2 border-red-400 shadow-lg scale-105":_e?"bg-gray-500/30 text-gray-400 border border-gray-500/30 cursor-not-allowed opacity-50":"bg-red-400/20 hover:bg-red-400/30 text-red-300 border border-red-400/30 hover:scale-105"}`,children:" LOSS"}),r.jsx("button",{onClick:()=>ht(_.text,"BE"),disabled:_e,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${_e&&(ue==null?void 0:ue.status)==="BE"?"bg-blue-500 text-white border-2 border-blue-400 shadow-lg scale-105":_e?"bg-gray-500/30 text-gray-400 border border-gray-500/30 cursor-not-allowed opacity-50":"bg-blue-400/20 hover:bg-blue-400/30 text-blue-300 border border-blue-400/30 hover:scale-105"}`,children:" BE"})]}),_e&&r.jsx("div",{className:"mt-2 text-xs text-gray-400",children:r.jsxs("span",{className:"cursor-pointer text-blue-400 hover:text-blue-300 underline",onClick:()=>{const Ne=document.querySelector(`[data-signal-id="${se}"]`);Ne&&(Ne.scrollIntoView({behavior:"smooth",block:"center"}),Ne.classList.add("ring-2","ring-blue-400","ring-opacity-50"),setTimeout(()=>{Ne.classList.remove("ring-2","ring-blue-400","ring-opacity-50")},3e3))},children:["Signal ",(ue==null?void 0:ue.referenceNumber)||""," ferm avec ",ue!=null&&ue.pnl?`P&L: ${ue.pnl}`:"aucun P&L"]})})]})})()]}),r.jsx("div",{className:"mt-2 flex items-center gap-2",children:r.jsxs("button",{onClick:()=>re(_.id),className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs transition-all duration-200 ${(((V=oe[_.id])==null?void 0:V.users)||[]).includes("Admin")?"bg-orange-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300 hover:text-white"}`,children:["",r.jsx("span",{className:"ml-1",children:((k=oe[_.id])==null?void 0:k.fire)||0})]})})]})]},_.id)}),r.jsx("div",{ref:ws})]}),r.jsx("div",{className:"border-t border-gray-700 p-4 fixed bottom-0 left-0 right-0 bg-gray-800 z-10 md:left-64 md:right-0",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:Te,onChange:_=>Ye(_.target.value),onKeyPress:_=>_.key==="Enter"&&at(),placeholder:"Tapez votre message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("input",{type:"file",onChange:ct,className:"hidden",accept:"image/*,.pdf,.doc,.docx"}),r.jsx("span",{className:"bg-gray-600 hover:bg-gray-500 p-2 rounded-lg text-gray-300 hover:text-white",children:""})]}),r.jsx("button",{onClick:Y,className:"bg-green-600 hover:bg-green-700 px-3 py-2 rounded-lg text-white text-sm font-medium",children:"+ Signal"}),r.jsx("button",{onClick:at,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white",children:"Envoyer"})]})})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Bienvenue sur Admin"}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Plateforme de trading en cours de dveloppement"})]})})})]}),pe&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Crer un signal"}),r.jsx("button",{onClick:()=>ee(!1),className:"text-gray-400 hover:text-white",children:""})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300",children:" Coller donnes TradingView"}),r.jsx("button",{onClick:()=>Qe(!jn),className:`text-xs px-2 py-1 rounded ${jn?"bg-blue-600 text-white":"bg-gray-600 text-gray-300"}`,children:jn?" Debug ON":" Debug OFF"})]}),r.jsx("div",{className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 min-h-[80px] flex items-center justify-center cursor-pointer",onPaste:jr,onDrop:_=>{_.preventDefault();const C=_.dataTransfer.getData("text");C&&jr({preventDefault:()=>{},clipboardData:{getData:k=>k==="text/html"?"":k==="text"?C:""}})},onDragOver:_=>_.preventDefault(),children:Yt?r.jsx("div",{className:"text-blue-400",children:" Traitement en cours..."}):r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:" Cliquez ici et collez (Ctrl+V)"}),r.jsx("div",{className:"text-xs text-gray-500",children:"ou glissez-dposez du texte"})]})}),Pi&&r.jsx("p",{className:"text-xs text-red-400 mt-1",children:Pi}),jn&&Zt&&r.jsxs("div",{className:"text-xs text-gray-400 mt-1 bg-gray-900 p-2 rounded",children:[r.jsx("div",{className:"font-semibold",children:"Debug:"}),r.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:Zt})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Collez directement depuis TradingView (Risk/Reward tool)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>fn({...Ve,type:"BUY"}),className:`px-3 py-2 rounded text-sm ${Ve.type==="BUY"?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:" BUY"}),r.jsx("button",{onClick:()=>fn({...Ve,type:"SELL"}),className:`px-3 py-2 rounded text-sm ${Ve.type==="SELL"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:" SELL"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Symbole"}),r.jsx("input",{type:"text",value:Ve.symbol,onChange:_=>fn({...Ve,symbol:_.target.value}),placeholder:"BTCUSD, EURUSD, etc.",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Timeframe"}),r.jsx("input",{type:"text",value:Ve.timeframe,onChange:_=>fn({...Ve,timeframe:_.target.value}),placeholder:"1 min, 5 min, 1H, etc.",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix d'entre"}),r.jsx("input",{type:"text",value:Ve.entry,onChange:_=>fn({...Ve,entry:_.target.value}),placeholder:"103474.00 USD",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Take Profit"}),r.jsx("input",{type:"text",value:Ve.takeProfit,onChange:_=>fn({...Ve,takeProfit:_.target.value}),placeholder:"104626.00 USD",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stop Loss"}),r.jsx("input",{type:"text",value:Ve.stopLoss,onChange:_=>fn({...Ve,stopLoss:_.target.value}),placeholder:"102862.00 USD",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),r.jsx("textarea",{value:Ve.description,onChange:_=>fn({...Ve,description:_.target.value}),placeholder:"Notes supplmentaires...",rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Capture d'cran"}),r.jsx("input",{type:"file",accept:"image/*",onChange:_=>{var V;const C=(V=_.target.files)==null?void 0:V[0];C&&fn({...Ve,image:C})},className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:()=>ee(!1),className:"flex-1 bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Annuler"}),r.jsx("button",{onClick:bs,className:"flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white",children:"Crer le signal"})]})]})]})})}),qs&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Ajouter un utilisateur"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:$s.email,onChange:_=>xa({...$s,email:_.target.value}),className:"w-full p-3 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500",placeholder:"email@exemple.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mot de passe"}),r.jsx("input",{type:"password",value:$s.password,onChange:_=>xa({...$s,password:_.target.value}),className:"w-full p-3 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500",placeholder:"Mot de passe"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>ur(!1),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Annuler"}),r.jsx("button",{onClick:Se,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Crer"})]})]})}),li&&pa&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Confirmer la suppression"}),r.jsxs("p",{className:"text-gray-300 mb-6",children:["tes-vous sr de vouloir supprimer l'utilisateur ",r.jsx("strong",{children:pa.email})," ? Cette action est irrversible."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>zr(!1),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Annuler"}),r.jsx("button",{onClick:()=>Xe(pa.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Supprimer"})]})]})}),Ot&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Ajouter un trade"}),r.jsx("button",{onClick:()=>Us(!1),className:"text-gray-400 hover:text-white",children:""})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" Coller donnes TradingView"}),r.jsx("div",{className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 min-h-[80px] flex items-center justify-center cursor-pointer",onPaste:$e,onDrop:_=>{_.preventDefault();const C=_.dataTransfer.getData("text");C&&$e({preventDefault:()=>{},clipboardData:{getData:k=>k==="text/html"?"":k==="text"?C:""}})},onDragOver:_=>_.preventDefault(),children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:" Cliquez ici et collez (Ctrl+V)"}),r.jsx("div",{className:"text-xs text-gray-500",children:"ou glissez-dposez du texte"})]})}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Collez directement depuis TradingView"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Ht({...Ke,type:"BUY"}),className:`px-3 py-2 rounded text-sm ${Ke.type==="BUY"?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:" BUY"}),r.jsx("button",{onClick:()=>Ht({...Ke,type:"SELL"}),className:`px-3 py-2 rounded text-sm ${Ke.type==="SELL"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:" SELL"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Symbole *"}),r.jsx("input",{type:"text",value:Ke.symbol,onChange:_=>Ht({...Ke,symbol:_.target.value}),placeholder:"BTC, ETH, NQ1!, etc.",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix d'entre *"}),r.jsx("input",{type:"text",value:Ke.entry,onChange:_=>Ht({...Ke,entry:_.target.value}),placeholder:"45000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix de sortie *"}),r.jsx("input",{type:"text",value:Ke.exit,onChange:_=>Ht({...Ke,exit:_.target.value}),placeholder:"46000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stop Loss"}),r.jsx("input",{type:"text",value:Ke.stopLoss,onChange:_=>Ht({...Ke,stopLoss:_.target.value}),placeholder:"44000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"P&L *"}),r.jsx("input",{type:"text",value:Ke.pnl,onChange:_=>Ht({...Ke,pnl:_.target.value}),placeholder:"+500 ou -200",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rsultat"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Ht({...Ke,status:"WIN"}),className:`px-3 py-2 rounded text-sm ${Ke.status==="WIN"?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:" WIN"}),r.jsx("button",{onClick:()=>Ht({...Ke,status:"LOSS"}),className:`px-3 py-2 rounded text-sm ${Ke.status==="LOSS"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:" LOSS"}),r.jsx("button",{onClick:()=>Ht({...Ke,status:"BE"}),className:`px-3 py-2 rounded text-sm ${Ke.status==="BE"?"bg-blue-600 text-white":"bg-gray-600 text-gray-300"}`,children:" BE"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),r.jsx("textarea",{value:Ke.notes,onChange:_=>Ht({...Ke,notes:_.target.value}),placeholder:"Notes sur le trade...",rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Image 1"}),r.jsx("input",{type:"file",accept:"image/*",onChange:_=>{var V;const C=(V=_.target.files)==null?void 0:V[0];C&&Ht({...Ke,image1:C})},className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Image 2"}),r.jsx("input",{type:"file",accept:"image/*",onChange:_=>{var V;const C=(V=_.target.files)==null?void 0:V[0];C&&Ht({...Ke,image2:C})},className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:()=>Us(!1),className:"flex-1 bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Annuler"}),r.jsx("button",{onClick:ie,className:"flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white",children:"Ajouter le trade"})]})]})]})})}),fe&&D&&it(D).length>0&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white",children:["Trades du ",D.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),r.jsx("button",{onClick:()=>be(!1),className:"text-gray-400 hover:text-white text-2xl",children:""})]}),r.jsx("div",{className:"space-y-4",children:it(D).map(_=>r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${_.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:_.type}),r.jsx("span",{className:"text-lg font-bold text-white",children:_.symbol})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:`text-lg font-bold ${_.pnl&&parseFloat(_.pnl)>=0?"text-green-400":"text-red-400"}`,children:[_.pnl&&parseFloat(_.pnl)>=0?"+":"",_.pnl||"0","$"]}),r.jsx("button",{onClick:()=>{hn(C=>C.filter(V=>V.id!==_.id)),be(!1)},className:"text-red-400 hover:text-red-300 text-xl font-bold",title:"Supprimer ce trade",children:""})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),r.jsx("span",{className:"text-white ml-2",children:_.entry})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Exit:"}),r.jsx("span",{className:"text-white ml-2",children:_.exit})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),r.jsx("span",{className:"text-white ml-2",children:_.stopLoss})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Status:"}),r.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${_.status==="WIN"?"bg-green-600 text-white":_.status==="LOSS"?"bg-red-600 text-white":"bg-blue-600 text-white"}`,children:_.status})]})]}),_.notes&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Notes:"}),r.jsx("p",{className:"text-white mt-1",children:_.notes})]}),(_.image1||_.image2)&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Images:"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[_.image1&&r.jsx("div",{className:"relative",children:r.jsx("img",{src:_.image1 instanceof File?URL.createObjectURL(_.image1):_.image1,alt:"Trade image 1",className:"w-20 h-20 object-cover rounded border border-gray-600"})}),_.image2&&r.jsx("div",{className:"relative",children:r.jsx("img",{src:_.image2 instanceof File?URL.createObjectURL(_.image2):_.image2,alt:"Trade image 2",className:"w-20 h-20 object-cover rounded border border-gray-600"})})]})]}),r.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400",children:r.jsxs("span",{children:["Ajout le ",_.timestamp]})})]},_.id))}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:r.jsx("button",{onClick:()=>be(!1),className:"w-full bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Fermer"})})]})})}),Ee&&U&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white",children:["Signaux du ",U.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),r.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-white text-2xl",children:""})]}),r.jsx("div",{className:"space-y-4",children:(()=>{const _=Bt(U);return console.log(" [POPUP ADMIN] Signaux trouvs:",_.length),_.forEach(C=>{console.log(" [POPUP ADMIN] Signal individuel:",{id:C.id,symbol:C.symbol,image:C.image,attachment_data:C.attachment_data,ALL_KEYS:Object.keys(C)})}),_})().map(_=>{var C;return r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${_.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:_.type}),r.jsx("span",{className:"text-lg font-bold text-white",children:_.symbol}),r.jsx("span",{className:"text-sm text-gray-400",children:_.timeframe})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${_.status==="WIN"?"bg-green-600 text-white":_.status==="LOSS"?"bg-red-600 text-white":_.status==="BE"?"bg-blue-600 text-white":"bg-yellow-600 text-white"}`,children:_.status})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),r.jsx("span",{className:"text-white ml-2",children:_.entry})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Take Profit:"}),r.jsx("span",{className:"text-white ml-2",children:_.takeProfit})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),r.jsx("span",{className:"text-white ml-2",children:_.stopLoss})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Channel:"}),r.jsx("span",{className:"text-white ml-2",children:((C=F.find(V=>V.id===_.channel_id))==null?void 0:C.fullName)||_.channel_id})]})]}),_.pnl&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"P&L:"}),r.jsx("span",{className:`ml-2 font-bold ${_.pnl.includes("+")||_.pnl.includes("GAGNANT")?"text-green-400":_.pnl.includes("-")||_.pnl.includes("PERDANT")?"text-red-400":"text-yellow-400"}`,children:_.pnl})]}),_.description&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Description:"}),r.jsx("p",{className:"text-white mt-1",children:_.description})]}),_.attachment_data&&r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Image du signal:"}),r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:_.attachment_data,alt:"Signal screenshot",className:"max-w-full rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Rt(_.attachment_data)})})]}),r.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400",children:r.jsxs("span",{children:["Cr le ",_.timestamp]})})]},_.id)})}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:r.jsx("button",{onClick:()=>L(!1),className:"w-full bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Fermer"})})]})})}),zt&&r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>Rt(null),children:r.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[r.jsx("img",{src:zt,alt:"Image agrandie",className:"max-w-full max-h-full object-contain rounded-lg",onClick:_=>_.stopPropagation()}),r.jsx("button",{onClick:()=>Rt(null),className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white rounded-full w-10 h-10 flex items-center justify-center text-xl",children:""})]})})]})}const H5=({channelId:s="general-chat"})=>{const[e,t]=K.useState([]),[n,a]=K.useState(""),[l,u]=K.useState(null),[h,g]=K.useState(null),[p,y]=K.useState(""),[w,v]=K.useState(null),[A,R]=K.useState(null),[z,q]=K.useState(!1),[Q,pe]=K.useState(!1),ee=K.useRef(null);K.useEffect(()=>{q(!0);const oe=aj(Qh,`chat-${s}`),Ce=AO(oe,CO("createdAt","asc")),re=MO(Ce,Le=>{const O=Le.docs.map(le=>{var Re,je,Te;return{id:le.id,...le.data(),time:((Te=(je=(Re=le.data().createdAt)==null?void 0:Re.toDate)==null?void 0:je.call(Re))==null?void 0:Te.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||"00:00"}});t(O),q(!1)},Le=>{console.error("Erreur Firebase:",Le),q(!1)});return()=>re()},[s]),K.useEffect(()=>{var oe;(oe=ee.current)==null||oe.scrollIntoView({behavior:"smooth"})},[e]);const fe=async()=>{if(!(!n.trim()||Q)){pe(!0);try{const oe=aj(Qh,`chat-${s}`);await kO(oe,{text:n.trim(),sender:"Utilisateur",senderId:"user_1",replyTo:(l==null?void 0:l.id)||null,edited:!1,deleted:!1,createdAt:ex()}),a(""),u(null)}catch(oe){console.error("Erreur ajout message:",oe)}finally{pe(!1)}}},be=async(oe,Ce)=>{if(!Q){pe(!0);try{const re=Xx(Qh,`chat-${s}`,oe);await fj(re,{...Ce,updatedAt:ex()})}catch(re){console.error("Erreur modification message:",re)}finally{pe(!1)}}},Ee=oe=>{g(oe.id),y(oe.text),v(null)},L=()=>{p.trim()&&h&&be(h,{text:p.trim(),edited:!0}),g(null),y("")},D=async oe=>{if(!Q){pe(!0);try{const Ce=Xx(Qh,`chat-${s}`,oe);await fj(Ce,{deleted:!0,text:"Message supprim",deletedAt:ex()}),v(null)}catch(Ce){console.error("Erreur suppression message:",Ce)}finally{pe(!1)}}},I=(oe,Ce)=>{oe.preventDefault(),v({x:oe.clientX,y:oe.clientY,msg:Ce})},U=(oe,Ce)=>{const re=setTimeout(()=>{const Le=oe.touches[0];v({x:Le.clientX,y:Le.clientY,msg:Ce})},500);R(re)},$=()=>{A&&(clearTimeout(A),R(null))},X=()=>v(null),P=(oe,Ce)=>{oe==="reply"&&u(Ce),oe==="edit"&&Ee(Ce),oe==="delete"&&D(Ce.id),X()},zt=oe=>oe.senderId==="user_1",Rt=oe=>e.find(Ce=>Ce.id===oe.replyTo);return r.jsxs("div",{style:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",fontFamily:"Arial, sans-serif",background:"#1a202c"},onClick:X,children:[r.jsxs("div",{style:{flex:1,overflowY:"auto",background:"#2d3748",padding:"15px"},children:[z&&r.jsx("div",{style:{textAlign:"center",color:"#a0aec0",padding:"20px",fontSize:"14px"},children:" Chargement des messages..."}),e.map(oe=>{const Ce=zt(oe),re=Rt(oe);return r.jsx("div",{style:{display:"flex",justifyContent:Ce?"flex-end":"flex-start",marginBottom:"8px"},children:r.jsxs("div",{style:{maxWidth:"70%",padding:"8px 12px",borderRadius:"18px",background:Ce?"#4299e1":"#4a5568",color:Ce?"#ffffff":"#e2e8f0",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)",fontSize:"14px",cursor:"pointer",userSelect:"none"},onContextMenu:Le=>I(Le,oe),onTouchStart:Le=>U(Le,oe),onTouchEnd:$,onTouchMove:$,children:[!Ce&&r.jsx("div",{style:{fontWeight:"bold",color:"#4299e1",fontSize:"13px",marginBottom:"3px"},children:oe.sender}),re&&r.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",borderLeft:"3px solid #4299e1",margin:"4px 0 8px 0",background:"rgba(66, 153, 225, 0.1)",padding:"8px 10px",borderRadius:"8px",minHeight:"auto"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"11px",marginBottom:"3px"},children:[" ",re.sender]}),r.jsx("div",{style:{wordWrap:"break-word",lineHeight:"1.3"},children:re.text})]}),r.jsx("div",{children:oe.deleted?r.jsx("span",{style:{color:"#718096",fontStyle:"italic"},children:" Message supprim"}):h===oe.id?r.jsxs("div",{children:[r.jsx("input",{value:p,onChange:Le=>y(Le.target.value),onKeyDown:Le=>{Le.key==="Enter"&&L(),Le.key==="Escape"&&(g(null),y(""))},onBlur:L,autoFocus:!0,style:{width:"100%",padding:"6px",border:"1px solid #4299e1",borderRadius:"4px",fontSize:"14px",outline:"none",background:"#2d3748",color:"#e2e8f0"}}),r.jsx("div",{style:{fontSize:"11px",color:"#a0aec0",marginTop:"2px"},children:"Entre = sauver, chap = annuler"})]}):oe.text}),r.jsxs("div",{style:{fontSize:"11px",color:"#a0aec0",textAlign:"right",marginTop:"4px"},children:[oe.time,oe.edited&&r.jsx("span",{style:{color:"#4299e1"},children:" "})]})]})},oe.id)}),r.jsx("div",{ref:ee})]}),w&&r.jsxs("div",{style:{position:"fixed",left:w.x,top:w.y,background:"#4a5568",border:"1px solid #2d3748",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e3,minWidth:"140px",overflow:"hidden"},onClick:oe=>oe.stopPropagation(),children:[r.jsx("div",{style:{padding:"10px 15px",cursor:"pointer",fontSize:"14px",color:"#4299e1",fontWeight:"500",borderBottom:"1px solid #2d3748"},onClick:()=>P("reply",w.msg),children:" Rpondre"}),w.msg.senderId==="user_1"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{padding:"10px 15px",cursor:"pointer",fontSize:"14px",color:"#ed8936",fontWeight:"500",borderBottom:"1px solid #2d3748"},onClick:()=>P("edit",w.msg),children:" Modifier"}),r.jsx("div",{style:{padding:"10px 15px",cursor:"pointer",fontSize:"14px",color:"#f56565",fontWeight:"500"},onClick:()=>P("delete",w.msg),children:" Supprimer"})]})]}),r.jsxs("div",{style:{padding:"15px",background:"#1a202c",borderTop:"1px solid #2d3748"},children:[l&&r.jsx("div",{style:{marginBottom:"8px",background:"#2d3748",padding:"8px 12px",borderRadius:"8px",fontSize:"13px",borderLeft:"3px solid #ed8936"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsxs("div",{children:[r.jsxs("strong",{style:{color:"#e2e8f0"},children:["Rponse  ",l.sender,":"]}),r.jsx("div",{style:{color:"#a0aec0",marginTop:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l.text})]}),r.jsx("span",{style:{cursor:"pointer",color:"#f56565",fontSize:"16px"},onClick:()=>u(null),children:""})]})}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("input",{style:{flex:1,padding:"12px 16px",borderRadius:"25px",border:"1px solid #4a5568",fontSize:"14px",outline:"none",background:"#2d3748",color:"#e2e8f0"},value:n,onChange:oe=>a(oe.target.value),onKeyDown:oe=>oe.key==="Enter"&&fe(),placeholder:"crire un message..."}),r.jsx("button",{style:{padding:"12px 20px",borderRadius:"25px",backgroundColor:Q?"#718096":"#4299e1",color:"#fff",border:"none",fontSize:"14px",cursor:Q?"not-allowed":"pointer",fontWeight:"bold",opacity:Q?.7:1},onClick:fe,disabled:!n.trim()||Q,children:Q?" Envoi...":" Envoyer"})]})]})]})};function G5(){const[s,e]=K.useState(!1);return r.jsxs("div",{style:{padding:"20px"},children:[r.jsx("h1",{children:"Livestream Trading"}),r.jsx("button",{onClick:()=>e(!s),children:s?"Arrter Live":"Dmarrer Live"}),s&&r.jsx("iframe",{src:"https://tote-livestream-033.app.100ms.live/streaming/meeting/hzs-ukns-nts",width:"100%",height:"600px",style:{marginTop:"20px",border:"none"}})]})}function W5(){const[s,e]=K.useState(!1);return r.jsxs("div",{style:{padding:"20px"},children:[r.jsx("h1",{children:"Livestream Trading"}),r.jsx("button",{onClick:()=>e(!s),children:s?"Arrter Live":"Dmarrer Live"}),s&&r.jsx("iframe",{src:"https://tote-livestream-033.app.100ms.live/streaming/meeting/hzs-ukns-nts",width:"100%",height:"600px",style:{marginTop:"20px",border:"none"}})]})}const Y5=()=>{const[s,e]=K.useState("default"),[t,n]=K.useState(null);K.useEffect(()=>{"Notification"in window&&e(Notification.permission)},[]);const a=async()=>{if(!("Notification"in window))return console.log("Ce navigateur ne supporte pas les notifications"),!1;try{const h=await Notification.requestPermission();return e(h),h==="granted"}catch(h){return console.error("Erreur lors de la demande de permission:",h),!1}};return{permission:s,subscription:t,requestPermission:a,subscribeToPush:async()=>{if(s!=="granted"&&!await a())return null;try{const g=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BEl62iUYgUivxIkv69yViEuiBIa1l9aTvkV8AGjfHXgBxGXGNzrKzJULdJDHNVpDBiGFjJSqXr6cHgDmu7QN4rE"});return n(g),console.log("Abonnement push cr:",g),g}catch(h){return console.error("Erreur lors de l'abonnement push:",h),null}},sendTestNotification:async()=>{if(s!=="granted"){console.log("Permission non accorde");return}try{await(await navigator.serviceWorker.ready).showNotification("Test TheTheTrader",{body:"Ceci est un test de notification !",icon:"/favicon.png",badge:"/favicon.png"})}catch(h){console.error("Erreur lors de l'envoi de notification:",h)}}}},K5=()=>{const[s,e]=K.useState(!1);return K.useEffect(()=>{const t=()=>{const a=window.matchMedia("(display-mode: standalone)").matches,l=window.navigator.standalone===!0||!1,u=document.fullscreenElement!==null;try{e(a||l||u)}catch{e(!1)}};t();const n=window.matchMedia("(display-mode: standalone)");return n.addEventListener("change",t),()=>{n.removeEventListener("change",t)}},[]),{isPWA:s}},Q5=()=>{var zt,Rt,oe,Ce;const[s,e]=K.useState(null),[t,n]=K.useState(!1),[a,l]=K.useState("home");K.useEffect(()=>{window.setCurrentPage=l,window.getCurrentPage=()=>a},[a]),K.useEffect(()=>{window.location.pathname==="/admin"&&(l("admin"),console.log(" Admin auth check:",localStorage.getItem("adminAuthenticated")))},[]),K.useEffect(()=>{const re=()=>{window.location.hash.substring(1)==="livestream"&&l("livestream")};return re(),window.addEventListener("hashchange",re),()=>{window.removeEventListener("hashchange",re)}},[]),K.useEffect(()=>{console.log(" Initialisation notifications push..."),tv().then(()=>{console.log(" Notifications push initialises")}).catch(re=>{console.error(" Erreur initialisation notifications:",re)})},[]),K.useEffect(()=>{const re=document.querySelector('link[rel="manifest"]');re&&(a==="admin"?re.href="/manifest-admin.json":re.href="/manifest.json")},[a]);const[u,h]=K.useState(""),[g,p]=K.useState(""),[y,w]=K.useState("crypto"),[v,A]=K.useState("crypto"),[R,z]=K.useState(null),[q,Q]=K.useState(!1),[pe,ee]=K.useState({fondamentaux:[{type:"FORMATION",symbol:"ANALYSE",entry:"Module 1: Bases du trading",takeProfit:"Support/Rsistance",stopLoss:"Thorie + pratique",rr:"ducation",status:"ACTIVE",pnl:""},{type:"FORMATION",symbol:"STRATGIE",entry:"Module 2: Stratgies avances",takeProfit:"Risk Management",stopLoss:"Psychologie trading",rr:"Formation",status:"ACTIVE",pnl:""}],"letsgooo-model":[{type:"MODLE",symbol:"SETUP",entry:"Configuration modle pro",takeProfit:"Validation setup",stopLoss:"Optimisation paramtres",rr:"Pro",status:"WIN",pnl:"+$850"},{type:"MODLE",symbol:"BACKTEST",entry:"Rsultats backtest",takeProfit:"Performance valide",stopLoss:"Analyse historique",rr:"Modle",status:"ACTIVE",pnl:""}],crypto:[],futur:[],forex:[],"general-chat":[],"profit-loss":[],calendar:[],"trading-journal":[]}),[fe,be]=K.useState({beginners:0,analyses:0,generated:0}),{permission:Ee,requestPermission:L,sendTestNotification:D}=Y5(),{isPWA:I}=K5();K.useEffect(()=>(I&&s?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height=""}),[I,s]),K.useEffect(()=>{const re=new Image;re.src="/images/tradingview-chart.png"},[]),K.useEffect(()=>{const re=Le=>{Le.preventDefault(),window.deferredPrompt=Le};return window.addEventListener("beforeinstallprompt",re),()=>{window.removeEventListener("beforeinstallprompt",re)}},[]),K.useEffect(()=>{const re={beginners:1e3,analyses:300,generated:5e4},Le=2e3,O=60,le=Le/O,je=setTimeout(()=>{let Te=0;const Ye=setInterval(()=>{Te++;const Pe=Te/O;be({beginners:Math.floor(re.beginners*Pe),analyses:Math.floor(re.analyses*Pe),generated:Math.floor(re.generated*Pe)}),Te>=O&&(clearInterval(Ye),be(re))},le)},500);return()=>{clearTimeout(je)}},[]);const U={fondamentaux:{title:"#fondamentaux",messages:[{id:1,user:"TheTheTrader",time:"09:15:30",type:"formation",content:{title:" Module 1: Les bases du trading",image:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400&h=250&fit=crop",description:"Introduction complte aux marchs financiers",duration:"45 min",progress:"100%",topics:["Types de marchs","Ordres de base","Gestion du risque"]}},{id:2,user:"TheTheTrader",time:"10:30:45",type:"formation",content:{title:" Module 2: Analyse technique",image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=250&fit=crop",description:"Matrisez les indicateurs techniques",duration:"1h20",progress:"75%",topics:["Support/Rsistance","Indicateurs","Patterns"]}},{id:3,user:"TheTheTrader",time:"11:45:20",type:"formation",content:{title:" Module 3: Psychologie du trader",image:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=250&fit=crop",description:"Dveloppez votre mindset de trader",duration:"55 min",progress:"60%",topics:["Gestion motionnelle","Discipline","Patience"]}}]},"letsgooo-model":{title:"#letsgooo-model",messages:[{id:1,user:"TheTheTrader",time:"14:20:15",type:"formation",content:{title:" Stratgie Letsgooo - Partie 1",image:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400&h=250&fit=crop",description:"Dcouvrez notre stratgie exclusive",duration:"1h30",progress:"100%",topics:["Setup d'entre","Timing parfait","Gestion"]}},{id:2,user:"TheTheTrader",time:"15:45:30",type:"formation",content:{title:" Letsgooo - Applications pratiques",image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=250&fit=crop",description:"Exemples concrets en temps rel",duration:"2h15",progress:"80%",topics:["Cas d'tude","Backtesting","Optimisation"]}}]},crypto:{title:"#crypto",messages:[{id:1,user:"TheTheTrader",time:"02:03:22",type:"signal",status:"ACTIVE",content:{title:" Signal BUY BTCUSD Futures  1 min",details:[{icon:"",label:"Entre",value:"103474.00 USD"},{icon:"",label:"Stop Loss",value:"102862.00 USD"},{icon:"",label:"Take Profit",value:"104626.00 USD"},{icon:"",label:"Ratio R:R",value:" 1.88"}],reactions:[{emoji:"",count:12},{emoji:"",count:8},{emoji:"",count:15}]}},{id:2,user:"TheTheTrader",time:"02:06:33",type:"update",content:`Signal prcdent: Objectif 1 atteint ! 

+1.2% en 3 minutes - flicitations  tous les membres qui ont suivi `,reactions:[{emoji:"",count:24},{emoji:"",count:18},{emoji:"",count:12}]},{id:3,user:"TheTheTrader",time:"02:15:45",type:"signal",status:"ACTIVE",content:{title:" Signal SELL ETHUSD Futures  5 min",details:[{icon:"",label:"Entre",value:"2845.50 USD"},{icon:"",label:"Stop Loss",value:"2875.20 USD"},{icon:"",label:"Take Profit",value:"2815.80 USD"},{icon:"",label:"Ratio R:R",value:" 1.65"}],reactions:[{emoji:"",count:9},{emoji:"",count:6},{emoji:"",count:11}]}}]},forex:{title:"#forex",messages:[{id:1,user:"TheTheTrader",time:"01:45:12",type:"signal",status:"ACTIVE",content:{title:" Signal BUY EURUSD  15 min",details:[{icon:"",label:"Entre",value:"1.0845 EUR"},{icon:"",label:"Stop Loss",value:"1.0820 EUR"},{icon:"",label:"Take Profit",value:"1.0895 EUR"},{icon:"",label:"Ratio R:R",value:" 2.00"}],reactions:[{emoji:"",count:15},{emoji:"",count:9}]}},{id:2,user:"TheTheTrader",time:"01:52:30",type:"update",content:` Signal GBPUSD ferm en profit +45 pips
 Excellent momentum sur les paires EUR today`,reactions:[{emoji:"",count:21},{emoji:"",count:12}]},{id:3,user:"TheTheTrader",time:"02:10:15",type:"signal",status:"ACTIVE",content:{title:" Signal SELL USDJPY  30 min",details:[{icon:"",label:"Entre",value:"148.25 JPY"},{icon:"",label:"Stop Loss",value:"148.85 JPY"},{icon:"",label:"Take Profit",value:"147.45 JPY"},{icon:"",label:"Ratio R:R",value:" 1.75"}],reactions:[{emoji:"",count:8},{emoji:"",count:12},{emoji:"",count:6}]}}]},futur:{title:"#futur",messages:[{id:1,user:"TheTheTrader",time:"01:30:45",type:"signal",status:"ACTIVE",content:{title:" Signal BUY GOLD Futures  1H",details:[{icon:"",label:"Entre",value:"2045.50 USD"},{icon:"",label:"Stop Loss",value:"2038.20 USD"},{icon:"",label:"Take Profit",value:"2058.80 USD"},{icon:"",label:"Ratio R:R",value:" 1.85"}],reactions:[{emoji:"",count:18},{emoji:"",count:11}]}},{id:2,user:"TheTheTrader",time:"02:05:20",type:"signal",status:"ACTIVE",content:{title:" Signal BUY SP500 Futures  4H",details:[{icon:"",label:"Entre",value:"4850.25 USD"},{icon:"",label:"Stop Loss",value:"4835.80 USD"},{icon:"",label:"Take Profit",value:"4880.50 USD"},{icon:"",label:"Ratio R:R",value:" 2.10"}],reactions:[{emoji:"",count:14},{emoji:"",count:9},{emoji:"",count:7}]}}]},education:{title:"#education",messages:[{id:1,user:"TheTheTrader",time:"09:00:00",type:"message",content:` Cours du jour: Les bases du Money Management

 Rgle #1: Ne jamais risquer plus de 2% par trade
 Rgle #2: Toujours dfinir votre SL avant d'entrer`,reactions:[{emoji:"",count:45},{emoji:"",count:32},{emoji:"",count:28}]},{id:2,user:"TheTheTrader",time:"09:15:30",type:"message",content:` Exercice pratique: Calculez votre position size

Compte: 10,000
Risque max: 2%
Distance SL: 50 pips

Quelle lot size utilisez-vous? `,reactions:[{emoji:"",count:23},{emoji:"",count:15}]},{id:3,user:"TheTheTrader",time:"10:30:00",type:"message",content:` Analyse technique: Les 3 niveaux cls

 Support: Zone o le prix rebondit
 Rsistance: Zone o le prix recule
 Breakout: Rupture d'un niveau

Quel niveau surveillez-vous aujourd'hui? `,reactions:[{emoji:"",count:31},{emoji:"",count:18},{emoji:"",count:12}]}]},calendar:{title:" Journal Signaux",messages:[{id:1,user:"TheTheTrader",time:"08:00:00",type:"calendar",content:" Performance Trading - Janvier 2025",calendarData:{stats:{winRate:"78",totalPnL:"+2,450",totalTrades:28,bestDay:"+156",worstDay:"-89"},days:[{date:1,trades:2,pnl:"+45",status:"win"},{date:2,trades:1,pnl:"+12",status:"win"},{date:3,trades:3,pnl:"-23",status:"loss"},{date:4,trades:0,pnl:"0",status:"none"},{date:5,trades:0,pnl:"0",status:"none"},{date:6,trades:2,pnl:"+67",status:"win"},{date:7,trades:1,pnl:"0",status:"be"},{date:8,trades:2,pnl:"+89",status:"win"},{date:9,trades:3,pnl:"+156",status:"win"},{date:10,trades:1,pnl:"-45",status:"loss"},{date:11,trades:0,pnl:"0",status:"none"},{date:12,trades:0,pnl:"0",status:"none"},{date:13,trades:2,pnl:"+34",status:"win"},{date:14,trades:1,pnl:"0",status:"be"},{date:15,trades:2,pnl:"+78",status:"win"}]},reactions:[{emoji:"",count:34},{emoji:"",count:28},{emoji:"",count:19}]}]},"general-chat":{title:"#general-chat",messages:[{id:1,user:"Trader_Pro",time:"13:20:15",type:"message",content:`Salut tout le monde ! 

Quelqu'un a des questions sur le module de formation ?`,reactions:[{emoji:"",count:8},{emoji:"",count:5}]},{id:2,user:"Crypto_Lover",time:"13:25:42",type:"message",content:`Oui ! J'ai un doute sur la gestion du risque...

Comment calculer la taille de position ?`,reactions:[{emoji:"",count:3},{emoji:"",count:7}]},{id:3,user:"TheTheTrader",time:"13:30:00",type:"message",content:`Excellente question ! 

Rgle simple: Risque max 1-2% par trade

Exemple: Compte 10k  Risque max 100-200

Je prpare un guide dtaill !`,reactions:[{emoji:"",count:15},{emoji:"",count:12}]}]},"profit-loss":{title:"#profit-loss",messages:[{id:1,user:"Crypto_Trader_23",time:"08:00:00",type:"message",content:` Mes rsultats de la semaine:

 P&L Total: +$847
 Win Rate: 85.7%
 Meilleur trade: +$156 (BTC)
 Pire trade: -$45 (ETH)

 Premire semaine positive !`,reactions:[{emoji:"",count:25},{emoji:"",count:18}]},{id:2,user:"Forex_Master",time:"09:15:30",type:"message",content:` Mes stats dtailles:

 Trades gagnants: 12/15
 Trades perdants: 3/15
 Ratio moyen: 1.8:1
 Drawdown max: 2.1%

 Objectif: Maintenir >80% win rate`,reactions:[{emoji:"",count:22},{emoji:"",count:15}]},{id:3,user:"Futures_Pro",time:"10:30:45",type:"message",content:` Rsultats exceptionnels cette semaine:

 P&L: +$2,156
 Win Rate: 92.3%
 15 trades gagnants sur 16
 Seulement 1 trade perdant

 La stratgie Letsgooo fonctionne parfaitement !`,reactions:[{emoji:"",count:38},{emoji:"",count:29}]},{id:4,user:"Beginner_Trader",time:"11:45:20",type:"message",content:` Mes premiers rsultats:

 P&L: +$89
 Win Rate: 75%
 3 trades gagnants sur 4
 1 trade perdant: -$23

 Merci pour la formation, a marche !`,reactions:[{emoji:"",count:12},{emoji:"",count:8}]},{id:5,user:"Scalping_King",time:"12:20:15",type:"message",content:` Session de scalping russie:

 P&L: +$456
 Win Rate: 88.9%
 8 trades gagnants sur 9
 Session de 2h

 Le scalping avec les signaux crypto est incroyable !`,reactions:[{emoji:"",count:31},{emoji:"",count:24}]}]}};(zt=U[y])!=null&&zt.messages;const $=async()=>{if(u&&g){if(u==="admin"&&g==="admin123"){localStorage.setItem("adminAuthenticated","true"),l("admin"),n(!1);return}console.log("Connexion utilisateur:",u),e({id:"user_"+Date.now(),email:u}),n(!1)}},X=async()=>{e(null),h(""),p(""),l("home")},P=()=>{const re={"mentions-legales":{title:"Mentions lgales",content:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Mentions lgales"}),r.jsxs("div",{className:"space-y-4 text-gray-300",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Dnomination sociale :"})," TheTheTrader"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Activit :"})," Plateforme ducative de trading et signaux financiers"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Hbergeur :"})," Netlify, Inc. - 2325 3rd Street, Suite 296, San Francisco, CA 94107"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Directeur de publication :"})," TheTheTrader"]}),r.jsx("p",{className:"text-sm text-gray-400",children:"Dernire mise  jour : Janvier 2025"})]})]})},"politique-confidentialite":{title:"Politique de confidentialit",content:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Politique de confidentialit"}),r.jsxs("div",{className:"space-y-4 text-gray-300",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Collecte des donnes"}),r.jsx("p",{children:"Nous collectons uniquement les donnes ncessaires au fonctionnement de notre service : adresse email pour la cration de compte."}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Utilisation des donnes"}),r.jsx("p",{children:"Vos donnes sont utilises pour vous fournir l'accs  nos signaux de trading et contenus ducatifs."}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Protection des donnes"}),r.jsx("p",{children:"Nous mettons en place toutes les mesures techniques et organisationnelles pour protger vos donnes personnelles."}),r.jsx("p",{className:"text-sm text-gray-400",children:"Conformment au RGPD. Dernire mise  jour : Janvier 2025"})]})]})},"conditions-utilisation":{title:"Conditions d'utilisation",content:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Conditions d'utilisation"}),r.jsxs("div",{className:"space-y-4 text-gray-300",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Acceptation des conditions"}),r.jsx("p",{children:"En utilisant TheTheTrader, vous acceptez ces conditions d'utilisation."}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Services fournis"}),r.jsx("p",{children:"Nous fournissons des signaux de trading, du contenu ducatif et des outils d'analyse  des fins informatives uniquement."}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Responsabilits"}),r.jsx("p",{children:"Vous tes seul responsable de vos dcisions de trading. Nos services ne constituent pas des conseils financiers personnaliss."}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Limitation de responsabilit"}),r.jsx("p",{children:"TheTheTrader ne peut tre tenu responsable des pertes financires rsultant de l'utilisation de nos services."}),r.jsx("p",{className:"text-sm text-gray-400",children:"Dernire mise  jour : Janvier 2025"})]})]})},"avertissement-risques":{title:"Avertissement sur les risques",content:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Avertissement sur les risques"}),r.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6 mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-red-400 text-xl flex-shrink-0 mt-1",children:""}),r.jsxs("div",{className:"space-y-4 text-gray-300",children:[r.jsx("p",{children:r.jsx("strong",{className:"text-red-400",children:"RISQUE LEV DE PERTE EN CAPITAL"})}),r.jsx("p",{children:"Le trading de produits financiers comporte un risque lev de perte en capital. Vous pourriez perdre tout ou partie de votre investissement initial."}),r.jsxs("p",{children:[r.jsx("strong",{children:"Les performances passes ne garantissent pas les rsultats futurs."})," Les signaux et analyses prsents sur cette plateforme ne constituent pas des conseils en investissement personnaliss."]}),r.jsx("p",{children:r.jsx("strong",{children:"Ne tradez qu'avec des fonds que vous pouvez vous permettre de perdre."})}),r.jsx("p",{children:"Les produits drivs (CFD, Forex, Futures) sont particulirement risqus en raison de l'effet de levier."}),r.jsxs("p",{children:[r.jsx("strong",{children:"Consultez un conseiller financier professionnel"})," avant toute dcision d'investissement importante."]})]})]})})]})},"conflits-interets":{title:"Conflits d'intrts",content:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Conflits d'intrts"}),r.jsxs("div",{className:"space-y-4 text-gray-300",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Transparence"}),r.jsx("p",{children:"TheTheTrader s'engage  une transparence totale concernant les potentiels conflits d'intrts."}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Partenariats"}),r.jsx("p",{children:"Nous pouvons recevoir des commissions de la part de brokers partenaires. Ces partenariats n'influencent pas nos analyses."}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Positions personnelles"}),r.jsx("p",{children:"Nos analystes peuvent dtenir des positions sur les instruments analyss. Cela sera mentionn le cas chant."}),r.jsx("p",{className:"text-sm text-gray-400",children:"Dernire mise  jour : Janvier 2025"})]})]})},"cookies-traceurs":{title:"Cookies et traceurs",content:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Cookies et traceurs"}),r.jsxs("div",{className:"space-y-4 text-gray-300",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Utilisation des cookies"}),r.jsx("p",{children:"Nous utilisons des cookies pour amliorer votre exprience utilisateur et analyser l'utilisation de notre site."}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Types de cookies"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Cookies techniques :"})," Ncessaires au fonctionnement du site"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Cookies analytiques :"})," Pour comprendre l'utilisation du site"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Cookies de prfrences :"})," Pour mmoriser vos choix"]})]}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Gestion des cookies"}),r.jsx("p",{children:"Vous pouvez grer vos prfrences de cookies dans les paramtres de votre navigateur."}),r.jsx("p",{className:"text-sm text-gray-400",children:"Dernire mise  jour : Janvier 2025"})]})]})},"support-client":{title:"Support client",content:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Support client"}),r.jsxs("div",{className:"space-y-4 text-gray-300",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Comment nous contacter"}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Email :"})," support@tradingpourlesnuls.com"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Heures d'ouverture :"})," Lundi - Vendredi, 9h00 - 18h00 (CET)"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Temps de rponse moyen :"})," 24-48 heures"]})]})}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Questions frquentes"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("p",{children:r.jsx("strong",{children:"Q: Comment accder aux signaux ?"})}),r.jsx("p",{children:"R: Crez un compte et connectez-vous pour accder  tous nos signaux en temps rel."})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("p",{children:r.jsx("strong",{children:"Q: Les signaux sont-ils gratuits ?"})}),r.jsx("p",{children:"R: Oui, notre service est actuellement gratuit pour tous les utilisateurs inscrits."})]})]})]})]})},"signalement-incident":{title:"Signalement d'incident",content:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Signalement d'incident"}),r.jsxs("div",{className:"space-y-4 text-gray-300",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Signaler un problme"}),r.jsx("p",{children:"Si vous rencontrez un problme technique ou souhaitez signaler un incident, contactez-nous immdiatement."}),r.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-6",children:[r.jsx("h4",{className:"text-yellow-400 font-semibold mb-3",children:" Signalement d'urgence"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Email prioritaire :"})," incident@tradingpourlesnuls.com"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Objet :"})," [URGENT] - Description du problme"]})]})]}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Types d'incidents  signaler"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[r.jsx("li",{children:"Problmes de scurit"}),r.jsx("li",{children:"Bugs critiques de la plateforme"}),r.jsx("li",{children:"Erreurs dans les signaux"}),r.jsx("li",{children:"Problmes d'accs au compte"})]})]})]})},"nous-contacter":{title:"Nous contacter",content:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Nous contacter"}),r.jsxs("div",{className:"space-y-4 text-gray-300",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Informations de contact"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsx("h4",{className:"text-white font-semibold mb-3",children:" Contact gnral"}),r.jsx("p",{children:"contact@tradingpourlesnuls.com"})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsx("h4",{className:"text-white font-semibold mb-3",children:" Support technique"}),r.jsx("p",{children:"support@tradingpourlesnuls.com"})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsx("h4",{className:"text-white font-semibold mb-3",children:" Partenariats"}),r.jsx("p",{children:"business@tradingpourlesnuls.com"})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsx("h4",{className:"text-white font-semibold mb-3",children:" Questions lgales"}),r.jsx("p",{children:"legal@tradingpourlesnuls.com"})]})]}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Horaires d'ouverture"}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-6",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Lundi - Vendredi :"})," 9h00 - 18h00 (CET)"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Week-end :"})," Ferm"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Jours fris :"})," Ferm"]})]})})]})]})},livestream:{title:"Livestream Trading",content:s?r.jsx(G5,{}):r.jsx(W5,{})}};if(a==="home"||!re[a])return null;const Le=re[a];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[r.jsxs("nav",{className:"flex items-center justify-between p-4 sm:p-6 relative z-50 border-b border-purple-700/50",children:[r.jsxs("button",{onClick:()=>l("home"),className:"flex items-center gap-2 text-gray-300 hover:text-white transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Retour"]}),r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:Le.title}),r.jsx("div",{className:"w-20"})]}),r.jsx("div",{className:"max-w-4xl mx-auto p-6 sm:p-8",children:Le.content})]})};return a==="admin"?localStorage.getItem("adminAuthenticated")==="true"?r.jsx(z5,{}):r.jsx(_5,{onLogin:()=>{l("temp"),setTimeout(()=>l("admin"),100)}}):s?r.jsxs("div",{className:"relative",children:[r.jsx(b5,{}),r.jsx("button",{onClick:X,className:"hidden md:block fixed bottom-4 left-4 bg-gray-700/80 text-gray-300 p-2 rounded-full hover:bg-gray-600/80 hover:text-white transition-all duration-200 shadow-lg z-50 backdrop-blur-sm",title:"Retour accueil",children:""})]}):a!=="home"?P():r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[!I&&r.jsxs("nav",{className:"flex items-center justify-between p-4 sm:p-6 relative z-50",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-8 sm:h-10 md:h-32 w-auto"})}),r.jsxs("div",{className:"hidden md:flex space-x-8",children:[r.jsx("a",{href:"#services",className:"text-gray-300 hover:text-white transition-all duration-200",children:"Services"}),r.jsx("a",{href:"#about-thethetrader",className:"text-gray-300 hover:text-white transition-all duration-200",children:" propos"}),r.jsx("a",{href:"#interface",className:"text-gray-300 hover:text-white transition-all duration-200",children:"La plateforme"}),r.jsx("a",{href:"#pricing",className:"text-gray-300 hover:text-white transition-all duration-200",children:"Prix"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:Ee==="granted"?D:L,className:`px-3 py-2 rounded-lg font-semibold text-sm transition-all duration-200 ${Ee==="granted"?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-white hover:bg-gray-700"}`,title:Ee==="granted"?"Test notification":"Activer notifications",children:Ee==="granted"?"":""}),r.jsxs("button",{onClick:()=>n(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 sm:px-6 sm:py-3 rounded-lg font-semibold hover:opacity-90 text-sm sm:text-base",children:[r.jsx("span",{className:"hidden sm:inline",children:"Se connecter"}),r.jsx("span",{className:"sm:hidden",children:"Login"})]})]})]}),I?r.jsx("div",{className:"h-screen w-screen flex flex-col justify-center items-center overflow-hidden bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:r.jsxs("div",{className:"text-center flex-1 flex flex-col justify-center px-4 sm:px-6 max-w-full",children:[r.jsx("div",{className:"mb-0 flex justify-center hover:scale-105 transition-transform duration-300",children:r.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-80 sm:h-96 w-auto object-cover",style:{clipPath:"inset(10% 5% 15% 5%)"}})}),r.jsx("p",{className:"text-xl sm:text-3xl text-gray-300 mb-10 sm:mb-12 max-w-4xl mx-auto px-2 -mt-12",children:"Un setup trs simple, des signaux expliqus, un journal de performance. Rejoins la communaut et trade en confiance."}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 justify-center mb-8 sm:mb-12 px-4",children:r.jsx("button",{onClick:()=>n(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-10 sm:px-12 py-5 sm:py-6 rounded-lg text-xl sm:text-2xl font-semibold hover:opacity-90 w-full sm:w-auto",children:"Se connecter"})}),r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 sm:py-6 overflow-hidden relative w-full max-w-full rounded-lg mx-auto",children:r.jsxs("div",{className:"whitespace-nowrap animate-scroll",children:[r.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"})]})})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center pt-20 sm:pt-32 pb-0 px-4 sm:px-6",children:[r.jsx("div",{className:"mb-4 sm:mb-6 md:mb-0 flex justify-center hover:scale-105 transition-transform duration-300",children:r.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-64 sm:h-80 md:h-[32rem] lg:h-[40rem] w-auto object-cover",style:{clipPath:"inset(10% 5% 15% 5%)"}})}),r.jsx("p",{className:"text-xl sm:text-3xl text-gray-300 mb-10 sm:mb-12 max-w-4xl mx-auto px-2 mt-4 md:-mt-40",children:"Un setup trs simple, des signaux expliqus, un journal de performance. Rejoins la communaut et trade en confiance."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 justify-center mb-12 sm:mb-28 px-4",children:[r.jsx("button",{onClick:()=>n(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-10 sm:px-12 py-5 sm:py-6 rounded-lg text-xl sm:text-2xl font-semibold hover:opacity-90 w-full sm:w-auto",children:"Se connecter"}),r.jsxs("button",{onClick:re=>{re.preventDefault(),"serviceWorker"in navigator&&(/iPad|iPhone|iPod/.test(navigator.userAgent)?console.log(`Pour installer l'app: Appuyez sur le bouton Partager , puis "Sur l'cran d'accueil"`):window.deferredPrompt?window.deferredPrompt.prompt():console.log(`Utilisez le menu de votre navigateur pour "Ajouter  l'cran d'accueil" ou "Installer l'application"`))},className:"bg-black/80 border-2 border-gray-600 text-white px-10 sm:px-12 py-5 sm:py-6 rounded-lg text-xl sm:text-2xl font-semibold hover:bg-black/90 hover:border-white transition-all duration-300 w-full sm:w-auto flex items-center justify-center gap-3",children:[r.jsx("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12 2L3 7l9 5 9-5-9-5zM3 17l9 5 9-5M3 12l9 5 9-5"})}),"Installer l'app PWA"]})]}),r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-6 sm:py-10 overflow-hidden relative mb-10 sm:mb-16 w-screen -mx-4 sm:-mx-6",children:r.jsxs("div",{className:"whitespace-nowrap animate-scroll",children:[r.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),r.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"})]})}),r.jsxs("div",{id:"services",className:"max-w-7xl mx-auto mb-10 sm:mb-16 px-4 sm:px-6",children:[r.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-12 sm:mb-20",children:"Les Services"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 sm:gap-8",children:[r.jsxs("div",{className:"bg-gray-800/50 p-4 sm:p-6 rounded-xl border border-gray-600/50 backdrop-blur-sm hover:bg-gray-800/70 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 hover:border-purple-500/50 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-purple-400 transition-colors duration-300",children:"Signaux de Trading"}),r.jsx("p",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Recevez des signaux de trading prcis avec des points d'entre, de sortie et de stop-loss clairement dfinis."})]}),r.jsxs("div",{className:"bg-gray-800/50 p-4 sm:p-6 rounded-xl border border-gray-600/50 backdrop-blur-sm hover:bg-gray-800/70 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/25 hover:border-blue-500/50 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-blue-400 transition-colors duration-300",children:"Formation Complte"}),r.jsx("p",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Apprenez les bases du trading avec nos cours structurs et nos stratgies prouves. Apprentissage de mon setup ultra simple."})]}),r.jsxs("div",{className:"bg-gray-800/50 p-4 sm:p-6 rounded-xl border border-gray-600/50 backdrop-blur-sm hover:bg-gray-800/70 hover:scale-105 hover:shadow-2xl hover:shadow-green-500/25 hover:border-green-500/50 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-green-400 transition-colors duration-300",children:"Suivi Performance"}),r.jsx("p",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Suivez vos performances avec notre calendrier de trading et nos analyses dtailles. Journal de trading personnalis pour optimiser votre stratgie."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-pink-600/20 p-4 sm:p-6 rounded-xl border border-purple-500/50 backdrop-blur-sm hover:from-purple-600/30 hover:to-pink-600/30 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 hover:border-purple-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-purple-400 transition-colors duration-300",children:"App Ludique"}),r.jsxs("p",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:[r.jsx("strong",{children:"App mobile native iOS"})," avec notifications push instantanes, suivi des signaux en temps rel, sessions live trading et interface ultra-intuitive. ",r.jsx("strong",{children:"Tradez partout, tout le temps !"})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-red-600/20 to-orange-600/20 p-4 sm:p-6 rounded-xl border border-red-500/50 backdrop-blur-sm hover:from-red-600/30 hover:to-orange-600/30 hover:scale-105 hover:shadow-2xl hover:shadow-red-500/25 hover:border-red-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-red-400 transition-colors duration-300",children:"Live Trading"}),r.jsx("p",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Regardez nos sessions de trading en direct 3 fois par semaine et apprenez en temps rel."})]})]})]}),r.jsx("div",{id:"about-thethetrader",className:"max-w-7xl mx-auto mb-6 sm:mb-10 px-4 sm:px-6",children:r.jsxs("div",{className:"bg-gray-800/50 p-6 sm:p-8 rounded-xl border border-gray-600/50 backdrop-blur-sm",children:[r.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-6 sm:mb-8",children:" propos de TheTheTrader"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[r.jsx("div",{children:r.jsx("p",{className:"text-gray-300 text-sm sm:text-base leading-relaxed",children:"Trader depuis 3 ans, j'ai dvelopp une approche simple, rapide et efficace. J'ai compris qu'on a tendance  trop compliquer le march, alors qu'en ralit, il suffit de le simplifier pour mieux le matriser. Mon setup va  l'essentiel : lecture claire, excution rapide, rsultats concrets."})}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-300 text-sm sm:text-base",children:"Plus de 1000+ membres actifs"})]})]})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto mb-6 sm:mb-10 px-4 sm:px-6",children:[r.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-8 sm:mb-12",children:"Pourquoi choisir TheTheTrader ?"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 hover:border-purple-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-4xl text-purple-600 mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-purple-400 transition-colors duration-300",children:"Simplicit"}),r.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Approche simple et efficace. Pas de jargon compliqu, juste des rsultats concrets."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/25 hover:border-blue-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-4xl text-purple-600 mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-blue-400 transition-colors duration-300",children:"Rsultats"}),r.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Signaux prcis et formation qui transforme les dbutants en traders confirms."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-green-500/25 hover:border-green-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-4xl text-purple-600 mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-green-400 transition-colors duration-300",children:"Communaut"}),r.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Rejoignez une communaut active de traders qui partagent et s'entraident."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-yellow-500/25 hover:border-yellow-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-4xl text-purple-600 mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-yellow-400 transition-colors duration-300",children:"Journal Personnel"}),r.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Chacun a son propre journal de trading pour suivre ses trades et analyser ses performances."})]})]}),r.jsx("div",{className:"text-center mt-8",children:r.jsx("button",{onClick:()=>{const re=document.getElementById("pricing");re&&re.scrollIntoView({behavior:"smooth"})},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-10 sm:px-12 py-5 sm:py-6 rounded-lg text-xl sm:text-2xl font-semibold hover:opacity-90",children:"Se connecter"})})]}),r.jsxs("div",{className:"block md:hidden max-w-7xl mx-auto mb-6 sm:mb-10 px-4 sm:px-6",children:[r.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-8 sm:mb-12",children:"Aperu de la plateforme"}),r.jsx("div",{className:"bg-gray-800/50 rounded-xl border border-gray-600/50 backdrop-blur-sm p-4",children:r.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden relative",style:{height:"700px"},children:[r.jsx("div",{className:"bg-slate-700 p-3 border-b border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[q&&r.jsx("button",{onClick:()=>Q(!1),className:"text-gray-400 hover:text-white",children:""}),r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:"TT"}),r.jsx("span",{className:"text-white font-medium",children:q?R==="fondamentaux"?" Fondamentaux":R==="letsgooo-model"?" Letsgooo model":R==="crypto"?" Crypto":R==="futur"?" Futur":R==="forex"?" Forex":R==="general-chat"?" General-chat":R==="profit-loss"?" Profit-loss":R==="calendar"?" Journal Signaux":R==="trading-journal"?" Journal Perso":"TheTheTrader":"TheTheTrader"})]}),r.jsx("div",{className:"text-gray-400",children:""})]})}),r.jsxs("div",{className:`absolute inset-0 top-12 p-4 space-y-4 overflow-y-auto bg-gray-900 transition-transform duration-300 ${q?"-translate-x-full":"translate-x-0"}`,style:{height:"640px"},children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 rounded-lg p-3 border border-blue-500/30",children:[r.jsx("h3",{className:"text-white font-bold text-sm mb-2",children:" Aperu Rapide"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[r.jsx("div",{className:"text-green-400 font-bold",children:"+$3,285"}),r.jsx("div",{className:"text-gray-400",children:"P&L Total"})]}),r.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[r.jsx("div",{className:"text-blue-400 font-bold",children:"74%"}),r.jsx("div",{className:"text-gray-400",children:"Win Rate"})]}),r.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[r.jsx("div",{className:"text-white font-bold",children:"23"}),r.jsx("div",{className:"text-gray-400",children:"Ce mois"})]}),r.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[r.jsx("div",{className:"text-yellow-400 font-bold",children:"5"}),r.jsx("div",{className:"text-gray-400",children:"Signaux actifs"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-gray-400 text-xs uppercase tracking-wide mb-3 font-medium",children:"EDUCATION"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{z("fondamentaux"),Q(!0)},children:[r.jsx("div",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Fondamentaux"}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Contenu ducatif"})]})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{z("letsgooo-model"),Q(!0)},children:[r.jsx("div",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Letsgooo model"}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Contenu ducatif"})]})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{z("formation"),Q(!0)},children:[r.jsx("div",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Formation"}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Cours complet scalping"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-gray-400 text-xs uppercase tracking-wide mb-3 font-medium",children:"SIGNAUX"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{z("crypto"),Q(!0)},children:[r.jsx("div",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Crypto"}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Canal de signaux"})]})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{z("futur"),Q(!0)},children:[r.jsx("div",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Futur"}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Canal de signaux"})]})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{z("forex"),Q(!0)},children:[r.jsx("div",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Forex"}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Canal de signaux"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-gray-400 text-xs uppercase tracking-wide mb-3 font-medium",children:"TRADING HUB"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{z("general-chat"),Q(!0)},children:[r.jsx("div",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"General-chat"}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Discussion gnrale"})]})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{z("profit-loss"),Q(!0)},children:[r.jsx("div",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Profit-loss"}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Partage P&L"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-gray-400 text-xs uppercase tracking-wide mb-3 font-medium",children:"JOURNAUX"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{z("calendar"),Q(!0)},children:[r.jsx("div",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Journal Signaux"}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Calendrier conomique"})]})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{z("trading-journal"),Q(!0)},children:[r.jsx("div",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Journal Perso"}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Trading personnel"})]})]})]})]})]}),r.jsx("div",{className:`absolute inset-0 top-12 bg-gray-900 transition-transform duration-300 ${q?"translate-x-0":"translate-x-full"}`,children:r.jsx("div",{className:"h-full flex flex-col",children:r.jsxs("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",style:{paddingTop:"100px",paddingBottom:"80px"},children:[R==="crypto"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),r.jsx("span",{className:"text-xs text-gray-400",children:"22:30"})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal BUY BTC  1 min"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white text-xs",children:"Entre : 45000 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white text-xs",children:"SL : 44000 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white text-xs",children:"TP : 46000 USD"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-red-400 text-sm",children:""}),r.jsx("span",{className:"text-white text-xs",children:"Ratio R:R :  1:1"})]})]})}),r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" WIN"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" LOSS"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" BE"})]})]})]}),r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),r.jsx("span",{className:"text-xs text-gray-400",children:"22:35"})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal SELL ETH  5 min"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"Entre : 2800 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"SL : 2850 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"TP : 2750 USD"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-red-400 text-sm",children:""}),r.jsx("span",{className:"text-white text-xs",children:"Ratio R:R :  1:1"})]})]})}),r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" WIN"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" LOSS"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" BE"})]})]})]})]}),R==="futur"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),r.jsx("span",{className:"text-xs text-gray-400",children:"14:20"})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal SELL NAS100 Futures  1H"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"Entre : 15800 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"SL : 15900 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"TP : 15650 USD"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-red-400 text-sm",children:""}),r.jsx("span",{className:"text-white text-xs",children:"Ratio R:R :  1.5:1"})]})]})}),r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-green-500 text-white shadow-lg shadow-green-500/20 transition-all duration-200 flex items-center gap-1",children:" WIN"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" LOSS"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" BE"})]})]})]}),r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),r.jsx("span",{className:"text-xs text-gray-400",children:"16:45"})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal BUY SPX500 Futures  4H"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"Entre : 4450 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"SL : 4400 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"TP : 4520 USD"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-red-400 text-sm",children:""}),r.jsx("span",{className:"text-white text-xs",children:"Ratio R:R :  1.4:1"})]})]})}),r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" WIN"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" LOSS"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" BE"})]})]})]})]}),R==="forex"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),r.jsx("span",{className:"text-xs text-gray-400",children:"09:15"})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal BUY EURUSD  1H"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"Entre : 1.0850 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"SL : 1.0800 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"TP : 1.0920 USD"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-red-400 text-sm",children:""}),r.jsx("span",{className:"text-white text-xs",children:"Ratio R:R :  1.4:1"})]})]})}),r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-green-500 text-white shadow-lg shadow-green-500/20 transition-all duration-200 flex items-center gap-1",children:" WIN"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" LOSS"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" BE"})]})]})]}),r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),r.jsx("span",{className:"text-xs text-gray-400",children:"11:30"})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal SELL GBPJPY  30m"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"Entre : 185.50 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"SL : 186.00 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400 text-sm",children:""}),r.jsx("span",{className:"text-white",children:"TP : 184.80 USD"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[r.jsx("span",{className:"text-red-400 text-sm",children:""}),r.jsx("span",{className:"text-white text-xs",children:"Ratio R:R :  1.4:1"})]})]})}),r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" WIN"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" LOSS"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:" BE"})]})]})]})]}),R==="fondamentaux"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold",children:"COURS"}),r.jsx("span",{className:"text-white font-bold text-sm",children:"Les bases du trading"})]}),r.jsx("div",{className:"text-gray-400 text-xs mb-2",children:" Dure: 2h30 |  Niveau: Dbutant"}),r.jsx("div",{className:"text-gray-300 text-xs mb-2",children:"Apprenez les fondamentaux du trading et l'analyse technique."})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"bg-purple-600 text-white px-2 py-1 rounded text-xs font-bold",children:"COURS"}),r.jsx("span",{className:"text-white font-bold text-sm",children:"Psychologie du trader"})]}),r.jsx("div",{className:"text-gray-400 text-xs mb-2",children:" Dure: 1h45 |  Niveau: Intermdiaire"}),r.jsx("div",{className:"text-gray-300 text-xs mb-2",children:"Matrisez vos motions et dveloppez un mental gagnant."})]})]}),R==="letsgooo-model"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"bg-orange-600 text-white px-2 py-1 rounded text-xs font-bold",children:"PREMIUM"}),r.jsx("span",{className:"text-white font-bold text-sm",children:"Stratgie Letsgooo"})]}),r.jsx("div",{className:"text-gray-400 text-xs mb-2",children:" Performance: +89% |  Win Rate: 76%"}),r.jsx("div",{className:"text-gray-300 text-xs mb-2",children:"Formation avance sur la stratgie exclusive Letsgooo model."})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"bg-red-600 text-white px-2 py-1 rounded text-xs font-bold",children:"LIVE"}),r.jsx("span",{className:"text-white font-bold text-sm",children:"Backtesting avanc"})]}),r.jsx("div",{className:"text-gray-400 text-xs mb-2",children:" Rsultats: +156% |  Sharpe: 2.4"}),r.jsx("div",{className:"text-gray-300 text-xs mb-2",children:"Techniques de backtesting et optimisation de stratgies."})]})]}),R==="formation"&&r.jsx("div",{className:"overflow-x-hidden max-w-full min-w-0",children:r.jsx("div",{className:"space-y-4 overflow-x-hidden",children:r.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-4 overflow-x-hidden",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold",children:"COURS COMPLET"}),r.jsx("span",{className:"text-white font-bold text-sm",children:" Formation Scalping"})]}),r.jsx("div",{className:"text-blue-300 text-xs mb-2",children:" Guide complet |  Setup A+ |  CRT & AMD |  Concepts avancs"}),r.jsx("div",{className:"text-gray-300 text-xs mb-3",children:"Formation complte aux concepts fondamentaux et stratgies avances de scalping trading."}),r.jsx("div",{className:"text-center",children:r.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded text-xs font-medium hover:bg-blue-700 transition-colors",children:" Accder au cours complet"})})]})})}),R==="general-chat"&&r.jsx(H5,{channelId:"general-chat"}),R==="profit-loss"&&r.jsx(Go,{channelId:"profit-loss",currentUserId:"user"}),R==="calendar"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 overflow-x-hidden",children:[r.jsx("h3",{className:"text-white font-bold text-sm mb-3",children:"Calendrier conomique"}),r.jsxs("div",{className:"grid grid-cols-7 gap-1 text-xs min-w-0 max-w-full",children:[r.jsx("div",{className:"text-gray-400 text-center p-1",children:"L"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"M"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"M"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"J"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"V"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"S"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"D"}),r.jsx("div",{className:"text-gray-500 text-center p-1",children:"26"}),r.jsx("div",{className:"text-gray-500 text-center p-1",children:"27"}),r.jsx("div",{className:"text-gray-500 text-center p-1",children:"28"}),r.jsx("div",{className:"text-gray-500 text-center p-1",children:"29"}),r.jsx("div",{className:"text-gray-500 text-center p-1",children:"30"}),r.jsx("div",{className:"text-white text-center p-1",children:"1"}),r.jsx("div",{className:"text-white text-center p-1",children:"2"}),r.jsx("div",{className:"bg-red-600 text-white text-center p-1 rounded",children:"3"}),r.jsx("div",{className:"text-white text-center p-1",children:"4"}),r.jsx("div",{className:"bg-yellow-600 text-white text-center p-1 rounded",children:"5"}),r.jsx("div",{className:"text-white text-center p-1",children:"6"}),r.jsx("div",{className:"text-white text-center p-1",children:"7"}),r.jsx("div",{className:"text-white text-center p-1",children:"8"}),r.jsx("div",{className:"text-white text-center p-1",children:"9"}),r.jsx("div",{className:"text-white text-center p-1",children:"10"}),r.jsx("div",{className:"text-white text-center p-1",children:"11"}),r.jsx("div",{className:"bg-green-600 text-white text-center p-1 rounded",children:"12"}),r.jsx("div",{className:"text-white text-center p-1",children:"13"}),r.jsx("div",{className:"text-white text-center p-1",children:"14"}),r.jsx("div",{className:"bg-red-600 text-white text-center p-1 rounded",children:"15"}),r.jsx("div",{className:"text-white text-center p-1",children:"16"})]}),r.jsxs("div",{className:"flex justify-center gap-3 mt-3 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded"}),r.jsx("span",{className:"text-white",children:"WIN"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-red-600 rounded"}),r.jsx("span",{className:"text-white",children:"LOSS"})]})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[r.jsx("h3",{className:"text-white font-bold text-sm mb-3",children:"Statistiques Signaux"}),r.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-3 mb-2",children:[r.jsx("div",{className:"text-green-300 text-xs mb-1",children:"P&L Total"}),r.jsx("div",{className:"text-lg font-bold text-white",children:"+$2,485"})]}),r.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-3 mb-3",children:[r.jsx("div",{className:"text-blue-300 text-xs mb-1",children:"Win Rate"}),r.jsx("div",{className:"text-lg font-bold text-white",children:"89%"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:"Aujourd'hui"}),r.jsx("div",{className:"text-orange-400 font-bold",children:"4"})]}),r.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:"Ce mois"}),r.jsx("div",{className:"text-white font-bold",children:"31"})]}),r.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:"Avg Impact"}),r.jsx("div",{className:"text-green-400 font-bold",children:"+59 pips"})]}),r.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:"Max Impact"}),r.jsx("div",{className:"text-yellow-400 font-bold",children:"+240 pips"})]})]})]})]}),R==="trading-journal"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 mb-3",children:[r.jsx("h3",{className:"text-white font-bold text-sm mb-3",children:"Statistiques Trades"}),r.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-3 mb-2",children:[r.jsx("div",{className:"text-green-300 text-xs mb-1",children:"P&L Total"}),r.jsx("div",{className:"text-lg font-bold text-white",children:"+$3,285"})]}),r.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-3 mb-3",children:[r.jsx("div",{className:"text-blue-300 text-xs mb-1",children:"Win Rate"}),r.jsx("div",{className:"text-lg font-bold text-white",children:"74%"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:"Aujourd'hui"}),r.jsx("div",{className:"text-blue-400 font-bold",children:"2"})]}),r.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:"Ce mois"}),r.jsx("div",{className:"text-white font-bold",children:"23"})]}),r.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:"Avg Win"}),r.jsx("div",{className:"text-green-400 font-bold",children:"+$195"})]}),r.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 mb-1",children:"Avg Loss"}),r.jsx("div",{className:"text-red-400 font-bold",children:"-$85"})]})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 overflow-x-hidden",children:[r.jsx("h3",{className:"text-white font-bold text-sm mb-3",children:"Calendrier Trading"}),r.jsxs("div",{className:"grid grid-cols-7 gap-1 text-xs min-w-0 max-w-full",children:[r.jsx("div",{className:"text-gray-400 text-center p-1",children:"L"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"M"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"M"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"J"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"V"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"S"}),r.jsx("div",{className:"text-gray-400 text-center p-1",children:"D"}),r.jsx("div",{className:"text-gray-500 text-center p-1",children:"26"}),r.jsx("div",{className:"text-gray-500 text-center p-1",children:"27"}),r.jsx("div",{className:"text-gray-500 text-center p-1",children:"28"}),r.jsx("div",{className:"text-gray-500 text-center p-1",children:"29"}),r.jsx("div",{className:"text-gray-500 text-center p-1",children:"30"}),r.jsx("div",{className:"text-white text-center p-1",children:"1"}),r.jsx("div",{className:"bg-green-600 text-white text-center p-1 rounded",children:"2"}),r.jsx("div",{className:"text-white text-center p-1",children:"3"}),r.jsx("div",{className:"text-white text-center p-1",children:"4"}),r.jsx("div",{className:"bg-red-600 text-white text-center p-1 rounded",children:"5"}),r.jsx("div",{className:"text-white text-center p-1",children:"6"}),r.jsx("div",{className:"text-white text-center p-1",children:"7"}),r.jsx("div",{className:"bg-green-600 text-white text-center p-1 rounded",children:"8"}),r.jsx("div",{className:"text-white text-center p-1",children:"9"}),r.jsx("div",{className:"text-white text-center p-1",children:"10"}),r.jsx("div",{className:"bg-blue-600 text-white text-center p-1 rounded",children:"11"}),r.jsx("div",{className:"text-white text-center p-1",children:"12"}),r.jsx("div",{className:"text-white text-center p-1",children:"13"}),r.jsx("div",{className:"bg-green-600 text-white text-center p-1 rounded",children:"14"}),r.jsx("div",{className:"text-white text-center p-1",children:"15"}),r.jsx("div",{className:"text-white text-center p-1",children:"16"})]}),r.jsxs("div",{className:"flex justify-center gap-3 mt-3 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded"}),r.jsx("span",{className:"text-white",children:"WIN"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-red-600 rounded"}),r.jsx("span",{className:"text-white",children:"LOSS"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded"}),r.jsx("span",{className:"text-white",children:"BE"})]})]})]})]})]})})})]})})]}),r.jsxs("div",{id:"interface",className:"hidden md:block max-w-7xl mx-auto mb-6 sm:mb-10 px-4 sm:px-6",children:[r.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-8 sm:mb-12",children:"Aperu de la plateforme"}),r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"bg-gray-800/50 p-6 sm:p-8 rounded-xl border border-gray-600/50 backdrop-blur-sm w-full max-w-6xl",children:r.jsxs("div",{className:"bg-gray-900 rounded-lg p-0 mx-auto h-screen max-h-[900px] flex",style:{width:"100%"},children:[r.jsxs("div",{className:"w-56 bg-gray-800 flex flex-col",children:[r.jsx("div",{className:"p-4 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm text-white",children:"TT"}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-sm font-medium text-white",children:"TheTheTrader"})})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"DUCATION"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${v==="fondamentaux"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>A("fondamentaux"),children:" Fondamentaux"}),r.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${v==="letsgooo-model"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>A("letsgooo-model"),children:" Letsgooo-model"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"SIGNAUX"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${v==="crypto"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>A("crypto"),children:" Crypto"}),r.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${v==="futur"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>A("futur"),children:" Futur"}),r.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${v==="forex"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>A("forex"),children:" Forex"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"TRADING HUB"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${v==="general-chat"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>A("general-chat"),children:" General-chat"}),r.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${v==="profit-loss"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>A("profit-loss"),children:" Profit-loss"}),r.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${v==="calendar"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>A("calendar"),children:" Journal Signaux"}),r.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${v==="trading-journal"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>A("trading-journal"),children:" Journal Perso"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium mb-2 text-white",children:"Statistiques"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Win Rate:"}),r.jsx("span",{className:"text-blue-400",children:"75%"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Signaux actifs:"}),r.jsx("span",{className:"text-yellow-400",children:"3"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"P&L Total:"}),r.jsx("span",{className:"text-green-400",children:"+$2,480"})]})]})]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col bg-gray-900",children:[r.jsx("div",{className:"p-4 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:v==="crypto"?"# crypto":v==="futur"?"# futur":v==="forex"?"# forex":v==="fondamentaux"?" Fondamentaux":v==="letsgooo-model"?" Letsgooo-model":v==="general-chat"?" General-chat":v==="profit-loss"?" Profit-loss":v==="calendar"?" Journal Signaux":v==="trading-journal"?" Journal Perso":"# crypto"}),r.jsx("span",{className:"text-green-400 text-sm flex items-center gap-1",children:" Live"})]})}),r.jsxs("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:[v==="crypto"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY BTCUSD  15m"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 45000 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 44000 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 46000 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  2.0"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 24"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 18"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 31"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL ETHUSD  5m"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 2800 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 2850 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 2750 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.75"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 16"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 12"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 8"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY SOLUSD  15m"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 95.50 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 93.80 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 98.20 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.8"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 42"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 28"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 15"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL ADAUSD  1H"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 0.485 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 0.495 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 0.475 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.5"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 23"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 18"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 9"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-xs text-white",children:"TT"}),r.jsx("span",{className:"text-white font-medium text-sm",children:"TheTheTrader"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"22:45"})]}),r.jsx("p",{className:"text-gray-300 text-sm",children:" Excellente session aujourd'hui ! BTC breakout confirm, on surveille la zone 46k pour la suite."})]})]}),v==="futur"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL NAS100  1H"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 16850 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 16950 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 16700 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.5"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 31"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 22"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 15"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY SPX500  4H"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 4720 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 4650 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 4850 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.85"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 28"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 19"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 12"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY GOLD  4H"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 2045.50 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 2038.20 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 2058.80 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.85"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 38"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 25"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 12"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL OIL  1H"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 78.50 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 79.80 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 77.20 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.4"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 19"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 14"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 7"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-xs text-white",children:"TT"}),r.jsx("span",{className:"text-white font-medium text-sm",children:"TheTheTrader"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"21:30"})]}),r.jsx("p",{className:"text-gray-300 text-sm",children:" Les indices US montrent une belle dynamique. NAS100 en profit, SPX500 en cours !"})]})]}),v==="forex"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY EURUSD  30m"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 1.0850 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 1.0825 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 1.0890 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.6"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 42"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 28"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 33"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL GBPJPY  15m"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 189.50 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 190.00 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 188.80 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.4"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 24"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 18"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 14"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY USDJPY  1H"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 148.25 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 147.85 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 148.85 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.7"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 34"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 22"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 16"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL AUDUSD  30m"})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"Entre : 0.6650 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"SL : 0.6680 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:"TP : 0.6620 USD"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Ratio R:R :  1.5"})]})]}),r.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 19"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 15"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 8"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-xs text-white",children:"TT"}),r.jsx("span",{className:"text-white font-medium text-sm",children:"TheTheTrader"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"20:15"})]}),r.jsx("p",{className:"text-gray-300 text-sm",children:" Session forex active ! EUR/USD en profit, on surveille GBP/JPY de prs."})]})]}),v==="fondamentaux"&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[r.jsxs("div",{className:"text-center mb-8 p-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl text-white",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-12 w-auto",style:{filter:"drop-shadow(0 0 0 transparent)",mixBlendMode:"screen"}})}),r.jsx("p",{className:"text-xl opacity-90",children:"Guide complet des concepts fondamentaux et stratgies avances"})]}),r.jsxs("div",{className:"space-y-6 text-gray-300",children:[r.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4",children:r.jsxs("p",{className:"text-yellow-200",children:[r.jsx("strong",{children:" Avertissement :"})," Ce guide prsente un ensemble de concepts appris et expriments sur les marchs financiers. Il ne s'agit pas d'inventions originales, mais d'un setup personnel bas sur l'observation et l'exprience pratique."]})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"1.  Introduction"}),r.jsx("p",{children:"Ce document vous prsente les fondamentaux essentiels pour comprendre comment les charts voluent et ce qui influence leurs mouvements. L'objectif est de construire une base solide avant d'aborder les stratgies avances."})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"2.  Fondamentaux des Charts"}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:" Qu'est-ce qu'une Chart ?"}),r.jsx("p",{className:"mb-3",children:"Une chart (ou graphique) est une reprsentation visuelle du prix d'un actif financier dans le temps (Bitcoin, or, actions, etc.)."}),r.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[r.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Elle permet de :"}),r.jsxs("ul",{className:"space-y-1 text-sm",children:[r.jsx("li",{children:" Voir comment le prix volue"}),r.jsx("li",{children:" Trouver des points d'entre/sortie"}),r.jsx("li",{children:" Comprendre le comportement du march"})]})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:" Comprendre les Bougies"}),r.jsx("p",{className:"mb-3",children:"Chaque bougie montre l'volution du prix sur une priode donne (1 min, 1h, 1 jour, etc.)"}),r.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[r.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Composition d'une bougie :"}),r.jsxs("ul",{className:"space-y-1 text-sm",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Le corps (body) :"})," diffrence entre ouverture et clture"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Les mches (wicks) :"})," les plus hauts et plus bas atteints"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Couleur :"})," verte/blanche si clture > ouverture, rouge/noire si clture < ouverture"]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"3.  Mouvement des Prix (Modle AMD)"}),r.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 mb-4",children:r.jsxs("p",{children:[r.jsx("strong",{children:" Analogie :"})," Le prix, c'est comme un voyage de A  B. Pour avancer, il a besoin de liquidit, comme une voiture a besoin d'essence."]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"1"}),r.jsx("div",{className:"font-semibold mb-2",children:"Accumulation"}),r.jsx("p",{className:"text-sm",children:"Le prix se prpare "})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"2"}),r.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),r.jsx("p",{className:"text-sm",children:"Il pige les traders "})]}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"3"}),r.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),r.jsx("p",{className:"text-sm",children:"Le vrai mouvement "})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"4.  Support et Rsistance"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[r.jsx("strong",{className:"text-green-300",children:" Support"}),r.jsx("br",{}),r.jsx("span",{className:"text-sm",children:"Zone o le prix rebondit vers le haut "})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[r.jsx("strong",{className:"text-red-300",children:" Rsistance"}),r.jsx("br",{}),r.jsx("span",{className:"text-sm",children:"Zone o le prix bloque et redescend "})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"5.  Concepts Avancs"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:" ORDER BLOCK (OB)"}),r.jsx("p",{className:"mb-2",children:"Un Order Block reprsente la dernire bougie haussire (ou baissire) avant un mouvement impulsif majeur dans la direction oppose."}),r.jsxs("div",{className:"text-sm text-blue-300",children:[" Ces zones deviennent des repres de liquidit",r.jsx("br",{})," Souvent retestes par le prix",r.jsx("br",{})," Offrent des points d'entre  fort potentiel"]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:" FVG  Fair Value Gap"}),r.jsx("p",{className:"mb-2",children:"Un FVG est une zone de dsquilibre cre lors d'un mouvement rapide et violent du march ."}),r.jsxs("div",{className:"text-sm text-blue-300",children:[" Le prix revient frquemment combler ces gaps",r.jsx("br",{})," Zones intressantes pour entrer ou sortir d'une position"]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:" Unicorn"}),r.jsx("p",{className:"mb-2",children:"C'est un setup form par l'association d'un Breaker (BRKR)  et d'un Fair Value Gap (FVG) ."}),r.jsxs("div",{className:"text-sm text-blue-300",children:[" Zone  forte probabilit de raction du prix",r.jsx("br",{})," Rassemble deux zones institutionnelles cls",r.jsx("br",{})," Point d'entre ou de prise de profit idal"]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"6.  CRT  Candle Range Theory"}),r.jsx("p",{className:"mb-4",children:"La Candle Range Theory (CRT) est une mthode d'analyse base sur 3 bougies conscutives."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"1"}),r.jsx("div",{className:"font-semibold mb-2",children:"La Range"}),r.jsxs("p",{className:"text-sm",children:["Bougie avec grand corps",r.jsx("br",{}),"Zone de stagnation"]})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"2"}),r.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),r.jsxs("p",{className:"text-sm",children:["Va chercher la liquidit",r.jsx("br",{}),"Pige les traders"]})]}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold mb-2",children:"3"}),r.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),r.jsxs("p",{className:"text-sm",children:["Bougie directionnelle",r.jsx("br",{}),"Zone d'entre"]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:'7.  Le Setup "A+"'}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 mb-4",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"PRINCIPE DU MODLE"}),r.jsx("p",{className:"mb-2",children:"Le principe du modle, c'est de prendre position aprs la phase de manipulation , sur la timeframe basse (LTF) du contexte dfini sur la timeframe haute (HTF) ."}),r.jsx("p",{children:" Cela permet d'viter les piges des faux breakouts  et de s'aligner avec la vraie direction du mouvement ."})]})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold mb-2",children:" Avertissement Lgal"}),r.jsx("p",{className:"text-sm",children:"Ce document est fourni  des fins ducatives uniquement. Le trading comporte des risques significatifs de perte financire. Il est essentiel de bien comprendre les risques avant de trader et ne jamais risquer plus que ce que vous pouvez vous permettre de perdre."})]})]})]}),v==="letsgooo-model"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"bg-orange-600 text-white px-3 py-1 rounded text-sm font-bold",children:"PREMIUM"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Stratgie Letsgooo"}),r.jsx("span",{className:"text-gray-400 text-sm",children:"Expert"})]}),r.jsx("span",{className:"text-orange-400 font-bold",children:"2h 15min"})]}),r.jsx("div",{className:"text-gray-400 text-sm mb-4",children:"La stratgie exclusive TheTheTrader ! Systme complet de trading avec backtests, rgles prcises et gestion du risque optimise."}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm text-gray-300 mb-3",children:[r.jsx("div",{children:" Win Rate 85%"}),r.jsx("div",{children:" R:R 1:3"}),r.jsx("div",{children:" Signaux rapides"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 156 tudiants"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 5.0/5"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" Accs VIP"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"bg-green-600 text-white px-3 py-1 rounded text-sm font-bold",children:"LIVE"}),r.jsx("span",{className:"text-white font-bold text-lg",children:"Backtesting avanc"}),r.jsx("span",{className:"text-gray-400 text-sm",children:"Expert"})]}),r.jsx("span",{className:"text-green-400 font-bold",children:"1h 30min"})]}),r.jsx("div",{className:"text-gray-400 text-sm mb-4",children:"Matrisez l'art du backtesting ! Testez vos stratgies sur donnes historiques et optimisez vos performances avec des outils professionnels."}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm text-gray-300 mb-3",children:[r.jsx("div",{children:" TradingView"}),r.jsx("div",{children:" Analyse data"}),r.jsx("div",{children:" Optimisation"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 203 tudiants"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 4.7/5"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" Session live"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-xs text-white",children:"TT"}),r.jsx("span",{className:"text-white font-medium text-sm",children:"TheTheTrader"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"18:45"})]}),r.jsx("p",{className:"text-gray-300 text-sm",children:" Session live backtesting demain  20h ! On teste la stratgie Letsgooo sur 2 ans de donnes."})]})]}),v==="general-chat"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-sm text-white",children:"M"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-white font-medium text-sm",children:"Mike_Trader"}),r.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 5 min"})]})]}),r.jsx("p",{className:"text-gray-300 text-sm",children:"Salut la team ! Quelqu'un a des infos sur l'ouverture de Londres demain ? "}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 3"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" Rpondre"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-sm text-white",children:"S"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-white font-medium text-sm",children:"Sarah_FX"}),r.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 8 min"})]})]}),r.jsx("p",{className:"text-gray-300 text-sm",children:"Les NFP de vendredi taient  ! Qui a pris le trade sur EUR/USD ?"}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 5"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 2"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" Rpondre"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center text-sm text-white",children:"A"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-white font-medium text-sm",children:"Alex_Crypto"}),r.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 12 min"})]})]}),r.jsx("p",{className:"text-gray-300 text-sm",children:"BTC qui teste les 45k encore... Cette fois c'est la bonne ? "}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 8"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 4"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" Rpondre"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-sm text-white",children:"TT"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-white font-medium text-sm",children:"TheTheTrader"}),r.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 15 min"})]})]}),r.jsx("p",{className:"text-gray-300 text-sm",children:" N'hsitez pas  partager vos analyses et poser vos questions ! La communaut est l pour s'entraider "}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 15"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 8"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" Rpondre"})]})]})]}),v==="profit-loss"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-sm text-white",children:"J"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-white font-medium text-sm",children:"Jordan_Pro"}),r.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 2h"})]})]}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/50 rounded-lg p-3 mb-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white font-bold text-lg",children:"EURUSD"}),r.jsx("span",{className:"text-green-400 font-bold text-xl",children:"+$2,450"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-gray-300",children:[r.jsx("div",{children:"Entry: 1.0832"}),r.jsx("div",{children:"Exit: 1.0891"}),r.jsx("div",{children:"Risk: $500"}),r.jsx("div",{children:"R:R: 4.9"})]})]}),r.jsx("p",{className:"text-gray-300 text-sm mb-2",children:" Excellent trade sur EUR/USD ! Merci TT pour l'analyse, signal parfait ! "}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 12"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 8"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 6"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-sm text-white",children:"L"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-white font-medium text-sm",children:"Lisa_Scalp"}),r.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 4h"})]})]}),r.jsxs("div",{className:"bg-green-600/20 border border-green-600/50 rounded-lg p-3 mb-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white font-bold text-lg",children:"BTCUSD"}),r.jsx("span",{className:"text-green-400 font-bold text-xl",children:"+$680"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-gray-300",children:[r.jsx("div",{children:"Entry: 44,890"}),r.jsx("div",{children:"Exit: 45,120"}),r.jsx("div",{children:"Risk: $300"}),r.jsx("div",{children:"R:R: 2.3"})]})]}),r.jsx("p",{className:"text-gray-300 text-sm mb-2",children:" Scalp rapide sur BTC ! 15 minutes de trade, clean !"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 7"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 4"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 3"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-sm text-white",children:"M"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-white font-medium text-sm",children:"Max_Learning"}),r.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 6h"})]})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-600/50 rounded-lg p-3 mb-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white font-bold text-lg",children:"GBPJPY"}),r.jsx("span",{className:"text-red-400 font-bold text-xl",children:"-$180"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-gray-300",children:[r.jsx("div",{children:"Entry: 189.45"}),r.jsx("div",{children:"Exit: 189.09"}),r.jsx("div",{children:"Risk: $180"}),r.jsx("div",{children:"SL hit"})]})]}),r.jsx("p",{className:"text-gray-300 text-sm mb-2",children:" SL hit mais respect ! On continue, le trading c'est a aussi "}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:" 5"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 3"}),r.jsx("span",{className:"text-gray-400 text-xs",children:" 2"})]})]})]}),v==="calendar"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-600",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("h2",{className:"text-xl font-bold text-white",children:"Calendrier conomique - Dcembre 2024"})}),r.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2 mb-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(re=>r.jsx("div",{className:"text-center text-gray-400 font-semibold py-3 text-sm uppercase tracking-wide",children:re.substring(0,3)},re))}),r.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:(()=>{const re=[{date:1,hasEvent:!1},{date:2,hasEvent:!1},{date:3,hasEvent:!0,impact:"high"},{date:4,hasEvent:!0,impact:"high"},{date:5,hasEvent:!1},{date:6,hasEvent:!0,impact:"medium"},{date:7,hasEvent:!1},{date:8,hasEvent:!1},{date:9,hasEvent:!1},{date:10,hasEvent:!0,impact:"low"},{date:11,hasEvent:!0,impact:"medium"},{date:12,hasEvent:!1},{date:13,hasEvent:!0,impact:"high"},{date:14,hasEvent:!1},{date:15,hasEvent:!1},{date:16,hasEvent:!1},{date:17,hasEvent:!0,impact:"medium"},{date:18,hasEvent:!0,impact:"high"},{date:19,hasEvent:!1},{date:20,hasEvent:!0,impact:"low"},{date:21,hasEvent:!1},{date:22,hasEvent:!1},{date:23,hasEvent:!1},{date:24,hasEvent:!1},{date:25,hasEvent:!1},{date:26,hasEvent:!1},{date:27,hasEvent:!0,impact:"medium"},{date:28,hasEvent:!1},{date:29,hasEvent:!1},{date:30,hasEvent:!1},{date:31,hasEvent:!1}],Le=O=>{const le="h-12 rounded flex items-center justify-center text-white font-semibold text-sm cursor-pointer hover:opacity-80 transition-opacity";if(!O.hasEvent)return`${le} bg-gray-700`;switch(O.impact){case"high":return`${le} bg-red-600`;case"medium":return`${le} bg-yellow-600 text-black`;case"low":return`${le} bg-green-600`;default:return`${le} bg-gray-700`}};return re.map(O=>r.jsx("div",{className:Le(O),children:O.date},O.date))})()}),r.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-green-600 rounded"}),r.jsx("span",{className:"text-white",children:"WIN"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-red-600 rounded"}),r.jsx("span",{className:"text-white",children:"LOSS"})]})]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Statistiques Signaux"}),r.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-6 mb-4",children:[r.jsx("div",{className:"text-green-300 text-sm mb-2",children:"P&L Total"}),r.jsx("div",{className:"text-4xl font-bold text-white",children:"+$2,485"})]}),r.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-xl p-6",children:[r.jsx("div",{className:"text-blue-300 text-sm mb-2",children:"Win Rate"}),r.jsx("div",{className:"text-4xl font-bold text-white",children:"89%"})]})]})]}),v==="trading-journal"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-600",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("h2",{className:"text-xl font-bold text-white",children:"Trading Journal - Dcembre 2024"})}),r.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2 mb-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(re=>r.jsx("div",{className:"text-center text-gray-400 font-semibold py-3 text-sm uppercase tracking-wide",children:re.substring(0,3)},re))}),r.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:(()=>{const re=[{date:1,status:"win"},{date:2,status:"win"},{date:3,status:"loss"},{date:4,status:"win"},{date:5,status:"be"},{date:6,status:"win"},{date:7,status:"win"},{date:8,status:"win"},{date:9,status:"loss"},{date:10,status:"win"},{date:11,status:"win"},{date:12,status:"be"},{date:13,status:"win"},{date:14,status:"win"},{date:15,status:"win"},{date:16,status:"loss"},{date:17,status:"win"},{date:18,status:"win"},{date:19,status:"win"},{date:20,status:"be"},{date:21,status:"win"},{date:22,status:"win"},{date:23,status:"loss"},{date:24,status:"win"},{date:25,status:"win"},{date:26,status:"win"},{date:27,status:"win"},{date:28,status:"be"},{date:29,status:"win"},{date:30,status:"win"},{date:31,status:"win"}],Le=O=>{const le="h-12 rounded flex items-center justify-center text-white font-semibold text-sm cursor-pointer hover:opacity-80 transition-opacity";switch(O.status){case"win":return`${le} bg-green-500`;case"be":return`${le} bg-yellow-500 text-black`;case"loss":return`${le} bg-red-500`;default:return`${le} bg-gray-700`}};return re.map(O=>r.jsx("div",{className:Le(O),children:O.date},O.date))})()}),r.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),r.jsx("span",{className:"text-white",children:"Win"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),r.jsx("span",{className:"text-white",children:"BE"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),r.jsx("span",{className:"text-white",children:"Loss"})]})]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Statistiques Trades"}),r.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-6 mb-4",children:[r.jsx("div",{className:"text-green-300 text-sm mb-2",children:"P&L Total"}),r.jsx("div",{className:"text-4xl font-bold text-white",children:"+$3,285"})]}),r.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-xl p-6 mb-6",children:[r.jsx("div",{className:"text-blue-300 text-sm mb-2",children:"Win Rate"}),r.jsx("div",{className:"text-4xl font-bold text-white",children:"74%"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Aujourd'hui"}),r.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"2"})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Ce mois"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:"23"})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Avg Win"}),r.jsx("div",{className:"text-2xl font-bold text-green-400",children:"+$195"})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Avg Loss"}),r.jsx("div",{className:"text-2xl font-bold text-red-400",children:"-$85"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"Weekly Breakdown"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-4 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium",children:"Week 1"}),r.jsx("div",{className:"text-gray-400 text-sm",children:"6 trades"})]}),r.jsx("div",{className:"text-green-400 text-xl font-bold",children:"+$840"})]}),r.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-4 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium",children:"Week 2"}),r.jsx("div",{className:"text-gray-400 text-sm",children:"5 trades"})]}),r.jsx("div",{className:"text-green-400 text-xl font-bold",children:"+$1,120"})]}),r.jsxs("div",{className:"bg-red-600/20 border border-red-500/30 rounded-lg p-4 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium",children:"Week 3"}),r.jsx("div",{className:"text-gray-400 text-sm",children:"7 trades"})]}),r.jsx("div",{className:"text-red-400 text-xl font-bold",children:"-$275"})]}),r.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-4 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium",children:"Week 4"}),r.jsx("div",{className:"text-gray-400 text-sm",children:"5 trades"})]}),r.jsx("div",{className:"text-green-400 text-xl font-bold",children:"+$1,600"})]})]})]})]})]})]}),(v==="general-chat"||v==="profit-loss")&&r.jsx("div",{className:"p-4 border-t border-gray-700",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:"Tapez votre message...",className:"flex-1 bg-gray-700 text-white px-3 py-2 rounded text-sm placeholder-gray-400"}),r.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded text-sm font-bold hover:bg-blue-700",children:"Envoyer"})]})})]})]})})})]}),r.jsx("div",{className:"text-center mt-8 mb-12",children:r.jsx("button",{onClick:()=>{const re=document.getElementById("pricing");re&&re.scrollIntoView({behavior:"smooth"})},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-10 sm:px-12 py-5 sm:py-6 rounded-lg text-xl sm:text-2xl font-semibold hover:opacity-90",children:"Se connecter"})}),r.jsxs("div",{className:"max-w-7xl mx-auto mb-10 px-4 sm:px-6",children:[r.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-4",children:"Ce qu'ils en pensent"}),r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8 sm:mb-12",children:[r.jsx("img",{src:"https://cdn.trustpilot.net/brand-assets/4.1.0/logo-white.svg",alt:"Trustpilot",className:"h-8"}),r.jsx("span",{className:"text-gray-300 text-lg",children:"Vrifi par Trustpilot"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 hover:border-purple-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-purple-400 transition-colors duration-300",children:"CryptoWolf"}),r.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Interface ultra simple ! Tout est  porte de main, pas besoin d'tre expert pour s'y retrouver."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/25 hover:border-blue-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-blue-400 transition-colors duration-300",children:"iOSTrader"}),r.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"L'app iOS est parfaite ! Notifications instantanes pour les signaux, interface fluide. Je ne rate plus jamais un live !"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-green-500/25 hover:border-green-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-green-400 transition-colors duration-300",children:"ForexMaster"}),r.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Les lives sont incroyables ! TheThe explique tout clairement, mme les concepts complexes deviennent simples."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 hover:border-purple-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-purple-400 transition-colors duration-300",children:"TraderPro23"}),r.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"J'apprcie vraiment la proximit avec TheThe. Il rpond  nos questions et nous guide personnellement."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/25 hover:border-blue-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-blue-400 transition-colors duration-300",children:"PipHunter"}),r.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Setup ultra simple ! En 5 minutes j'tais connect et je recevais dj les signaux. Parfait pour dbuter."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-green-500/25 hover:border-green-400 transition-all duration-300 transform cursor-pointer group",children:[r.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),r.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-green-400 transition-colors duration-300",children:"BullRunner"}),r.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Grce  TheThe, j'ai enfin une approche structure du trading. Interface claire, explications parfaites !"})]})]})]}),r.jsxs("div",{id:"pricing",className:"max-w-7xl mx-auto mb-6 sm:mb-10 px-4 sm:px-6",children:[r.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-8 sm:mb-12",children:"Choisissez votre plan"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 sm:gap-12 max-w-6xl mx-auto",children:[r.jsx("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 p-8 sm:p-12 rounded-xl border border-purple-500/50 backdrop-blur-sm hover:from-purple-600/30 hover:to-blue-600/30 transition-all duration-300 min-h-[600px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"Starter"}),r.jsxs("div",{className:"text-4xl font-bold text-blue-400 mb-6",children:["15",r.jsx("span",{className:"text-sm text-gray-400",children:"/mois"})]}),r.jsx("div",{className:"text-green-400 text-sm mb-4",children:" Parfait pour dbuter"}),r.jsxs("ul",{className:"text-gray-300 text-base space-y-4 mb-8 text-left",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Tous les signaux (Crypto, Forex, Futures)"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Formation complte (10h de vidos)"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Accs au chat communautaire"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Calendrier de performance"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Live Trading"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Support prioritaire"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-400",children:""}),r.jsx("span",{children:"Journal de trading personnalis"})]})]}),r.jsx("button",{className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-4 px-6 rounded-lg font-semibold text-lg transition-colors",children:"Se connecter"})]})}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-purple-600/20 p-8 sm:p-12 rounded-xl border border-blue-500/50 backdrop-blur-sm hover:from-blue-600/30 hover:to-purple-600/30 transition-all duration-300 relative min-h-[600px]",children:[r.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-1 rounded-full text-sm font-semibold",children:"RECOMMAND"}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"Pro"}),r.jsxs("div",{className:"text-4xl font-bold text-blue-400 mb-6",children:["25",r.jsx("span",{className:"text-sm text-gray-400",children:"/mois"})]}),r.jsx("div",{className:"text-green-400 text-sm mb-4",children:" Pour trader comme un pro"}),r.jsxs("ul",{className:"text-gray-300 text-base space-y-4 mb-8 text-left",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Tous les signaux (Crypto, Forex, Futures)"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Formation complte + stratgies avances"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Live Trading en direct (3x/semaine)"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Calendrier avanc avec analytics"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Support prioritaire 24/7"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Signaux exclusifs VIP"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-400",children:""}),r.jsx("span",{children:"Journal de trading personnalis"})]})]}),r.jsx("button",{className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-4 px-6 rounded-lg font-semibold text-lg transition-colors",children:"Devenir Pro"})]})]})]})]}),r.jsx("div",{className:"max-w-7xl mx-auto mb-6 sm:mb-10 px-2 sm:px-4",style:{display:"none"},children:r.jsx("div",{className:"bg-gray-800/50 p-2 sm:p-6 rounded-xl border border-gray-600/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"bg-gray-800 p-3 sm:p-4 flex items-center justify-between border-b border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3 sm:gap-3 min-w-0",children:[r.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm",children:"TT"}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[r.jsx("span",{className:"text-white font-semibold text-sm sm:text-base",children:"TheTheTrader"}),r.jsx("span",{className:"text-gray-400 text-xs sm:text-sm hidden sm:inline",children:"En ligne"})]})]}),r.jsx("div",{className:"text-blue-400 font-semibold text-sm sm:text-base text-center",children:((Rt=U[y])==null?void 0:Rt.title)||"#crypto-signaux"}),r.jsx("div",{})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row h-[750px] sm:h-[750px]",children:[r.jsxs("div",{className:"w-full sm:w-60 bg-gray-800 p-3 sm:p-4 border-b sm:border-b-0 sm:border-r border-gray-700 sm:h-full overflow-x-auto sm:overflow-x-visible",children:[r.jsxs("div",{className:"sm:hidden flex gap-3 mb-4 overflow-x-auto pl-2 pr-4 pt-4 pb-6",children:[r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[100px] ${y==="fondamentaux"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("fondamentaux"),children:" Fondamentaux"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[100px] ${y==="letsgooo-model"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("letsgooo-model"),children:" Letsgooo-model"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[90px] ${y==="crypto"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("crypto"),children:" Crypto"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[90px] ${y==="futur"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("futur"),children:" Futur"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[90px] ${y==="forex"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("forex"),children:" Forex"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[100px] ${y==="general-chat"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("general-chat"),children:" General-chat"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[100px] ${y==="profit-loss"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("profit-loss"),children:" Profit-loss"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[100px] ${y==="calendar"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("calendar"),children:" Journal Signaux"})]}),r.jsxs("div",{className:"hidden sm:block space-y-2",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-4",children:"DUCATION"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${y==="fondamentaux"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("fondamentaux"),children:" Fondamentaux"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${y==="letsgooo-model"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("letsgooo-model"),children:" Letsgooo-model"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-4",children:"SIGNAUX"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${y==="crypto"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("crypto"),children:" Crypto"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${y==="futur"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("futur"),children:" Futur"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${y==="forex"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("forex"),children:" Forex"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-4",children:"TRADING HUB"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${y==="general-chat"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("general-chat"),children:" General-chat"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${y==="profit-loss"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("profit-loss"),children:" Profit-loss"}),r.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${y==="calendar"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>w("calendar"),children:" Journal Signaux"})]})]})]})]}),r.jsxs("div",{className:"flex-1 bg-gray-900 flex flex-col",children:[r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:(Ce=(oe=U[y])==null?void 0:oe.messages)==null?void 0:Ce.map((re,Le)=>r.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:"TT"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-white font-semibold",children:re.user}),r.jsx("span",{className:"text-gray-400 text-sm",children:re.time})]}),re.type==="signal"?r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[r.jsx("div",{className:"text-white font-semibold mb-2",children:re.content.title}),r.jsx("div",{className:"space-y-1",children:re.content.details.map((O,le)=>r.jsxs("div",{className:"text-gray-300 text-sm",children:[O.icon," ",O.label,": ",O.value]},le))}),r.jsx("div",{className:"flex gap-2 mt-3",children:re.content.reactions.map((O,le)=>r.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 px-2 py-1 rounded text-sm text-white",children:[O.emoji," ",O.count]},le))})]}):re.type==="formation"?r.jsx("div",{className:"bg-gray-700 rounded-lg p-6",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsx("div",{className:"lg:w-1/3",children:r.jsx("img",{src:re.content.image,alt:re.content.title,className:"w-full h-48 lg:h-64 object-cover rounded-lg shadow-lg"})}),r.jsxs("div",{className:"lg:w-2/3",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:re.content.title}),r.jsx("p",{className:"text-gray-300 mb-4",children:re.content.description}),r.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm",children:[r.jsxs("span",{className:"text-blue-400",children:[" ",re.content.duration]}),r.jsxs("span",{className:"text-green-400",children:[" ",re.content.progress]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-white font-semibold mb-2",children:"Contenu:"}),r.jsx("ul",{className:"space-y-1",children:re.content.topics.map((O,le)=>r.jsxs("li",{className:"flex items-center gap-2 text-gray-300",children:[r.jsx("span",{className:"text-blue-400",children:""}),r.jsx("span",{children:O})]},le))})]}),r.jsx("button",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200",children:"Se connecter"})]})]})}):re.type==="calendar"?r.jsxs("div",{className:"bg-gray-700 rounded-lg p-6",children:[r.jsx("div",{className:"text-white font-semibold mb-6 text-lg",children:re.content}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2 mb-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(O=>r.jsx("div",{className:"text-center text-gray-400 font-semibold py-3 text-sm uppercase tracking-wide",children:O.substring(0,3)},O))}),r.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:re.calendarData.days.map((O,le)=>r.jsx("div",{className:`border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 cursor-pointer transition-all hover:shadow-md ${O.status==="win"?"bg-green-500/60 border-green-400/50 text-white":O.status==="loss"?"bg-red-500/60 border-red-400/50 text-white":O.status==="be"?"bg-blue-500/60 border-blue-400/50 text-white":"bg-gray-700 border-gray-600 text-gray-400"}`,children:r.jsxs("div",{className:"flex flex-col h-full justify-between",children:[r.jsx("div",{className:"text-xs md:text-sm font-semibold",children:O.date}),O.trades>0&&r.jsxs("div",{className:"text-xs font-bold text-center hidden md:block",children:[O.trades," signal",O.trades>1?"s":""]}),r.jsx("div",{className:"text-xs font-bold",children:O.pnl})]})},le))}),r.jsxs("div",{className:"flex items-center justify-center gap-6 mt-8 pt-6 border-t border-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-green-500/60 border border-green-400/50 rounded"}),r.jsx("span",{className:"text-sm text-gray-300",children:"WIN"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-red-500/60 border border-red-400/50 rounded"}),r.jsx("span",{className:"text-sm text-gray-300",children:"LOSS"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-blue-500/60 border border-blue-400/50 rounded"}),r.jsx("span",{className:"text-sm text-gray-300",children:"BREAK EVEN"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-gray-700 border border-gray-600 rounded"}),r.jsx("span",{className:"text-sm text-gray-300",children:"NO TRADE"})]})]})]}),r.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-xl p-4 md:p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-6",children:"Statistiques Signaux"}),r.jsxs("div",{className:"space-y-4 mb-8",children:[r.jsxs("div",{className:"bg-green-600/20 border-green-500/30 border rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-green-300 mb-1",children:"P&L Total"}),r.jsx("div",{className:"text-2xl font-bold text-green-200",children:re.calendarData.stats.totalPnL})]}),r.jsxs("div",{className:"bg-blue-600/20 border-blue-500/30 rounded-lg p-4 border",children:[r.jsx("div",{className:"text-sm text-blue-300 mb-1",children:"Win Rate"}),r.jsxs("div",{className:"text-2xl font-bold text-blue-200",children:[re.calendarData.stats.winRate,"%"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Aujourd'hui"}),r.jsx("div",{className:"text-lg font-bold text-blue-400",children:"3"})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Ce mois"}),r.jsx("div",{className:"text-lg font-bold text-white",children:re.calendarData.stats.totalTrades})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Win"}),r.jsx("div",{className:"text-lg font-bold text-green-400",children:"+$89"})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Loss"}),r.jsx("div",{className:"text-lg font-bold text-red-400",children:"-$34"})]})]})]})]})]})]}):r.jsx("div",{className:"text-gray-300 whitespace-pre-line",children:re.content}),re.reactions&&r.jsx("div",{className:"flex gap-2 mt-2",children:re.reactions.map((O,le)=>r.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 px-2 py-1 rounded text-sm text-white",children:[O.emoji," ",O.count]},le))})]})]})},Le))}),(v==="general-chat"||v==="profit-loss")&&r.jsx("div",{className:"p-4 border-t border-gray-700",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:"Tapez votre message...",className:"flex-1 bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg",children:"Envoyer"})]})})]})]})]})})})]}),!I&&r.jsx("footer",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-12 sm:py-20 px-4 sm:px-6 mt-0",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wide",children:"Informations Lgales"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>l("mentions-legales"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Mentions lgales"}),r.jsx("button",{onClick:()=>l("politique-confidentialite"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Politique de confidentialit"}),r.jsx("button",{onClick:()=>l("conditions-utilisation"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Conditions d'utilisation"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wide",children:"Conformit"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>l("avertissement-risques"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Avertissement sur les risques"}),r.jsx("button",{onClick:()=>l("conflits-interets"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Conflits d'intrts"}),r.jsx("button",{onClick:()=>l("cookies-traceurs"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Cookies et traceurs"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wide",children:"Contact"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>l("support-client"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Support client"}),r.jsx("button",{onClick:()=>l("signalement-incident"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Signalement d'incident"}),r.jsx("button",{onClick:()=>l("nous-contacter"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Nous contacter"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wide",children:"Services"}),r.jsx("div",{className:"space-y-3",children:r.jsx("button",{onClick:()=>l("livestream"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Livestream Trading"})})]})]}),r.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6 mt-12 mb-8",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-red-400 text-xl flex-shrink-0 mt-1",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-red-400 font-bold text-lg mb-3",children:"Avertissement sur les risques"}),r.jsxs("div",{className:"text-gray-300 text-sm leading-relaxed space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Le trading comporte des risques importants de perte en capital."})," Vous pourriez perdre tout ou partie de votre investissement initial."]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Les performances passes ne garantissent pas les rsultats futurs."})," Les signaux et analyses prsents ne constituent pas des conseils en investissement personnaliss."]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Tradez uniquement avec des fonds que vous pouvez vous permettre de perdre."})," TheTheTrader ne saurait tre tenu responsable des pertes encourues suite  l'utilisation de nos services."]}),r.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Ce service est destin  des fins ducatives et d'information. Consultez un conseiller financier professionnel avant toute dcision d'investissement."})]})]})]})}),r.jsx("div",{className:"border-t border-purple-700/50 mt-16 pt-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-20 md:h-64 lg:h-80 w-auto"})}),r.jsx("p",{className:"text-gray-400 text-sm mt-4",children:" 2025 TheTheTrader. Trading avec simplicit."})]})})]})})]}),t&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white p-8 rounded-lg max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Connexion"}),r.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700 transition-colors duration-200",children:""})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:u,onChange:re=>h(re.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"votre@email.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 mb-2",children:"Mot de passe"}),r.jsx("input",{type:"password",value:g,onChange:re=>p(re.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:""})]}),r.jsx("button",{onClick:$,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:opacity-90",children:"Se connecter"})]})]})})]})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js",{updateViaCache:"none"}).then(s=>{console.log("SW registered: ",s),s.update(),s.addEventListener("updatefound",()=>{console.log("Service worker update found");const e=s.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&window.location.reload()})})}).catch(s=>{console.log("SW registration failed: ",s)})});HC.createRoot(document.getElementById("root")).render(r.jsx(K.StrictMode,{children:r.jsx(Q5,{})}));
