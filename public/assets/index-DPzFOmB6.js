(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function w1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function N1(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var n=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(a){var o=Object.getOwnPropertyDescriptor(r,a);Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:function(){return r[a]}})}),n}var ig={exports:{}},Wc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function _1(){if(Vv)return Wc;Vv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:r,type:a,key:d,ref:o!==void 0?o:null,props:c}}return Wc.Fragment=e,Wc.jsx=n,Wc.jsxs=n,Wc}var Hv;function j1(){return Hv||(Hv=1,ig.exports=_1()),ig.exports}var t=j1(),ag={exports:{}},ht={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function S1(){if(Gv)return ht;Gv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),_=Symbol.iterator;function S(W){return W===null||typeof W!="object"?null:(W=_&&W[_]||W["@@iterator"],typeof W=="function"?W:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,re={};function ce(W,ge,De){this.props=W,this.context=ge,this.refs=re,this.updater=De||V}ce.prototype.isReactComponent={},ce.prototype.setState=function(W,ge){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ge,"setState")},ce.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function I(){}I.prototype=ce.prototype;function Ee(W,ge,De){this.props=W,this.context=ge,this.refs=re,this.updater=De||V}var te=Ee.prototype=new I;te.constructor=Ee,z(te,ce.prototype),te.isPureReactComponent=!0;var be=Array.isArray,Se={H:null,A:null,T:null,S:null,V:null},Ae=Object.prototype.hasOwnProperty;function B(W,ge,De,ue,Ne,Ye){return De=Ye.ref,{$$typeof:r,type:W,key:ge,ref:De!==void 0?De:null,props:Ye}}function M(W,ge){return B(W.type,ge,void 0,void 0,void 0,W.props)}function F(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function K(W){var ge={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(De){return ge[De]})}var Y=/\/+/g;function Q(W,ge){return typeof W=="object"&&W!==null&&W.key!=null?K(""+W.key):ge.toString(36)}function U(){}function gt(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(U,U):(W.status="pending",W.then(function(ge){W.status==="pending"&&(W.status="fulfilled",W.value=ge)},function(ge){W.status==="pending"&&(W.status="rejected",W.reason=ge)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function xe(W,ge,De,ue,Ne){var Ye=typeof W;(Ye==="undefined"||Ye==="boolean")&&(W=null);var Re=!1;if(W===null)Re=!0;else switch(Ye){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(W.$$typeof){case r:case e:Re=!0;break;case N:return Re=W._init,xe(Re(W._payload),ge,De,ue,Ne)}}if(Re)return Ne=Ne(W),Re=ue===""?"."+Q(W,0):ue,be(Ne)?(De="",Re!=null&&(De=Re.replace(Y,"$&/")+"/"),xe(Ne,ge,De,"",function(bs){return bs})):Ne!=null&&(F(Ne)&&(Ne=M(Ne,De+(Ne.key==null||W&&W.key===Ne.key?"":(""+Ne.key).replace(Y,"$&/")+"/")+Re)),ge.push(Ne)),1;Re=0;var dt=ue===""?".":ue+":";if(be(W))for(var Qe=0;Qe<W.length;Qe++)ue=W[Qe],Ye=dt+Q(ue,Qe),Re+=xe(ue,ge,De,Ye,Ne);else if(Qe=S(W),typeof Qe=="function")for(W=Qe.call(W),Qe=0;!(ue=W.next()).done;)ue=ue.value,Ye=dt+Q(ue,Qe++),Re+=xe(ue,ge,De,Ye,Ne);else if(Ye==="object"){if(typeof W.then=="function")return xe(gt(W),ge,De,ue,Ne);throw ge=String(W),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.")}return Re}function le(W,ge,De){if(W==null)return W;var ue=[],Ne=0;return xe(W,ue,"","",function(Ye){return ge.call(De,Ye,Ne++)}),ue}function fe(W){if(W._status===-1){var ge=W._result;ge=ge(),ge.then(function(De){(W._status===0||W._status===-1)&&(W._status=1,W._result=De)},function(De){(W._status===0||W._status===-1)&&(W._status=2,W._result=De)}),W._status===-1&&(W._status=0,W._result=ge)}if(W._status===1)return W._result.default;throw W._result}var ke=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function at(){}return ht.Children={map:le,forEach:function(W,ge,De){le(W,function(){ge.apply(this,arguments)},De)},count:function(W){var ge=0;return le(W,function(){ge++}),ge},toArray:function(W){return le(W,function(ge){return ge})||[]},only:function(W){if(!F(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},ht.Component=ce,ht.Fragment=n,ht.Profiler=o,ht.PureComponent=Ee,ht.StrictMode=a,ht.Suspense=y,ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se,ht.__COMPILER_RUNTIME={__proto__:null,c:function(W){return Se.H.useMemoCache(W)}},ht.cache=function(W){return function(){return W.apply(null,arguments)}},ht.cloneElement=function(W,ge,De){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var ue=z({},W.props),Ne=W.key,Ye=void 0;if(ge!=null)for(Re in ge.ref!==void 0&&(Ye=void 0),ge.key!==void 0&&(Ne=""+ge.key),ge)!Ae.call(ge,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ge.ref===void 0||(ue[Re]=ge[Re]);var Re=arguments.length-2;if(Re===1)ue.children=De;else if(1<Re){for(var dt=Array(Re),Qe=0;Qe<Re;Qe++)dt[Qe]=arguments[Qe+2];ue.children=dt}return B(W.type,Ne,void 0,void 0,Ye,ue)},ht.createContext=function(W){return W={$$typeof:d,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:c,_context:W},W},ht.createElement=function(W,ge,De){var ue,Ne={},Ye=null;if(ge!=null)for(ue in ge.key!==void 0&&(Ye=""+ge.key),ge)Ae.call(ge,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Ne[ue]=ge[ue]);var Re=arguments.length-2;if(Re===1)Ne.children=De;else if(1<Re){for(var dt=Array(Re),Qe=0;Qe<Re;Qe++)dt[Qe]=arguments[Qe+2];Ne.children=dt}if(W&&W.defaultProps)for(ue in Re=W.defaultProps,Re)Ne[ue]===void 0&&(Ne[ue]=Re[ue]);return B(W,Ye,void 0,void 0,null,Ne)},ht.createRef=function(){return{current:null}},ht.forwardRef=function(W){return{$$typeof:f,render:W}},ht.isValidElement=F,ht.lazy=function(W){return{$$typeof:N,_payload:{_status:-1,_result:W},_init:fe}},ht.memo=function(W,ge){return{$$typeof:x,type:W,compare:ge===void 0?null:ge}},ht.startTransition=function(W){var ge=Se.T,De={};Se.T=De;try{var ue=W(),Ne=Se.S;Ne!==null&&Ne(De,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(at,ke)}catch(Ye){ke(Ye)}finally{Se.T=ge}},ht.unstable_useCacheRefresh=function(){return Se.H.useCacheRefresh()},ht.use=function(W){return Se.H.use(W)},ht.useActionState=function(W,ge,De){return Se.H.useActionState(W,ge,De)},ht.useCallback=function(W,ge){return Se.H.useCallback(W,ge)},ht.useContext=function(W){return Se.H.useContext(W)},ht.useDebugValue=function(){},ht.useDeferredValue=function(W,ge){return Se.H.useDeferredValue(W,ge)},ht.useEffect=function(W,ge,De){var ue=Se.H;if(typeof De=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(W,ge)},ht.useId=function(){return Se.H.useId()},ht.useImperativeHandle=function(W,ge,De){return Se.H.useImperativeHandle(W,ge,De)},ht.useInsertionEffect=function(W,ge){return Se.H.useInsertionEffect(W,ge)},ht.useLayoutEffect=function(W,ge){return Se.H.useLayoutEffect(W,ge)},ht.useMemo=function(W,ge){return Se.H.useMemo(W,ge)},ht.useOptimistic=function(W,ge){return Se.H.useOptimistic(W,ge)},ht.useReducer=function(W,ge,De){return Se.H.useReducer(W,ge,De)},ht.useRef=function(W){return Se.H.useRef(W)},ht.useState=function(W){return Se.H.useState(W)},ht.useSyncExternalStore=function(W,ge,De){return Se.H.useSyncExternalStore(W,ge,De)},ht.useTransition=function(){return Se.H.useTransition()},ht.version="19.1.1",ht}var Yv;function Cp(){return Yv||(Yv=1,ag.exports=S1()),ag.exports}var L=Cp(),lg={exports:{}},Kc={},og={exports:{}},cg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function T1(){return Wv||(Wv=1,(function(r){function e(le,fe){var ke=le.length;le.push(fe);e:for(;0<ke;){var at=ke-1>>>1,W=le[at];if(0<o(W,fe))le[at]=fe,le[ke]=W,ke=at;else break e}}function n(le){return le.length===0?null:le[0]}function a(le){if(le.length===0)return null;var fe=le[0],ke=le.pop();if(ke!==fe){le[0]=ke;e:for(var at=0,W=le.length,ge=W>>>1;at<ge;){var De=2*(at+1)-1,ue=le[De],Ne=De+1,Ye=le[Ne];if(0>o(ue,ke))Ne<W&&0>o(Ye,ue)?(le[at]=Ye,le[Ne]=ke,at=Ne):(le[at]=ue,le[De]=ke,at=De);else if(Ne<W&&0>o(Ye,ke))le[at]=Ye,le[Ne]=ke,at=Ne;else break e}}return fe}function o(le,fe){var ke=le.sortIndex-fe.sortIndex;return ke!==0?ke:le.id-fe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var y=[],x=[],N=1,_=null,S=3,V=!1,z=!1,re=!1,ce=!1,I=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function be(le){for(var fe=n(x);fe!==null;){if(fe.callback===null)a(x);else if(fe.startTime<=le)a(x),fe.sortIndex=fe.expirationTime,e(y,fe);else break;fe=n(x)}}function Se(le){if(re=!1,be(le),!z)if(n(y)!==null)z=!0,Ae||(Ae=!0,Q());else{var fe=n(x);fe!==null&&xe(Se,fe.startTime-le)}}var Ae=!1,B=-1,M=5,F=-1;function K(){return ce?!0:!(r.unstable_now()-F<M)}function Y(){if(ce=!1,Ae){var le=r.unstable_now();F=le;var fe=!0;try{e:{z=!1,re&&(re=!1,Ee(B),B=-1),V=!0;var ke=S;try{t:{for(be(le),_=n(y);_!==null&&!(_.expirationTime>le&&K());){var at=_.callback;if(typeof at=="function"){_.callback=null,S=_.priorityLevel;var W=at(_.expirationTime<=le);if(le=r.unstable_now(),typeof W=="function"){_.callback=W,be(le),fe=!0;break t}_===n(y)&&a(y),be(le)}else a(y);_=n(y)}if(_!==null)fe=!0;else{var ge=n(x);ge!==null&&xe(Se,ge.startTime-le),fe=!1}}break e}finally{_=null,S=ke,V=!1}fe=void 0}}finally{fe?Q():Ae=!1}}}var Q;if(typeof te=="function")Q=function(){te(Y)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,gt=U.port2;U.port1.onmessage=Y,Q=function(){gt.postMessage(null)}}else Q=function(){I(Y,0)};function xe(le,fe){B=I(function(){le(r.unstable_now())},fe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(le){le.callback=null},r.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<le?Math.floor(1e3/le):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(le){switch(S){case 1:case 2:case 3:var fe=3;break;default:fe=S}var ke=S;S=fe;try{return le()}finally{S=ke}},r.unstable_requestPaint=function(){ce=!0},r.unstable_runWithPriority=function(le,fe){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ke=S;S=le;try{return fe()}finally{S=ke}},r.unstable_scheduleCallback=function(le,fe,ke){var at=r.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?at+ke:at):ke=at,le){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ke+W,le={id:N++,callback:fe,priorityLevel:le,startTime:ke,expirationTime:W,sortIndex:-1},ke>at?(le.sortIndex=ke,e(x,le),n(y)===null&&le===n(x)&&(re?(Ee(B),B=-1):re=!0,xe(Se,ke-at))):(le.sortIndex=W,e(y,le),z||V||(z=!0,Ae||(Ae=!0,Q()))),le},r.unstable_shouldYield=K,r.unstable_wrapCallback=function(le){var fe=S;return function(){var ke=S;S=fe;try{return le.apply(this,arguments)}finally{S=ke}}}})(cg)),cg}var Kv;function E1(){return Kv||(Kv=1,og.exports=T1()),og.exports}var ug={exports:{}},Mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function A1(){if(Jv)return Mn;Jv=1;var r=Cp();function e(y){var x="https://react.dev/errors/"+y;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)x+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(y,x,N){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:y,containerInfo:x,implementation:N}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(y,x){if(y==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Mn.createPortal=function(y,x){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(y,x,null,N)},Mn.flushSync=function(y){var x=d.T,N=a.p;try{if(d.T=null,a.p=2,y)return y()}finally{d.T=x,a.p=N,a.d.f()}},Mn.preconnect=function(y,x){typeof y=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,a.d.C(y,x))},Mn.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},Mn.preinit=function(y,x){if(typeof y=="string"&&x&&typeof x.as=="string"){var N=x.as,_=f(N,x.crossOrigin),S=typeof x.integrity=="string"?x.integrity:void 0,V=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;N==="style"?a.d.S(y,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:V}):N==="script"&&a.d.X(y,{crossOrigin:_,integrity:S,fetchPriority:V,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Mn.preinitModule=function(y,x){if(typeof y=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var N=f(x.as,x.crossOrigin);a.d.M(y,{crossOrigin:N,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&a.d.M(y)},Mn.preload=function(y,x){if(typeof y=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var N=x.as,_=f(N,x.crossOrigin);a.d.L(y,N,{crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Mn.preloadModule=function(y,x){if(typeof y=="string")if(x){var N=f(x.as,x.crossOrigin);a.d.m(y,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:N,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else a.d.m(y)},Mn.requestFormReset=function(y){a.d.r(y)},Mn.unstable_batchedUpdates=function(y,x){return y(x)},Mn.useFormState=function(y,x,N){return d.H.useFormState(y,x,N)},Mn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Mn.version="19.1.1",Mn}var Qv;function C1(){if(Qv)return ug.exports;Qv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ug.exports=A1(),ug.exports}var Xv;function k1(){if(Xv)return Kc;Xv=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=E1(),e=Cp(),n=C1();function a(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function c(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function d(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function f(s){if(c(s)!==s)throw Error(a(188))}function y(s){var i=s.alternate;if(!i){if(i=c(s),i===null)throw Error(a(188));return i!==s?null:s}for(var l=s,u=i;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){l=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return f(m),s;if(g===u)return f(m),i;g=g.sibling}throw Error(a(188))}if(l.return!==u.return)l=m,u=g;else{for(var j=!1,C=m.child;C;){if(C===l){j=!0,l=m,u=g;break}if(C===u){j=!0,u=m,l=g;break}C=C.sibling}if(!j){for(C=g.child;C;){if(C===l){j=!0,l=g,u=m;break}if(C===u){j=!0,u=g,l=m;break}C=C.sibling}if(!j)throw Error(a(189))}}if(l.alternate!==u)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?s:i}function x(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=x(s),i!==null)return i;s=s.sibling}return null}var N=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),Ee=Symbol.for("react.consumer"),te=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var U=Symbol.for("react.client.reference");function gt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===U?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case z:return"Fragment";case ce:return"Profiler";case re:return"StrictMode";case Se:return"Suspense";case Ae:return"SuspenseList";case F:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case V:return"Portal";case te:return(s.displayName||"Context")+".Provider";case Ee:return(s._context.displayName||"Context")+".Consumer";case be:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case B:return i=s.displayName||null,i!==null?i:gt(s.type)||"Memo";case M:i=s._payload,s=s._init;try{return gt(s(i))}catch{}}return null}var xe=Array.isArray,le=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},at=[],W=-1;function ge(s){return{current:s}}function De(s){0>W||(s.current=at[W],at[W]=null,W--)}function ue(s,i){W++,at[W]=s.current,s.current=i}var Ne=ge(null),Ye=ge(null),Re=ge(null),dt=ge(null);function Qe(s,i){switch(ue(Re,i),ue(Ye,s),ue(Ne,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?yv(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=yv(i),s=vv(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}De(Ne),ue(Ne,s)}function bs(){De(Ne),De(Ye),De(Re)}function An(s){s.memoizedState!==null&&ue(dt,s);var i=Ne.current,l=vv(i,s.type);i!==l&&(ue(Ye,s),ue(Ne,l))}function sn(s){Ye.current===s&&(De(Ne),De(Ye)),dt.current===s&&(De(dt),qc._currentValue=ke)}var Tr=Object.prototype.hasOwnProperty,Er=r.unstable_scheduleCallback,ur=r.unstable_cancelCallback,Te=r.unstable_shouldYield,Ie=r.unstable_requestPaint,Ve=r.unstable_now,ot=r.unstable_getCurrentPriorityLevel,st=r.unstable_ImmediatePriority,nt=r.unstable_UserBlockingPriority,Gt=r.unstable_NormalPriority,Jn=r.unstable_LowPriority,Mt=r.unstable_IdlePriority,Ar=r.log,dr=r.unstable_setDisableYieldValue,Qr=null,wt=null;function rs(s){if(typeof Ar=="function"&&dr(s),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Qr,s)}catch{}}var Os=Math.clz32?Math.clz32:Ss,Pn=Math.log,Cn=Math.LN2;function Ss(s){return s>>>=0,s===0?32:31-(Pn(s)/Cn|0)|0}var ps=256,Qn=4194304;function Gs(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ts(s,i,l){var u=s.pendingLanes;if(u===0)return 0;var m=0,g=s.suspendedLanes,j=s.pingedLanes;s=s.warmLanes;var C=u&134217727;return C!==0?(u=C&~g,u!==0?m=Gs(u):(j&=C,j!==0?m=Gs(j):l||(l=C&~s,l!==0&&(m=Gs(l))))):(C=u&~g,C!==0?m=Gs(C):j!==0?m=Gs(j):l||(l=u&~s,l!==0&&(m=Gs(l)))),m===0?0:i!==0&&i!==m&&(i&g)===0&&(g=m&-m,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:m}function Xt(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function fn(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Es(){var s=ps;return ps<<=1,(ps&4194048)===0&&(ps=256),s}function us(){var s=Qn;return Qn<<=1,(Qn&62914560)===0&&(Qn=4194304),s}function Xr(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function Et(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Zr(s,i,l,u,m,g){var j=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var C=s.entanglements,q=s.expirationTimes,se=s.hiddenUpdates;for(l=j&~l;0<l;){var me=31-Os(l),ye=1<<me;C[me]=0,q[me]=-1;var ae=se[me];if(ae!==null)for(se[me]=null,me=0;me<ae.length;me++){var oe=ae[me];oe!==null&&(oe.lane&=-536870913)}l&=~ye}u!==0&&hr(s,u,0),g!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=g&~(j&~i))}function hr(s,i,l){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-Os(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function Un(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var u=31-Os(l),m=1<<u;m&i|s[u]&i&&(s[u]|=i),l&=~m}}function Cr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Zn(){var s=fe.p;return s!==0?s:(s=window.event,s===void 0?32:Uv(s.type))}function al(s,i){var l=fe.p;try{return fe.p=s,i()}finally{fe.p=l}}var kn=Math.random().toString(36).slice(2),xs="__reactFiber$"+kn,As="__reactProps$"+kn,kr="__reactContainer$"+kn,mr="__reactEvents$"+kn,_i="__reactListeners$"+kn,xa="__reactHandles$"+kn,nn="__reactResources$"+kn,fr="__reactMarker$"+kn;function Dr(s){delete s[xs],delete s[As],delete s[mr],delete s[_i],delete s[xa]}function is(s){var i=s[xs];if(i)return i;for(var l=s.parentNode;l;){if(i=l[kr]||l[xs]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=_v(s);s!==null;){if(l=s[xs])return l;s=_v(s)}return i}s=l,l=s.parentNode}return null}function gn(s){if(s=s[xs]||s[kr]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function Cs(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(a(33))}function ks(s){var i=s[nn];return i||(i=s[nn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Vt(s){s[fr]=!0}var Bn=new Set,Ot={};function pn(s,i){ys(s,i),ys(s+"Capture",i)}function ys(s,i){for(Ot[s]=i,s=0;s<i.length;s++)Bn.add(i[s])}var Zt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yt={},zs={};function Nt(s){return Tr.call(zs,s)?!0:Tr.call(Yt,s)?!1:Zt.test(s)?zs[s]=!0:(Yt[s]=!0,!1)}function Ds(s,i,l){if(Nt(i))if(l===null)s.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+l)}}function At(s,i,l){if(l===null)s.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+l)}}function Lt(s,i,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(i,l,""+u)}}var Ht,rn;function He(s){if(Ht===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ht=i&&i[1]||"",rn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ht+s+rn}var $t=!1;function Rr(s,i){if(!s||$t)return"";$t=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(oe){var ae=oe}Reflect.construct(s,[],ye)}else{try{ye.call()}catch(oe){ae=oe}s.call(ye.prototype)}}else{try{throw Error()}catch(oe){ae=oe}(ye=s())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(oe){if(oe&&ae&&typeof oe.stack=="string")return[oe.stack,ae.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),j=g[0],C=g[1];if(j&&C){var q=j.split(`
`),se=C.split(`
`);for(m=u=0;u<q.length&&!q[u].includes("DetermineComponentFrameRoot");)u++;for(;m<se.length&&!se[m].includes("DetermineComponentFrameRoot");)m++;if(u===q.length||m===se.length)for(u=q.length-1,m=se.length-1;1<=u&&0<=m&&q[u]!==se[m];)m--;for(;1<=u&&0<=m;u--,m--)if(q[u]!==se[m]){if(u!==1||m!==1)do if(u--,m--,0>m||q[u]!==se[m]){var me=`
`+q[u].replace(" at new "," at ");return s.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",s.displayName)),me}while(1<=u&&0<=m);break}}}finally{$t=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?He(l):""}function ya(s){switch(s.tag){case 26:case 27:case 5:return He(s.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return Rr(s.type,!1);case 11:return Rr(s.type.render,!1);case 1:return Rr(s.type,!0);case 31:return He("Activity");default:return""}}function Ys(s){try{var i="";do i+=ya(s),s=s.return;while(s);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function es(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Je(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ct(s){var i=Je(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),u=""+s[i];if(!s.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return m.call(this)},set:function(j){u=""+j,g.call(this,j)}}),Object.defineProperty(s,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(j){u=""+j},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function ei(s){s._valueTracker||(s._valueTracker=Ct(s))}function zt(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return s&&(u=Je(s)?s.checked?"true":"false":s.value),s=u,s!==l?(i.setValue(s),!0):!1}function Ir(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ji=/[\n"\\]/g;function ws(s){return s.replace(ji,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Fi(s,i,l,u,m,g,j,C){s.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?s.type=j:s.removeAttribute("type"),i!=null?j==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+es(i)):s.value!==""+es(i)&&(s.value=""+es(i)):j!=="submit"&&j!=="reset"||s.removeAttribute("value"),i!=null?Fe(s,j,es(i)):l!=null?Fe(s,j,es(l)):u!=null&&s.removeAttribute("value"),m==null&&g!=null&&(s.defaultChecked=!!g),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+es(C):s.removeAttribute("name")}function $i(s,i,l,u,m,g,j,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(s.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;l=l!=null?""+es(l):"",i=i!=null?""+es(i):l,C||i===s.value||(s.value=i),s.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=C?s.checked:!!u,s.defaultChecked=!!u,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(s.name=j)}function Fe(s,i,l){i==="number"&&Ir(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Ls(s,i,l,u){if(s=s.options,i){i={};for(var m=0;m<l.length;m++)i["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=i.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&u&&(s[l].defaultSelected=!0)}else{for(l=""+es(l),i=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,u&&(s[m].defaultSelected=!0);return}i!==null||s[m].disabled||(i=s[m])}i!==null&&(i.selected=!0)}}function gr(s,i,l){if(i!=null&&(i=""+es(i),i!==s.value&&(s.value=i),l==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=l!=null?""+es(l):""}function Ke(s,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(a(92));if(xe(u)){if(1<u.length)throw Error(a(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=es(i),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function an(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var Dn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xn(s,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,l):typeof l!="number"||l===0||Dn.has(i)?i==="float"?s.cssFloat=l:s[i]=(""+l).trim():s[i]=l+"px"}function zi(s,i,l){if(i!=null&&typeof i!="object")throw Error(a(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&l[m]!==u&&xn(s,m,u)}else for(var g in i)i.hasOwnProperty(g)&&xn(s,g,i[g])}function ti(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$e=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yn(s){return $e.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Si=null;function Pt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var pr=null,Ps=null;function si(s){var i=gn(s);if(i&&(s=i.stateNode)){var l=s[As]||null;e:switch(s=i.stateNode,i.type){case"input":if(Fi(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ws(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==s&&u.form===s.form){var m=u[As]||null;if(!m)throw Error(a(90));Fi(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===s.form&&zt(u)}break e;case"textarea":gr(s,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Ls(s,!!l.multiple,i,!1)}}}var ni=!1;function Mr(s,i,l){if(ni)return s(i,l);ni=!0;try{var u=s(i);return u}finally{if(ni=!1,(pr!==null||Ps!==null)&&(jd(),pr&&(i=pr,s=Ps,Ps=pr=null,si(i),s)))for(i=0;i<s.length;i++)si(s[i])}}function Or(s,i){var l=s.stateNode;if(l===null)return null;var u=l[As]||null;if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(a(231,i,typeof l));return l}var mt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ut=!1;if(mt)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{Ut=!1}var ds=null,Tt=null,Fn=null;function Vi(){if(Fn)return Fn;var s,i=Tt,l=i.length,u,m="value"in ds?ds.value:ds.textContent,g=m.length;for(s=0;s<l&&i[s]===m[s];s++);var j=l-s;for(u=1;u<=j&&i[l-u]===m[g-u];u++);return Fn=m.slice(s,1<u?1-u:void 0)}function Lr(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Rn(){return!0}function xr(){return!1}function Ns(s){function i(l,u,m,g,j){this._reactName=l,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=j,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(l=s[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Rn:xr,this.isPropagationStopped=xr,this}return N(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Rn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Rn)},persist:function(){},isPersistent:Rn}),i}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pr=Ns(Us),ri=N({},Us,{view:0,detail:0}),Ur=Ns(ri),ii,ai,vn,er=N({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:D,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vn&&(vn&&s.type==="mousemove"?(ii=s.screenX-vn.screenX,ai=s.screenY-vn.screenY):ai=ii=0,vn=s),ii)},movementY:function(s){return"movementY"in s?s.movementY:ai}}),li=Ns(er),$n=N({},er,{dataTransfer:0}),va=Ns($n),yr=N({},ri,{relatedTarget:0}),tr=Ns(yr),zn=N({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),oi=Ns(zn),Br=N({},Us,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ti=Ns(Br),ci=N({},Us,{data:0}),Fr=Ns(ci),Hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=k[s])?!!i[s]:!1}function D(){return P}var $=N({},ri,{key:function(s){if(s.key){var i=Hi[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Lr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?b[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:D,charCode:function(s){return s.type==="keypress"?Lr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Lr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ne=Ns($),de=N({},er,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),he=Ns(de),Oe=N({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:D}),h=Ns(Oe),v=N({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Ns(v),E=N({},er,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),G=Ns(E),Z=N({},Us,{newState:0,oldState:0}),we=Ns(Z),Be=[9,13,27,32],Ue=mt&&"CompositionEvent"in window,p=null;mt&&"documentMode"in document&&(p=document.documentMode);var T=mt&&"TextEvent"in window&&!p,R=mt&&(!Ue||p&&8<p&&11>=p),A=" ",O=!1;function H(s,i){switch(s){case"keyup":return Be.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ie(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ve=!1;function _e(s,i){switch(s){case"compositionend":return ie(i);case"keypress":return i.which!==32?null:(O=!0,A);case"textInput":return s=i.data,s===A&&O?null:s;default:return null}}function je(s,i){if(ve)return s==="compositionend"||!Ue&&H(s,i)?(s=Vi(),Fn=Tt=ds=null,ve=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return R&&i.locale!=="ko"?null:i.data;default:return null}}var Ge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function et(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Ge[s.type]:i==="textarea"}function ct(s,i,l,u){pr?Ps?Ps.push(u):Ps=[u]:pr=u,i=kd(i,"onChange"),0<i.length&&(l=new Pr("onChange","change",null,l,u),s.push({event:l,listeners:i}))}var Pe=null,qe=null;function Me(s){mv(s,0)}function Le(s){var i=Cs(s);if(zt(i))return s}function rt(s,i){if(s==="change")return i}var lt=!1;if(mt){var pt;if(mt){var bn="oninput"in document;if(!bn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),bn=typeof qn.oninput=="function"}pt=bn}else pt=!1;lt=pt&&(!document.documentMode||9<document.documentMode)}function Ks(){Pe&&(Pe.detachEvent("onpropertychange",sr),qe=Pe=null)}function sr(s){if(s.propertyName==="value"&&Le(qe)){var i=[];ct(i,qe,s,Pt(s)),Mr(Me,i)}}function vr(s,i,l){s==="focusin"?(Ks(),Pe=i,qe=l,Pe.attachEvent("onpropertychange",sr)):s==="focusout"&&Ks()}function Ei(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Le(qe)}function wn(s,i){if(s==="click")return Le(i)}function nr(s,i){if(s==="input"||s==="change")return Le(i)}function ba(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var ln=typeof Object.is=="function"?Object.is:ba;function ll(s,i){if(ln(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var m=l[u];if(!Tr.call(i,m)||!ln(s[m],i[m]))return!1}return!0}function qu(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ol(s,i){var l=qu(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=i&&u>=i)return{node:l,offset:i-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=qu(l)}}function Vu(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Vu(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Hu(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Ir(s.document);i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=Ir(s.document)}return i}function pm(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var sS=mt&&"documentMode"in document&&11>=document.documentMode,Ql=null,xm=null,uc=null,ym=!1;function qx(s,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ym||Ql==null||Ql!==Ir(u)||(u=Ql,"selectionStart"in u&&pm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),uc&&ll(uc,u)||(uc=u,u=kd(xm,"onSelect"),0<u.length&&(i=new Pr("onSelect","select",null,i,l),s.push({event:i,listeners:u}),i.target=Ql)))}function cl(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var Xl={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionrun:cl("Transition","TransitionRun"),transitionstart:cl("Transition","TransitionStart"),transitioncancel:cl("Transition","TransitionCancel"),transitionend:cl("Transition","TransitionEnd")},vm={},Vx={};mt&&(Vx=document.createElement("div").style,"AnimationEvent"in window||(delete Xl.animationend.animation,delete Xl.animationiteration.animation,delete Xl.animationstart.animation),"TransitionEvent"in window||delete Xl.transitionend.transition);function ul(s){if(vm[s])return vm[s];if(!Xl[s])return s;var i=Xl[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in Vx)return vm[s]=i[l];return s}var Hx=ul("animationend"),Gx=ul("animationiteration"),Yx=ul("animationstart"),nS=ul("transitionrun"),rS=ul("transitionstart"),iS=ul("transitioncancel"),Wx=ul("transitionend"),Kx=new Map,bm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bm.push("scrollEnd");function ui(s,i){Kx.set(s,i),pn(i,[s])}var Jx=new WeakMap;function $r(s,i){if(typeof s=="object"&&s!==null){var l=Jx.get(s);return l!==void 0?l:(i={value:s,source:i,stack:Ys(i)},Jx.set(s,i),i)}return{value:s,source:i,stack:Ys(i)}}var zr=[],Zl=0,wm=0;function Gu(){for(var s=Zl,i=wm=Zl=0;i<s;){var l=zr[i];zr[i++]=null;var u=zr[i];zr[i++]=null;var m=zr[i];zr[i++]=null;var g=zr[i];if(zr[i++]=null,u!==null&&m!==null){var j=u.pending;j===null?m.next=m:(m.next=j.next,j.next=m),u.pending=m}g!==0&&Qx(l,m,g)}}function Yu(s,i,l,u){zr[Zl++]=s,zr[Zl++]=i,zr[Zl++]=l,zr[Zl++]=u,wm|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Nm(s,i,l,u){return Yu(s,i,l,u),Wu(s)}function eo(s,i){return Yu(s,null,null,i),Wu(s)}function Qx(s,i,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var m=!1,g=s.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(s=g.stateNode,s===null||s._visibility&1||(m=!0)),s=g,g=g.return;return s.tag===3?(g=s.stateNode,m&&i!==null&&(m=31-Os(l),s=g.hiddenUpdates,u=s[m],u===null?s[m]=[i]:u.push(i),i.lane=l|536870912),g):null}function Wu(s){if(50<Oc)throw Oc=0,Cf=null,Error(a(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var to={};function aS(s,i,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(s,i,l,u){return new aS(s,i,l,u)}function _m(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Gi(s,i){var l=s.alternate;return l===null?(l=br(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Xx(s,i){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,i=l.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Ku(s,i,l,u,m,g){var j=0;if(u=s,typeof s=="function")_m(s)&&(j=1);else if(typeof s=="string")j=o1(s,l,Ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case F:return s=br(31,l,i,m),s.elementType=F,s.lanes=g,s;case z:return dl(l.children,m,g,i);case re:j=8,m|=24;break;case ce:return s=br(12,l,i,m|2),s.elementType=ce,s.lanes=g,s;case Se:return s=br(13,l,i,m),s.elementType=Se,s.lanes=g,s;case Ae:return s=br(19,l,i,m),s.elementType=Ae,s.lanes=g,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:case te:j=10;break e;case Ee:j=9;break e;case be:j=11;break e;case B:j=14;break e;case M:j=16,u=null;break e}j=29,l=Error(a(130,s===null?"null":typeof s,"")),u=null}return i=br(j,l,i,m),i.elementType=s,i.type=u,i.lanes=g,i}function dl(s,i,l,u){return s=br(7,s,u,i),s.lanes=l,s}function jm(s,i,l){return s=br(6,s,null,i),s.lanes=l,s}function Sm(s,i,l){return i=br(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var so=[],no=0,Ju=null,Qu=0,qr=[],Vr=0,hl=null,Yi=1,Wi="";function ml(s,i){so[no++]=Qu,so[no++]=Ju,Ju=s,Qu=i}function Zx(s,i,l){qr[Vr++]=Yi,qr[Vr++]=Wi,qr[Vr++]=hl,hl=s;var u=Yi;s=Wi;var m=32-Os(u)-1;u&=~(1<<m),l+=1;var g=32-Os(i)+m;if(30<g){var j=m-m%5;g=(u&(1<<j)-1).toString(32),u>>=j,m-=j,Yi=1<<32-Os(i)+m|l<<m|u,Wi=g+s}else Yi=1<<g|l<<m|u,Wi=s}function Tm(s){s.return!==null&&(ml(s,1),Zx(s,1,0))}function Em(s){for(;s===Ju;)Ju=so[--no],so[no]=null,Qu=so[--no],so[no]=null;for(;s===hl;)hl=qr[--Vr],qr[Vr]=null,Wi=qr[--Vr],qr[Vr]=null,Yi=qr[--Vr],qr[Vr]=null}var Vn=null,Rs=null,qt=!1,fl=null,Ai=!1,Am=Error(a(519));function gl(s){var i=Error(a(418,""));throw mc($r(i,s)),Am}function e0(s){var i=s.stateNode,l=s.type,u=s.memoizedProps;switch(i[xs]=s,i[As]=u,l){case"dialog":jt("cancel",i),jt("close",i);break;case"iframe":case"object":case"embed":jt("load",i);break;case"video":case"audio":for(l=0;l<Pc.length;l++)jt(Pc[l],i);break;case"source":jt("error",i);break;case"img":case"image":case"link":jt("error",i),jt("load",i);break;case"details":jt("toggle",i);break;case"input":jt("invalid",i),$i(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ei(i);break;case"select":jt("invalid",i);break;case"textarea":jt("invalid",i),Ke(i,u.value,u.defaultValue,u.children),ei(i)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||xv(i.textContent,l)?(u.popover!=null&&(jt("beforetoggle",i),jt("toggle",i)),u.onScroll!=null&&jt("scroll",i),u.onScrollEnd!=null&&jt("scrollend",i),u.onClick!=null&&(i.onclick=Dd),i=!0):i=!1,i||gl(s)}function t0(s){for(Vn=s.return;Vn;)switch(Vn.tag){case 5:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:Vn=Vn.return}}function dc(s){if(s!==Vn)return!1;if(!qt)return t0(s),qt=!0,!1;var i=s.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Hf(s.type,s.memoizedProps)),l=!l),l&&Rs&&gl(s),t0(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(i===0){Rs=hi(s.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++;s=s.nextSibling}Rs=null}}else i===27?(i=Rs,La(s.type)?(s=Kf,Kf=null,Rs=s):Rs=i):Rs=Vn?hi(s.stateNode.nextSibling):null;return!0}function hc(){Rs=Vn=null,qt=!1}function s0(){var s=fl;return s!==null&&(ar===null?ar=s:ar.push.apply(ar,s),fl=null),s}function mc(s){fl===null?fl=[s]:fl.push(s)}var Cm=ge(null),pl=null,Ki=null;function wa(s,i,l){ue(Cm,i._currentValue),i._currentValue=l}function Ji(s){s._currentValue=Cm.current,De(Cm)}function km(s,i,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===l)break;s=s.return}}function Dm(s,i,l,u){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var g=m.dependencies;if(g!==null){var j=m.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=m;for(var q=0;q<i.length;q++)if(C.context===i[q]){g.lanes|=l,C=g.alternate,C!==null&&(C.lanes|=l),km(g.return,l,s),u||(j=null);break e}g=C.next}}else if(m.tag===18){if(j=m.return,j===null)throw Error(a(341));j.lanes|=l,g=j.alternate,g!==null&&(g.lanes|=l),km(j,l,s),j=null}else j=m.child;if(j!==null)j.return=m;else for(j=m;j!==null;){if(j===s){j=null;break}if(m=j.sibling,m!==null){m.return=j.return,j=m;break}j=j.return}m=j}}function fc(s,i,l,u){s=null;for(var m=i,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var j=m.alternate;if(j===null)throw Error(a(387));if(j=j.memoizedProps,j!==null){var C=m.type;ln(m.pendingProps.value,j.value)||(s!==null?s.push(C):s=[C])}}else if(m===dt.current){if(j=m.alternate,j===null)throw Error(a(387));j.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(qc):s=[qc])}m=m.return}s!==null&&Dm(i,s,l,u),i.flags|=262144}function Xu(s){for(s=s.firstContext;s!==null;){if(!ln(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function xl(s){pl=s,Ki=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function In(s){return n0(pl,s)}function Zu(s,i){return pl===null&&xl(s),n0(s,i)}function n0(s,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Ki===null){if(s===null)throw Error(a(308));Ki=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else Ki=Ki.next=i;return l}var lS=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(l){return l()})}},oS=r.unstable_scheduleCallback,cS=r.unstable_NormalPriority,Js={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rm(){return{controller:new lS,data:new Map,refCount:0}}function gc(s){s.refCount--,s.refCount===0&&oS(cS,function(){s.controller.abort()})}var pc=null,Im=0,ro=0,io=null;function uS(s,i){if(pc===null){var l=pc=[];Im=0,ro=Lf(),io={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Im++,i.then(r0,r0),i}function r0(){if(--Im===0&&pc!==null){io!==null&&(io.status="fulfilled");var s=pc;pc=null,ro=0,io=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function dS(s,i){var l=[],u={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<l.length;m++)(0,l[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),u}var i0=le.S;le.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&uS(s,i),i0!==null&&i0(s,i)};var yl=ge(null);function Mm(){var s=yl.current;return s!==null?s:hs.pooledCache}function ed(s,i){i===null?ue(yl,yl.current):ue(yl,i.pool)}function a0(){var s=Mm();return s===null?null:{parent:Js._currentValue,pool:s}}var xc=Error(a(460)),l0=Error(a(474)),td=Error(a(542)),Om={then:function(){}};function o0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function sd(){}function c0(s,i,l){switch(l=s[l],l===void 0?s.push(i):l!==i&&(i.then(sd,sd),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,d0(s),s;default:if(typeof i.status=="string")i.then(sd,sd);else{if(s=hs,s!==null&&100<s.shellSuspendCounter)throw Error(a(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,d0(s),s}throw yc=i,xc}}var yc=null;function u0(){if(yc===null)throw Error(a(459));var s=yc;return yc=null,s}function d0(s){if(s===xc||s===td)throw Error(a(483))}var Na=!1;function Lm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pm(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function _a(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ja(s,i,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Wt&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=Wu(s),Qx(s,null,l),i}return Yu(s,u,i,l),Wu(s)}function vc(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,l|=u,i.lanes=l,Un(s,l)}}function Um(s,i){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var j={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=j:g=g.next=j,l=l.next}while(l!==null);g===null?m=g=i:g=g.next=i}else m=g=i;l={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}var Bm=!1;function bc(){if(Bm){var s=io;if(s!==null)throw s}}function wc(s,i,l,u){Bm=!1;var m=s.updateQueue;Na=!1;var g=m.firstBaseUpdate,j=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var q=C,se=q.next;q.next=null,j===null?g=se:j.next=se,j=q;var me=s.alternate;me!==null&&(me=me.updateQueue,C=me.lastBaseUpdate,C!==j&&(C===null?me.firstBaseUpdate=se:C.next=se,me.lastBaseUpdate=q))}if(g!==null){var ye=m.baseState;j=0,me=se=q=null,C=g;do{var ae=C.lane&-536870913,oe=ae!==C.lane;if(oe?(kt&ae)===ae:(u&ae)===ae){ae!==0&&ae===ro&&(Bm=!0),me!==null&&(me=me.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var it=s,Xe=C;ae=i;var ns=l;switch(Xe.tag){case 1:if(it=Xe.payload,typeof it=="function"){ye=it.call(ns,ye,ae);break e}ye=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=Xe.payload,ae=typeof it=="function"?it.call(ns,ye,ae):it,ae==null)break e;ye=N({},ye,ae);break e;case 2:Na=!0}}ae=C.callback,ae!==null&&(s.flags|=64,oe&&(s.flags|=8192),oe=m.callbacks,oe===null?m.callbacks=[ae]:oe.push(ae))}else oe={lane:ae,tag:C.tag,payload:C.payload,callback:C.callback,next:null},me===null?(se=me=oe,q=ye):me=me.next=oe,j|=ae;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;oe=C,C=oe.next,oe.next=null,m.lastBaseUpdate=oe,m.shared.pending=null}}while(!0);me===null&&(q=ye),m.baseState=q,m.firstBaseUpdate=se,m.lastBaseUpdate=me,g===null&&(m.shared.lanes=0),Ra|=j,s.lanes=j,s.memoizedState=ye}}function h0(s,i){if(typeof s!="function")throw Error(a(191,s));s.call(i)}function m0(s,i){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)h0(l[s],i)}var ao=ge(null),nd=ge(0);function f0(s,i){s=na,ue(nd,s),ue(ao,i),na=s|i.baseLanes}function Fm(){ue(nd,na),ue(ao,ao.current)}function $m(){na=nd.current,De(ao),De(nd)}var Sa=0,ft=null,ts=null,qs=null,rd=!1,lo=!1,vl=!1,id=0,Nc=0,oo=null,hS=0;function Bs(){throw Error(a(321))}function zm(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!ln(s[l],i[l]))return!1;return!0}function qm(s,i,l,u,m,g){return Sa=g,ft=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,le.H=s===null||s.memoizedState===null?Q0:X0,vl=!1,g=l(u,m),vl=!1,lo&&(g=p0(i,l,u,m)),g0(s),g}function g0(s){le.H=dd;var i=ts!==null&&ts.next!==null;if(Sa=0,qs=ts=ft=null,rd=!1,Nc=0,oo=null,i)throw Error(a(300));s===null||on||(s=s.dependencies,s!==null&&Xu(s)&&(on=!0))}function p0(s,i,l,u){ft=s;var m=0;do{if(lo&&(oo=null),Nc=0,lo=!1,25<=m)throw Error(a(301));if(m+=1,qs=ts=null,s.updateQueue!=null){var g=s.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}le.H=vS,g=i(l,u)}while(lo);return g}function mS(){var s=le.H,i=s.useState()[0];return i=typeof i.then=="function"?_c(i):i,s=s.useState()[0],(ts!==null?ts.memoizedState:null)!==s&&(ft.flags|=1024),i}function Vm(){var s=id!==0;return id=0,s}function Hm(s,i,l){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~l}function Gm(s){if(rd){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}rd=!1}Sa=0,qs=ts=ft=null,lo=!1,Nc=id=0,oo=null}function rr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qs===null?ft.memoizedState=qs=s:qs=qs.next=s,qs}function Vs(){if(ts===null){var s=ft.alternate;s=s!==null?s.memoizedState:null}else s=ts.next;var i=qs===null?ft.memoizedState:qs.next;if(i!==null)qs=i,ts=s;else{if(s===null)throw ft.alternate===null?Error(a(467)):Error(a(310));ts=s,s={memoizedState:ts.memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},qs===null?ft.memoizedState=qs=s:qs=qs.next=s}return qs}function Ym(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _c(s){var i=Nc;return Nc+=1,oo===null&&(oo=[]),s=c0(oo,s,i),i=ft,(qs===null?i.memoizedState:qs.next)===null&&(i=i.alternate,le.H=i===null||i.memoizedState===null?Q0:X0),s}function ad(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return _c(s);if(s.$$typeof===te)return In(s)}throw Error(a(438,String(s)))}function Wm(s){var i=null,l=ft.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=ft.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Ym(),ft.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(s),u=0;u<s;u++)l[u]=K;return i.index++,l}function Qi(s,i){return typeof i=="function"?i(s):i}function ld(s){var i=Vs();return Km(i,ts,s)}function Km(s,i,l){var u=s.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=l;var m=s.baseQueue,g=u.pending;if(g!==null){if(m!==null){var j=m.next;m.next=g.next,g.next=j}i.baseQueue=m=g,u.pending=null}if(g=s.baseState,m===null)s.memoizedState=g;else{i=m.next;var C=j=null,q=null,se=i,me=!1;do{var ye=se.lane&-536870913;if(ye!==se.lane?(kt&ye)===ye:(Sa&ye)===ye){var ae=se.revertLane;if(ae===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ye===ro&&(me=!0);else if((Sa&ae)===ae){se=se.next,ae===ro&&(me=!0);continue}else ye={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},q===null?(C=q=ye,j=g):q=q.next=ye,ft.lanes|=ae,Ra|=ae;ye=se.action,vl&&l(g,ye),g=se.hasEagerState?se.eagerState:l(g,ye)}else ae={lane:ye,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},q===null?(C=q=ae,j=g):q=q.next=ae,ft.lanes|=ye,Ra|=ye;se=se.next}while(se!==null&&se!==i);if(q===null?j=g:q.next=C,!ln(g,s.memoizedState)&&(on=!0,me&&(l=io,l!==null)))throw l;s.memoizedState=g,s.baseState=j,s.baseQueue=q,u.lastRenderedState=g}return m===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Jm(s){var i=Vs(),l=i.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var u=l.dispatch,m=l.pending,g=i.memoizedState;if(m!==null){l.pending=null;var j=m=m.next;do g=s(g,j.action),j=j.next;while(j!==m);ln(g,i.memoizedState)||(on=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,u]}function x0(s,i,l){var u=ft,m=Vs(),g=qt;if(g){if(l===void 0)throw Error(a(407));l=l()}else l=i();var j=!ln((ts||m).memoizedState,l);j&&(m.memoizedState=l,on=!0),m=m.queue;var C=b0.bind(null,u,m,s);if(jc(2048,8,C,[s]),m.getSnapshot!==i||j||qs!==null&&qs.memoizedState.tag&1){if(u.flags|=2048,co(9,od(),v0.bind(null,u,m,l,i),null),hs===null)throw Error(a(349));g||(Sa&124)!==0||y0(u,i,l)}return l}function y0(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=ft.updateQueue,i===null?(i=Ym(),ft.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function v0(s,i,l,u){i.value=l,i.getSnapshot=u,w0(i)&&N0(s)}function b0(s,i,l){return l(function(){w0(i)&&N0(s)})}function w0(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!ln(s,l)}catch{return!0}}function N0(s){var i=eo(s,2);i!==null&&Sr(i,s,2)}function Qm(s){var i=rr();if(typeof s=="function"){var l=s;if(s=l(),vl){rs(!0);try{l()}finally{rs(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:s},i}function _0(s,i,l,u){return s.baseState=l,Km(s,ts,typeof u=="function"?u:Qi)}function fS(s,i,l,u,m){if(ud(s))throw Error(a(485));if(s=i.action,s!==null){var g={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){g.listeners.push(j)}};le.T!==null?l(!0):g.isTransition=!1,u(g),l=i.pending,l===null?(g.next=i.pending=g,j0(i,g)):(g.next=l.next,i.pending=l.next=g)}}function j0(s,i){var l=i.action,u=i.payload,m=s.state;if(i.isTransition){var g=le.T,j={};le.T=j;try{var C=l(m,u),q=le.S;q!==null&&q(j,C),S0(s,i,C)}catch(se){Xm(s,i,se)}finally{le.T=g}}else try{g=l(m,u),S0(s,i,g)}catch(se){Xm(s,i,se)}}function S0(s,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){T0(s,i,u)},function(u){return Xm(s,i,u)}):T0(s,i,l)}function T0(s,i,l){i.status="fulfilled",i.value=l,E0(i),s.state=l,i=s.pending,i!==null&&(l=i.next,l===i?s.pending=null:(l=l.next,i.next=l,j0(s,l)))}function Xm(s,i,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,E0(i),i=i.next;while(i!==u)}s.action=null}function E0(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function A0(s,i){return i}function C0(s,i){if(qt){var l=hs.formState;if(l!==null){e:{var u=ft;if(qt){if(Rs){t:{for(var m=Rs,g=Ai;m.nodeType!==8;){if(!g){m=null;break t}if(m=hi(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Rs=hi(m.nextSibling),u=m.data==="F!";break e}}gl(u)}u=!1}u&&(i=l[0])}}return l=rr(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A0,lastRenderedState:i},l.queue=u,l=W0.bind(null,ft,u),u.dispatch=l,u=Qm(!1),g=nf.bind(null,ft,!1,u.queue),u=rr(),m={state:i,dispatch:null,action:s,pending:null},u.queue=m,l=fS.bind(null,ft,m,g,l),m.dispatch=l,u.memoizedState=s,[i,l,!1]}function k0(s){var i=Vs();return D0(i,ts,s)}function D0(s,i,l){if(i=Km(s,i,A0)[0],s=ld(Qi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=_c(i)}catch(j){throw j===xc?td:j}else u=i;i=Vs();var m=i.queue,g=m.dispatch;return l!==i.memoizedState&&(ft.flags|=2048,co(9,od(),gS.bind(null,m,l),null)),[u,g,s]}function gS(s,i){s.action=i}function R0(s){var i=Vs(),l=ts;if(l!==null)return D0(i,l,s);Vs(),i=i.memoizedState,l=Vs();var u=l.queue.dispatch;return l.memoizedState=s,[i,u,!1]}function co(s,i,l,u){return s={tag:s,create:l,deps:u,inst:i,next:null},i=ft.updateQueue,i===null&&(i=Ym(),ft.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,i.lastEffect=s),s}function od(){return{destroy:void 0,resource:void 0}}function I0(){return Vs().memoizedState}function cd(s,i,l,u){var m=rr();u=u===void 0?null:u,ft.flags|=s,m.memoizedState=co(1|i,od(),l,u)}function jc(s,i,l,u){var m=Vs();u=u===void 0?null:u;var g=m.memoizedState.inst;ts!==null&&u!==null&&zm(u,ts.memoizedState.deps)?m.memoizedState=co(i,g,l,u):(ft.flags|=s,m.memoizedState=co(1|i,g,l,u))}function M0(s,i){cd(8390656,8,s,i)}function O0(s,i){jc(2048,8,s,i)}function L0(s,i){return jc(4,2,s,i)}function P0(s,i){return jc(4,4,s,i)}function U0(s,i){if(typeof i=="function"){s=s();var l=i(s);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function B0(s,i,l){l=l!=null?l.concat([s]):null,jc(4,4,U0.bind(null,i,s),l)}function Zm(){}function F0(s,i){var l=Vs();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&zm(i,u[1])?u[0]:(l.memoizedState=[s,i],s)}function $0(s,i){var l=Vs();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&zm(i,u[1]))return u[0];if(u=s(),vl){rs(!0);try{s()}finally{rs(!1)}}return l.memoizedState=[u,i],u}function ef(s,i,l){return l===void 0||(Sa&1073741824)!==0?s.memoizedState=i:(s.memoizedState=l,s=Vy(),ft.lanes|=s,Ra|=s,l)}function z0(s,i,l,u){return ln(l,i)?l:ao.current!==null?(s=ef(s,l,u),ln(s,i)||(on=!0),s):(Sa&42)===0?(on=!0,s.memoizedState=l):(s=Vy(),ft.lanes|=s,Ra|=s,i)}function q0(s,i,l,u,m){var g=fe.p;fe.p=g!==0&&8>g?g:8;var j=le.T,C={};le.T=C,nf(s,!1,i,l);try{var q=m(),se=le.S;if(se!==null&&se(C,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var me=dS(q,u);Sc(s,i,me,jr(s))}else Sc(s,i,u,jr(s))}catch(ye){Sc(s,i,{then:function(){},status:"rejected",reason:ye},jr())}finally{fe.p=g,le.T=j}}function pS(){}function tf(s,i,l,u){if(s.tag!==5)throw Error(a(476));var m=V0(s).queue;q0(s,m,i,ke,l===null?pS:function(){return H0(s),l(u)})}function V0(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:ke},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:l},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function H0(s){var i=V0(s).next.queue;Sc(s,i,{},jr())}function sf(){return In(qc)}function G0(){return Vs().memoizedState}function Y0(){return Vs().memoizedState}function xS(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var l=jr();s=_a(l);var u=ja(i,s,l);u!==null&&(Sr(u,i,l),vc(u,i,l)),i={cache:Rm()},s.payload=i;return}i=i.return}}function yS(s,i,l){var u=jr();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},ud(s)?K0(i,l):(l=Nm(s,i,l,u),l!==null&&(Sr(l,s,u),J0(l,i,u)))}function W0(s,i,l){var u=jr();Sc(s,i,l,u)}function Sc(s,i,l,u){var m={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(ud(s))K0(i,m);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var j=i.lastRenderedState,C=g(j,l);if(m.hasEagerState=!0,m.eagerState=C,ln(C,j))return Yu(s,i,m,0),hs===null&&Gu(),!1}catch{}finally{}if(l=Nm(s,i,m,u),l!==null)return Sr(l,s,u),J0(l,i,u),!0}return!1}function nf(s,i,l,u){if(u={lane:2,revertLane:Lf(),action:u,hasEagerState:!1,eagerState:null,next:null},ud(s)){if(i)throw Error(a(479))}else i=Nm(s,l,u,2),i!==null&&Sr(i,s,2)}function ud(s){var i=s.alternate;return s===ft||i!==null&&i===ft}function K0(s,i){lo=rd=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function J0(s,i,l){if((l&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,l|=u,i.lanes=l,Un(s,l)}}var dd={readContext:In,use:ad,useCallback:Bs,useContext:Bs,useEffect:Bs,useImperativeHandle:Bs,useLayoutEffect:Bs,useInsertionEffect:Bs,useMemo:Bs,useReducer:Bs,useRef:Bs,useState:Bs,useDebugValue:Bs,useDeferredValue:Bs,useTransition:Bs,useSyncExternalStore:Bs,useId:Bs,useHostTransitionStatus:Bs,useFormState:Bs,useActionState:Bs,useOptimistic:Bs,useMemoCache:Bs,useCacheRefresh:Bs},Q0={readContext:In,use:ad,useCallback:function(s,i){return rr().memoizedState=[s,i===void 0?null:i],s},useContext:In,useEffect:M0,useImperativeHandle:function(s,i,l){l=l!=null?l.concat([s]):null,cd(4194308,4,U0.bind(null,i,s),l)},useLayoutEffect:function(s,i){return cd(4194308,4,s,i)},useInsertionEffect:function(s,i){cd(4,2,s,i)},useMemo:function(s,i){var l=rr();i=i===void 0?null:i;var u=s();if(vl){rs(!0);try{s()}finally{rs(!1)}}return l.memoizedState=[u,i],u},useReducer:function(s,i,l){var u=rr();if(l!==void 0){var m=l(i);if(vl){rs(!0);try{l(i)}finally{rs(!1)}}}else m=i;return u.memoizedState=u.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},u.queue=s,s=s.dispatch=yS.bind(null,ft,s),[u.memoizedState,s]},useRef:function(s){var i=rr();return s={current:s},i.memoizedState=s},useState:function(s){s=Qm(s);var i=s.queue,l=W0.bind(null,ft,i);return i.dispatch=l,[s.memoizedState,l]},useDebugValue:Zm,useDeferredValue:function(s,i){var l=rr();return ef(l,s,i)},useTransition:function(){var s=Qm(!1);return s=q0.bind(null,ft,s.queue,!0,!1),rr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,l){var u=ft,m=rr();if(qt){if(l===void 0)throw Error(a(407));l=l()}else{if(l=i(),hs===null)throw Error(a(349));(kt&124)!==0||y0(u,i,l)}m.memoizedState=l;var g={value:l,getSnapshot:i};return m.queue=g,M0(b0.bind(null,u,g,s),[s]),u.flags|=2048,co(9,od(),v0.bind(null,u,g,l,i),null),l},useId:function(){var s=rr(),i=hs.identifierPrefix;if(qt){var l=Wi,u=Yi;l=(u&~(1<<32-Os(u)-1)).toString(32)+l,i="«"+i+"R"+l,l=id++,0<l&&(i+="H"+l.toString(32)),i+="»"}else l=hS++,i="«"+i+"r"+l.toString(32)+"»";return s.memoizedState=i},useHostTransitionStatus:sf,useFormState:C0,useActionState:C0,useOptimistic:function(s){var i=rr();i.memoizedState=i.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=nf.bind(null,ft,!0,l),l.dispatch=i,[s,i]},useMemoCache:Wm,useCacheRefresh:function(){return rr().memoizedState=xS.bind(null,ft)}},X0={readContext:In,use:ad,useCallback:F0,useContext:In,useEffect:O0,useImperativeHandle:B0,useInsertionEffect:L0,useLayoutEffect:P0,useMemo:$0,useReducer:ld,useRef:I0,useState:function(){return ld(Qi)},useDebugValue:Zm,useDeferredValue:function(s,i){var l=Vs();return z0(l,ts.memoizedState,s,i)},useTransition:function(){var s=ld(Qi)[0],i=Vs().memoizedState;return[typeof s=="boolean"?s:_c(s),i]},useSyncExternalStore:x0,useId:G0,useHostTransitionStatus:sf,useFormState:k0,useActionState:k0,useOptimistic:function(s,i){var l=Vs();return _0(l,ts,s,i)},useMemoCache:Wm,useCacheRefresh:Y0},vS={readContext:In,use:ad,useCallback:F0,useContext:In,useEffect:O0,useImperativeHandle:B0,useInsertionEffect:L0,useLayoutEffect:P0,useMemo:$0,useReducer:Jm,useRef:I0,useState:function(){return Jm(Qi)},useDebugValue:Zm,useDeferredValue:function(s,i){var l=Vs();return ts===null?ef(l,s,i):z0(l,ts.memoizedState,s,i)},useTransition:function(){var s=Jm(Qi)[0],i=Vs().memoizedState;return[typeof s=="boolean"?s:_c(s),i]},useSyncExternalStore:x0,useId:G0,useHostTransitionStatus:sf,useFormState:R0,useActionState:R0,useOptimistic:function(s,i){var l=Vs();return ts!==null?_0(l,ts,s,i):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Wm,useCacheRefresh:Y0},uo=null,Tc=0;function hd(s){var i=Tc;return Tc+=1,uo===null&&(uo=[]),c0(uo,s,i)}function Ec(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function md(s,i){throw i.$$typeof===_?Error(a(525)):(s=Object.prototype.toString.call(i),Error(a(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function Z0(s){var i=s._init;return i(s._payload)}function ey(s){function i(X,J){if(s){var ee=X.deletions;ee===null?(X.deletions=[J],X.flags|=16):ee.push(J)}}function l(X,J){if(!s)return null;for(;J!==null;)i(X,J),J=J.sibling;return null}function u(X){for(var J=new Map;X!==null;)X.key!==null?J.set(X.key,X):J.set(X.index,X),X=X.sibling;return J}function m(X,J){return X=Gi(X,J),X.index=0,X.sibling=null,X}function g(X,J,ee){return X.index=ee,s?(ee=X.alternate,ee!==null?(ee=ee.index,ee<J?(X.flags|=67108866,J):ee):(X.flags|=67108866,J)):(X.flags|=1048576,J)}function j(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function C(X,J,ee,pe){return J===null||J.tag!==6?(J=jm(ee,X.mode,pe),J.return=X,J):(J=m(J,ee),J.return=X,J)}function q(X,J,ee,pe){var ze=ee.type;return ze===z?me(X,J,ee.props.children,pe,ee.key):J!==null&&(J.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===M&&Z0(ze)===J.type)?(J=m(J,ee.props),Ec(J,ee),J.return=X,J):(J=Ku(ee.type,ee.key,ee.props,null,X.mode,pe),Ec(J,ee),J.return=X,J)}function se(X,J,ee,pe){return J===null||J.tag!==4||J.stateNode.containerInfo!==ee.containerInfo||J.stateNode.implementation!==ee.implementation?(J=Sm(ee,X.mode,pe),J.return=X,J):(J=m(J,ee.children||[]),J.return=X,J)}function me(X,J,ee,pe,ze){return J===null||J.tag!==7?(J=dl(ee,X.mode,pe,ze),J.return=X,J):(J=m(J,ee),J.return=X,J)}function ye(X,J,ee){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=jm(""+J,X.mode,ee),J.return=X,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return ee=Ku(J.type,J.key,J.props,null,X.mode,ee),Ec(ee,J),ee.return=X,ee;case V:return J=Sm(J,X.mode,ee),J.return=X,J;case M:var pe=J._init;return J=pe(J._payload),ye(X,J,ee)}if(xe(J)||Q(J))return J=dl(J,X.mode,ee,null),J.return=X,J;if(typeof J.then=="function")return ye(X,hd(J),ee);if(J.$$typeof===te)return ye(X,Zu(X,J),ee);md(X,J)}return null}function ae(X,J,ee,pe){var ze=J!==null?J.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ze!==null?null:C(X,J,""+ee,pe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:return ee.key===ze?q(X,J,ee,pe):null;case V:return ee.key===ze?se(X,J,ee,pe):null;case M:return ze=ee._init,ee=ze(ee._payload),ae(X,J,ee,pe)}if(xe(ee)||Q(ee))return ze!==null?null:me(X,J,ee,pe,null);if(typeof ee.then=="function")return ae(X,J,hd(ee),pe);if(ee.$$typeof===te)return ae(X,J,Zu(X,ee),pe);md(X,ee)}return null}function oe(X,J,ee,pe,ze){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return X=X.get(ee)||null,C(J,X,""+pe,ze);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case S:return X=X.get(pe.key===null?ee:pe.key)||null,q(J,X,pe,ze);case V:return X=X.get(pe.key===null?ee:pe.key)||null,se(J,X,pe,ze);case M:var xt=pe._init;return pe=xt(pe._payload),oe(X,J,ee,pe,ze)}if(xe(pe)||Q(pe))return X=X.get(ee)||null,me(J,X,pe,ze,null);if(typeof pe.then=="function")return oe(X,J,ee,hd(pe),ze);if(pe.$$typeof===te)return oe(X,J,ee,Zu(J,pe),ze);md(J,pe)}return null}function it(X,J,ee,pe){for(var ze=null,xt=null,We=J,Ze=J=0,un=null;We!==null&&Ze<ee.length;Ze++){We.index>Ze?(un=We,We=null):un=We.sibling;var Bt=ae(X,We,ee[Ze],pe);if(Bt===null){We===null&&(We=un);break}s&&We&&Bt.alternate===null&&i(X,We),J=g(Bt,J,Ze),xt===null?ze=Bt:xt.sibling=Bt,xt=Bt,We=un}if(Ze===ee.length)return l(X,We),qt&&ml(X,Ze),ze;if(We===null){for(;Ze<ee.length;Ze++)We=ye(X,ee[Ze],pe),We!==null&&(J=g(We,J,Ze),xt===null?ze=We:xt.sibling=We,xt=We);return qt&&ml(X,Ze),ze}for(We=u(We);Ze<ee.length;Ze++)un=oe(We,X,Ze,ee[Ze],pe),un!==null&&(s&&un.alternate!==null&&We.delete(un.key===null?Ze:un.key),J=g(un,J,Ze),xt===null?ze=un:xt.sibling=un,xt=un);return s&&We.forEach(function($a){return i(X,$a)}),qt&&ml(X,Ze),ze}function Xe(X,J,ee,pe){if(ee==null)throw Error(a(151));for(var ze=null,xt=null,We=J,Ze=J=0,un=null,Bt=ee.next();We!==null&&!Bt.done;Ze++,Bt=ee.next()){We.index>Ze?(un=We,We=null):un=We.sibling;var $a=ae(X,We,Bt.value,pe);if($a===null){We===null&&(We=un);break}s&&We&&$a.alternate===null&&i(X,We),J=g($a,J,Ze),xt===null?ze=$a:xt.sibling=$a,xt=$a,We=un}if(Bt.done)return l(X,We),qt&&ml(X,Ze),ze;if(We===null){for(;!Bt.done;Ze++,Bt=ee.next())Bt=ye(X,Bt.value,pe),Bt!==null&&(J=g(Bt,J,Ze),xt===null?ze=Bt:xt.sibling=Bt,xt=Bt);return qt&&ml(X,Ze),ze}for(We=u(We);!Bt.done;Ze++,Bt=ee.next())Bt=oe(We,X,Ze,Bt.value,pe),Bt!==null&&(s&&Bt.alternate!==null&&We.delete(Bt.key===null?Ze:Bt.key),J=g(Bt,J,Ze),xt===null?ze=Bt:xt.sibling=Bt,xt=Bt);return s&&We.forEach(function(b1){return i(X,b1)}),qt&&ml(X,Ze),ze}function ns(X,J,ee,pe){if(typeof ee=="object"&&ee!==null&&ee.type===z&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:e:{for(var ze=ee.key;J!==null;){if(J.key===ze){if(ze=ee.type,ze===z){if(J.tag===7){l(X,J.sibling),pe=m(J,ee.props.children),pe.return=X,X=pe;break e}}else if(J.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===M&&Z0(ze)===J.type){l(X,J.sibling),pe=m(J,ee.props),Ec(pe,ee),pe.return=X,X=pe;break e}l(X,J);break}else i(X,J);J=J.sibling}ee.type===z?(pe=dl(ee.props.children,X.mode,pe,ee.key),pe.return=X,X=pe):(pe=Ku(ee.type,ee.key,ee.props,null,X.mode,pe),Ec(pe,ee),pe.return=X,X=pe)}return j(X);case V:e:{for(ze=ee.key;J!==null;){if(J.key===ze)if(J.tag===4&&J.stateNode.containerInfo===ee.containerInfo&&J.stateNode.implementation===ee.implementation){l(X,J.sibling),pe=m(J,ee.children||[]),pe.return=X,X=pe;break e}else{l(X,J);break}else i(X,J);J=J.sibling}pe=Sm(ee,X.mode,pe),pe.return=X,X=pe}return j(X);case M:return ze=ee._init,ee=ze(ee._payload),ns(X,J,ee,pe)}if(xe(ee))return it(X,J,ee,pe);if(Q(ee)){if(ze=Q(ee),typeof ze!="function")throw Error(a(150));return ee=ze.call(ee),Xe(X,J,ee,pe)}if(typeof ee.then=="function")return ns(X,J,hd(ee),pe);if(ee.$$typeof===te)return ns(X,J,Zu(X,ee),pe);md(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,J!==null&&J.tag===6?(l(X,J.sibling),pe=m(J,ee),pe.return=X,X=pe):(l(X,J),pe=jm(ee,X.mode,pe),pe.return=X,X=pe),j(X)):l(X,J)}return function(X,J,ee,pe){try{Tc=0;var ze=ns(X,J,ee,pe);return uo=null,ze}catch(We){if(We===xc||We===td)throw We;var xt=br(29,We,null,X.mode);return xt.lanes=pe,xt.return=X,xt}finally{}}}var ho=ey(!0),ty=ey(!1),Hr=ge(null),Ci=null;function Ta(s){var i=s.alternate;ue(Qs,Qs.current&1),ue(Hr,s),Ci===null&&(i===null||ao.current!==null||i.memoizedState!==null)&&(Ci=s)}function sy(s){if(s.tag===22){if(ue(Qs,Qs.current),ue(Hr,s),Ci===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(Ci=s)}}else Ea()}function Ea(){ue(Qs,Qs.current),ue(Hr,Hr.current)}function Xi(s){De(Hr),Ci===s&&(Ci=null),De(Qs)}var Qs=ge(0);function fd(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Wf(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function rf(s,i,l,u){i=s.memoizedState,l=l(u,i),l=l==null?i:N({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var af={enqueueSetState:function(s,i,l){s=s._reactInternals;var u=jr(),m=_a(u);m.payload=i,l!=null&&(m.callback=l),i=ja(s,m,u),i!==null&&(Sr(i,s,u),vc(i,s,u))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var u=jr(),m=_a(u);m.tag=1,m.payload=i,l!=null&&(m.callback=l),i=ja(s,m,u),i!==null&&(Sr(i,s,u),vc(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=jr(),u=_a(l);u.tag=2,i!=null&&(u.callback=i),i=ja(s,u,l),i!==null&&(Sr(i,s,l),vc(i,s,l))}};function ny(s,i,l,u,m,g,j){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,g,j):i.prototype&&i.prototype.isPureReactComponent?!ll(l,u)||!ll(m,g):!0}function ry(s,i,l,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==s&&af.enqueueReplaceState(i,i.state,null)}function bl(s,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(s=s.defaultProps){l===i&&(l=N({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}var gd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function iy(s){gd(s)}function ay(s){console.error(s)}function ly(s){gd(s)}function pd(s,i){try{var l=s.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function oy(s,i,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function lf(s,i,l){return l=_a(l),l.tag=3,l.payload={element:null},l.callback=function(){pd(s,i)},l}function cy(s){return s=_a(s),s.tag=3,s}function uy(s,i,l,u){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;s.payload=function(){return m(g)},s.callback=function(){oy(i,l,u)}}var j=l.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(s.callback=function(){oy(i,l,u),typeof m!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function bS(s,i,l,u,m){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&fc(i,l,m,!0),l=Hr.current,l!==null){switch(l.tag){case 13:return Ci===null?Df():l.alternate===null&&Is===0&&(Is=3),l.flags&=-257,l.flags|=65536,l.lanes=m,u===Om?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),If(s,u,m)),!1;case 22:return l.flags|=65536,u===Om?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),If(s,u,m)),!1}throw Error(a(435,l.tag))}return If(s,u,m),Df(),!1}if(qt)return i=Hr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==Am&&(s=Error(a(422),{cause:u}),mc($r(s,l)))):(u!==Am&&(i=Error(a(423),{cause:u}),mc($r(i,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,u=$r(u,l),m=lf(s.stateNode,u,m),Um(s,m),Is!==4&&(Is=2)),!1;var g=Error(a(520),{cause:u});if(g=$r(g,l),Mc===null?Mc=[g]:Mc.push(g),Is!==4&&(Is=2),i===null)return!0;u=$r(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=lf(l.stateNode,u,s),Um(l,s),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ia===null||!Ia.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=cy(m),uy(m,s,l,u),Um(l,m),!1}l=l.return}while(l!==null);return!1}var dy=Error(a(461)),on=!1;function Nn(s,i,l,u){i.child=s===null?ty(i,null,l,u):ho(i,s.child,l,u)}function hy(s,i,l,u,m){l=l.render;var g=i.ref;if("ref"in u){var j={};for(var C in u)C!=="ref"&&(j[C]=u[C])}else j=u;return xl(i),u=qm(s,i,l,j,g,m),C=Vm(),s!==null&&!on?(Hm(s,i,m),Zi(s,i,m)):(qt&&C&&Tm(i),i.flags|=1,Nn(s,i,u,m),i.child)}function my(s,i,l,u,m){if(s===null){var g=l.type;return typeof g=="function"&&!_m(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,fy(s,i,g,u,m)):(s=Ku(l.type,null,u,i,i.mode,m),s.ref=i.ref,s.return=i,i.child=s)}if(g=s.child,!gf(s,m)){var j=g.memoizedProps;if(l=l.compare,l=l!==null?l:ll,l(j,u)&&s.ref===i.ref)return Zi(s,i,m)}return i.flags|=1,s=Gi(g,u),s.ref=i.ref,s.return=i,i.child=s}function fy(s,i,l,u,m){if(s!==null){var g=s.memoizedProps;if(ll(g,u)&&s.ref===i.ref)if(on=!1,i.pendingProps=u=g,gf(s,m))(s.flags&131072)!==0&&(on=!0);else return i.lanes=s.lanes,Zi(s,i,m)}return of(s,i,l,u,m)}function gy(s,i,l){var u=i.pendingProps,m=u.children,g=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|l:l,s!==null){for(m=i.child=s.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return py(s,i,u,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&ed(i,g!==null?g.cachePool:null),g!==null?f0(i,g):Fm(),sy(i);else return i.lanes=i.childLanes=536870912,py(s,i,g!==null?g.baseLanes|l:l,l)}else g!==null?(ed(i,g.cachePool),f0(i,g),Ea(),i.memoizedState=null):(s!==null&&ed(i,null),Fm(),Ea());return Nn(s,i,m,l),i.child}function py(s,i,l,u){var m=Mm();return m=m===null?null:{parent:Js._currentValue,pool:m},i.memoizedState={baseLanes:l,cachePool:m},s!==null&&ed(i,null),Fm(),sy(i),s!==null&&fc(s,i,u,!0),null}function xd(s,i){var l=i.ref;if(l===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(s===null||s.ref!==l)&&(i.flags|=4194816)}}function of(s,i,l,u,m){return xl(i),l=qm(s,i,l,u,void 0,m),u=Vm(),s!==null&&!on?(Hm(s,i,m),Zi(s,i,m)):(qt&&u&&Tm(i),i.flags|=1,Nn(s,i,l,m),i.child)}function xy(s,i,l,u,m,g){return xl(i),i.updateQueue=null,l=p0(i,u,l,m),g0(s),u=Vm(),s!==null&&!on?(Hm(s,i,g),Zi(s,i,g)):(qt&&u&&Tm(i),i.flags|=1,Nn(s,i,l,g),i.child)}function yy(s,i,l,u,m){if(xl(i),i.stateNode===null){var g=to,j=l.contextType;typeof j=="object"&&j!==null&&(g=In(j)),g=new l(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=af,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},Lm(i),j=l.contextType,g.context=typeof j=="object"&&j!==null?In(j):to,g.state=i.memoizedState,j=l.getDerivedStateFromProps,typeof j=="function"&&(rf(i,l,j,u),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(j=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),j!==g.state&&af.enqueueReplaceState(g,g.state,null),wc(i,u,g,m),bc(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){g=i.stateNode;var C=i.memoizedProps,q=bl(l,C);g.props=q;var se=g.context,me=l.contextType;j=to,typeof me=="object"&&me!==null&&(j=In(me));var ye=l.getDerivedStateFromProps;me=typeof ye=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,me||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||se!==j)&&ry(i,g,u,j),Na=!1;var ae=i.memoizedState;g.state=ae,wc(i,u,g,m),bc(),se=i.memoizedState,C||ae!==se||Na?(typeof ye=="function"&&(rf(i,l,ye,u),se=i.memoizedState),(q=Na||ny(i,l,q,u,ae,se,j))?(me||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=se),g.props=u,g.state=se,g.context=j,u=q):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,Pm(s,i),j=i.memoizedProps,me=bl(l,j),g.props=me,ye=i.pendingProps,ae=g.context,se=l.contextType,q=to,typeof se=="object"&&se!==null&&(q=In(se)),C=l.getDerivedStateFromProps,(se=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j!==ye||ae!==q)&&ry(i,g,u,q),Na=!1,ae=i.memoizedState,g.state=ae,wc(i,u,g,m),bc();var oe=i.memoizedState;j!==ye||ae!==oe||Na||s!==null&&s.dependencies!==null&&Xu(s.dependencies)?(typeof C=="function"&&(rf(i,l,C,u),oe=i.memoizedState),(me=Na||ny(i,l,me,u,ae,oe,q)||s!==null&&s.dependencies!==null&&Xu(s.dependencies))?(se||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,oe,q),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,oe,q)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||j===s.memoizedProps&&ae===s.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&ae===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=oe),g.props=u,g.state=oe,g.context=q,u=me):(typeof g.componentDidUpdate!="function"||j===s.memoizedProps&&ae===s.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&ae===s.memoizedState||(i.flags|=1024),u=!1)}return g=u,xd(s,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,s!==null&&u?(i.child=ho(i,s.child,null,m),i.child=ho(i,null,l,m)):Nn(s,i,l,m),i.memoizedState=g.state,s=i.child):s=Zi(s,i,m),s}function vy(s,i,l,u){return hc(),i.flags|=256,Nn(s,i,l,u),i.child}var cf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uf(s){return{baseLanes:s,cachePool:a0()}}function df(s,i,l){return s=s!==null?s.childLanes&~l:0,i&&(s|=Gr),s}function by(s,i,l){var u=i.pendingProps,m=!1,g=(i.flags&128)!==0,j;if((j=g)||(j=s!==null&&s.memoizedState===null?!1:(Qs.current&2)!==0),j&&(m=!0,i.flags&=-129),j=(i.flags&32)!==0,i.flags&=-33,s===null){if(qt){if(m?Ta(i):Ea(),qt){var C=Rs,q;if(q=C){e:{for(q=C,C=Ai;q.nodeType!==8;){if(!C){C=null;break e}if(q=hi(q.nextSibling),q===null){C=null;break e}}C=q}C!==null?(i.memoizedState={dehydrated:C,treeContext:hl!==null?{id:Yi,overflow:Wi}:null,retryLane:536870912,hydrationErrors:null},q=br(18,null,null,0),q.stateNode=C,q.return=i,i.child=q,Vn=i,Rs=null,q=!0):q=!1}q||gl(i)}if(C=i.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return Wf(C)?i.lanes=32:i.lanes=536870912,null;Xi(i)}return C=u.children,u=u.fallback,m?(Ea(),m=i.mode,C=yd({mode:"hidden",children:C},m),u=dl(u,m,l,null),C.return=i,u.return=i,C.sibling=u,i.child=C,m=i.child,m.memoizedState=uf(l),m.childLanes=df(s,j,l),i.memoizedState=cf,u):(Ta(i),hf(i,C))}if(q=s.memoizedState,q!==null&&(C=q.dehydrated,C!==null)){if(g)i.flags&256?(Ta(i),i.flags&=-257,i=mf(s,i,l)):i.memoizedState!==null?(Ea(),i.child=s.child,i.flags|=128,i=null):(Ea(),m=u.fallback,C=i.mode,u=yd({mode:"visible",children:u.children},C),m=dl(m,C,l,null),m.flags|=2,u.return=i,m.return=i,u.sibling=m,i.child=u,ho(i,s.child,null,l),u=i.child,u.memoizedState=uf(l),u.childLanes=df(s,j,l),i.memoizedState=cf,i=m);else if(Ta(i),Wf(C)){if(j=C.nextSibling&&C.nextSibling.dataset,j)var se=j.dgst;j=se,u=Error(a(419)),u.stack="",u.digest=j,mc({value:u,source:null,stack:null}),i=mf(s,i,l)}else if(on||fc(s,i,l,!1),j=(l&s.childLanes)!==0,on||j){if(j=hs,j!==null&&(u=l&-l,u=(u&42)!==0?1:Cr(u),u=(u&(j.suspendedLanes|l))!==0?0:u,u!==0&&u!==q.retryLane))throw q.retryLane=u,eo(s,u),Sr(j,s,u),dy;C.data==="$?"||Df(),i=mf(s,i,l)}else C.data==="$?"?(i.flags|=192,i.child=s.child,i=null):(s=q.treeContext,Rs=hi(C.nextSibling),Vn=i,qt=!0,fl=null,Ai=!1,s!==null&&(qr[Vr++]=Yi,qr[Vr++]=Wi,qr[Vr++]=hl,Yi=s.id,Wi=s.overflow,hl=i),i=hf(i,u.children),i.flags|=4096);return i}return m?(Ea(),m=u.fallback,C=i.mode,q=s.child,se=q.sibling,u=Gi(q,{mode:"hidden",children:u.children}),u.subtreeFlags=q.subtreeFlags&65011712,se!==null?m=Gi(se,m):(m=dl(m,C,l,null),m.flags|=2),m.return=i,u.return=i,u.sibling=m,i.child=u,u=m,m=i.child,C=s.child.memoizedState,C===null?C=uf(l):(q=C.cachePool,q!==null?(se=Js._currentValue,q=q.parent!==se?{parent:se,pool:se}:q):q=a0(),C={baseLanes:C.baseLanes|l,cachePool:q}),m.memoizedState=C,m.childLanes=df(s,j,l),i.memoizedState=cf,u):(Ta(i),l=s.child,s=l.sibling,l=Gi(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,s!==null&&(j=i.deletions,j===null?(i.deletions=[s],i.flags|=16):j.push(s)),i.child=l,i.memoizedState=null,l)}function hf(s,i){return i=yd({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function yd(s,i){return s=br(22,s,null,i),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function mf(s,i,l){return ho(i,s.child,null,l),s=hf(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function wy(s,i,l){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),km(s.return,i,l)}function ff(s,i,l,u,m){var g=s.memoizedState;g===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:m}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=m)}function Ny(s,i,l){var u=i.pendingProps,m=u.revealOrder,g=u.tail;if(Nn(s,i,u.children,l),u=Qs.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&wy(s,l,i);else if(s.tag===19)wy(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(ue(Qs,u),m){case"forwards":for(l=i.child,m=null;l!==null;)s=l.alternate,s!==null&&fd(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),ff(i,!1,m,l,g);break;case"backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(s=m.alternate,s!==null&&fd(s)===null){i.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}ff(i,!0,l,null,g);break;case"together":ff(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Zi(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),Ra|=i.lanes,(l&i.childLanes)===0)if(s!==null){if(fc(s,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(a(153));if(i.child!==null){for(s=i.child,l=Gi(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=Gi(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function gf(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Xu(s)))}function wS(s,i,l){switch(i.tag){case 3:Qe(i,i.stateNode.containerInfo),wa(i,Js,s.memoizedState.cache),hc();break;case 27:case 5:An(i);break;case 4:Qe(i,i.stateNode.containerInfo);break;case 10:wa(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ta(i),i.flags|=128,null):(l&i.child.childLanes)!==0?by(s,i,l):(Ta(i),s=Zi(s,i,l),s!==null?s.sibling:null);Ta(i);break;case 19:var m=(s.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(fc(s,i,l,!1),u=(l&i.childLanes)!==0),m){if(u)return Ny(s,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ue(Qs,Qs.current),u)break;return null;case 22:case 23:return i.lanes=0,gy(s,i,l);case 24:wa(i,Js,s.memoizedState.cache)}return Zi(s,i,l)}function _y(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps)on=!0;else{if(!gf(s,l)&&(i.flags&128)===0)return on=!1,wS(s,i,l);on=(s.flags&131072)!==0}else on=!1,qt&&(i.flags&1048576)!==0&&Zx(i,Qu,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var u=i.elementType,m=u._init;if(u=m(u._payload),i.type=u,typeof u=="function")_m(u)?(s=bl(u,s),i.tag=1,i=yy(null,i,u,s,l)):(i.tag=0,i=of(null,i,u,s,l));else{if(u!=null){if(m=u.$$typeof,m===be){i.tag=11,i=hy(null,i,u,s,l);break e}else if(m===B){i.tag=14,i=my(null,i,u,s,l);break e}}throw i=gt(u)||u,Error(a(306,i,""))}}return i;case 0:return of(s,i,i.type,i.pendingProps,l);case 1:return u=i.type,m=bl(u,i.pendingProps),yy(s,i,u,m,l);case 3:e:{if(Qe(i,i.stateNode.containerInfo),s===null)throw Error(a(387));u=i.pendingProps;var g=i.memoizedState;m=g.element,Pm(s,i),wc(i,u,null,l);var j=i.memoizedState;if(u=j.cache,wa(i,Js,u),u!==g.cache&&Dm(i,[Js],l,!0),bc(),u=j.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:j.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=vy(s,i,u,l);break e}else if(u!==m){m=$r(Error(a(424)),i),mc(m),i=vy(s,i,u,l);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Rs=hi(s.firstChild),Vn=i,qt=!0,fl=null,Ai=!0,l=ty(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(hc(),u===m){i=Zi(s,i,l);break e}Nn(s,i,u,l)}i=i.child}return i;case 26:return xd(s,i),s===null?(l=Ev(i.type,null,i.pendingProps,null))?i.memoizedState=l:qt||(l=i.type,s=i.pendingProps,u=Rd(Re.current).createElement(l),u[xs]=i,u[As]=s,jn(u,l,s),Vt(u),i.stateNode=u):i.memoizedState=Ev(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return An(i),s===null&&qt&&(u=i.stateNode=jv(i.type,i.pendingProps,Re.current),Vn=i,Ai=!0,m=Rs,La(i.type)?(Kf=m,Rs=hi(u.firstChild)):Rs=m),Nn(s,i,i.pendingProps.children,l),xd(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&qt&&((m=u=Rs)&&(u=KS(u,i.type,i.pendingProps,Ai),u!==null?(i.stateNode=u,Vn=i,Rs=hi(u.firstChild),Ai=!1,m=!0):m=!1),m||gl(i)),An(i),m=i.type,g=i.pendingProps,j=s!==null?s.memoizedProps:null,u=g.children,Hf(m,g)?u=null:j!==null&&Hf(m,j)&&(i.flags|=32),i.memoizedState!==null&&(m=qm(s,i,mS,null,null,l),qc._currentValue=m),xd(s,i),Nn(s,i,u,l),i.child;case 6:return s===null&&qt&&((s=l=Rs)&&(l=JS(l,i.pendingProps,Ai),l!==null?(i.stateNode=l,Vn=i,Rs=null,s=!0):s=!1),s||gl(i)),null;case 13:return by(s,i,l);case 4:return Qe(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=ho(i,null,u,l):Nn(s,i,u,l),i.child;case 11:return hy(s,i,i.type,i.pendingProps,l);case 7:return Nn(s,i,i.pendingProps,l),i.child;case 8:return Nn(s,i,i.pendingProps.children,l),i.child;case 12:return Nn(s,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,wa(i,i.type,u.value),Nn(s,i,u.children,l),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,xl(i),m=In(m),u=u(m),i.flags|=1,Nn(s,i,u,l),i.child;case 14:return my(s,i,i.type,i.pendingProps,l);case 15:return fy(s,i,i.type,i.pendingProps,l);case 19:return Ny(s,i,l);case 31:return u=i.pendingProps,l=i.mode,u={mode:u.mode,children:u.children},s===null?(l=yd(u,l),l.ref=i.ref,i.child=l,l.return=i,i=l):(l=Gi(s.child,u),l.ref=i.ref,i.child=l,l.return=i,i=l),i;case 22:return gy(s,i,l);case 24:return xl(i),u=In(Js),s===null?(m=Mm(),m===null&&(m=hs,g=Rm(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),i.memoizedState={parent:u,cache:m},Lm(i),wa(i,Js,m)):((s.lanes&l)!==0&&(Pm(s,i),wc(i,null,null,l),bc()),m=s.memoizedState,g=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),wa(i,Js,u)):(u=g.cache,wa(i,Js,u),u!==m.cache&&Dm(i,[Js],l,!0))),Nn(s,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function ea(s){s.flags|=4}function jy(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Rv(i)){if(i=Hr.current,i!==null&&((kt&4194048)===kt?Ci!==null:(kt&62914560)!==kt&&(kt&536870912)===0||i!==Ci))throw yc=Om,l0;s.flags|=8192}}function vd(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?us():536870912,s.lanes|=i,po|=i)}function Ac(s,i){if(!qt)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function _s(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(i)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=u,s.childLanes=l,i}function NS(s,i,l){var u=i.pendingProps;switch(Em(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(i),null;case 1:return _s(i),null;case 3:return l=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Ji(Js),bs(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(dc(i)?ea(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,s0())),_s(i),null;case 26:return l=i.memoizedState,s===null?(ea(i),l!==null?(_s(i),jy(i,l)):(_s(i),i.flags&=-16777217)):l?l!==s.memoizedState?(ea(i),_s(i),jy(i,l)):(_s(i),i.flags&=-16777217):(s.memoizedProps!==u&&ea(i),_s(i),i.flags&=-16777217),null;case 27:sn(i),l=Re.current;var m=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==u&&ea(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return _s(i),null}s=Ne.current,dc(i)?e0(i):(s=jv(m,u,l),i.stateNode=s,ea(i))}return _s(i),null;case 5:if(sn(i),l=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&ea(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return _s(i),null}if(s=Ne.current,dc(i))e0(i);else{switch(m=Rd(Re.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?m.createElement(l,{is:u.is}):m.createElement(l)}}s[xs]=i,s[As]=u;e:for(m=i.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===i)break e;for(;m.sibling===null;){if(m.return===null||m.return===i)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}i.stateNode=s;e:switch(jn(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ea(i)}}return _s(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&ea(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(s=Re.current,dc(i)){if(s=i.stateNode,l=i.memoizedProps,u=null,m=Vn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}s[xs]=i,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||xv(s.nodeValue,l)),s||gl(i)}else s=Rd(s).createTextNode(u),s[xs]=i,i.stateNode=s}return _s(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=dc(i),u!==null&&u.dehydrated!==null){if(s===null){if(!m)throw Error(a(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));m[xs]=i}else hc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_s(i),m=!1}else m=s0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Xi(i),i):(Xi(i),null)}if(Xi(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)}return l!==s&&l&&(i.child.flags|=8192),vd(i,i.updateQueue),_s(i),null;case 4:return bs(),s===null&&Ff(i.stateNode.containerInfo),_s(i),null;case 10:return Ji(i.type),_s(i),null;case 19:if(De(Qs),m=i.memoizedState,m===null)return _s(i),null;if(u=(i.flags&128)!==0,g=m.rendering,g===null)if(u)Ac(m,!1);else{if(Is!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(g=fd(s),g!==null){for(i.flags|=128,Ac(m,!1),s=g.updateQueue,i.updateQueue=s,vd(i,s),i.subtreeFlags=0,s=l,l=i.child;l!==null;)Xx(l,s),l=l.sibling;return ue(Qs,Qs.current&1|2),i.child}s=s.sibling}m.tail!==null&&Ve()>Nd&&(i.flags|=128,u=!0,Ac(m,!1),i.lanes=4194304)}else{if(!u)if(s=fd(g),s!==null){if(i.flags|=128,u=!0,s=s.updateQueue,i.updateQueue=s,vd(i,s),Ac(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!qt)return _s(i),null}else 2*Ve()-m.renderingStartTime>Nd&&l!==536870912&&(i.flags|=128,u=!0,Ac(m,!1),i.lanes=4194304);m.isBackwards?(g.sibling=i.child,i.child=g):(s=m.last,s!==null?s.sibling=g:i.child=g,m.last=g)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Ve(),i.sibling=null,s=Qs.current,ue(Qs,u?s&1|2:s&1),i):(_s(i),null);case 22:case 23:return Xi(i),$m(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(_s(i),i.subtreeFlags&6&&(i.flags|=8192)):_s(i),l=i.updateQueue,l!==null&&vd(i,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),s!==null&&De(yl),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ji(Js),_s(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function _S(s,i){switch(Em(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Ji(Js),bs(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return sn(i),null;case 13:if(Xi(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(a(340));hc()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return De(Qs),null;case 4:return bs(),null;case 10:return Ji(i.type),null;case 22:case 23:return Xi(i),$m(),s!==null&&De(yl),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return Ji(Js),null;case 25:return null;default:return null}}function Sy(s,i){switch(Em(i),i.tag){case 3:Ji(Js),bs();break;case 26:case 27:case 5:sn(i);break;case 4:bs();break;case 13:Xi(i);break;case 19:De(Qs);break;case 10:Ji(i.type);break;case 22:case 23:Xi(i),$m(),s!==null&&De(yl);break;case 24:Ji(Js)}}function Cc(s,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var m=u.next;l=m;do{if((l.tag&s)===s){u=void 0;var g=l.create,j=l.inst;u=g(),j.destroy=u}l=l.next}while(l!==m)}}catch(C){as(i,i.return,C)}}function Aa(s,i,l){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&s)===s){var j=u.inst,C=j.destroy;if(C!==void 0){j.destroy=void 0,m=i;var q=l,se=C;try{se()}catch(me){as(m,q,me)}}}u=u.next}while(u!==g)}}catch(me){as(i,i.return,me)}}function Ty(s){var i=s.updateQueue;if(i!==null){var l=s.stateNode;try{m0(i,l)}catch(u){as(s,s.return,u)}}}function Ey(s,i,l){l.props=bl(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){as(s,i,u)}}function kc(s,i){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(m){as(s,i,m)}}function ki(s,i){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(m){as(s,i,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){as(s,i,m)}else l.current=null}function Ay(s){var i=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(m){as(s,s.return,m)}}function pf(s,i,l){try{var u=s.stateNode;VS(u,s.type,l,i),u[As]=i}catch(m){as(s,s.return,m)}}function Cy(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&La(s.type)||s.tag===4}function xf(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Cy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&La(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function yf(s,i,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(s),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Dd));else if(u!==4&&(u===27&&La(s.type)&&(l=s.stateNode,i=null),s=s.child,s!==null))for(yf(s,i,l),s=s.sibling;s!==null;)yf(s,i,l),s=s.sibling}function bd(s,i,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(u!==4&&(u===27&&La(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(bd(s,i,l),s=s.sibling;s!==null;)bd(s,i,l),s=s.sibling}function ky(s){var i=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);jn(i,u,l),i[xs]=s,i[As]=l}catch(g){as(s,s.return,g)}}var ta=!1,Fs=!1,vf=!1,Dy=typeof WeakSet=="function"?WeakSet:Set,cn=null;function jS(s,i){if(s=s.containerInfo,qf=Ud,s=Hu(s),pm(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var j=0,C=-1,q=-1,se=0,me=0,ye=s,ae=null;t:for(;;){for(var oe;ye!==l||m!==0&&ye.nodeType!==3||(C=j+m),ye!==g||u!==0&&ye.nodeType!==3||(q=j+u),ye.nodeType===3&&(j+=ye.nodeValue.length),(oe=ye.firstChild)!==null;)ae=ye,ye=oe;for(;;){if(ye===s)break t;if(ae===l&&++se===m&&(C=j),ae===g&&++me===u&&(q=j),(oe=ye.nextSibling)!==null)break;ye=ae,ae=ye.parentNode}ye=oe}l=C===-1||q===-1?null:{start:C,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(Vf={focusedElem:s,selectionRange:l},Ud=!1,cn=i;cn!==null;)if(i=cn,s=i.child,(i.subtreeFlags&1024)!==0&&s!==null)s.return=i,cn=s;else for(;cn!==null;){switch(i=cn,g=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&g!==null){s=void 0,l=i,m=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var it=bl(l.type,m,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(it,g),u.__reactInternalSnapshotBeforeUpdate=s}catch(Xe){as(l,l.return,Xe)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,l=s.nodeType,l===9)Yf(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Yf(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(a(163))}if(s=i.sibling,s!==null){s.return=i.return,cn=s;break}cn=i.return}}function Ry(s,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Ca(s,l),u&4&&Cc(5,l);break;case 1:if(Ca(s,l),u&4)if(s=l.stateNode,i===null)try{s.componentDidMount()}catch(j){as(l,l.return,j)}else{var m=bl(l.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(m,i,s.__reactInternalSnapshotBeforeUpdate)}catch(j){as(l,l.return,j)}}u&64&&Ty(l),u&512&&kc(l,l.return);break;case 3:if(Ca(s,l),u&64&&(s=l.updateQueue,s!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{m0(s,i)}catch(j){as(l,l.return,j)}}break;case 27:i===null&&u&4&&ky(l);case 26:case 5:Ca(s,l),i===null&&u&4&&Ay(l),u&512&&kc(l,l.return);break;case 12:Ca(s,l);break;case 13:Ca(s,l),u&4&&Oy(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=IS.bind(null,l),QS(s,l))));break;case 22:if(u=l.memoizedState!==null||ta,!u){i=i!==null&&i.memoizedState!==null||Fs,m=ta;var g=Fs;ta=u,(Fs=i)&&!g?ka(s,l,(l.subtreeFlags&8772)!==0):Ca(s,l),ta=m,Fs=g}break;case 30:break;default:Ca(s,l)}}function Iy(s){var i=s.alternate;i!==null&&(s.alternate=null,Iy(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Dr(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var vs=null,ir=!1;function sa(s,i,l){for(l=l.child;l!==null;)My(s,i,l),l=l.sibling}function My(s,i,l){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Qr,l)}catch{}switch(l.tag){case 26:Fs||ki(l,i),sa(s,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Fs||ki(l,i);var u=vs,m=ir;La(l.type)&&(vs=l.stateNode,ir=!1),sa(s,i,l),Bc(l.stateNode),vs=u,ir=m;break;case 5:Fs||ki(l,i);case 6:if(u=vs,m=ir,vs=null,sa(s,i,l),vs=u,ir=m,vs!==null)if(ir)try{(vs.nodeType===9?vs.body:vs.nodeName==="HTML"?vs.ownerDocument.body:vs).removeChild(l.stateNode)}catch(g){as(l,i,g)}else try{vs.removeChild(l.stateNode)}catch(g){as(l,i,g)}break;case 18:vs!==null&&(ir?(s=vs,Nv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Yc(s)):Nv(vs,l.stateNode));break;case 4:u=vs,m=ir,vs=l.stateNode.containerInfo,ir=!0,sa(s,i,l),vs=u,ir=m;break;case 0:case 11:case 14:case 15:Fs||Aa(2,l,i),Fs||Aa(4,l,i),sa(s,i,l);break;case 1:Fs||(ki(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Ey(l,i,u)),sa(s,i,l);break;case 21:sa(s,i,l);break;case 22:Fs=(u=Fs)||l.memoizedState!==null,sa(s,i,l),Fs=u;break;default:sa(s,i,l)}}function Oy(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Yc(s)}catch(l){as(i,i.return,l)}}function SS(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Dy),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Dy),i;default:throw Error(a(435,s.tag))}}function bf(s,i){var l=SS(s);i.forEach(function(u){var m=MS.bind(null,s,u);l.has(u)||(l.add(u),u.then(m,m))})}function wr(s,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var m=l[u],g=s,j=i,C=j;e:for(;C!==null;){switch(C.tag){case 27:if(La(C.type)){vs=C.stateNode,ir=!1;break e}break;case 5:vs=C.stateNode,ir=!1;break e;case 3:case 4:vs=C.stateNode.containerInfo,ir=!0;break e}C=C.return}if(vs===null)throw Error(a(160));My(g,j,m),vs=null,ir=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ly(i,s),i=i.sibling}var di=null;function Ly(s,i){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:wr(i,s),Nr(s),u&4&&(Aa(3,s,s.return),Cc(3,s),Aa(5,s,s.return));break;case 1:wr(i,s),Nr(s),u&512&&(Fs||l===null||ki(l,l.return)),u&64&&ta&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var m=di;if(wr(i,s),Nr(s),u&512&&(Fs||l===null||ki(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[fr]||g[xs]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),jn(g,u,l),g[xs]=s,Vt(g),u=g;break e;case"link":var j=kv("link","href",m).get(u+(l.href||""));if(j){for(var C=0;C<j.length;C++)if(g=j[C],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){j.splice(C,1);break t}}g=m.createElement(u),jn(g,u,l),m.head.appendChild(g);break;case"meta":if(j=kv("meta","content",m).get(u+(l.content||""))){for(C=0;C<j.length;C++)if(g=j[C],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){j.splice(C,1);break t}}g=m.createElement(u),jn(g,u,l),m.head.appendChild(g);break;default:throw Error(a(468,u))}g[xs]=s,Vt(g),u=g}s.stateNode=u}else Dv(m,s.type,s.stateNode);else s.stateNode=Cv(m,u,s.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?Dv(m,s.type,s.stateNode):Cv(m,u,s.memoizedProps)):u===null&&s.stateNode!==null&&pf(s,s.memoizedProps,l.memoizedProps)}break;case 27:wr(i,s),Nr(s),u&512&&(Fs||l===null||ki(l,l.return)),l!==null&&u&4&&pf(s,s.memoizedProps,l.memoizedProps);break;case 5:if(wr(i,s),Nr(s),u&512&&(Fs||l===null||ki(l,l.return)),s.flags&32){m=s.stateNode;try{an(m,"")}catch(oe){as(s,s.return,oe)}}u&4&&s.stateNode!=null&&(m=s.memoizedProps,pf(s,m,l!==null?l.memoizedProps:m)),u&1024&&(vf=!0);break;case 6:if(wr(i,s),Nr(s),u&4){if(s.stateNode===null)throw Error(a(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(oe){as(s,s.return,oe)}}break;case 3:if(Od=null,m=di,di=Id(i.containerInfo),wr(i,s),di=m,Nr(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Yc(i.containerInfo)}catch(oe){as(s,s.return,oe)}vf&&(vf=!1,Py(s));break;case 4:u=di,di=Id(s.stateNode.containerInfo),wr(i,s),Nr(s),di=u;break;case 12:wr(i,s),Nr(s);break;case 13:wr(i,s),Nr(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Tf=Ve()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,bf(s,u)));break;case 22:m=s.memoizedState!==null;var q=l!==null&&l.memoizedState!==null,se=ta,me=Fs;if(ta=se||m,Fs=me||q,wr(i,s),Fs=me,ta=se,Nr(s),u&8192)e:for(i=s.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(l===null||q||ta||Fs||wl(s)),l=null,i=s;;){if(i.tag===5||i.tag===26){if(l===null){q=l=i;try{if(g=q.stateNode,m)j=g.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{C=q.stateNode;var ye=q.memoizedProps.style,ae=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;C.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(oe){as(q,q.return,oe)}}}else if(i.tag===6){if(l===null){q=i;try{q.stateNode.nodeValue=m?"":q.memoizedProps}catch(oe){as(q,q.return,oe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,bf(s,l))));break;case 19:wr(i,s),Nr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,bf(s,u)));break;case 30:break;case 21:break;default:wr(i,s),Nr(s)}}function Nr(s){var i=s.flags;if(i&2){try{for(var l,u=s.return;u!==null;){if(Cy(u)){l=u;break}u=u.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var m=l.stateNode,g=xf(s);bd(s,g,m);break;case 5:var j=l.stateNode;l.flags&32&&(an(j,""),l.flags&=-33);var C=xf(s);bd(s,C,j);break;case 3:case 4:var q=l.stateNode.containerInfo,se=xf(s);yf(s,se,q);break;default:throw Error(a(161))}}catch(me){as(s,s.return,me)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Py(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Py(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function Ca(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ry(s,i.alternate,i),i=i.sibling}function wl(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Aa(4,i,i.return),wl(i);break;case 1:ki(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Ey(i,i.return,l),wl(i);break;case 27:Bc(i.stateNode);case 26:case 5:ki(i,i.return),wl(i);break;case 22:i.memoizedState===null&&wl(i);break;case 30:wl(i);break;default:wl(i)}s=s.sibling}}function ka(s,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=s,g=i,j=g.flags;switch(g.tag){case 0:case 11:case 15:ka(m,g,l),Cc(4,g);break;case 1:if(ka(m,g,l),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(se){as(u,u.return,se)}if(u=g,m=u.updateQueue,m!==null){var C=u.stateNode;try{var q=m.shared.hiddenCallbacks;if(q!==null)for(m.shared.hiddenCallbacks=null,m=0;m<q.length;m++)h0(q[m],C)}catch(se){as(u,u.return,se)}}l&&j&64&&Ty(g),kc(g,g.return);break;case 27:ky(g);case 26:case 5:ka(m,g,l),l&&u===null&&j&4&&Ay(g),kc(g,g.return);break;case 12:ka(m,g,l);break;case 13:ka(m,g,l),l&&j&4&&Oy(m,g);break;case 22:g.memoizedState===null&&ka(m,g,l),kc(g,g.return);break;case 30:break;default:ka(m,g,l)}i=i.sibling}}function wf(s,i){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&gc(l))}function Nf(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&gc(s))}function Di(s,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Uy(s,i,l,u),i=i.sibling}function Uy(s,i,l,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Di(s,i,l,u),m&2048&&Cc(9,i);break;case 1:Di(s,i,l,u);break;case 3:Di(s,i,l,u),m&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&gc(s)));break;case 12:if(m&2048){Di(s,i,l,u),s=i.stateNode;try{var g=i.memoizedProps,j=g.id,C=g.onPostCommit;typeof C=="function"&&C(j,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){as(i,i.return,q)}}else Di(s,i,l,u);break;case 13:Di(s,i,l,u);break;case 23:break;case 22:g=i.stateNode,j=i.alternate,i.memoizedState!==null?g._visibility&2?Di(s,i,l,u):Dc(s,i):g._visibility&2?Di(s,i,l,u):(g._visibility|=2,mo(s,i,l,u,(i.subtreeFlags&10256)!==0)),m&2048&&wf(j,i);break;case 24:Di(s,i,l,u),m&2048&&Nf(i.alternate,i);break;default:Di(s,i,l,u)}}function mo(s,i,l,u,m){for(m=m&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=s,j=i,C=l,q=u,se=j.flags;switch(j.tag){case 0:case 11:case 15:mo(g,j,C,q,m),Cc(8,j);break;case 23:break;case 22:var me=j.stateNode;j.memoizedState!==null?me._visibility&2?mo(g,j,C,q,m):Dc(g,j):(me._visibility|=2,mo(g,j,C,q,m)),m&&se&2048&&wf(j.alternate,j);break;case 24:mo(g,j,C,q,m),m&&se&2048&&Nf(j.alternate,j);break;default:mo(g,j,C,q,m)}i=i.sibling}}function Dc(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=s,u=i,m=u.flags;switch(u.tag){case 22:Dc(l,u),m&2048&&wf(u.alternate,u);break;case 24:Dc(l,u),m&2048&&Nf(u.alternate,u);break;default:Dc(l,u)}i=i.sibling}}var Rc=8192;function fo(s){if(s.subtreeFlags&Rc)for(s=s.child;s!==null;)By(s),s=s.sibling}function By(s){switch(s.tag){case 26:fo(s),s.flags&Rc&&s.memoizedState!==null&&u1(di,s.memoizedState,s.memoizedProps);break;case 5:fo(s);break;case 3:case 4:var i=di;di=Id(s.stateNode.containerInfo),fo(s),di=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=Rc,Rc=16777216,fo(s),Rc=i):fo(s));break;default:fo(s)}}function Fy(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Ic(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];cn=u,zy(u,s)}Fy(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$y(s),s=s.sibling}function $y(s){switch(s.tag){case 0:case 11:case 15:Ic(s),s.flags&2048&&Aa(9,s,s.return);break;case 3:Ic(s);break;case 12:Ic(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,wd(s)):Ic(s);break;default:Ic(s)}}function wd(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];cn=u,zy(u,s)}Fy(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Aa(8,i,i.return),wd(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,wd(i));break;default:wd(i)}s=s.sibling}}function zy(s,i){for(;cn!==null;){var l=cn;switch(l.tag){case 0:case 11:case 15:Aa(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:gc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,cn=u;else e:for(l=s;cn!==null;){u=cn;var m=u.sibling,g=u.return;if(Iy(u),u===l){cn=null;break e}if(m!==null){m.return=g,cn=m;break e}cn=g}}}var TS={getCacheForType:function(s){var i=In(Js),l=i.data.get(s);return l===void 0&&(l=s(),i.data.set(s,l)),l}},ES=typeof WeakMap=="function"?WeakMap:Map,Wt=0,hs=null,_t=null,kt=0,Kt=0,_r=null,Da=!1,go=!1,_f=!1,na=0,Is=0,Ra=0,Nl=0,jf=0,Gr=0,po=0,Mc=null,ar=null,Sf=!1,Tf=0,Nd=1/0,_d=null,Ia=null,_n=0,Ma=null,xo=null,yo=0,Ef=0,Af=null,qy=null,Oc=0,Cf=null;function jr(){if((Wt&2)!==0&&kt!==0)return kt&-kt;if(le.T!==null){var s=ro;return s!==0?s:Lf()}return Zn()}function Vy(){Gr===0&&(Gr=(kt&536870912)===0||qt?Es():536870912);var s=Hr.current;return s!==null&&(s.flags|=32),Gr}function Sr(s,i,l){(s===hs&&(Kt===2||Kt===9)||s.cancelPendingCommit!==null)&&(vo(s,0),Oa(s,kt,Gr,!1)),Et(s,l),((Wt&2)===0||s!==hs)&&(s===hs&&((Wt&2)===0&&(Nl|=l),Is===4&&Oa(s,kt,Gr,!1)),Ri(s))}function Hy(s,i,l){if((Wt&6)!==0)throw Error(a(327));var u=!l&&(i&124)===0&&(i&s.expiredLanes)===0||Xt(s,i),m=u?kS(s,i):Rf(s,i,!0),g=u;do{if(m===0){go&&!u&&Oa(s,i,0,!1);break}else{if(l=s.current.alternate,g&&!AS(l)){m=Rf(s,i,!1),g=!1;continue}if(m===2){if(g=i,s.errorRecoveryDisabledLanes&g)var j=0;else j=s.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){i=j;e:{var C=s;m=Mc;var q=C.current.memoizedState.isDehydrated;if(q&&(vo(C,j).flags|=256),j=Rf(C,j,!1),j!==2){if(_f&&!q){C.errorRecoveryDisabledLanes|=g,Nl|=g,m=4;break e}g=ar,ar=m,g!==null&&(ar===null?ar=g:ar.push.apply(ar,g))}m=j}if(g=!1,m!==2)continue}}if(m===1){vo(s,0),Oa(s,i,0,!0);break}e:{switch(u=s,g=m,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Oa(u,i,Gr,!Da);break e;case 2:ar=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(m=Tf+300-Ve(),10<m)){if(Oa(u,i,Gr,!Da),Ts(u,0,!0)!==0)break e;u.timeoutHandle=bv(Gy.bind(null,u,l,ar,_d,Sf,i,Gr,Nl,po,Da,g,2,-0,0),m);break e}Gy(u,l,ar,_d,Sf,i,Gr,Nl,po,Da,g,0,-0,0)}}break}while(!0);Ri(s)}function Gy(s,i,l,u,m,g,j,C,q,se,me,ye,ae,oe){if(s.timeoutHandle=-1,ye=i.subtreeFlags,(ye&8192||(ye&16785408)===16785408)&&(zc={stylesheets:null,count:0,unsuspend:c1},By(i),ye=d1(),ye!==null)){s.cancelPendingCommit=ye(Zy.bind(null,s,i,g,l,u,m,j,C,q,me,1,ae,oe)),Oa(s,g,j,!se);return}Zy(s,i,g,l,u,m,j,C,q)}function AS(s){for(var i=s;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var m=l[u],g=m.getSnapshot;m=m.value;try{if(!ln(g(),m))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Oa(s,i,l,u){i&=~jf,i&=~Nl,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var m=i;0<m;){var g=31-Os(m),j=1<<g;u[g]=-1,m&=~j}l!==0&&hr(s,l,i)}function jd(){return(Wt&6)===0?(Lc(0),!1):!0}function kf(){if(_t!==null){if(Kt===0)var s=_t.return;else s=_t,Ki=pl=null,Gm(s),uo=null,Tc=0,s=_t;for(;s!==null;)Sy(s.alternate,s),s=s.return;_t=null}}function vo(s,i){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,GS(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),kf(),hs=s,_t=l=Gi(s.current,null),kt=i,Kt=0,_r=null,Da=!1,go=Xt(s,i),_f=!1,po=Gr=jf=Nl=Ra=Is=0,ar=Mc=null,Sf=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var m=31-Os(u),g=1<<m;i|=s[m],u&=~g}return na=i,Gu(),l}function Yy(s,i){ft=null,le.H=dd,i===xc||i===td?(i=u0(),Kt=3):i===l0?(i=u0(),Kt=4):Kt=i===dy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_r=i,_t===null&&(Is=1,pd(s,$r(i,s.current)))}function Wy(){var s=le.H;return le.H=dd,s===null?dd:s}function Ky(){var s=le.A;return le.A=TS,s}function Df(){Is=4,Da||(kt&4194048)!==kt&&Hr.current!==null||(go=!0),(Ra&134217727)===0&&(Nl&134217727)===0||hs===null||Oa(hs,kt,Gr,!1)}function Rf(s,i,l){var u=Wt;Wt|=2;var m=Wy(),g=Ky();(hs!==s||kt!==i)&&(_d=null,vo(s,i)),i=!1;var j=Is;e:do try{if(Kt!==0&&_t!==null){var C=_t,q=_r;switch(Kt){case 8:kf(),j=6;break e;case 3:case 2:case 9:case 6:Hr.current===null&&(i=!0);var se=Kt;if(Kt=0,_r=null,bo(s,C,q,se),l&&go){j=0;break e}break;default:se=Kt,Kt=0,_r=null,bo(s,C,q,se)}}CS(),j=Is;break}catch(me){Yy(s,me)}while(!0);return i&&s.shellSuspendCounter++,Ki=pl=null,Wt=u,le.H=m,le.A=g,_t===null&&(hs=null,kt=0,Gu()),j}function CS(){for(;_t!==null;)Jy(_t)}function kS(s,i){var l=Wt;Wt|=2;var u=Wy(),m=Ky();hs!==s||kt!==i?(_d=null,Nd=Ve()+500,vo(s,i)):go=Xt(s,i);e:do try{if(Kt!==0&&_t!==null){i=_t;var g=_r;t:switch(Kt){case 1:Kt=0,_r=null,bo(s,i,g,1);break;case 2:case 9:if(o0(g)){Kt=0,_r=null,Qy(i);break}i=function(){Kt!==2&&Kt!==9||hs!==s||(Kt=7),Ri(s)},g.then(i,i);break e;case 3:Kt=7;break e;case 4:Kt=5;break e;case 7:o0(g)?(Kt=0,_r=null,Qy(i)):(Kt=0,_r=null,bo(s,i,g,7));break;case 5:var j=null;switch(_t.tag){case 26:j=_t.memoizedState;case 5:case 27:var C=_t;if(!j||Rv(j)){Kt=0,_r=null;var q=C.sibling;if(q!==null)_t=q;else{var se=C.return;se!==null?(_t=se,Sd(se)):_t=null}break t}}Kt=0,_r=null,bo(s,i,g,5);break;case 6:Kt=0,_r=null,bo(s,i,g,6);break;case 8:kf(),Is=6;break e;default:throw Error(a(462))}}DS();break}catch(me){Yy(s,me)}while(!0);return Ki=pl=null,le.H=u,le.A=m,Wt=l,_t!==null?0:(hs=null,kt=0,Gu(),Is)}function DS(){for(;_t!==null&&!Te();)Jy(_t)}function Jy(s){var i=_y(s.alternate,s,na);s.memoizedProps=s.pendingProps,i===null?Sd(s):_t=i}function Qy(s){var i=s,l=i.alternate;switch(i.tag){case 15:case 0:i=xy(l,i,i.pendingProps,i.type,void 0,kt);break;case 11:i=xy(l,i,i.pendingProps,i.type.render,i.ref,kt);break;case 5:Gm(i);default:Sy(l,i),i=_t=Xx(i,na),i=_y(l,i,na)}s.memoizedProps=s.pendingProps,i===null?Sd(s):_t=i}function bo(s,i,l,u){Ki=pl=null,Gm(i),uo=null,Tc=0;var m=i.return;try{if(bS(s,m,i,l,kt)){Is=1,pd(s,$r(l,s.current)),_t=null;return}}catch(g){if(m!==null)throw _t=m,g;Is=1,pd(s,$r(l,s.current)),_t=null;return}i.flags&32768?(qt||u===1?s=!0:go||(kt&536870912)!==0?s=!1:(Da=s=!0,(u===2||u===9||u===3||u===6)&&(u=Hr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xy(i,s)):Sd(i)}function Sd(s){var i=s;do{if((i.flags&32768)!==0){Xy(i,Da);return}s=i.return;var l=NS(i.alternate,i,na);if(l!==null){_t=l;return}if(i=i.sibling,i!==null){_t=i;return}_t=i=s}while(i!==null);Is===0&&(Is=5)}function Xy(s,i){do{var l=_S(s.alternate,s);if(l!==null){l.flags&=32767,_t=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(s=s.sibling,s!==null)){_t=s;return}_t=s=l}while(s!==null);Is=6,_t=null}function Zy(s,i,l,u,m,g,j,C,q){s.cancelPendingCommit=null;do Td();while(_n!==0);if((Wt&6)!==0)throw Error(a(327));if(i!==null){if(i===s.current)throw Error(a(177));if(g=i.lanes|i.childLanes,g|=wm,Zr(s,l,g,j,C,q),s===hs&&(_t=hs=null,kt=0),xo=i,Ma=s,yo=l,Ef=g,Af=m,qy=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,OS(Gt,function(){return rv(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=le.T,le.T=null,m=fe.p,fe.p=2,j=Wt,Wt|=4;try{jS(s,i,l)}finally{Wt=j,fe.p=m,le.T=u}}_n=1,ev(),tv(),sv()}}function ev(){if(_n===1){_n=0;var s=Ma,i=xo,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=le.T,le.T=null;var u=fe.p;fe.p=2;var m=Wt;Wt|=4;try{Ly(i,s);var g=Vf,j=Hu(s.containerInfo),C=g.focusedElem,q=g.selectionRange;if(j!==C&&C&&C.ownerDocument&&Vu(C.ownerDocument.documentElement,C)){if(q!==null&&pm(C)){var se=q.start,me=q.end;if(me===void 0&&(me=se),"selectionStart"in C)C.selectionStart=se,C.selectionEnd=Math.min(me,C.value.length);else{var ye=C.ownerDocument||document,ae=ye&&ye.defaultView||window;if(ae.getSelection){var oe=ae.getSelection(),it=C.textContent.length,Xe=Math.min(q.start,it),ns=q.end===void 0?Xe:Math.min(q.end,it);!oe.extend&&Xe>ns&&(j=ns,ns=Xe,Xe=j);var X=ol(C,Xe),J=ol(C,ns);if(X&&J&&(oe.rangeCount!==1||oe.anchorNode!==X.node||oe.anchorOffset!==X.offset||oe.focusNode!==J.node||oe.focusOffset!==J.offset)){var ee=ye.createRange();ee.setStart(X.node,X.offset),oe.removeAllRanges(),Xe>ns?(oe.addRange(ee),oe.extend(J.node,J.offset)):(ee.setEnd(J.node,J.offset),oe.addRange(ee))}}}}for(ye=[],oe=C;oe=oe.parentNode;)oe.nodeType===1&&ye.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ye.length;C++){var pe=ye[C];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}Ud=!!qf,Vf=qf=null}finally{Wt=m,fe.p=u,le.T=l}}s.current=i,_n=2}}function tv(){if(_n===2){_n=0;var s=Ma,i=xo,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=le.T,le.T=null;var u=fe.p;fe.p=2;var m=Wt;Wt|=4;try{Ry(s,i.alternate,i)}finally{Wt=m,fe.p=u,le.T=l}}_n=3}}function sv(){if(_n===4||_n===3){_n=0,Ie();var s=Ma,i=xo,l=yo,u=qy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?_n=5:(_n=0,xo=Ma=null,nv(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Ia=null),Xn(l),i=i.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Qr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=le.T,m=fe.p,fe.p=2,le.T=null;try{for(var g=s.onRecoverableError,j=0;j<u.length;j++){var C=u[j];g(C.value,{componentStack:C.stack})}}finally{le.T=i,fe.p=m}}(yo&3)!==0&&Td(),Ri(s),m=s.pendingLanes,(l&4194090)!==0&&(m&42)!==0?s===Cf?Oc++:(Oc=0,Cf=s):Oc=0,Lc(0)}}function nv(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,gc(i)))}function Td(s){return ev(),tv(),sv(),rv()}function rv(){if(_n!==5)return!1;var s=Ma,i=Ef;Ef=0;var l=Xn(yo),u=le.T,m=fe.p;try{fe.p=32>l?32:l,le.T=null,l=Af,Af=null;var g=Ma,j=yo;if(_n=0,xo=Ma=null,yo=0,(Wt&6)!==0)throw Error(a(331));var C=Wt;if(Wt|=4,$y(g.current),Uy(g,g.current,j,l),Wt=C,Lc(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Qr,g)}catch{}return!0}finally{fe.p=m,le.T=u,nv(s,i)}}function iv(s,i,l){i=$r(l,i),i=lf(s.stateNode,i,2),s=ja(s,i,2),s!==null&&(Et(s,2),Ri(s))}function as(s,i,l){if(s.tag===3)iv(s,s,l);else for(;i!==null;){if(i.tag===3){iv(i,s,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ia===null||!Ia.has(u))){s=$r(l,s),l=cy(2),u=ja(i,l,2),u!==null&&(uy(l,u,i,s),Et(u,2),Ri(u));break}}i=i.return}}function If(s,i,l){var u=s.pingCache;if(u===null){u=s.pingCache=new ES;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(l)||(_f=!0,m.add(l),s=RS.bind(null,s,i,l),i.then(s,s))}function RS(s,i,l){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,hs===s&&(kt&l)===l&&(Is===4||Is===3&&(kt&62914560)===kt&&300>Ve()-Tf?(Wt&2)===0&&vo(s,0):jf|=l,po===kt&&(po=0)),Ri(s)}function av(s,i){i===0&&(i=us()),s=eo(s,i),s!==null&&(Et(s,i),Ri(s))}function IS(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),av(s,l)}function MS(s,i){var l=0;switch(s.tag){case 13:var u=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),av(s,l)}function OS(s,i){return Er(s,i)}var Ed=null,wo=null,Mf=!1,Ad=!1,Of=!1,_l=0;function Ri(s){s!==wo&&s.next===null&&(wo===null?Ed=wo=s:wo=wo.next=s),Ad=!0,Mf||(Mf=!0,PS())}function Lc(s,i){if(!Of&&Ad){Of=!0;do for(var l=!1,u=Ed;u!==null;){if(s!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var j=u.suspendedLanes,C=u.pingedLanes;g=(1<<31-Os(42|s)+1)-1,g&=m&~(j&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,uv(u,g))}else g=kt,g=Ts(u,u===hs?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Xt(u,g)||(l=!0,uv(u,g));u=u.next}while(l);Of=!1}}function LS(){lv()}function lv(){Ad=Mf=!1;var s=0;_l!==0&&(HS()&&(s=_l),_l=0);for(var i=Ve(),l=null,u=Ed;u!==null;){var m=u.next,g=ov(u,i);g===0?(u.next=null,l===null?Ed=m:l.next=m,m===null&&(wo=l)):(l=u,(s!==0||(g&3)!==0)&&(Ad=!0)),u=m}Lc(s)}function ov(s,i){for(var l=s.suspendedLanes,u=s.pingedLanes,m=s.expirationTimes,g=s.pendingLanes&-62914561;0<g;){var j=31-Os(g),C=1<<j,q=m[j];q===-1?((C&l)===0||(C&u)!==0)&&(m[j]=fn(C,i)):q<=i&&(s.expiredLanes|=C),g&=~C}if(i=hs,l=kt,l=Ts(s,s===i?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===i&&(Kt===2||Kt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&ur(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Xt(s,l)){if(i=l&-l,i===s.callbackPriority)return i;switch(u!==null&&ur(u),Xn(l)){case 2:case 8:l=nt;break;case 32:l=Gt;break;case 268435456:l=Mt;break;default:l=Gt}return u=cv.bind(null,s),l=Er(l,u),s.callbackPriority=i,s.callbackNode=l,i}return u!==null&&u!==null&&ur(u),s.callbackPriority=2,s.callbackNode=null,2}function cv(s,i){if(_n!==0&&_n!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Td()&&s.callbackNode!==l)return null;var u=kt;return u=Ts(s,s===hs?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Hy(s,u,i),ov(s,Ve()),s.callbackNode!=null&&s.callbackNode===l?cv.bind(null,s):null)}function uv(s,i){if(Td())return null;Hy(s,i,!0)}function PS(){YS(function(){(Wt&6)!==0?Er(st,LS):lv()})}function Lf(){return _l===0&&(_l=Es()),_l}function dv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:yn(""+s)}function hv(s,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,s.id&&l.setAttribute("form",s.id),i.parentNode.insertBefore(l,i),s=new FormData(s),l.parentNode.removeChild(l),s}function US(s,i,l,u,m){if(i==="submit"&&l&&l.stateNode===m){var g=dv((m[As]||null).action),j=u.submitter;j&&(i=(i=j[As]||null)?dv(i.formAction):j.getAttribute("formAction"),i!==null&&(g=i,j=null));var C=new Pr("action","action",null,u,m);s.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(_l!==0){var q=j?hv(m,j):new FormData(m);tf(l,{pending:!0,data:q,method:m.method,action:g},null,q)}}else typeof g=="function"&&(C.preventDefault(),q=j?hv(m,j):new FormData(m),tf(l,{pending:!0,data:q,method:m.method,action:g},g,q))},currentTarget:m}]})}}for(var Pf=0;Pf<bm.length;Pf++){var Uf=bm[Pf],BS=Uf.toLowerCase(),FS=Uf[0].toUpperCase()+Uf.slice(1);ui(BS,"on"+FS)}ui(Hx,"onAnimationEnd"),ui(Gx,"onAnimationIteration"),ui(Yx,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(nS,"onTransitionRun"),ui(rS,"onTransitionStart"),ui(iS,"onTransitionCancel"),ui(Wx,"onTransitionEnd"),ys("onMouseEnter",["mouseout","mouseover"]),ys("onMouseLeave",["mouseout","mouseover"]),ys("onPointerEnter",["pointerout","pointerover"]),ys("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$S=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pc));function mv(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],m=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var j=u.length-1;0<=j;j--){var C=u[j],q=C.instance,se=C.currentTarget;if(C=C.listener,q!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=se;try{g(m)}catch(me){gd(me)}m.currentTarget=null,g=q}else for(j=0;j<u.length;j++){if(C=u[j],q=C.instance,se=C.currentTarget,C=C.listener,q!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=se;try{g(m)}catch(me){gd(me)}m.currentTarget=null,g=q}}}}function jt(s,i){var l=i[mr];l===void 0&&(l=i[mr]=new Set);var u=s+"__bubble";l.has(u)||(fv(i,s,2,!1),l.add(u))}function Bf(s,i,l){var u=0;i&&(u|=4),fv(l,s,u,i)}var Cd="_reactListening"+Math.random().toString(36).slice(2);function Ff(s){if(!s[Cd]){s[Cd]=!0,Bn.forEach(function(l){l!=="selectionchange"&&($S.has(l)||Bf(l,!1,s),Bf(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Cd]||(i[Cd]=!0,Bf("selectionchange",!1,i))}}function fv(s,i,l,u){switch(Uv(i)){case 2:var m=f1;break;case 8:m=g1;break;default:m=eg}l=m.bind(null,i,l,s),m=void 0,!Ut||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?s.addEventListener(i,l,{capture:!0,passive:m}):s.addEventListener(i,l,!0):m!==void 0?s.addEventListener(i,l,{passive:m}):s.addEventListener(i,l,!1)}function $f(s,i,l,u,m){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var j=u.tag;if(j===3||j===4){var C=u.stateNode.containerInfo;if(C===m)break;if(j===4)for(j=u.return;j!==null;){var q=j.tag;if((q===3||q===4)&&j.stateNode.containerInfo===m)return;j=j.return}for(;C!==null;){if(j=is(C),j===null)return;if(q=j.tag,q===5||q===6||q===26||q===27){u=g=j;continue e}C=C.parentNode}}u=u.return}Mr(function(){var se=g,me=Pt(l),ye=[];e:{var ae=Kx.get(s);if(ae!==void 0){var oe=Pr,it=s;switch(s){case"keypress":if(Lr(l)===0)break e;case"keydown":case"keyup":oe=ne;break;case"focusin":it="focus",oe=tr;break;case"focusout":it="blur",oe=tr;break;case"beforeblur":case"afterblur":oe=tr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=li;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=va;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=h;break;case Hx:case Gx:case Yx:oe=oi;break;case Wx:oe=w;break;case"scroll":case"scrollend":oe=Ur;break;case"wheel":oe=G;break;case"copy":case"cut":case"paste":oe=Ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=he;break;case"toggle":case"beforetoggle":oe=we}var Xe=(i&4)!==0,ns=!Xe&&(s==="scroll"||s==="scrollend"),X=Xe?ae!==null?ae+"Capture":null:ae;Xe=[];for(var J=se,ee;J!==null;){var pe=J;if(ee=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||ee===null||X===null||(pe=Or(J,X),pe!=null&&Xe.push(Uc(J,pe,ee))),ns)break;J=J.return}0<Xe.length&&(ae=new oe(ae,it,null,l,me),ye.push({event:ae,listeners:Xe}))}}if((i&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",oe=s==="mouseout"||s==="pointerout",ae&&l!==Si&&(it=l.relatedTarget||l.fromElement)&&(is(it)||it[kr]))break e;if((oe||ae)&&(ae=me.window===me?me:(ae=me.ownerDocument)?ae.defaultView||ae.parentWindow:window,oe?(it=l.relatedTarget||l.toElement,oe=se,it=it?is(it):null,it!==null&&(ns=c(it),Xe=it.tag,it!==ns||Xe!==5&&Xe!==27&&Xe!==6)&&(it=null)):(oe=null,it=se),oe!==it)){if(Xe=li,pe="onMouseLeave",X="onMouseEnter",J="mouse",(s==="pointerout"||s==="pointerover")&&(Xe=he,pe="onPointerLeave",X="onPointerEnter",J="pointer"),ns=oe==null?ae:Cs(oe),ee=it==null?ae:Cs(it),ae=new Xe(pe,J+"leave",oe,l,me),ae.target=ns,ae.relatedTarget=ee,pe=null,is(me)===se&&(Xe=new Xe(X,J+"enter",it,l,me),Xe.target=ee,Xe.relatedTarget=ns,pe=Xe),ns=pe,oe&&it)t:{for(Xe=oe,X=it,J=0,ee=Xe;ee;ee=No(ee))J++;for(ee=0,pe=X;pe;pe=No(pe))ee++;for(;0<J-ee;)Xe=No(Xe),J--;for(;0<ee-J;)X=No(X),ee--;for(;J--;){if(Xe===X||X!==null&&Xe===X.alternate)break t;Xe=No(Xe),X=No(X)}Xe=null}else Xe=null;oe!==null&&gv(ye,ae,oe,Xe,!1),it!==null&&ns!==null&&gv(ye,ns,it,Xe,!0)}}e:{if(ae=se?Cs(se):window,oe=ae.nodeName&&ae.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ae.type==="file")var ze=rt;else if(et(ae))if(lt)ze=nr;else{ze=Ei;var xt=vr}else oe=ae.nodeName,!oe||oe.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?se&&ti(se.elementType)&&(ze=rt):ze=wn;if(ze&&(ze=ze(s,se))){ct(ye,ze,l,me);break e}xt&&xt(s,ae,se),s==="focusout"&&se&&ae.type==="number"&&se.memoizedProps.value!=null&&Fe(ae,"number",ae.value)}switch(xt=se?Cs(se):window,s){case"focusin":(et(xt)||xt.contentEditable==="true")&&(Ql=xt,xm=se,uc=null);break;case"focusout":uc=xm=Ql=null;break;case"mousedown":ym=!0;break;case"contextmenu":case"mouseup":case"dragend":ym=!1,qx(ye,l,me);break;case"selectionchange":if(sS)break;case"keydown":case"keyup":qx(ye,l,me)}var We;if(Ue)e:{switch(s){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else ve?H(s,l)&&(Ze="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(R&&l.locale!=="ko"&&(ve||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&ve&&(We=Vi()):(ds=me,Tt="value"in ds?ds.value:ds.textContent,ve=!0)),xt=kd(se,Ze),0<xt.length&&(Ze=new Fr(Ze,s,null,l,me),ye.push({event:Ze,listeners:xt}),We?Ze.data=We:(We=ie(l),We!==null&&(Ze.data=We)))),(We=T?_e(s,l):je(s,l))&&(Ze=kd(se,"onBeforeInput"),0<Ze.length&&(xt=new Fr("onBeforeInput","beforeinput",null,l,me),ye.push({event:xt,listeners:Ze}),xt.data=We)),US(ye,s,se,l,me)}mv(ye,i)})}function Uc(s,i,l){return{instance:s,listener:i,currentTarget:l}}function kd(s,i){for(var l=i+"Capture",u=[];s!==null;){var m=s,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Or(s,l),m!=null&&u.unshift(Uc(s,m,g)),m=Or(s,i),m!=null&&u.push(Uc(s,m,g))),s.tag===3)return u;s=s.return}return[]}function No(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function gv(s,i,l,u,m){for(var g=i._reactName,j=[];l!==null&&l!==u;){var C=l,q=C.alternate,se=C.stateNode;if(C=C.tag,q!==null&&q===u)break;C!==5&&C!==26&&C!==27||se===null||(q=se,m?(se=Or(l,g),se!=null&&j.unshift(Uc(l,se,q))):m||(se=Or(l,g),se!=null&&j.push(Uc(l,se,q)))),l=l.return}j.length!==0&&s.push({event:i,listeners:j})}var zS=/\r\n?/g,qS=/\u0000|\uFFFD/g;function pv(s){return(typeof s=="string"?s:""+s).replace(zS,`
`).replace(qS,"")}function xv(s,i){return i=pv(i),pv(s)===i}function Dd(){}function ss(s,i,l,u,m,g){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||an(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&an(s,""+u);break;case"className":At(s,"class",u);break;case"tabIndex":At(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":At(s,l,u);break;case"style":zi(s,u,g);break;case"data":if(i!=="object"){At(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=yn(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&ss(s,i,"name",m.name,m,null),ss(s,i,"formEncType",m.formEncType,m,null),ss(s,i,"formMethod",m.formMethod,m,null),ss(s,i,"formTarget",m.formTarget,m,null)):(ss(s,i,"encType",m.encType,m,null),ss(s,i,"method",m.method,m,null),ss(s,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=yn(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=Dd);break;case"onScroll":u!=null&&jt("scroll",s);break;case"onScrollEnd":u!=null&&jt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(a(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=yn(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":jt("beforetoggle",s),jt("toggle",s),Ds(s,"popover",u);break;case"xlinkActuate":Lt(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Lt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Lt(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Lt(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Lt(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Lt(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ds(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=qi.get(l)||l,Ds(s,l,u))}}function zf(s,i,l,u,m,g){switch(l){case"style":zi(s,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(a(60));s.innerHTML=l}}break;case"children":typeof u=="string"?an(s,u):(typeof u=="number"||typeof u=="bigint")&&an(s,""+u);break;case"onScroll":u!=null&&jt("scroll",s);break;case"onScrollEnd":u!=null&&jt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Dd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ot.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),i=l.slice(2,m?l.length-7:void 0),g=s[As]||null,g=g!=null?g[l]:null,typeof g=="function"&&s.removeEventListener(i,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(i,u,m);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):Ds(s,l,u)}}}function jn(s,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",s),jt("load",s);var u=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var j=l[g];if(j!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:ss(s,i,g,j,l,null)}}m&&ss(s,i,"srcSet",l.srcSet,l,null),u&&ss(s,i,"src",l.src,l,null);return;case"input":jt("invalid",s);var C=g=j=m=null,q=null,se=null;for(u in l)if(l.hasOwnProperty(u)){var me=l[u];if(me!=null)switch(u){case"name":m=me;break;case"type":j=me;break;case"checked":q=me;break;case"defaultChecked":se=me;break;case"value":g=me;break;case"defaultValue":C=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,i));break;default:ss(s,i,u,me,l,null)}}$i(s,g,C,q,se,j,m,!1),ei(s);return;case"select":jt("invalid",s),u=j=g=null;for(m in l)if(l.hasOwnProperty(m)&&(C=l[m],C!=null))switch(m){case"value":g=C;break;case"defaultValue":j=C;break;case"multiple":u=C;default:ss(s,i,m,C,l,null)}i=g,l=j,s.multiple=!!u,i!=null?Ls(s,!!u,i,!1):l!=null&&Ls(s,!!u,l,!0);return;case"textarea":jt("invalid",s),g=m=u=null;for(j in l)if(l.hasOwnProperty(j)&&(C=l[j],C!=null))switch(j){case"value":u=C;break;case"defaultValue":m=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(a(91));break;default:ss(s,i,j,C,l,null)}Ke(s,u,m,g),ei(s);return;case"option":for(q in l)if(l.hasOwnProperty(q)&&(u=l[q],u!=null))switch(q){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ss(s,i,q,u,l,null)}return;case"dialog":jt("beforetoggle",s),jt("toggle",s),jt("cancel",s),jt("close",s);break;case"iframe":case"object":jt("load",s);break;case"video":case"audio":for(u=0;u<Pc.length;u++)jt(Pc[u],s);break;case"image":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"embed":case"source":case"link":jt("error",s),jt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in l)if(l.hasOwnProperty(se)&&(u=l[se],u!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:ss(s,i,se,u,l,null)}return;default:if(ti(i)){for(me in l)l.hasOwnProperty(me)&&(u=l[me],u!==void 0&&zf(s,i,me,u,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(u=l[C],u!=null&&ss(s,i,C,u,l,null))}function VS(s,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,j=null,C=null,q=null,se=null,me=null;for(oe in l){var ye=l[oe];if(l.hasOwnProperty(oe)&&ye!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":q=ye;default:u.hasOwnProperty(oe)||ss(s,i,oe,null,u,ye)}}for(var ae in u){var oe=u[ae];if(ye=l[ae],u.hasOwnProperty(ae)&&(oe!=null||ye!=null))switch(ae){case"type":g=oe;break;case"name":m=oe;break;case"checked":se=oe;break;case"defaultChecked":me=oe;break;case"value":j=oe;break;case"defaultValue":C=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,i));break;default:oe!==ye&&ss(s,i,ae,oe,u,ye)}}Fi(s,j,C,q,se,me,g,m);return;case"select":oe=j=C=ae=null;for(g in l)if(q=l[g],l.hasOwnProperty(g)&&q!=null)switch(g){case"value":break;case"multiple":oe=q;default:u.hasOwnProperty(g)||ss(s,i,g,null,u,q)}for(m in u)if(g=u[m],q=l[m],u.hasOwnProperty(m)&&(g!=null||q!=null))switch(m){case"value":ae=g;break;case"defaultValue":C=g;break;case"multiple":j=g;default:g!==q&&ss(s,i,m,g,u,q)}i=C,l=j,u=oe,ae!=null?Ls(s,!!l,ae,!1):!!u!=!!l&&(i!=null?Ls(s,!!l,i,!0):Ls(s,!!l,l?[]:"",!1));return;case"textarea":oe=ae=null;for(C in l)if(m=l[C],l.hasOwnProperty(C)&&m!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ss(s,i,C,null,u,m)}for(j in u)if(m=u[j],g=l[j],u.hasOwnProperty(j)&&(m!=null||g!=null))switch(j){case"value":ae=m;break;case"defaultValue":oe=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(a(91));break;default:m!==g&&ss(s,i,j,m,u,g)}gr(s,ae,oe);return;case"option":for(var it in l)if(ae=l[it],l.hasOwnProperty(it)&&ae!=null&&!u.hasOwnProperty(it))switch(it){case"selected":s.selected=!1;break;default:ss(s,i,it,null,u,ae)}for(q in u)if(ae=u[q],oe=l[q],u.hasOwnProperty(q)&&ae!==oe&&(ae!=null||oe!=null))switch(q){case"selected":s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:ss(s,i,q,ae,u,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in l)ae=l[Xe],l.hasOwnProperty(Xe)&&ae!=null&&!u.hasOwnProperty(Xe)&&ss(s,i,Xe,null,u,ae);for(se in u)if(ae=u[se],oe=l[se],u.hasOwnProperty(se)&&ae!==oe&&(ae!=null||oe!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,i));break;default:ss(s,i,se,ae,u,oe)}return;default:if(ti(i)){for(var ns in l)ae=l[ns],l.hasOwnProperty(ns)&&ae!==void 0&&!u.hasOwnProperty(ns)&&zf(s,i,ns,void 0,u,ae);for(me in u)ae=u[me],oe=l[me],!u.hasOwnProperty(me)||ae===oe||ae===void 0&&oe===void 0||zf(s,i,me,ae,u,oe);return}}for(var X in l)ae=l[X],l.hasOwnProperty(X)&&ae!=null&&!u.hasOwnProperty(X)&&ss(s,i,X,null,u,ae);for(ye in u)ae=u[ye],oe=l[ye],!u.hasOwnProperty(ye)||ae===oe||ae==null&&oe==null||ss(s,i,ye,ae,u,oe)}var qf=null,Vf=null;function Rd(s){return s.nodeType===9?s:s.ownerDocument}function yv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vv(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function Hf(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Gf=null;function HS(){var s=window.event;return s&&s.type==="popstate"?s===Gf?!1:(Gf=s,!0):(Gf=null,!1)}var bv=typeof setTimeout=="function"?setTimeout:void 0,GS=typeof clearTimeout=="function"?clearTimeout:void 0,wv=typeof Promise=="function"?Promise:void 0,YS=typeof queueMicrotask=="function"?queueMicrotask:typeof wv<"u"?function(s){return wv.resolve(null).then(s).catch(WS)}:bv;function WS(s){setTimeout(function(){throw s})}function La(s){return s==="head"}function Nv(s,i){var l=i,u=0,m=0;do{var g=l.nextSibling;if(s.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<u&&8>u){l=u;var j=s.ownerDocument;if(l&1&&Bc(j.documentElement),l&2&&Bc(j.body),l&4)for(l=j.head,Bc(l),j=l.firstChild;j;){var C=j.nextSibling,q=j.nodeName;j[fr]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&j.rel.toLowerCase()==="stylesheet"||l.removeChild(j),j=C}}if(m===0){s.removeChild(g),Yc(i);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:u=l.charCodeAt(0)-48;else u=0;l=g}while(l);Yc(i)}function Yf(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Yf(l),Dr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function KS(s,i,l,u){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[fr])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(g=s.getAttribute("rel"),g==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(g!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(g=s.getAttribute("src"),(g!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===g)return s}else return s;if(s=hi(s.nextSibling),s===null)break}return null}function JS(s,i,l){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=hi(s.nextSibling),s===null))return null;return s}function Wf(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function QS(s,i){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function hi(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}var Kf=null;function _v(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return s;i--}else l==="/$"&&i++}s=s.previousSibling}return null}function jv(s,i,l){switch(i=Rd(l),s){case"html":if(s=i.documentElement,!s)throw Error(a(452));return s;case"head":if(s=i.head,!s)throw Error(a(453));return s;case"body":if(s=i.body,!s)throw Error(a(454));return s;default:throw Error(a(451))}}function Bc(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Dr(s)}var Yr=new Map,Sv=new Set;function Id(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ra=fe.d;fe.d={f:XS,r:ZS,D:e1,C:t1,L:s1,m:n1,X:i1,S:r1,M:a1};function XS(){var s=ra.f(),i=jd();return s||i}function ZS(s){var i=gn(s);i!==null&&i.tag===5&&i.type==="form"?H0(i):ra.r(s)}var _o=typeof document>"u"?null:document;function Tv(s,i,l){var u=_o;if(u&&typeof i=="string"&&i){var m=ws(i);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Sv.has(m)||(Sv.add(m),s={rel:s,crossOrigin:l,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),jn(i,"link",s),Vt(i),u.head.appendChild(i)))}}function e1(s){ra.D(s),Tv("dns-prefetch",s,null)}function t1(s,i){ra.C(s,i),Tv("preconnect",s,i)}function s1(s,i,l){ra.L(s,i,l);var u=_o;if(u&&s&&i){var m='link[rel="preload"][as="'+ws(i)+'"]';i==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+ws(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+ws(l.imageSizes)+'"]')):m+='[href="'+ws(s)+'"]';var g=m;switch(i){case"style":g=jo(s);break;case"script":g=So(s)}Yr.has(g)||(s=N({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:s,as:i},l),Yr.set(g,s),u.querySelector(m)!==null||i==="style"&&u.querySelector(Fc(g))||i==="script"&&u.querySelector($c(g))||(i=u.createElement("link"),jn(i,"link",s),Vt(i),u.head.appendChild(i)))}}function n1(s,i){ra.m(s,i);var l=_o;if(l&&s){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+ws(u)+'"][href="'+ws(s)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=So(s)}if(!Yr.has(g)&&(s=N({rel:"modulepreload",href:s},i),Yr.set(g,s),l.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($c(g)))return}u=l.createElement("link"),jn(u,"link",s),Vt(u),l.head.appendChild(u)}}}function r1(s,i,l){ra.S(s,i,l);var u=_o;if(u&&s){var m=ks(u).hoistableStyles,g=jo(s);i=i||"default";var j=m.get(g);if(!j){var C={loading:0,preload:null};if(j=u.querySelector(Fc(g)))C.loading=5;else{s=N({rel:"stylesheet",href:s,"data-precedence":i},l),(l=Yr.get(g))&&Jf(s,l);var q=j=u.createElement("link");Vt(q),jn(q,"link",s),q._p=new Promise(function(se,me){q.onload=se,q.onerror=me}),q.addEventListener("load",function(){C.loading|=1}),q.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Md(j,i,u)}j={type:"stylesheet",instance:j,count:1,state:C},m.set(g,j)}}}function i1(s,i){ra.X(s,i);var l=_o;if(l&&s){var u=ks(l).hoistableScripts,m=So(s),g=u.get(m);g||(g=l.querySelector($c(m)),g||(s=N({src:s,async:!0},i),(i=Yr.get(m))&&Qf(s,i),g=l.createElement("script"),Vt(g),jn(g,"link",s),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function a1(s,i){ra.M(s,i);var l=_o;if(l&&s){var u=ks(l).hoistableScripts,m=So(s),g=u.get(m);g||(g=l.querySelector($c(m)),g||(s=N({src:s,async:!0,type:"module"},i),(i=Yr.get(m))&&Qf(s,i),g=l.createElement("script"),Vt(g),jn(g,"link",s),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function Ev(s,i,l,u){var m=(m=Re.current)?Id(m):null;if(!m)throw Error(a(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=jo(l.href),l=ks(m).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=jo(l.href);var g=ks(m).hoistableStyles,j=g.get(s);if(j||(m=m.ownerDocument||m,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(s,j),(g=m.querySelector(Fc(s)))&&!g._p&&(j.instance=g,j.state.loading=5),Yr.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Yr.set(s,l),g||l1(m,s,l,j.state))),i&&u===null)throw Error(a(528,""));return j}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=So(l),l=ks(m).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,s))}}function jo(s){return'href="'+ws(s)+'"'}function Fc(s){return'link[rel="stylesheet"]['+s+"]"}function Av(s){return N({},s,{"data-precedence":s.precedence,precedence:null})}function l1(s,i,l,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),jn(i,"link",l),Vt(i),s.head.appendChild(i))}function So(s){return'[src="'+ws(s)+'"]'}function $c(s){return"script[async]"+s}function Cv(s,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+ws(l.href)+'"]');if(u)return i.instance=u,Vt(u),u;var m=N({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Vt(u),jn(u,"style",m),Md(u,l.precedence,s),i.instance=u;case"stylesheet":m=jo(l.href);var g=s.querySelector(Fc(m));if(g)return i.state.loading|=4,i.instance=g,Vt(g),g;u=Av(l),(m=Yr.get(m))&&Jf(u,m),g=(s.ownerDocument||s).createElement("link"),Vt(g);var j=g;return j._p=new Promise(function(C,q){j.onload=C,j.onerror=q}),jn(g,"link",u),i.state.loading|=4,Md(g,l.precedence,s),i.instance=g;case"script":return g=So(l.src),(m=s.querySelector($c(g)))?(i.instance=m,Vt(m),m):(u=l,(m=Yr.get(g))&&(u=N({},l),Qf(u,m)),s=s.ownerDocument||s,m=s.createElement("script"),Vt(m),jn(m,"link",u),s.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Md(u,l.precedence,s));return i.instance}function Md(s,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,j=0;j<u.length;j++){var C=u[j];if(C.dataset.precedence===i)g=C;else if(g!==m)break}g?g.parentNode.insertBefore(s,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(s,i.firstChild))}function Jf(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function Qf(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Od=null;function kv(s,i,l){if(Od===null){var u=new Map,m=Od=new Map;m.set(l,u)}else m=Od,u=m.get(l),u||(u=new Map,m.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var g=l[m];if(!(g[fr]||g[xs]||s==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var j=g.getAttribute(i)||"";j=s+j;var C=u.get(j);C?C.push(g):u.set(j,[g])}}return u}function Dv(s,i,l){s=s.ownerDocument||s,s.head.insertBefore(l,i==="title"?s.querySelector("head > title"):null)}function o1(s,i,l){if(l===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Rv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var zc=null;function c1(){}function u1(s,i,l){if(zc===null)throw Error(a(475));var u=zc;if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var m=jo(l.href),g=s.querySelector(Fc(m));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Ld.bind(u),s.then(u,u)),i.state.loading|=4,i.instance=g,Vt(g);return}g=s.ownerDocument||s,l=Av(l),(m=Yr.get(m))&&Jf(l,m),g=g.createElement("link"),Vt(g);var j=g;j._p=new Promise(function(C,q){j.onload=C,j.onerror=q}),jn(g,"link",l),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Ld.bind(u),s.addEventListener("load",i),s.addEventListener("error",i))}}function d1(){if(zc===null)throw Error(a(475));var s=zc;return s.stylesheets&&s.count===0&&Xf(s,s.stylesheets),0<s.count?function(i){var l=setTimeout(function(){if(s.stylesheets&&Xf(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Ld(){if(this.count--,this.count===0){if(this.stylesheets)Xf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Pd=null;function Xf(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Pd=new Map,i.forEach(h1,s),Pd=null,Ld.call(s))}function h1(s,i){if(!(i.state.loading&4)){var l=Pd.get(s);if(l)var u=l.get(null);else{l=new Map,Pd.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var j=m[g];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(l.set(j.dataset.precedence,j),u=j)}u&&l.set(null,u)}m=i.instance,j=m.getAttribute("data-precedence"),g=l.get(j)||u,g===u&&l.set(null,m),l.set(j,m),this.count++,u=Ld.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),i.state.loading|=4}}var qc={$$typeof:te,Provider:null,Consumer:null,_currentValue:ke,_currentValue2:ke,_threadCount:0};function m1(s,i,l,u,m,g,j,C){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xr(0),this.hiddenUpdates=Xr(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Iv(s,i,l,u,m,g,j,C,q,se,me,ye){return s=new m1(s,i,l,j,C,q,se,ye),i=1,g===!0&&(i|=24),g=br(3,null,null,i),s.current=g,g.stateNode=s,i=Rm(),i.refCount++,s.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:i},Lm(g),s}function Mv(s){return s?(s=to,s):to}function Ov(s,i,l,u,m,g){m=Mv(m),u.context===null?u.context=m:u.pendingContext=m,u=_a(i),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=ja(s,u,i),l!==null&&(Sr(l,s,i),vc(l,s,i))}function Lv(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function Zf(s,i){Lv(s,i),(s=s.alternate)&&Lv(s,i)}function Pv(s){if(s.tag===13){var i=eo(s,67108864);i!==null&&Sr(i,s,67108864),Zf(s,67108864)}}var Ud=!0;function f1(s,i,l,u){var m=le.T;le.T=null;var g=fe.p;try{fe.p=2,eg(s,i,l,u)}finally{fe.p=g,le.T=m}}function g1(s,i,l,u){var m=le.T;le.T=null;var g=fe.p;try{fe.p=8,eg(s,i,l,u)}finally{fe.p=g,le.T=m}}function eg(s,i,l,u){if(Ud){var m=tg(u);if(m===null)$f(s,i,u,Bd,l),Bv(s,u);else if(x1(m,s,i,l,u))u.stopPropagation();else if(Bv(s,u),i&4&&-1<p1.indexOf(s)){for(;m!==null;){var g=gn(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var j=Gs(g.pendingLanes);if(j!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;j;){var q=1<<31-Os(j);C.entanglements[1]|=q,j&=~q}Ri(g),(Wt&6)===0&&(Nd=Ve()+500,Lc(0))}}break;case 13:C=eo(g,2),C!==null&&Sr(C,g,2),jd(),Zf(g,2)}if(g=tg(u),g===null&&$f(s,i,u,Bd,l),g===m)break;m=g}m!==null&&u.stopPropagation()}else $f(s,i,u,null,l)}}function tg(s){return s=Pt(s),sg(s)}var Bd=null;function sg(s){if(Bd=null,s=is(s),s!==null){var i=c(s);if(i===null)s=null;else{var l=i.tag;if(l===13){if(s=d(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Bd=s,null}function Uv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ot()){case st:return 2;case nt:return 8;case Gt:case Jn:return 32;case Mt:return 268435456;default:return 32}default:return 32}}var ng=!1,Pa=null,Ua=null,Ba=null,Vc=new Map,Hc=new Map,Fa=[],p1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(s,i){switch(s){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":Vc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(i.pointerId)}}function Gc(s,i,l,u,m,g){return s===null||s.nativeEvent!==g?(s={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},i!==null&&(i=gn(i),i!==null&&Pv(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),s)}function x1(s,i,l,u,m){switch(i){case"focusin":return Pa=Gc(Pa,s,i,l,u,m),!0;case"dragenter":return Ua=Gc(Ua,s,i,l,u,m),!0;case"mouseover":return Ba=Gc(Ba,s,i,l,u,m),!0;case"pointerover":var g=m.pointerId;return Vc.set(g,Gc(Vc.get(g)||null,s,i,l,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Hc.set(g,Gc(Hc.get(g)||null,s,i,l,u,m)),!0}return!1}function Fv(s){var i=is(s.target);if(i!==null){var l=c(i);if(l!==null){if(i=l.tag,i===13){if(i=d(l),i!==null){s.blockedOn=i,al(s.priority,function(){if(l.tag===13){var u=jr();u=Cr(u);var m=eo(l,u);m!==null&&Sr(m,l,u),Zf(l,u)}});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Fd(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=tg(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Si=u,l.target.dispatchEvent(u),Si=null}else return i=gn(l),i!==null&&Pv(i),s.blockedOn=l,!1;i.shift()}return!0}function $v(s,i,l){Fd(s)&&l.delete(i)}function y1(){ng=!1,Pa!==null&&Fd(Pa)&&(Pa=null),Ua!==null&&Fd(Ua)&&(Ua=null),Ba!==null&&Fd(Ba)&&(Ba=null),Vc.forEach($v),Hc.forEach($v)}function $d(s,i){s.blockedOn===i&&(s.blockedOn=null,ng||(ng=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,y1)))}var zd=null;function zv(s){zd!==s&&(zd=s,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){zd===s&&(zd=null);for(var i=0;i<s.length;i+=3){var l=s[i],u=s[i+1],m=s[i+2];if(typeof u!="function"){if(sg(u||l)===null)continue;break}var g=gn(l);g!==null&&(s.splice(i,3),i-=3,tf(g,{pending:!0,data:m,method:l.method,action:u},u,m))}}))}function Yc(s){function i(q){return $d(q,s)}Pa!==null&&$d(Pa,s),Ua!==null&&$d(Ua,s),Ba!==null&&$d(Ba,s),Vc.forEach(i),Hc.forEach(i);for(var l=0;l<Fa.length;l++){var u=Fa[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Fa.length&&(l=Fa[0],l.blockedOn===null);)Fv(l),l.blockedOn===null&&Fa.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var m=l[u],g=l[u+1],j=m[As]||null;if(typeof g=="function")j||zv(l);else if(j){var C=null;if(g&&g.hasAttribute("formAction")){if(m=g,j=g[As]||null)C=j.formAction;else if(sg(m)!==null)continue}else C=j.action;typeof C=="function"?l[u+1]=C:(l.splice(u,3),u-=3),zv(l)}}}function rg(s){this._internalRoot=s}qd.prototype.render=rg.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(a(409));var l=i.current,u=jr();Ov(l,u,s,i,null,null)},qd.prototype.unmount=rg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Ov(s.current,2,null,s,null,null),jd(),i[kr]=null}};function qd(s){this._internalRoot=s}qd.prototype.unstable_scheduleHydration=function(s){if(s){var i=Zn();s={blockedOn:null,target:s,priority:i};for(var l=0;l<Fa.length&&i!==0&&i<Fa[l].priority;l++);Fa.splice(l,0,s),l===0&&Fv(s)}};var qv=e.version;if(qv!=="19.1.1")throw Error(a(527,qv,"19.1.1"));fe.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(a(188)):(s=Object.keys(s).join(","),Error(a(268,s)));return s=y(i),s=s!==null?x(s):null,s=s===null?null:s.stateNode,s};var v1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vd.isDisabled&&Vd.supportsFiber)try{Qr=Vd.inject(v1),wt=Vd}catch{}}return Kc.createRoot=function(s,i){if(!o(s))throw Error(a(299));var l=!1,u="",m=iy,g=ay,j=ly,C=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(j=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(C=i.unstable_transitionCallbacks)),i=Iv(s,1,!1,null,null,l,u,m,g,j,C,null),s[kr]=i.current,Ff(s),new rg(i)},Kc.hydrateRoot=function(s,i,l){if(!o(s))throw Error(a(299));var u=!1,m="",g=iy,j=ay,C=ly,q=null,se=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(j=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(q=l.unstable_transitionCallbacks),l.formState!==void 0&&(se=l.formState)),i=Iv(s,1,!0,i,l??null,u,m,g,j,C,q,se),i.context=Mv(null),l=i.current,u=jr(),u=Cr(u),m=_a(u),m.callback=null,ja(l,m,u),l=u,i.current.lanes=l,Et(i,l),Ri(i),s[kr]=i.current,Ff(s),new qd(i)},Kc.version="19.1.1",Kc}var Zv;function D1(){if(Zv)return lg.exports;Zv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lg.exports=k1(),lg.exports}var R1=D1();const I1="modulepreload",M1=function(r){return"/"+r},eb={},$s=function(e,n,a){let o=Promise.resolve();if(n&&n.length>0){let d=function(x){return Promise.all(x.map(N=>Promise.resolve(N).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),y=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));o=d(n.map(x=>{if(x=M1(x),x in eb)return;eb[x]=!0;const N=x.endsWith(".css"),_=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${_}`))return;const S=document.createElement("link");if(S.rel=N?"stylesheet":I1,N||(S.as="script"),S.crossOrigin="",S.href=x,y&&S.setAttribute("nonce",y),document.head.appendChild(S),N)return new Promise((V,z)=>{S.addEventListener("load",V),S.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${x}`)))})}))}function c(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return o.then(d=>{for(const f of d||[])f.status==="rejected"&&c(f.reason);return e().catch(c)})},O1=()=>{};var tb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce=function(r,e){if(!r)throw sc(e)},sc=function(r){return new Error("Firebase Database ("+tN.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=function(r){const e=[];let n=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},L1=function(r){const e=[];let n=0,a=0;for(;n<r.length;){const o=r[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],d=r[n++],f=r[n++],y=((o&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[a++]=String.fromCharCode(55296+(y>>10)),e[a++]=String.fromCharCode(56320+(y&1023))}else{const c=r[n++],d=r[n++];e[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},kp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,f=d?r[o+1]:0,y=o+2<r.length,x=y?r[o+2]:0,N=c>>2,_=(c&3)<<4|f>>4;let S=(f&15)<<2|x>>6,V=x&63;y||(V=64,d||(S=64)),a.push(n[N],n[_],n[S],n[V])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(sN(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):L1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],f=o<r.length?n[r.charAt(o)]:0;++o;const x=o<r.length?n[r.charAt(o)]:64;++o;const _=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||f==null||x==null||_==null)throw new P1;const S=c<<2|f>>4;if(a.push(S),x!==64){const V=f<<4&240|x>>2;if(a.push(V),_!==64){const z=x<<6&192|_;a.push(z)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class P1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nN=function(r){const e=sN(r);return kp.encodeByteArray(e,!0)},dh=function(r){return nN(r).replace(/\./g,"")},Fg=function(r){try{return kp.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(r){return rN(void 0,r)}function rN(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!B1(n)||(r[n]=rN(r[n],e[n]));return r}function B1(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=()=>F1().__FIREBASE_DEFAULTS__,z1=()=>{if(typeof process>"u"||typeof tb>"u")return;const r=tb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},q1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Fg(r[1]);return e&&JSON.parse(e)},iN=()=>{try{return O1()||$1()||z1()||q1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},V1=r=>{var e,n;return(n=(e=iN())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},Fh=r=>{const e=V1(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},aN=()=>{var r;return(r=iN())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $h(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[dh(JSON.stringify(n)),dh(JSON.stringify(d)),""].join(".")}const su={};function H1(){const r={prod:[],emulator:[]};for(const e of Object.keys(su))su[e]?r.emulator.push(e):r.prod.push(e);return r}function G1(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let sb=!1;function zh(r,e){if(typeof window>"u"||typeof document>"u"||!Hl(window.location.host)||su[r]===e||su[r]||sb)return;su[r]=e;function n(S){return`__firebase__banner__${S}`}const a="__firebase__banner",c=H1().prod.length>0;function d(){const S=document.getElementById(a);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,V){S.setAttribute("width","24"),S.setAttribute("id",V),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function x(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{sb=!0,d()},S}function N(S,V){S.setAttribute("id",V),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function _(){const S=G1(a),V=n("text"),z=document.getElementById(V)||document.createElement("span"),re=n("learnmore"),ce=document.getElementById(re)||document.createElement("a"),I=n("preprendIcon"),Ee=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const te=S.element;f(te),N(ce,re);const be=x();y(Ee,I),te.append(Ee,z,ce,be),document.body.appendChild(te)}c?(z.innerText="Preview backend disconnected.",Ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Y1())}function W1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function K1(){return tN.NODE_ADMIN===!0}function oN(){try{return typeof indexedDB=="object"}catch{return!1}}function cN(){return new Promise((r,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}function J1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="FirebaseError";class ga extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=Q1,Object.setPrototypeOf(this,ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qh.prototype.create)}}class qh{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?X1(c,a):"Error",f=`${this.serviceName}: ${d} (${o}).`;return new ga(o,f,a)}}function X1(r,e){return r.replace(Z1,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const Z1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(r){return JSON.parse(r)}function tn(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=function(r){let e={},n={},a={},o="";try{const c=r.split(".");e=fu(Fg(c[0])||""),n=fu(Fg(c[1])||""),o=c[2],a=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:a,signature:o}},eT=function(r){const e=uN(r),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},tT=function(r){const e=uN(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function qo(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function nb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function hh(r,e,n){const a={};for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(a[o]=e.call(n,r[o],o,r));return a}function gu(r,e){if(r===e)return!0;const n=Object.keys(r),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const c=r[o],d=e[o];if(rb(c)&&rb(d)){if(!gu(c,d))return!1}else if(c!==d)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function rb(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(r){const e=[];for(const[n,a]of Object.entries(r))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const a=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)a[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)a[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const S=a[_-3]^a[_-8]^a[_-14]^a[_-16];a[_]=(S<<1|S>>>31)&4294967295}let o=this.chain_[0],c=this.chain_[1],d=this.chain_[2],f=this.chain_[3],y=this.chain_[4],x,N;for(let _=0;_<80;_++){_<40?_<20?(x=f^c&(d^f),N=1518500249):(x=c^d^f,N=1859775393):_<60?(x=c&d|f&(c|d),N=2400959708):(x=c^d^f,N=3395469782);const S=(o<<5|o>>>27)+x+y+N+a[_]&4294967295;y=f,f=d,d=(c<<30|c>>>2)&4294967295,c=o,o=S}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+y&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const a=n-this.blockSize;let o=0;const c=this.buf_;let d=this.inbuf_;for(;o<n;){if(d===0)for(;o<=a;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(c[d]=e.charCodeAt(o),++d,++o,d===this.blockSize){this.compress_(c),d=0;break}}else for(;o<n;)if(c[d]=e[o],++d,++o,d===this.blockSize){this.compress_(c),d=0;break}}this.inbuf_=d,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let a=0;for(let o=0;o<5;o++)for(let c=24;c>=0;c-=8)e[a]=this.chain_[o]>>c&255,++a;return e}}function Vh(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=function(r){const e=[];let n=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);if(o>=55296&&o<=56319){const c=o-55296;a++,Ce(a<r.length,"Surrogate pair missing trail surrogate.");const d=r.charCodeAt(a)-56320;o=65536+(c<<10)+d}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Hh=function(r){let e=0;for(let n=0;n<r.length;n++){const a=r.charCodeAt(n);a<128?e++:a<2048?e+=2:a>=55296&&a<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(r){return r&&r._delegate?r._delegate:r}class Kr{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new Au;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lT(e))try{this.getOrInitializeService({instanceIdentifier:Tl})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(e=Tl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tl){return this.instances.has(e)}getOptions(e=Tl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);a===f&&d.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&e(c,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:aT(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Tl){return this.component?this.component.multipleInstances?e:Tl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aT(r){return r===Tl?void 0:r}function lT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Jt||(Jt={}));const cT={debug:Jt.DEBUG,verbose:Jt.VERBOSE,info:Jt.INFO,warn:Jt.WARN,error:Jt.ERROR,silent:Jt.SILENT},uT=Jt.INFO,dT={[Jt.DEBUG]:"log",[Jt.VERBOSE]:"log",[Jt.INFO]:"info",[Jt.WARN]:"warn",[Jt.ERROR]:"error"},hT=(r,e,...n)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=dT[e];if(o)console[o](`[${a}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rp{constructor(e){this.name=e,this._logLevel=uT,this._logHandler=hT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jt.DEBUG,...e),this._logHandler(this,Jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jt.VERBOSE,...e),this._logHandler(this,Jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jt.INFO,...e),this._logHandler(this,Jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jt.WARN,...e),this._logHandler(this,Jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jt.ERROR,...e),this._logHandler(this,Jt.ERROR,...e)}}const mT=(r,e)=>e.some(n=>r instanceof n);let ib,ab;function fT(){return ib||(ib=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gT(){return ab||(ab=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dN=new WeakMap,$g=new WeakMap,hN=new WeakMap,dg=new WeakMap,Ip=new WeakMap;function pT(r){const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(da(r.result)),o()},d=()=>{a(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&dN.set(n,r)}).catch(()=>{}),Ip.set(e,r),e}function xT(r){if($g.has(r))return;const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});$g.set(r,e)}let zg={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return $g.get(r);if(e==="objectStoreNames")return r.objectStoreNames||hN.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return da(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function yT(r){zg=r(zg)}function vT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=r.call(hg(this),e,...n);return hN.set(a,e.sort?e.sort():[e]),da(a)}:gT().includes(r)?function(...e){return r.apply(hg(this),e),da(dN.get(this))}:function(...e){return da(r.apply(hg(this),e))}}function bT(r){return typeof r=="function"?vT(r):(r instanceof IDBTransaction&&xT(r),mT(r,fT())?new Proxy(r,zg):r)}function da(r){if(r instanceof IDBRequest)return pT(r);if(dg.has(r))return dg.get(r);const e=bT(r);return e!==r&&(dg.set(r,e),Ip.set(e,r)),e}const hg=r=>Ip.get(r);function Gh(r,e,{blocked:n,upgrade:a,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),f=da(d);return a&&d.addEventListener("upgradeneeded",y=>{a(da(d.result),y.oldVersion,y.newVersion,da(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),f.then(y=>{c&&y.addEventListener("close",()=>c()),o&&y.addEventListener("versionchange",x=>o(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}function mg(r,{blocked:e}={}){const n=indexedDB.deleteDatabase(r);return e&&n.addEventListener("blocked",a=>e(a.oldVersion,a)),da(n).then(()=>{})}const wT=["get","getKey","getAll","getAllKeys","count"],NT=["put","add","delete","clear"],fg=new Map;function lb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(fg.get(e))return fg.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=NT.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||wT.includes(n)))return;const c=async function(d,...f){const y=this.transaction(d,o?"readwrite":"readonly");let x=y.store;return a&&(x=x.index(f.shift())),(await Promise.all([x[n](...f),o&&y.done]))[0]};return fg.set(e,c),c}yT(r=>({...r,get:(e,n,a)=>lb(e,n)||r.get(e,n,a),has:(e,n)=>!!lb(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jT(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function jT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qg="@firebase/app",ob="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new Rp("@firebase/app"),ST="@firebase/app-compat",TT="@firebase/analytics-compat",ET="@firebase/analytics",AT="@firebase/app-check-compat",CT="@firebase/app-check",kT="@firebase/auth",DT="@firebase/auth-compat",RT="@firebase/database",IT="@firebase/data-connect",MT="@firebase/database-compat",OT="@firebase/functions",LT="@firebase/functions-compat",PT="@firebase/installations",UT="@firebase/installations-compat",BT="@firebase/messaging",FT="@firebase/messaging-compat",$T="@firebase/performance",zT="@firebase/performance-compat",qT="@firebase/remote-config",VT="@firebase/remote-config-compat",HT="@firebase/storage",GT="@firebase/storage-compat",YT="@firebase/firestore",WT="@firebase/ai",KT="@firebase/firestore-compat",JT="firebase",QT="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="[DEFAULT]",XT={[qg]:"fire-core",[ST]:"fire-core-compat",[ET]:"fire-analytics",[TT]:"fire-analytics-compat",[CT]:"fire-app-check",[AT]:"fire-app-check-compat",[kT]:"fire-auth",[DT]:"fire-auth-compat",[RT]:"fire-rtdb",[IT]:"fire-data-connect",[MT]:"fire-rtdb-compat",[OT]:"fire-fn",[LT]:"fire-fn-compat",[PT]:"fire-iid",[UT]:"fire-iid-compat",[BT]:"fire-fcm",[FT]:"fire-fcm-compat",[$T]:"fire-perf",[zT]:"fire-perf-compat",[qT]:"fire-rc",[VT]:"fire-rc-compat",[HT]:"fire-gcs",[GT]:"fire-gcs-compat",[YT]:"fire-fst",[KT]:"fire-fst-compat",[WT]:"fire-vertex","fire-js":"fire-js",[JT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map,ZT=new Map,Hg=new Map;function cb(r,e){try{r.container.addComponent(e)}catch(n){ma.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ni(r){const e=r.name;if(Hg.has(e))return ma.debug(`There were multiple attempts to register component ${e}.`),!1;Hg.set(e,r);for(const n of mh.values())cb(n,r);for(const n of ZT.values())cb(n,r);return!0}function Gl(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Yh(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ga=new qh("app","Firebase",eE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ga.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=QT;function Wh(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const a={name:Vg,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Ga.create("bad-app-name",{appName:String(o)});if(n||(n=aN()),!n)throw Ga.create("no-options");const c=mh.get(o);if(c){if(gu(n,c.options)&&gu(a,c.config))return c;throw Ga.create("duplicate-app",{appName:o})}const d=new oT(o);for(const y of Hg.values())d.addComponent(y);const f=new tE(n,a,d);return mh.set(o,f),f}function Cu(r=Vg){const e=mh.get(r);if(!e&&r===Vg&&aN())return Wh();if(!e)throw Ga.create("no-app",{appName:r});return e}function On(r,e,n){let a=XT[r]??r;n&&(a+=`-${n}`);const o=a.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ma.warn(d.join(" "));return}Ni(new Kr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="firebase-heartbeat-database",nE=1,pu="firebase-heartbeat-store";let gg=null;function mN(){return gg||(gg=Gh(sE,nE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(pu)}catch(n){console.warn(n)}}}}).catch(r=>{throw Ga.create("idb-open",{originalErrorMessage:r.message})})),gg}async function rE(r){try{const n=(await mN()).transaction(pu),a=await n.objectStore(pu).get(fN(r));return await n.done,a}catch(e){if(e instanceof ga)ma.warn(e.message);else{const n=Ga.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ma.warn(n.message)}}}async function ub(r,e){try{const a=(await mN()).transaction(pu,"readwrite");await a.objectStore(pu).put(e,fN(r)),await a.done}catch(n){if(n instanceof ga)ma.warn(n.message);else{const a=Ga.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ma.warn(a.message)}}}function fN(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=1024,aE=30;class lE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cE(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=db();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>aE){const d=uE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ma.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=db(),{heartbeatsToSend:a,unsentEntries:o}=oE(this._heartbeatsCache.heartbeats),c=dh(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return ma.warn(n),""}}}function db(){return new Date().toISOString().substring(0,10)}function oE(r,e=iE){const n=[];let a=r.slice();for(const o of r){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),hb(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),hb(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class cE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oN()?cN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return ub(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return ub(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function hb(r){return dh(JSON.stringify({version:2,heartbeats:r})).length}function uE(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let a=1;a<r.length;a++)r[a].date<n&&(n=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(r){Ni(new Kr("platform-logger",e=>new _T(e),"PRIVATE")),Ni(new Kr("heartbeat",e=>new lE(e),"PRIVATE")),On(qg,ob,r),On(qg,ob,"esm2020"),On("fire-js","")}dE("");var hE="firebase",mE="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(hE,mE,"app");var mb={};const fb="@firebase/database",gb="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gN="";function pN(r){gN=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),tn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:fu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ui(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fE(e)}}catch{}return new gE},Rl=xN("localStorage"),pE=xN("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new Rp("@firebase/database"),xE=(function(){let r=1;return function(){return r++}})(),yN=function(r){const e=rT(r),n=new nT;n.update(e);const a=n.digest();return kp.encodeByteArray(a)},ku=function(...r){let e="";for(let n=0;n<r.length;n++){const a=r[n];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?e+=ku.apply(null,a):typeof a=="object"?e+=tn(a):e+=a,e+=" "}return e};let nu=null,pb=!0;const yE=function(r,e){Ce(!0,"Can't turn on custom loggers persistently."),Fo.logLevel=Jt.VERBOSE,nu=Fo.log.bind(Fo)},Sn=function(...r){if(pb===!0&&(pb=!1,nu===null&&pE.get("logging_enabled")===!0&&yE()),nu){const e=ku.apply(null,r);nu(e)}},Du=function(r){return function(...e){Sn(r,...e)}},Gg=function(...r){const e="FIREBASE INTERNAL ERROR: "+ku(...r);Fo.error(e)},fa=function(...r){const e=`FIREBASE FATAL ERROR: ${ku(...r)}`;throw Fo.error(e),new Error(e)},Wn=function(...r){const e="FIREBASE WARNING: "+ku(...r);Fo.warn(e)},vE=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Wn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Op=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},bE=function(r){if(document.readyState==="complete")r();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Xa="[MIN_NAME]",Za="[MAX_NAME]",Yl=function(r,e){if(r===e)return 0;if(r===Xa||e===Za)return-1;if(e===Xa||r===Za)return 1;{const n=xb(r),a=xb(e);return n!==null?a!==null?n-a===0?r.length-e.length:n-a:-1:a!==null?1:r<e?-1:1}},wE=function(r,e){return r===e?0:r<e?-1:1},Jc=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+tn(e))},Lp=function(r){if(typeof r!="object"||r===null)return tn(r);const e=[];for(const a in r)e.push(a);e.sort();let n="{";for(let a=0;a<e.length;a++)a!==0&&(n+=","),n+=tn(e[a]),n+=":",n+=Lp(r[e[a]]);return n+="}",n},vN=function(r,e){const n=r.length;if(n<=e)return[r];const a=[];for(let o=0;o<n;o+=e)o+e>n?a.push(r.substring(o,n)):a.push(r.substring(o,o+e));return a};function En(r,e){for(const n in r)r.hasOwnProperty(n)&&e(n,r[n])}const bN=function(r){Ce(!Op(r),"Invalid JSON number");const e=11,n=52,a=(1<<e-1)-1;let o,c,d,f,y;r===0?(c=0,d=0,o=1/r===-1/0?1:0):(o=r<0,r=Math.abs(r),r>=Math.pow(2,1-a)?(f=Math.min(Math.floor(Math.log(r)/Math.LN2),a),c=f+a,d=Math.round(r*Math.pow(2,n-f)-Math.pow(2,n))):(c=0,d=Math.round(r/Math.pow(2,1-a-n))));const x=[];for(y=n;y;y-=1)x.push(d%2?1:0),d=Math.floor(d/2);for(y=e;y;y-=1)x.push(c%2?1:0),c=Math.floor(c/2);x.push(o?1:0),x.reverse();const N=x.join("");let _="";for(y=0;y<64;y+=8){let S=parseInt(N.substr(y,8),2).toString(16);S.length===1&&(S="0"+S),_=_+S}return _.toLowerCase()},NE=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_E=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function jE(r,e){let n="Unknown Error";r==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?n="Client doesn't have permission to access the desired data.":r==="unavailable"&&(n="The service is unavailable");const a=new Error(r+" at "+e._path.toString()+": "+n);return a.code=r.toUpperCase(),a}const SE=new RegExp("^-?(0*)\\d{1,10}$"),TE=-2147483648,EE=2147483647,xb=function(r){if(SE.test(r)){const e=Number(r);if(e>=TE&&e<=EE)return e}return null},nc=function(r){try{r()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Wn("Exception was thrown by user callback.",n),e},Math.floor(0))}},AE=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ru=function(r,e){const n=setTimeout(r,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Yh(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(a=>this.appCheck=a)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,a)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,a):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(a=>a.addTokenListener(e))}notifyForInvalidToken(){Wn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n,a){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,a)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,a):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wn(e)}}class nh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}nh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="5",wN="v",NN="s",_N="r",jN="f",SN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,TN="ls",EN="p",Yg="ac",AN="websocket",CN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,a,o,c=!1,d="",f=!1,y=!1,x=null){this.secure=n,this.namespace=a,this.webSocketOnly=o,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=y,this.emulatorOptions=x,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function DE(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function DN(r,e,n){Ce(typeof e=="string","typeof type must == string"),Ce(typeof n=="object","typeof params must == object");let a;if(e===AN)a=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===CN)a=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);DE(r)&&(n.ns=r.namespace);const o=[];return En(n,(c,d)=>{o.push(c+"="+d)}),a+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.counters_={}}incrementCounter(e,n=1){Ui(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return U1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg={},xg={};function Up(r){const e=r.toString();return pg[e]||(pg[e]=new RE),pg[e]}function IE(r,e){const n=r.toString();return xg[n]||(xg[n]=e()),xg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<a.length;++o)a[o]&&nc(()=>{this.onMessage_(a[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="start",OE="close",LE="pLPCommand",PE="pRTLPCB",RN="id",IN="pw",MN="ser",UE="cb",BE="seg",FE="ts",$E="d",zE="dframe",ON=1870,LN=30,qE=ON-LN,VE=25e3,HE=3e4;class Bo{constructor(e,n,a,o,c,d,f){this.connId=e,this.repoInfo=n,this.applicationId=a,this.appCheckToken=o,this.authToken=c,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Du(e),this.stats_=Up(n),this.urlFn=y=>(this.appCheckToken&&(y[Yg]=this.appCheckToken),DN(n,CN,y))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ME(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(HE)),bE(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bp((...c)=>{const[d,f,y,x,N]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===yb)this.id=f,this.password=y;else if(d===OE)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...c)=>{const[d,f]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const a={};a[yb]="t",a[MN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[UE]=this.scriptTagHolder.uniqueCallbackIdentifier),a[wN]=Pp,this.transportSessionId&&(a[NN]=this.transportSessionId),this.lastSessionId&&(a[TN]=this.lastSessionId),this.applicationId&&(a[EN]=this.applicationId),this.appCheckToken&&(a[Yg]=this.appCheckToken),typeof location<"u"&&location.hostname&&SN.test(location.hostname)&&(a[_N]=jN);const o=this.urlFn(a);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bo.forceAllow_=!0}static forceDisallow(){Bo.forceDisallow_=!0}static isAvailable(){return Bo.forceAllow_?!0:!Bo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!NE()&&!_E()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=tn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=nN(n),o=vN(a,qE);for(let c=0;c<o.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[c]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const a={};a[zE]="t",a[RN]=e,a[IN]=n,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=tn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Bp{constructor(e,n,a,o){this.onDisconnect=a,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=xE(),window[LE+this.uniqueCallbackIdentifier]=e,window[PE+this.uniqueCallbackIdentifier]=n,this.myIFrame=Bp.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){Sn("frame writing exception"),f.stack&&Sn(f.stack),Sn(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Sn("No IE domain setting required")}catch{const a=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[RN]=this.myID,e[IN]=this.myPW,e[MN]=this.currentSerial;let n=this.urlFn(e),a="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+LN+a.length<=ON;){const d=this.pendingSegs.shift();a=a+"&"+BE+o+"="+d.seg+"&"+FE+o+"="+d.ts+"&"+$E+o+"="+d.d,o++}return n=n+a,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,a){this.pendingSegs.push({seg:e,ts:n,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const a=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(a,Math.floor(VE)),c=()=>{clearTimeout(o),a()};this.addTag(e,c)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=a.onreadystatechange=function(){const o=a.readyState;(!o||o==="loaded"||o==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),n())},a.onerror=()=>{Sn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=16384,YE=45e3;let fh=null;typeof MozWebSocket<"u"?fh=MozWebSocket:typeof WebSocket<"u"&&(fh=WebSocket);class pi{constructor(e,n,a,o,c,d,f){this.connId=e,this.applicationId=a,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Du(this.connId),this.stats_=Up(n),this.connURL=pi.connectionURL_(n,d,f,o,a),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,a,o,c){const d={};return d[wN]=Pp,typeof location<"u"&&location.hostname&&SN.test(location.hostname)&&(d[_N]=jN),n&&(d[NN]=n),a&&(d[TN]=a),o&&(d[Yg]=o),c&&(d[EN]=c),DN(e,AN,d)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rl.set("previous_websocket_failure",!0);try{let a;K1(),this.mySock=new fh(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const o=a.message||a.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const o=a.message||a.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){pi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(n);a&&a.length>1&&parseFloat(a[1])<4.4&&(e=!0)}return!e&&fh!==null&&!pi.forceDisallow_}static previouslyFailed(){return Rl.isInMemoryStorage||Rl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Rl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const a=fu(n);this.onMessage(a)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const a=this.extractFrameCount_(n);a!==null&&this.appendFrame_(a)}}send(e){this.resetKeepAlive();const n=tn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=vN(n,GE);a.length>1&&this.sendString_(String(a.length));for(let o=0;o<a.length;o++)this.sendString_(a[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(YE))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}pi.responsesRequiredToBeHealthy=2;pi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{static get ALL_TRANSPORTS(){return[Bo,pi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=pi&&pi.isAvailable();let a=n&&!pi.previouslyFailed();if(e.webSocketOnly&&(n||Wn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[pi];else{const o=this.transports_=[];for(const c of xu.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);xu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}xu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=6e4,KE=5e3,JE=10*1024,QE=100*1024,yg="t",vb="d",XE="s",bb="r",ZE="e",wb="o",Nb="a",_b="n",jb="p",e4="h";class t4{constructor(e,n,a,o,c,d,f,y,x,N){this.id=e,this.repoInfo_=n,this.applicationId_=a,this.appCheckToken_=o,this.authToken_=c,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=y,this.onKill_=x,this.lastSessionId=N,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Du("c:"+this.id+":"),this.transportManager_=new xu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,a)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=ru(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>QE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>JE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(yg in e){const n=e[yg];n===Nb?this.upgradeIfSecondaryHealthy_():n===bb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===wb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Jc("t",e),a=Jc("d",e);if(n==="c")this.onSecondaryControl_(a);else if(n==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:jb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Nb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:_b,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Jc("t",e),a=Jc("d",e);n==="c"?this.onControl_(a):n==="d"&&this.onDataMessage_(a)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Jc(yg,e);if(vb in e){const a=e[vb];if(n===e4){const o={...a};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===_b){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===XE?this.onConnectionShutdown_(a):n===bb?this.onReset_(a):n===ZE?Gg("Server Error: "+a):n===wb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gg("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,a=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Pp!==a&&Wn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,a),ru(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(WE))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ru(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(KE))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:jb,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{put(e,n,a,o){}merge(e,n,a,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,a){}onDisconnectMerge(e,n,a){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.allowedEvents_=e,this.listeners_={},Ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const a=[...this.listeners_[e]];for(let o=0;o<a.length;o++)a[o].callback.apply(a[o].context,n)}}on(e,n,a){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:a});const o=this.getInitialEvent(e);o&&n.apply(a,o)}off(e,n,a){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let c=0;c<o.length;c++)if(o[c].callback===n&&(!a||a===o[c].context)){o.splice(c,1);return}}validateEventType_(e){Ce(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends UN{static getInstance(){return new gh}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!lN()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=32,Tb=768;class Qt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let a=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[a]=this.pieces_[o],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ft(){return new Qt("")}function yt(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function el(r){return r.pieces_.length-r.pieceNum_}function gs(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new Qt(r.pieces_,e)}function Fp(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function s4(r){let e="";for(let n=r.pieceNum_;n<r.pieces_.length;n++)r.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[n])));return e||"/"}function yu(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function BN(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let n=r.pieceNum_;n<r.pieces_.length-1;n++)e.push(r.pieces_[n]);return new Qt(e,0)}function Ms(r,e){const n=[];for(let a=r.pieceNum_;a<r.pieces_.length;a++)n.push(r.pieces_[a]);if(e instanceof Qt)for(let a=e.pieceNum_;a<e.pieces_.length;a++)n.push(e.pieces_[a]);else{const a=e.split("/");for(let o=0;o<a.length;o++)a[o].length>0&&n.push(a[o])}return new Qt(n,0)}function vt(r){return r.pieceNum_>=r.pieces_.length}function Yn(r,e){const n=yt(r),a=yt(e);if(n===null)return e;if(n===a)return Yn(gs(r),gs(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function n4(r,e){const n=yu(r,0),a=yu(e,0);for(let o=0;o<n.length&&o<a.length;o++){const c=Yl(n[o],a[o]);if(c!==0)return c}return n.length===a.length?0:n.length<a.length?-1:1}function $p(r,e){if(el(r)!==el(e))return!1;for(let n=r.pieceNum_,a=e.pieceNum_;n<=r.pieces_.length;n++,a++)if(r.pieces_[n]!==e.pieces_[a])return!1;return!0}function Wr(r,e){let n=r.pieceNum_,a=e.pieceNum_;if(el(r)>el(e))return!1;for(;n<r.pieces_.length;){if(r.pieces_[n]!==e.pieces_[a])return!1;++n,++a}return!0}class r4{constructor(e,n){this.errorPrefix_=n,this.parts_=yu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=Hh(this.parts_[a]);FN(this)}}function i4(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=Hh(e),FN(r)}function a4(r){const e=r.parts_.pop();r.byteLength_-=Hh(e),r.parts_.length>0&&(r.byteLength_-=1)}function FN(r){if(r.byteLength_>Tb)throw new Error(r.errorPrefix_+"has a key path longer than "+Tb+" bytes ("+r.byteLength_+").");if(r.parts_.length>Sb)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Sb+") or object contains a cycle "+El(r))}function El(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends UN{static getInstance(){return new zp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const a=!document[e];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(e){return Ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=1e3,l4=300*1e3,Eb=30*1e3,o4=1.3,c4=3e4,u4="server_kill",Ab=3;class ha extends PN{constructor(e,n,a,o,c,d,f,y){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=a,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=y,this.id=ha.nextPersistentConnectionId_++,this.log_=Du("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qc,this.maxReconnectDelay_=l4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&gh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,a){const o=++this.requestNumber_,c={r:o,a:e,b:n};this.log_(tn(c)),Ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),a&&(this.requestCBHash_[o]=a)}get(e){this.initConnection_();const n=new Au,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const f=d.d;d.s==="ok"?n.resolve(f):n.reject(f)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),n.promise}listen(e,n,a,o){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ce(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:n,query:e,tag:a};this.listens.get(d).set(c,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,a=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(a)})}sendListen_(e){const n=e.query,a=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+a+" for "+o);const c={p:a},d="q";e.tag&&(c.q=n._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(d,c,f=>{const y=f.d,x=f.s;ha.warnOnListenWarnings_(y,n),(this.listens.get(a)&&this.listens.get(a).get(o))===e&&(this.log_("listen response",f),x!=="ok"&&this.removeListen_(a,o),e.onComplete&&e.onComplete(x,y))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ui(e,"w")){const a=qo(e,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',c=n._path.toString();Wn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tT(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Eb)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=eT(e)?"auth":"gauth",a={cred:e};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(n,a,o=>{const c=o.s,d=o.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,a=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,a)})}unlisten(e,n){const a=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+a+" "+o),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,o)&&this.connected_&&this.sendUnlisten_(a,o,e._queryObject,n)}sendUnlisten_(e,n,a,o){this.log_("Unlisten on "+e+" for "+n);const c={p:e},d="n";o&&(c.q=a,c.t=o),this.sendRequest(d,c)}onDisconnectPut(e,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:a})}onDisconnectMerge(e,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:a})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,a,o){const c={p:n,d:a};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,n,a,o){this.putInternal("p",e,n,a,o)}merge(e,n,a,o){this.putInternal("m",e,n,a,o)}putInternal(e,n,a,o,c){this.initConnection_();const d={p:n,d:a};c!==void 0&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,a=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,a,c=>{this.log_(n+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,a=>{if(a.s!=="ok"){const c=a.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+tn(e));const n=e.r,a=this.requestCBHash_[n];a&&(delete this.requestCBHash_[n],a(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Gg("Unrecognized action received from server: "+tn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>c4&&(this.reconnectDelay_=Qc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*o4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+ha.nextConnectionId_++,c=this.lastSessionId;let d=!1,f=null;const y=function(){f?f.close():(d=!0,a())},x=function(_){Ce(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(_)};this.realtime_={close:y,sendRequest:x};const N=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,S]=await Promise.all([this.authTokenProvider_.getToken(N),this.appCheckTokenProvider_.getToken(N)]);d?Sn("getToken() completed but was canceled"):(Sn("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=S&&S.token,f=new t4(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,a,V=>{Wn(V+" ("+this.repoInfo_.toString()+")"),this.interrupt(u4)},c))}catch(_){this.log_("Failed to get token: "+_),d||(this.repoInfo_.nodeAdmin&&Wn(_),y())}}}interrupt(e){Sn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Sn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],nb(this.interruptReasons_)&&(this.reconnectDelay_=Qc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let a;n?a=n.map(c=>Lp(c)).join("$"):a="default";const o=this.removeListen_(e,a);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const a=new Qt(e).toString();let o;if(this.listens.has(a)){const c=this.listens.get(a);o=c.get(n),c.delete(n),c.size===0&&this.listens.delete(a)}else o=void 0;return o}onAuthRevoked_(e,n){Sn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ab&&(this.reconnectDelay_=Eb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Sn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ab&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+gN.replace(/\./g,"-")]=1,lN()?e["framework.cordova"]=1:W1()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=gh.getInstance().currentlyOnline();return nb(this.interruptReasons_)&&e}}ha.nextPersistentConnectionId_=0;ha.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new bt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const a=new bt(Xa,e),o=new bt(Xa,n);return this.compare(a,o)!==0}minPost(){return bt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd;class $N extends Kh{static get __EMPTY_NODE(){return Hd}static set __EMPTY_NODE(e){Hd=e}compare(e,n){return Yl(e.name,n.name)}isDefinedOn(e){throw sc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return bt.MIN}maxPost(){return new bt(Za,Hd)}makePost(e,n){return Ce(typeof e=="string","KeyIndex indexValue must always be a string."),new bt(e,Hd)}toString(){return".key"}}const Ya=new $N;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,a,o,c=null){this.isReverse_=o,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=n?a(e.key,n):1,o&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class mn{constructor(e,n,a,o,c){this.key=e,this.value=n,this.color=a??mn.RED,this.left=o??lr.EMPTY_NODE,this.right=c??lr.EMPTY_NODE}copy(e,n,a,o,c){return new mn(e??this.key,n??this.value,a??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const c=a(e,o.key);return c<0?o=o.copy(null,null,null,o.left.insert(e,n,a),null):c===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return lr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let a,o;if(a=this,n(e,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),n(e,a.key)===0){if(a.right.isEmpty())return lr.EMPTY_NODE;o=a.right.min_(),a=a.copy(o.key,o.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}mn.RED=!0;mn.BLACK=!1;class d4{copy(e,n,a,o,c){return this}insert(e,n,a){return new mn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class lr{constructor(e,n=lr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new lr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,mn.BLACK,null,null))}remove(e){return new lr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mn.BLACK,null,null))}get(e){let n,a=this.root_;for(;!a.isEmpty();){if(n=this.comparator_(e,a.key),n===0)return a.value;n<0?a=a.left:n>0&&(a=a.right)}return null}getPredecessorKey(e){let n,a=this.root_,o=null;for(;!a.isEmpty();)if(n=this.comparator_(e,a.key),n===0){if(a.left.isEmpty())return o?o.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else n<0?a=a.left:n>0&&(o=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Gd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Gd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Gd(this.root_,null,this.comparator_,!0,e)}}lr.EMPTY_NODE=new d4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(r,e){return Yl(r.name,e.name)}function qp(r,e){return Yl(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wg;function m4(r){Wg=r}const zN=function(r){return typeof r=="number"?"number:"+bN(r):"string:"+r},qN=function(r){if(r.isLeafNode()){const e=r.val();Ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ui(e,".sv"),"Priority must be a string or number.")}else Ce(r===Wg||r.isEmpty(),"priority of unexpected type.");Ce(r===Wg||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cb;class hn{static set __childrenNodeConstructor(e){Cb=e}static get __childrenNodeConstructor(){return Cb}constructor(e,n=hn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),qN(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new hn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:hn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return vt(e)?this:yt(e)===".priority"?this.priorityNode_:hn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:hn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const a=yt(e);return a===null?n:n.isEmpty()&&a!==".priority"?this:(Ce(a!==".priority"||el(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,hn.__childrenNodeConstructor.EMPTY_NODE.updateChild(gs(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+zN(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=bN(this.value_):e+=this.value_,this.lazyHash_=yN(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===hn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof hn.__childrenNodeConstructor?-1:(Ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,a=typeof this.value_,o=hn.VALUE_TYPE_ORDER.indexOf(n),c=hn.VALUE_TYPE_ORDER.indexOf(a);return Ce(o>=0,"Unknown leaf type: "+n),Ce(c>=0,"Unknown leaf type: "+a),o===c?a==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}hn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VN,HN;function f4(r){VN=r}function g4(r){HN=r}class p4 extends Kh{compare(e,n){const a=e.node.getPriority(),o=n.node.getPriority(),c=a.compareTo(o);return c===0?Yl(e.name,n.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return bt.MIN}maxPost(){return new bt(Za,new hn("[PRIORITY-POST]",HN))}makePost(e,n){const a=VN(e);return new bt(n,new hn("[PRIORITY-POST]",a))}toString(){return".priority"}}const js=new p4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=Math.log(2);class y4{constructor(e){const n=c=>parseInt(Math.log(c)/x4,10),a=c=>parseInt(Array(c+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=a(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ph=function(r,e,n,a){r.sort(e);const o=function(y,x){const N=x-y;let _,S;if(N===0)return null;if(N===1)return _=r[y],S=n?n(_):_,new mn(S,_.node,mn.BLACK,null,null);{const V=parseInt(N/2,10)+y,z=o(y,V),re=o(V+1,x);return _=r[V],S=n?n(_):_,new mn(S,_.node,mn.BLACK,z,re)}},c=function(y){let x=null,N=null,_=r.length;const S=function(z,re){const ce=_-z,I=_;_-=z;const Ee=o(ce+1,I),te=r[ce],be=n?n(te):te;V(new mn(be,te.node,re,null,Ee))},V=function(z){x?(x.left=z,x=z):(N=z,x=z)};for(let z=0;z<y.count;++z){const re=y.nextBitIsOne(),ce=Math.pow(2,y.count-(z+1));re?S(ce,mn.BLACK):(S(ce,mn.BLACK),S(ce,mn.RED))}return N},d=new y4(r.length),f=c(d);return new lr(a||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg;const To={};class ca{static get Default(){return Ce(To&&js,"ChildrenNode.ts has not been loaded"),vg=vg||new ca({".priority":To},{".priority":js}),vg}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=qo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof lr?n:null}hasIndex(e){return Ui(this.indexSet_,e.toString())}addIndex(e,n){Ce(e!==Ya,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let o=!1;const c=n.getIterator(bt.Wrap);let d=c.getNext();for(;d;)o=o||e.isDefinedOn(d.node),a.push(d),d=c.getNext();let f;o?f=ph(a,e.getCompare()):f=To;const y=e.toString(),x={...this.indexSet_};x[y]=e;const N={...this.indexes_};return N[y]=f,new ca(N,x)}addToIndexes(e,n){const a=hh(this.indexes_,(o,c)=>{const d=qo(this.indexSet_,c);if(Ce(d,"Missing index implementation for "+c),o===To)if(d.isDefinedOn(e.node)){const f=[],y=n.getIterator(bt.Wrap);let x=y.getNext();for(;x;)x.name!==e.name&&f.push(x),x=y.getNext();return f.push(e),ph(f,d.getCompare())}else return To;else{const f=n.get(e.name);let y=o;return f&&(y=y.remove(new bt(e.name,f))),y.insert(e,e.node)}});return new ca(a,this.indexSet_)}removeFromIndexes(e,n){const a=hh(this.indexes_,o=>{if(o===To)return o;{const c=n.get(e.name);return c?o.remove(new bt(e.name,c)):o}});return new ca(a,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc;class tt{static get EMPTY_NODE(){return Xc||(Xc=new tt(new lr(qp),null,ca.Default))}constructor(e,n,a){this.children_=e,this.priorityNode_=n,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&qN(this.priorityNode_),this.children_.isEmpty()&&Ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xc}updatePriority(e){return this.children_.isEmpty()?this:new tt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Xc:n}}getChild(e){const n=yt(e);return n===null?this:this.getImmediateChild(n).getChild(gs(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ce(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const a=new bt(e,n);let o,c;n.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(a,this.children_)):(o=this.children_.insert(e,n),c=this.indexMap_.addToIndexes(a,this.children_));const d=o.isEmpty()?Xc:this.priorityNode_;return new tt(o,d,c)}}updateChild(e,n){const a=yt(e);if(a===null)return n;{Ce(yt(e)!==".priority"||el(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(a).updateChild(gs(e),n);return this.updateImmediateChild(a,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let a=0,o=0,c=!0;if(this.forEachChild(js,(d,f)=>{n[d]=f.val(e),a++,c&&tt.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):c=!1}),!e&&c&&o<2*a){const d=[];for(const f in n)d[f]=n[f];return d}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+zN(this.getPriority().val())+":"),this.forEachChild(js,(n,a)=>{const o=a.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":yN(e)}return this.lazyHash_}getPredecessorChildName(e,n,a){const o=this.resolveIndex_(a);if(o){const c=o.getPredecessorKey(new bt(e,n));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const a=n.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new bt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const a=n.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new bt(n,this.children_.get(n)):null}forEachChild(e,n){const a=this.resolveIndex_(e);return a?a.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const a=this.resolveIndex_(n);if(a)return a.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,bt.Wrap);let c=o.peek();for(;c!=null&&n.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const a=this.resolveIndex_(n);if(a)return a.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,bt.Wrap);let c=o.peek();for(;c!=null&&n.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ru?-1:0}withIndex(e){if(e===Ya||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new tt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ya||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const a=this.getIterator(js),o=n.getIterator(js);let c=a.getNext(),d=o.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=a.getNext(),d=o.getNext()}return c===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===Ya?null:this.indexMap_.get(e.toString())}}tt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class v4 extends tt{constructor(){super(new lr(qp),tt.EMPTY_NODE,ca.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tt.EMPTY_NODE}isEmpty(){return!1}}const Ru=new v4;Object.defineProperties(bt,{MIN:{value:new bt(Xa,tt.EMPTY_NODE)},MAX:{value:new bt(Za,Ru)}});$N.__EMPTY_NODE=tt.EMPTY_NODE;hn.__childrenNodeConstructor=tt;m4(Ru);g4(Ru);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=!0;function en(r,e=null){if(r===null)return tt.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),Ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const n=r;return new hn(n,en(e))}if(!(r instanceof Array)&&b4){const n=[];let a=!1;if(En(r,(d,f)=>{if(d.substring(0,1)!=="."){const y=en(f);y.isEmpty()||(a=a||!y.getPriority().isEmpty(),n.push(new bt(d,y)))}}),n.length===0)return tt.EMPTY_NODE;const c=ph(n,h4,d=>d.name,qp);if(a){const d=ph(n,js.getCompare());return new tt(c,en(e),new ca({".priority":d},{".priority":js}))}else return new tt(c,en(e),ca.Default)}else{let n=tt.EMPTY_NODE;return En(r,(a,o)=>{if(Ui(r,a)&&a.substring(0,1)!=="."){const c=en(o);(c.isLeafNode()||!c.isEmpty())&&(n=n.updateImmediateChild(a,c))}}),n.updatePriority(en(e))}}f4(en);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Kh{constructor(e){super(),this.indexPath_=e,Ce(!vt(e)&&yt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const a=this.extractChild(e.node),o=this.extractChild(n.node),c=a.compareTo(o);return c===0?Yl(e.name,n.name):c}makePost(e,n){const a=en(e),o=tt.EMPTY_NODE.updateChild(this.indexPath_,a);return new bt(n,o)}maxPost(){const e=tt.EMPTY_NODE.updateChild(this.indexPath_,Ru);return new bt(Za,e)}toString(){return yu(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4 extends Kh{compare(e,n){const a=e.node.compareTo(n.node);return a===0?Yl(e.name,n.name):a}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return bt.MIN}maxPost(){return bt.MAX}makePost(e,n){const a=en(e);return new bt(n,a)}toString(){return".value"}}const GN=new w4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(r){return{type:"value",snapshotNode:r}}function Vo(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function vu(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function bu(r,e,n){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:n}}function N4(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this.index_=e}updateChild(e,n,a,o,c,d){Ce(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(n);return f.getChild(o).equals(a.getChild(o))&&f.isEmpty()===a.isEmpty()||(d!=null&&(a.isEmpty()?e.hasChild(n)?d.trackChildChange(vu(n,f)):Ce(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(Vo(n,a)):d.trackChildChange(bu(n,a,f))),e.isLeafNode()&&a.isEmpty())?e:e.updateImmediateChild(n,a).withIndex(this.index_)}updateFullNode(e,n,a){return a!=null&&(e.isLeafNode()||e.forEachChild(js,(o,c)=>{n.hasChild(o)||a.trackChildChange(vu(o,c))}),n.isLeafNode()||n.forEachChild(js,(o,c)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(c)||a.trackChildChange(bu(o,c,d))}else a.trackChildChange(Vo(o,c))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?tt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.indexedFilter_=new Hp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wu.getStartPost_(e),this.endPost_=wu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,a=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&a}updateChild(e,n,a,o,c,d){return this.matches(new bt(n,a))||(a=tt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,a,o,c,d)}updateFullNode(e,n,a){n.isLeafNode()&&(n=tt.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(tt.EMPTY_NODE);const c=this;return n.forEachChild(js,(d,f)=>{c.matches(new bt(d,f))||(o=o.updateImmediateChild(d,tt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,a)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const a=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?a<=0:a<0},this.withinEndPost=n=>{const a=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?a<=0:a<0},this.rangedFilter_=new wu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,a,o,c,d){return this.rangedFilter_.matches(new bt(n,a))||(a=tt.EMPTY_NODE),e.getImmediateChild(n).equals(a)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,a,o,c,d):this.fullLimitUpdateChild_(e,n,a,c,d)}updateFullNode(e,n,a){let o;if(n.isLeafNode()||n.isEmpty())o=tt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=tt.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const f=c.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))o=o.updateImmediateChild(f.name,f.node),d++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(tt.EMPTY_NODE);let c;this.reverse_?c=o.getReverseIterator(this.index_):c=o.getIterator(this.index_);let d=0;for(;c.hasNext();){const f=c.getNext();d<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?d++:o=o.updateImmediateChild(f.name,tt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,a)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,a,o,c){let d;if(this.reverse_){const _=this.index_.getCompare();d=(S,V)=>_(V,S)}else d=this.index_.getCompare();const f=e;Ce(f.numChildren()===this.limit_,"");const y=new bt(n,a),x=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),N=this.rangedFilter_.matches(y);if(f.hasChild(n)){const _=f.getImmediateChild(n);let S=o.getChildAfterChild(this.index_,x,this.reverse_);for(;S!=null&&(S.name===n||f.hasChild(S.name));)S=o.getChildAfterChild(this.index_,S,this.reverse_);const V=S==null?1:d(S,y);if(N&&!a.isEmpty()&&V>=0)return c!=null&&c.trackChildChange(bu(n,a,_)),f.updateImmediateChild(n,a);{c!=null&&c.trackChildChange(vu(n,_));const re=f.updateImmediateChild(n,tt.EMPTY_NODE);return S!=null&&this.rangedFilter_.matches(S)?(c!=null&&c.trackChildChange(Vo(S.name,S.node)),re.updateImmediateChild(S.name,S.node)):re}}else return a.isEmpty()?e:N&&d(x,y)>=0?(c!=null&&(c.trackChildChange(vu(x.name,x.node)),c.trackChildChange(Vo(n,a))),f.updateImmediateChild(n,a).updateImmediateChild(x.name,tt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=js}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xa}hasEnd(){return this.endSet_}getIndexEndValue(){return Ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Za}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===js}copy(){const e=new Jh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function j4(r){return r.loadsAllData()?new Hp(r.getIndex()):r.hasLimit()?new _4(r):new wu(r)}function S4(r,e){const n=r.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function T4(r,e,n){const a=r.copy();return a.startSet_=!0,e===void 0&&(e=null),a.indexStartValue_=e,n!=null?(a.startNameSet_=!0,a.indexStartName_=n):(a.startNameSet_=!1,a.indexStartName_=""),a}function Kg(r,e,n){const a=r.copy();return a.endSet_=!0,e===void 0&&(e=null),a.indexEndValue_=e,n!==void 0?(a.endNameSet_=!0,a.indexEndName_=n):(a.endNameSet_=!1,a.indexEndName_=""),a}function E4(r,e,n){let a;return r.index_===Ya||n?a=Kg(r,e,n):a=Kg(r,e,Xa),a.endBeforeSet_=!0,a}function A4(r,e){const n=r.copy();return n.index_=e,n}function kb(r){const e={};if(r.isDefault())return e;let n;if(r.index_===js?n="$priority":r.index_===GN?n="$value":r.index_===Ya?n="$key":(Ce(r.index_ instanceof Vp,"Unrecognized index type!"),n=r.index_.toString()),e.orderBy=tn(n),r.startSet_){const a=r.startAfterSet_?"startAfter":"startAt";e[a]=tn(r.indexStartValue_),r.startNameSet_&&(e[a]+=","+tn(r.indexStartName_))}if(r.endSet_){const a=r.endBeforeSet_?"endBefore":"endAt";e[a]=tn(r.indexEndValue_),r.endNameSet_&&(e[a]+=","+tn(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function Db(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let n=r.viewFrom_;n===""&&(r.isViewFromLeft()?n="l":n="r"),e.vf=n}return r.index_!==js&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends PN{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,a,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.log_=Du("p:rest:"),this.listens_={}}listen(e,n,a,o){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=xh.getListenId_(e,a),f={};this.listens_[d]=f;const y=kb(e._queryParams);this.restRequest_(c+".json",y,(x,N)=>{let _=N;if(x===404&&(_=null,x=null),x===null&&this.onDataUpdate_(c,_,!1,a),qo(this.listens_,d)===f){let S;x?x===401?S="permission_denied":S="rest_error:"+x:S="ok",o(S,null)}})}unlisten(e,n){const a=xh.getListenId_(e,n);delete this.listens_[a]}get(e){const n=kb(e._queryParams),a=e._path.toString(),o=new Au;return this.restRequest_(a+".json",n,(c,d)=>{let f=d;c===404&&(f=null,c=null),c===null?(this.onDataUpdate_(a,f,!1,null),o.resolve(f)):o.reject(new Error(f))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},a){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,c])=>{o&&o.accessToken&&(n.auth=o.accessToken),c&&c.token&&(n.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+sT(n);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(a&&f.readyState===4){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let y=null;if(f.status>=200&&f.status<300){try{y=fu(f.responseText)}catch{Wn("Failed to parse JSON response for "+d+": "+f.responseText)}a(null,y)}else f.status!==401&&f.status!==404&&Wn("Got unsuccessful REST response for "+d+" Status: "+f.status),a(f.status);a=null}},f.open("GET",d,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.rootNode_=tt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(){return{value:null,children:new Map}}function WN(r,e,n){if(vt(e))r.value=n,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,n);else{const a=yt(e);r.children.has(a)||r.children.set(a,yh());const o=r.children.get(a);e=gs(e),WN(o,e,n)}}function Jg(r,e,n){r.value!==null?n(e,r.value):k4(r,(a,o)=>{const c=new Qt(e.toString()+"/"+a);Jg(o,c,n)})}function k4(r,e){r.children.forEach((n,a)=>{e(a,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&En(this.last_,(a,o)=>{n[a]=n[a]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=10*1e3,R4=30*1e3,I4=300*1e3;class M4{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new D4(e);const a=Rb+(R4-Rb)*Math.random();ru(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const e=this.statsListener_.get(),n={};let a=!1;En(e,(o,c)=>{c>0&&Ui(this.statsToReport_,o)&&(n[o]=c,a=!0)}),a&&this.server_.reportStats(n),ru(this.reportStats_.bind(this),Math.floor(Math.random()*2*I4))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xi;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xi||(xi={}));function Gp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Yp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Wp(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,a){this.path=e,this.affectedTree=n,this.revert=a,this.type=xi.ACK_USER_WRITE,this.source=Gp()}operationForChild(e){if(vt(this.path)){if(this.affectedTree.value!=null)return Ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Qt(e));return new vh(Ft(),n,this.revert)}}else return Ce(yt(this.path)===e,"operationForChild called for unrelated child."),new vh(gs(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.source=e,this.path=n,this.type=xi.LISTEN_COMPLETE}operationForChild(e){return vt(this.path)?new Nu(this.source,Ft()):new Nu(this.source,gs(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,a){this.source=e,this.path=n,this.snap=a,this.type=xi.OVERWRITE}operationForChild(e){return vt(this.path)?new Ul(this.source,Ft(),this.snap.getImmediateChild(e)):new Ul(this.source,gs(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,a){this.source=e,this.path=n,this.children=a,this.type=xi.MERGE}operationForChild(e){if(vt(this.path)){const n=this.children.subtree(new Qt(e));return n.isEmpty()?null:n.value?new Ul(this.source,Ft(),n.value):new Ho(this.source,Ft(),n)}else return Ce(yt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ho(this.source,gs(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,a){this.node_=e,this.fullyInitialized_=n,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vt(e))return this.isFullyInitialized()&&!this.filtered_;const n=yt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function L4(r,e,n,a){const o=[],c=[];return e.forEach(d=>{d.type==="child_changed"&&r.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(N4(d.childName,d.snapshotNode))}),Zc(r,o,"child_removed",e,a,n),Zc(r,o,"child_added",e,a,n),Zc(r,o,"child_moved",c,a,n),Zc(r,o,"child_changed",e,a,n),Zc(r,o,"value",e,a,n),o}function Zc(r,e,n,a,o,c){const d=a.filter(f=>f.type===n);d.sort((f,y)=>U4(r,f,y)),d.forEach(f=>{const y=P4(r,f,c);o.forEach(x=>{x.respondsTo(f.type)&&e.push(x.createEvent(y,r.query_))})})}function P4(r,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function U4(r,e,n){if(e.childName==null||n.childName==null)throw sc("Should only compare child_ events.");const a=new bt(e.childName,e.snapshotNode),o=new bt(n.childName,n.snapshotNode);return r.index_.compare(a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(r,e){return{eventCache:r,serverCache:e}}function iu(r,e,n,a){return Qh(new tl(e,n,a),r.serverCache)}function KN(r,e,n,a){return Qh(r.eventCache,new tl(e,n,a))}function bh(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function Bl(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bg;const B4=()=>(bg||(bg=new lr(wE)),bg);class fs{static fromObject(e){let n=new fs(null);return En(e,(a,o)=>{n=n.set(new Qt(a),o)}),n}constructor(e,n=B4()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ft(),value:this.value};if(vt(e))return null;{const a=yt(e),o=this.children.get(a);if(o!==null){const c=o.findRootMostMatchingPathAndValue(gs(e),n);return c!=null?{path:Ms(new Qt(a),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(vt(e))return this;{const n=yt(e),a=this.children.get(n);return a!==null?a.subtree(gs(e)):new fs(null)}}set(e,n){if(vt(e))return new fs(n,this.children);{const a=yt(e),c=(this.children.get(a)||new fs(null)).set(gs(e),n),d=this.children.insert(a,c);return new fs(this.value,d)}}remove(e){if(vt(e))return this.children.isEmpty()?new fs(null):new fs(null,this.children);{const n=yt(e),a=this.children.get(n);if(a){const o=a.remove(gs(e));let c;return o.isEmpty()?c=this.children.remove(n):c=this.children.insert(n,o),this.value===null&&c.isEmpty()?new fs(null):new fs(this.value,c)}else return this}}get(e){if(vt(e))return this.value;{const n=yt(e),a=this.children.get(n);return a?a.get(gs(e)):null}}setTree(e,n){if(vt(e))return n;{const a=yt(e),c=(this.children.get(a)||new fs(null)).setTree(gs(e),n);let d;return c.isEmpty()?d=this.children.remove(a):d=this.children.insert(a,c),new fs(this.value,d)}}fold(e){return this.fold_(Ft(),e)}fold_(e,n){const a={};return this.children.inorderTraversal((o,c)=>{a[o]=c.fold_(Ms(e,o),n)}),n(e,this.value,a)}findOnPath(e,n){return this.findOnPath_(e,Ft(),n)}findOnPath_(e,n,a){const o=this.value?a(n,this.value):!1;if(o)return o;if(vt(e))return null;{const c=yt(e),d=this.children.get(c);return d?d.findOnPath_(gs(e),Ms(n,c),a):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ft(),n)}foreachOnPath_(e,n,a){if(vt(e))return this;{this.value&&a(n,this.value);const o=yt(e),c=this.children.get(o);return c?c.foreachOnPath_(gs(e),Ms(n,o),a):new fs(null)}}foreach(e){this.foreach_(Ft(),e)}foreach_(e,n){this.children.inorderTraversal((a,o)=>{o.foreach_(Ms(e,a),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,a)=>{a.value&&e(n,a.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.writeTree_=e}static empty(){return new wi(new fs(null))}}function au(r,e,n){if(vt(e))return new wi(new fs(n));{const a=r.writeTree_.findRootMostValueAndPath(e);if(a!=null){const o=a.path;let c=a.value;const d=Yn(o,e);return c=c.updateChild(d,n),new wi(r.writeTree_.set(o,c))}else{const o=new fs(n),c=r.writeTree_.setTree(e,o);return new wi(c)}}}function Qg(r,e,n){let a=r;return En(n,(o,c)=>{a=au(a,Ms(e,o),c)}),a}function Ib(r,e){if(vt(e))return wi.empty();{const n=r.writeTree_.setTree(e,new fs(null));return new wi(n)}}function Xg(r,e){return Wl(r,e)!=null}function Wl(r,e){const n=r.writeTree_.findRootMostValueAndPath(e);return n!=null?r.writeTree_.get(n.path).getChild(Yn(n.path,e)):null}function Mb(r){const e=[],n=r.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(js,(a,o)=>{e.push(new bt(a,o))}):r.writeTree_.children.inorderTraversal((a,o)=>{o.value!=null&&e.push(new bt(a,o.value))}),e}function Wa(r,e){if(vt(e))return r;{const n=Wl(r,e);return n!=null?new wi(new fs(n)):new wi(r.writeTree_.subtree(e))}}function Zg(r){return r.writeTree_.isEmpty()}function Go(r,e){return JN(Ft(),r.writeTree_,e)}function JN(r,e,n){if(e.value!=null)return n.updateChild(r,e.value);{let a=null;return e.children.inorderTraversal((o,c)=>{o===".priority"?(Ce(c.value!==null,"Priority writes must always be leaf nodes"),a=c.value):n=JN(Ms(r,o),c,n)}),!n.getChild(r).isEmpty()&&a!==null&&(n=n.updateChild(Ms(r,".priority"),a)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(r,e){return e_(e,r)}function F4(r,e,n,a,o){Ce(a>r.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),r.allWrites.push({path:e,snap:n,writeId:a,visible:o}),o&&(r.visibleWrites=au(r.visibleWrites,e,n)),r.lastWriteId=a}function $4(r,e,n,a){Ce(a>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:e,children:n,writeId:a,visible:!0}),r.visibleWrites=Qg(r.visibleWrites,e,n),r.lastWriteId=a}function z4(r,e){for(let n=0;n<r.allWrites.length;n++){const a=r.allWrites[n];if(a.writeId===e)return a}return null}function q4(r,e){const n=r.allWrites.findIndex(f=>f.writeId===e);Ce(n>=0,"removeWrite called with nonexistent writeId.");const a=r.allWrites[n];r.allWrites.splice(n,1);let o=a.visible,c=!1,d=r.allWrites.length-1;for(;o&&d>=0;){const f=r.allWrites[d];f.visible&&(d>=n&&V4(f,a.path)?o=!1:Wr(a.path,f.path)&&(c=!0)),d--}if(o){if(c)return H4(r),!0;if(a.snap)r.visibleWrites=Ib(r.visibleWrites,a.path);else{const f=a.children;En(f,y=>{r.visibleWrites=Ib(r.visibleWrites,Ms(a.path,y))})}return!0}else return!1}function V4(r,e){if(r.snap)return Wr(r.path,e);for(const n in r.children)if(r.children.hasOwnProperty(n)&&Wr(Ms(r.path,n),e))return!0;return!1}function H4(r){r.visibleWrites=QN(r.allWrites,G4,Ft()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function G4(r){return r.visible}function QN(r,e,n){let a=wi.empty();for(let o=0;o<r.length;++o){const c=r[o];if(e(c)){const d=c.path;let f;if(c.snap)Wr(n,d)?(f=Yn(n,d),a=au(a,f,c.snap)):Wr(d,n)&&(f=Yn(d,n),a=au(a,Ft(),c.snap.getChild(f)));else if(c.children){if(Wr(n,d))f=Yn(n,d),a=Qg(a,f,c.children);else if(Wr(d,n))if(f=Yn(d,n),vt(f))a=Qg(a,Ft(),c.children);else{const y=qo(c.children,yt(f));if(y){const x=y.getChild(gs(f));a=au(a,Ft(),x)}}}else throw sc("WriteRecord should have .snap or .children")}}return a}function XN(r,e,n,a,o){if(!a&&!o){const c=Wl(r.visibleWrites,e);if(c!=null)return c;{const d=Wa(r.visibleWrites,e);if(Zg(d))return n;if(n==null&&!Xg(d,Ft()))return null;{const f=n||tt.EMPTY_NODE;return Go(d,f)}}}else{const c=Wa(r.visibleWrites,e);if(!o&&Zg(c))return n;if(!o&&n==null&&!Xg(c,Ft()))return null;{const d=function(x){return(x.visible||o)&&(!a||!~a.indexOf(x.writeId))&&(Wr(x.path,e)||Wr(e,x.path))},f=QN(r.allWrites,d,e),y=n||tt.EMPTY_NODE;return Go(f,y)}}}function Y4(r,e,n){let a=tt.EMPTY_NODE;const o=Wl(r.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(js,(c,d)=>{a=a.updateImmediateChild(c,d)}),a;if(n){const c=Wa(r.visibleWrites,e);return n.forEachChild(js,(d,f)=>{const y=Go(Wa(c,new Qt(d)),f);a=a.updateImmediateChild(d,y)}),Mb(c).forEach(d=>{a=a.updateImmediateChild(d.name,d.node)}),a}else{const c=Wa(r.visibleWrites,e);return Mb(c).forEach(d=>{a=a.updateImmediateChild(d.name,d.node)}),a}}function W4(r,e,n,a,o){Ce(a||o,"Either existingEventSnap or existingServerSnap must exist");const c=Ms(e,n);if(Xg(r.visibleWrites,c))return null;{const d=Wa(r.visibleWrites,c);return Zg(d)?o.getChild(n):Go(d,o.getChild(n))}}function K4(r,e,n,a){const o=Ms(e,n),c=Wl(r.visibleWrites,o);if(c!=null)return c;if(a.isCompleteForChild(n)){const d=Wa(r.visibleWrites,o);return Go(d,a.getNode().getImmediateChild(n))}else return null}function J4(r,e){return Wl(r.visibleWrites,e)}function Q4(r,e,n,a,o,c,d){let f;const y=Wa(r.visibleWrites,e),x=Wl(y,Ft());if(x!=null)f=x;else if(n!=null)f=Go(y,n);else return[];if(f=f.withIndex(d),!f.isEmpty()&&!f.isLeafNode()){const N=[],_=d.getCompare(),S=c?f.getReverseIteratorFrom(a,d):f.getIteratorFrom(a,d);let V=S.getNext();for(;V&&N.length<o;)_(V,a)!==0&&N.push(V),V=S.getNext();return N}else return[]}function X4(){return{visibleWrites:wi.empty(),allWrites:[],lastWriteId:-1}}function wh(r,e,n,a){return XN(r.writeTree,r.treePath,e,n,a)}function Kp(r,e){return Y4(r.writeTree,r.treePath,e)}function Ob(r,e,n,a){return W4(r.writeTree,r.treePath,e,n,a)}function Nh(r,e){return J4(r.writeTree,Ms(r.treePath,e))}function Z4(r,e,n,a,o,c){return Q4(r.writeTree,r.treePath,e,n,a,o,c)}function Jp(r,e,n){return K4(r.writeTree,r.treePath,e,n)}function ZN(r,e){return e_(Ms(r.treePath,e),r.writeTree)}function e_(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,a=e.childName;Ce(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ce(a!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(a);if(o){const c=o.type;if(n==="child_added"&&c==="child_removed")this.changeMap.set(a,bu(a,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&c==="child_added")this.changeMap.delete(a);else if(n==="child_removed"&&c==="child_changed")this.changeMap.set(a,vu(a,o.oldSnap));else if(n==="child_changed"&&c==="child_added")this.changeMap.set(a,Vo(a,e.snapshotNode));else if(n==="child_changed"&&c==="child_changed")this.changeMap.set(a,bu(a,e.snapshotNode,o.oldSnap));else throw sc("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(a,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{getCompleteChild(e){return null}getChildAfterChild(e,n,a){return null}}const t_=new tA;class Qp{constructor(e,n,a=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=a}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const a=this.optCompleteServerCache_!=null?new tl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Jp(this.writes_,e,a)}}getChildAfterChild(e,n,a){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Bl(this.viewCache_),c=Z4(this.writes_,o,n,1,a,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(r){return{filter:r}}function nA(r,e){Ce(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),Ce(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function rA(r,e,n,a,o){const c=new eA;let d,f;if(n.type===xi.OVERWRITE){const x=n;x.source.fromUser?d=ep(r,e,x.path,x.snap,a,o,c):(Ce(x.source.fromServer,"Unknown source."),f=x.source.tagged||e.serverCache.isFiltered()&&!vt(x.path),d=_h(r,e,x.path,x.snap,a,o,f,c))}else if(n.type===xi.MERGE){const x=n;x.source.fromUser?d=aA(r,e,x.path,x.children,a,o,c):(Ce(x.source.fromServer,"Unknown source."),f=x.source.tagged||e.serverCache.isFiltered(),d=tp(r,e,x.path,x.children,a,o,f,c))}else if(n.type===xi.ACK_USER_WRITE){const x=n;x.revert?d=cA(r,e,x.path,a,o,c):d=lA(r,e,x.path,x.affectedTree,a,o,c)}else if(n.type===xi.LISTEN_COMPLETE)d=oA(r,e,n.path,a,c);else throw sc("Unknown operation type: "+n.type);const y=c.getChanges();return iA(e,d,y),{viewCache:d,changes:y}}function iA(r,e,n){const a=e.eventCache;if(a.isFullyInitialized()){const o=a.getNode().isLeafNode()||a.getNode().isEmpty(),c=bh(r);(n.length>0||!r.eventCache.isFullyInitialized()||o&&!a.getNode().equals(c)||!a.getNode().getPriority().equals(c.getPriority()))&&n.push(YN(bh(e)))}}function s_(r,e,n,a,o,c){const d=e.eventCache;if(Nh(a,n)!=null)return e;{let f,y;if(vt(n))if(Ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const x=Bl(e),N=x instanceof tt?x:tt.EMPTY_NODE,_=Kp(a,N);f=r.filter.updateFullNode(e.eventCache.getNode(),_,c)}else{const x=wh(a,Bl(e));f=r.filter.updateFullNode(e.eventCache.getNode(),x,c)}else{const x=yt(n);if(x===".priority"){Ce(el(n)===1,"Can't have a priority with additional path components");const N=d.getNode();y=e.serverCache.getNode();const _=Ob(a,n,N,y);_!=null?f=r.filter.updatePriority(N,_):f=d.getNode()}else{const N=gs(n);let _;if(d.isCompleteForChild(x)){y=e.serverCache.getNode();const S=Ob(a,n,d.getNode(),y);S!=null?_=d.getNode().getImmediateChild(x).updateChild(N,S):_=d.getNode().getImmediateChild(x)}else _=Jp(a,x,e.serverCache);_!=null?f=r.filter.updateChild(d.getNode(),x,_,N,o,c):f=d.getNode()}}return iu(e,f,d.isFullyInitialized()||vt(n),r.filter.filtersNodes())}}function _h(r,e,n,a,o,c,d,f){const y=e.serverCache;let x;const N=d?r.filter:r.filter.getIndexedFilter();if(vt(n))x=N.updateFullNode(y.getNode(),a,null);else if(N.filtersNodes()&&!y.isFiltered()){const V=y.getNode().updateChild(n,a);x=N.updateFullNode(y.getNode(),V,null)}else{const V=yt(n);if(!y.isCompleteForPath(n)&&el(n)>1)return e;const z=gs(n),ce=y.getNode().getImmediateChild(V).updateChild(z,a);V===".priority"?x=N.updatePriority(y.getNode(),ce):x=N.updateChild(y.getNode(),V,ce,z,t_,null)}const _=KN(e,x,y.isFullyInitialized()||vt(n),N.filtersNodes()),S=new Qp(o,_,c);return s_(r,_,n,o,S,f)}function ep(r,e,n,a,o,c,d){const f=e.eventCache;let y,x;const N=new Qp(o,e,c);if(vt(n))x=r.filter.updateFullNode(e.eventCache.getNode(),a,d),y=iu(e,x,!0,r.filter.filtersNodes());else{const _=yt(n);if(_===".priority")x=r.filter.updatePriority(e.eventCache.getNode(),a),y=iu(e,x,f.isFullyInitialized(),f.isFiltered());else{const S=gs(n),V=f.getNode().getImmediateChild(_);let z;if(vt(S))z=a;else{const re=N.getCompleteChild(_);re!=null?Fp(S)===".priority"&&re.getChild(BN(S)).isEmpty()?z=re:z=re.updateChild(S,a):z=tt.EMPTY_NODE}if(V.equals(z))y=e;else{const re=r.filter.updateChild(f.getNode(),_,z,S,N,d);y=iu(e,re,f.isFullyInitialized(),r.filter.filtersNodes())}}}return y}function Lb(r,e){return r.eventCache.isCompleteForChild(e)}function aA(r,e,n,a,o,c,d){let f=e;return a.foreach((y,x)=>{const N=Ms(n,y);Lb(e,yt(N))&&(f=ep(r,f,N,x,o,c,d))}),a.foreach((y,x)=>{const N=Ms(n,y);Lb(e,yt(N))||(f=ep(r,f,N,x,o,c,d))}),f}function Pb(r,e,n){return n.foreach((a,o)=>{e=e.updateChild(a,o)}),e}function tp(r,e,n,a,o,c,d,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y=e,x;vt(n)?x=a:x=new fs(null).setTree(n,a);const N=e.serverCache.getNode();return x.children.inorderTraversal((_,S)=>{if(N.hasChild(_)){const V=e.serverCache.getNode().getImmediateChild(_),z=Pb(r,V,S);y=_h(r,y,new Qt(_),z,o,c,d,f)}}),x.children.inorderTraversal((_,S)=>{const V=!e.serverCache.isCompleteForChild(_)&&S.value===null;if(!N.hasChild(_)&&!V){const z=e.serverCache.getNode().getImmediateChild(_),re=Pb(r,z,S);y=_h(r,y,new Qt(_),re,o,c,d,f)}}),y}function lA(r,e,n,a,o,c,d){if(Nh(o,n)!=null)return e;const f=e.serverCache.isFiltered(),y=e.serverCache;if(a.value!=null){if(vt(n)&&y.isFullyInitialized()||y.isCompleteForPath(n))return _h(r,e,n,y.getNode().getChild(n),o,c,f,d);if(vt(n)){let x=new fs(null);return y.getNode().forEachChild(Ya,(N,_)=>{x=x.set(new Qt(N),_)}),tp(r,e,n,x,o,c,f,d)}else return e}else{let x=new fs(null);return a.foreach((N,_)=>{const S=Ms(n,N);y.isCompleteForPath(S)&&(x=x.set(N,y.getNode().getChild(S)))}),tp(r,e,n,x,o,c,f,d)}}function oA(r,e,n,a,o){const c=e.serverCache,d=KN(e,c.getNode(),c.isFullyInitialized()||vt(n),c.isFiltered());return s_(r,d,n,a,t_,o)}function cA(r,e,n,a,o,c){let d;if(Nh(a,n)!=null)return e;{const f=new Qp(a,e,o),y=e.eventCache.getNode();let x;if(vt(n)||yt(n)===".priority"){let N;if(e.serverCache.isFullyInitialized())N=wh(a,Bl(e));else{const _=e.serverCache.getNode();Ce(_ instanceof tt,"serverChildren would be complete if leaf node"),N=Kp(a,_)}N=N,x=r.filter.updateFullNode(y,N,c)}else{const N=yt(n);let _=Jp(a,N,e.serverCache);_==null&&e.serverCache.isCompleteForChild(N)&&(_=y.getImmediateChild(N)),_!=null?x=r.filter.updateChild(y,N,_,gs(n),f,c):e.eventCache.getNode().hasChild(N)?x=r.filter.updateChild(y,N,tt.EMPTY_NODE,gs(n),f,c):x=y,x.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=wh(a,Bl(e)),d.isLeafNode()&&(x=r.filter.updateFullNode(x,d,c)))}return d=e.serverCache.isFullyInitialized()||Nh(a,Ft())!=null,iu(e,x,d,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const a=this.query_._queryParams,o=new Hp(a.getIndex()),c=j4(a);this.processor_=sA(c);const d=n.serverCache,f=n.eventCache,y=o.updateFullNode(tt.EMPTY_NODE,d.getNode(),null),x=c.updateFullNode(tt.EMPTY_NODE,f.getNode(),null),N=new tl(y,d.isFullyInitialized(),o.filtersNodes()),_=new tl(x,f.isFullyInitialized(),c.filtersNodes());this.viewCache_=Qh(_,N),this.eventGenerator_=new O4(this.query_)}get query(){return this.query_}}function dA(r){return r.viewCache_.serverCache.getNode()}function hA(r){return bh(r.viewCache_)}function mA(r,e){const n=Bl(r.viewCache_);return n&&(r.query._queryParams.loadsAllData()||!vt(e)&&!n.getImmediateChild(yt(e)).isEmpty())?n.getChild(e):null}function Ub(r){return r.eventRegistrations_.length===0}function fA(r,e){r.eventRegistrations_.push(e)}function Bb(r,e,n){const a=[];if(n){Ce(e==null,"A cancel should cancel all event registrations.");const o=r.query._path;r.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(n,o);d&&a.push(d)})}if(e){let o=[];for(let c=0;c<r.eventRegistrations_.length;++c){const d=r.eventRegistrations_[c];if(!d.matches(e))o.push(d);else if(e.hasAnyCallback()){o=o.concat(r.eventRegistrations_.slice(c+1));break}}r.eventRegistrations_=o}else r.eventRegistrations_=[];return a}function Fb(r,e,n,a){e.type===xi.MERGE&&e.source.queryId!==null&&(Ce(Bl(r.viewCache_),"We should always have a full cache before handling merges"),Ce(bh(r.viewCache_),"Missing event cache, even though we have a server cache"));const o=r.viewCache_,c=rA(r.processor_,o,e,n,a);return nA(r.processor_,c.viewCache),Ce(c.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=c.viewCache,n_(r,c.changes,c.viewCache.eventCache.getNode(),null)}function gA(r,e){const n=r.viewCache_.eventCache,a=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(js,(c,d)=>{a.push(Vo(c,d))}),n.isFullyInitialized()&&a.push(YN(n.getNode())),n_(r,a,n.getNode(),e)}function n_(r,e,n,a){const o=a?[a]:r.eventRegistrations_;return L4(r.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh;class r_{constructor(){this.views=new Map}}function pA(r){Ce(!jh,"__referenceConstructor has already been defined"),jh=r}function xA(){return Ce(jh,"Reference.ts has not been loaded"),jh}function yA(r){return r.views.size===0}function Xp(r,e,n,a){const o=e.source.queryId;if(o!==null){const c=r.views.get(o);return Ce(c!=null,"SyncTree gave us an op for an invalid query."),Fb(c,e,n,a)}else{let c=[];for(const d of r.views.values())c=c.concat(Fb(d,e,n,a));return c}}function i_(r,e,n,a,o){const c=e._queryIdentifier,d=r.views.get(c);if(!d){let f=wh(n,o?a:null),y=!1;f?y=!0:a instanceof tt?(f=Kp(n,a),y=!1):(f=tt.EMPTY_NODE,y=!1);const x=Qh(new tl(f,y,!1),new tl(a,o,!1));return new uA(e,x)}return d}function vA(r,e,n,a,o,c){const d=i_(r,e,a,o,c);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,d),fA(d,n),gA(d,n)}function bA(r,e,n,a){const o=e._queryIdentifier,c=[];let d=[];const f=sl(r);if(o==="default")for(const[y,x]of r.views.entries())d=d.concat(Bb(x,n,a)),Ub(x)&&(r.views.delete(y),x.query._queryParams.loadsAllData()||c.push(x.query));else{const y=r.views.get(o);y&&(d=d.concat(Bb(y,n,a)),Ub(y)&&(r.views.delete(o),y.query._queryParams.loadsAllData()||c.push(y.query)))}return f&&!sl(r)&&c.push(new(xA())(e._repo,e._path)),{removed:c,events:d}}function a_(r){const e=[];for(const n of r.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ka(r,e){let n=null;for(const a of r.views.values())n=n||mA(a,e);return n}function l_(r,e){if(e._queryParams.loadsAllData())return Zh(r);{const a=e._queryIdentifier;return r.views.get(a)}}function o_(r,e){return l_(r,e)!=null}function sl(r){return Zh(r)!=null}function Zh(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh;function wA(r){Ce(!Sh,"__referenceConstructor has already been defined"),Sh=r}function NA(){return Ce(Sh,"Reference.ts has not been loaded"),Sh}let _A=1;class $b{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fs(null),this.pendingWriteTree_=X4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function c_(r,e,n,a,o){return F4(r.pendingWriteTree_,e,n,a,o),o?rc(r,new Ul(Gp(),e,n)):[]}function jA(r,e,n,a){$4(r.pendingWriteTree_,e,n,a);const o=fs.fromObject(n);return rc(r,new Ho(Gp(),e,o))}function Ha(r,e,n=!1){const a=z4(r.pendingWriteTree_,e);if(q4(r.pendingWriteTree_,e)){let c=new fs(null);return a.snap!=null?c=c.set(Ft(),!0):En(a.children,d=>{c=c.set(new Qt(d),!0)}),rc(r,new vh(a.path,c,n))}else return[]}function Iu(r,e,n){return rc(r,new Ul(Yp(),e,n))}function SA(r,e,n){const a=fs.fromObject(n);return rc(r,new Ho(Yp(),e,a))}function TA(r,e){return rc(r,new Nu(Yp(),e))}function EA(r,e,n){const a=ex(r,n);if(a){const o=tx(a),c=o.path,d=o.queryId,f=Yn(c,e),y=new Nu(Wp(d),f);return sx(r,c,y)}else return[]}function Th(r,e,n,a,o=!1){const c=e._path,d=r.syncPointTree_.get(c);let f=[];if(d&&(e._queryIdentifier==="default"||o_(d,e))){const y=bA(d,e,n,a);yA(d)&&(r.syncPointTree_=r.syncPointTree_.remove(c));const x=y.removed;if(f=y.events,!o){const N=x.findIndex(S=>S._queryParams.loadsAllData())!==-1,_=r.syncPointTree_.findOnPath(c,(S,V)=>sl(V));if(N&&!_){const S=r.syncPointTree_.subtree(c);if(!S.isEmpty()){const V=kA(S);for(let z=0;z<V.length;++z){const re=V[z],ce=re.query,I=m_(r,re);r.listenProvider_.startListening(lu(ce),_u(r,ce),I.hashFn,I.onComplete)}}}!_&&x.length>0&&!a&&(N?r.listenProvider_.stopListening(lu(e),null):x.forEach(S=>{const V=r.queryToTagMap.get(em(S));r.listenProvider_.stopListening(lu(S),V)}))}DA(r,x)}return f}function u_(r,e,n,a){const o=ex(r,a);if(o!=null){const c=tx(o),d=c.path,f=c.queryId,y=Yn(d,e),x=new Ul(Wp(f),y,n);return sx(r,d,x)}else return[]}function AA(r,e,n,a){const o=ex(r,a);if(o){const c=tx(o),d=c.path,f=c.queryId,y=Yn(d,e),x=fs.fromObject(n),N=new Ho(Wp(f),y,x);return sx(r,d,N)}else return[]}function sp(r,e,n,a=!1){const o=e._path;let c=null,d=!1;r.syncPointTree_.foreachOnPath(o,(S,V)=>{const z=Yn(S,o);c=c||Ka(V,z),d=d||sl(V)});let f=r.syncPointTree_.get(o);f?(d=d||sl(f),c=c||Ka(f,Ft())):(f=new r_,r.syncPointTree_=r.syncPointTree_.set(o,f));let y;c!=null?y=!0:(y=!1,c=tt.EMPTY_NODE,r.syncPointTree_.subtree(o).foreachChild((V,z)=>{const re=Ka(z,Ft());re&&(c=c.updateImmediateChild(V,re))}));const x=o_(f,e);if(!x&&!e._queryParams.loadsAllData()){const S=em(e);Ce(!r.queryToTagMap.has(S),"View does not exist, but we have a tag");const V=RA();r.queryToTagMap.set(S,V),r.tagToQueryMap.set(V,S)}const N=Xh(r.pendingWriteTree_,o);let _=vA(f,e,n,N,c,y);if(!x&&!d&&!a){const S=l_(f,e);_=_.concat(IA(r,e,S))}return _}function Zp(r,e,n){const o=r.pendingWriteTree_,c=r.syncPointTree_.findOnPath(e,(d,f)=>{const y=Yn(d,e),x=Ka(f,y);if(x)return x});return XN(o,e,c,n,!0)}function CA(r,e){const n=e._path;let a=null;r.syncPointTree_.foreachOnPath(n,(x,N)=>{const _=Yn(x,n);a=a||Ka(N,_)});let o=r.syncPointTree_.get(n);o?a=a||Ka(o,Ft()):(o=new r_,r.syncPointTree_=r.syncPointTree_.set(n,o));const c=a!=null,d=c?new tl(a,!0,!1):null,f=Xh(r.pendingWriteTree_,e._path),y=i_(o,e,f,c?d.getNode():tt.EMPTY_NODE,c);return hA(y)}function rc(r,e){return d_(e,r.syncPointTree_,null,Xh(r.pendingWriteTree_,Ft()))}function d_(r,e,n,a){if(vt(r.path))return h_(r,e,n,a);{const o=e.get(Ft());n==null&&o!=null&&(n=Ka(o,Ft()));let c=[];const d=yt(r.path),f=r.operationForChild(d),y=e.children.get(d);if(y&&f){const x=n?n.getImmediateChild(d):null,N=ZN(a,d);c=c.concat(d_(f,y,x,N))}return o&&(c=c.concat(Xp(o,r,a,n))),c}}function h_(r,e,n,a){const o=e.get(Ft());n==null&&o!=null&&(n=Ka(o,Ft()));let c=[];return e.children.inorderTraversal((d,f)=>{const y=n?n.getImmediateChild(d):null,x=ZN(a,d),N=r.operationForChild(d);N&&(c=c.concat(h_(N,f,y,x)))}),o&&(c=c.concat(Xp(o,r,a,n))),c}function m_(r,e){const n=e.query,a=_u(r,n);return{hashFn:()=>(dA(e)||tt.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return a?EA(r,n._path,a):TA(r,n._path);{const c=jE(o,n);return Th(r,n,null,c)}}}}function _u(r,e){const n=em(e);return r.queryToTagMap.get(n)}function em(r){return r._path.toString()+"$"+r._queryIdentifier}function ex(r,e){return r.tagToQueryMap.get(e)}function tx(r){const e=r.indexOf("$");return Ce(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new Qt(r.substr(0,e))}}function sx(r,e,n){const a=r.syncPointTree_.get(e);Ce(a,"Missing sync point for query tag that we're tracking");const o=Xh(r.pendingWriteTree_,e);return Xp(a,n,o,null)}function kA(r){return r.fold((e,n,a)=>{if(n&&sl(n))return[Zh(n)];{let o=[];return n&&(o=a_(n)),En(a,(c,d)=>{o=o.concat(d)}),o}})}function lu(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(NA())(r._repo,r._path):r}function DA(r,e){for(let n=0;n<e.length;++n){const a=e[n];if(!a._queryParams.loadsAllData()){const o=em(a),c=r.queryToTagMap.get(o);r.queryToTagMap.delete(o),r.tagToQueryMap.delete(c)}}}function RA(){return _A++}function IA(r,e,n){const a=e._path,o=_u(r,e),c=m_(r,n),d=r.listenProvider_.startListening(lu(e),o,c.hashFn,c.onComplete),f=r.syncPointTree_.subtree(a);if(o)Ce(!sl(f.value),"If we're adding a query, it shouldn't be shadowed");else{const y=f.fold((x,N,_)=>{if(!vt(x)&&N&&sl(N))return[Zh(N).query];{let S=[];return N&&(S=S.concat(a_(N).map(V=>V.query))),En(_,(V,z)=>{S=S.concat(z)}),S}});for(let x=0;x<y.length;++x){const N=y[x];r.listenProvider_.stopListening(lu(N),_u(r,N))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new nx(n)}node(){return this.node_}}class rx{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ms(this.path_,e);return new rx(this.syncTree_,n)}node(){return Zp(this.syncTree_,this.path_)}}const MA=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},zb=function(r,e,n){if(!r||typeof r!="object")return r;if(Ce(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return OA(r[".sv"],e,n);if(typeof r[".sv"]=="object")return LA(r[".sv"],e);Ce(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},OA=function(r,e,n){switch(r){case"timestamp":return n.timestamp;default:Ce(!1,"Unexpected server value: "+r)}},LA=function(r,e,n){r.hasOwnProperty("increment")||Ce(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const a=r.increment;typeof a!="number"&&Ce(!1,"Unexpected increment value: "+a);const o=e.node();if(Ce(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return a;const d=o.getValue();return typeof d!="number"?a:d+a},f_=function(r,e,n,a){return ix(e,new rx(n,r),a)},g_=function(r,e,n){return ix(r,new nx(e),n)};function ix(r,e,n){const a=r.getPriority().val(),o=zb(a,e.getImmediateChild(".priority"),n);let c;if(r.isLeafNode()){const d=r,f=zb(d.getValue(),e,n);return f!==d.getValue()||o!==d.getPriority().val()?new hn(f,en(o)):r}else{const d=r;return c=d,o!==d.getPriority().val()&&(c=c.updatePriority(new hn(o))),d.forEachChild(js,(f,y)=>{const x=ix(y,e.getImmediateChild(f),n);x!==y&&(c=c.updateImmediateChild(f,x))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e="",n=null,a={children:{},childCount:0}){this.name=e,this.parent=n,this.node=a}}function lx(r,e){let n=e instanceof Qt?e:new Qt(e),a=r,o=yt(n);for(;o!==null;){const c=qo(a.node.children,o)||{children:{},childCount:0};a=new ax(o,a,c),n=gs(n),o=yt(n)}return a}function ic(r){return r.node.value}function p_(r,e){r.node.value=e,np(r)}function x_(r){return r.node.childCount>0}function PA(r){return ic(r)===void 0&&!x_(r)}function tm(r,e){En(r.node.children,(n,a)=>{e(new ax(n,r,a))})}function y_(r,e,n,a){n&&e(r),tm(r,o=>{y_(o,e,!0)})}function UA(r,e,n){let a=r.parent;for(;a!==null;){if(e(a))return!0;a=a.parent}return!1}function Mu(r){return new Qt(r.parent===null?r.name:Mu(r.parent)+"/"+r.name)}function np(r){r.parent!==null&&BA(r.parent,r.name,r)}function BA(r,e,n){const a=PA(n),o=Ui(r.node.children,e);a&&o?(delete r.node.children[e],r.node.childCount--,np(r)):!a&&!o&&(r.node.children[e]=n.node,r.node.childCount++,np(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=/[\[\].#$\/\u0000-\u001F\u007F]/,$A=/[\[\].#$\u0000-\u001F\u007F]/,wg=10*1024*1024,ox=function(r){return typeof r=="string"&&r.length!==0&&!FA.test(r)},v_=function(r){return typeof r=="string"&&r.length!==0&&!$A.test(r)},zA=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),v_(r)},rp=function(r){return r===null||typeof r=="string"||typeof r=="number"&&!Op(r)||r&&typeof r=="object"&&Ui(r,".sv")},ac=function(r,e,n,a){a&&e===void 0||sm(Vh(r,"value"),e,n)},sm=function(r,e,n){const a=n instanceof Qt?new r4(n,r):n;if(e===void 0)throw new Error(r+"contains undefined "+El(a));if(typeof e=="function")throw new Error(r+"contains a function "+El(a)+" with contents = "+e.toString());if(Op(e))throw new Error(r+"contains "+e.toString()+" "+El(a));if(typeof e=="string"&&e.length>wg/3&&Hh(e)>wg)throw new Error(r+"contains a string greater than "+wg+" utf8 bytes "+El(a)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,c=!1;if(En(e,(d,f)=>{if(d===".value")o=!0;else if(d!==".priority"&&d!==".sv"&&(c=!0,!ox(d)))throw new Error(r+" contains an invalid key ("+d+") "+El(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);i4(a,d),sm(r,f,a),a4(a)}),o&&c)throw new Error(r+' contains ".value" child '+El(a)+" in addition to actual children.")}},qA=function(r,e){let n,a;for(n=0;n<e.length;n++){a=e[n];const c=yu(a);for(let d=0;d<c.length;d++)if(!(c[d]===".priority"&&d===c.length-1)){if(!ox(c[d]))throw new Error(r+"contains an invalid key ("+c[d]+") in path "+a.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(n4);let o=null;for(n=0;n<e.length;n++){if(a=e[n],o!==null&&Wr(o,a))throw new Error(r+"contains a path "+o.toString()+" that is ancestor of another path "+a.toString());o=a}},VA=function(r,e,n,a){const o=Vh(r,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const c=[];En(e,(d,f)=>{const y=new Qt(d);if(sm(o,f,Ms(n,y)),Fp(y)===".priority"&&!rp(f))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(y)}),qA(o,c)},nm=function(r,e,n,a){if(!v_(n))throw new Error(Vh(r,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},HA=function(r,e,n,a){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),nm(r,e,n)},rm=function(r,e){if(yt(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},GA=function(r,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ox(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!zA(n))throw new Error(Vh(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function im(r,e){let n=null;for(let a=0;a<e.length;a++){const o=e[a],c=o.getPath();n!==null&&!$p(c,n.path)&&(r.eventLists_.push(n),n=null),n===null&&(n={events:[],path:c}),n.events.push(o)}n&&r.eventLists_.push(n)}function b_(r,e,n){im(r,n),w_(r,a=>$p(a,e))}function Jr(r,e,n){im(r,n),w_(r,a=>Wr(a,e)||Wr(e,a))}function w_(r,e){r.recursionDepth_++;let n=!0;for(let a=0;a<r.eventLists_.length;a++){const o=r.eventLists_[a];if(o){const c=o.path;e(c)?(WA(r.eventLists_[a]),r.eventLists_[a]=null):n=!1}}n&&(r.eventLists_=[]),r.recursionDepth_--}function WA(r){for(let e=0;e<r.events.length;e++){const n=r.events[e];if(n!==null){r.events[e]=null;const a=n.getEventRunner();nu&&Sn("event: "+n.toString()),nc(a)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="repo_interrupt",JA=25;class QA{constructor(e,n,a,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=a,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new YA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yh(),this.transactionQueueTree_=new ax,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XA(r,e,n){if(r.stats_=Up(r.repoInfo_),r.forceRestClient_||AE())r.server_=new xh(r.repoInfo_,(a,o,c,d)=>{qb(r,a,o,c,d)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Vb(r,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tn(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}r.persistentConnection_=new ha(r.repoInfo_,e,(a,o,c,d)=>{qb(r,a,o,c,d)},a=>{Vb(r,a)},a=>{ZA(r,a)},r.authTokenProvider_,r.appCheckProvider_,n),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(a=>{r.server_.refreshAuthToken(a)}),r.appCheckProvider_.addTokenChangeListener(a=>{r.server_.refreshAppCheckToken(a.token)}),r.statsReporter_=IE(r.repoInfo_,()=>new M4(r.stats_,r.server_)),r.infoData_=new C4,r.infoSyncTree_=new $b({startListening:(a,o,c,d)=>{let f=[];const y=r.infoData_.getNode(a._path);return y.isEmpty()||(f=Iu(r.infoSyncTree_,a._path,y),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),cx(r,"connected",!1),r.serverSyncTree_=new $b({startListening:(a,o,c,d)=>(r.server_.listen(a,c,o,(f,y)=>{const x=d(f,y);Jr(r.eventQueue_,a._path,x)}),[]),stopListening:(a,o)=>{r.server_.unlisten(a,o)}})}function N_(r){const n=r.infoData_.getNode(new Qt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function am(r){return MA({timestamp:N_(r)})}function qb(r,e,n,a,o){r.dataUpdateCount++;const c=new Qt(e);n=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,n):n;let d=[];if(o)if(a){const y=hh(n,x=>en(x));d=AA(r.serverSyncTree_,c,y,o)}else{const y=en(n);d=u_(r.serverSyncTree_,c,y,o)}else if(a){const y=hh(n,x=>en(x));d=SA(r.serverSyncTree_,c,y)}else{const y=en(n);d=Iu(r.serverSyncTree_,c,y)}let f=c;d.length>0&&(f=Yo(r,c)),Jr(r.eventQueue_,f,d)}function Vb(r,e){cx(r,"connected",e),e===!1&&nC(r)}function ZA(r,e){En(e,(n,a)=>{cx(r,n,a)})}function cx(r,e,n){const a=new Qt("/.info/"+e),o=en(n);r.infoData_.updateSnapshot(a,o);const c=Iu(r.infoSyncTree_,a,o);Jr(r.eventQueue_,a,c)}function ux(r){return r.nextWriteId_++}function eC(r,e,n){const a=CA(r.serverSyncTree_,e);return a!=null?Promise.resolve(a):r.server_.get(e).then(o=>{const c=en(o).withIndex(e._queryParams.getIndex());sp(r.serverSyncTree_,e,n,!0);let d;if(e._queryParams.loadsAllData())d=Iu(r.serverSyncTree_,e._path,c);else{const f=_u(r.serverSyncTree_,e);d=u_(r.serverSyncTree_,e._path,c,f)}return Jr(r.eventQueue_,e._path,d),Th(r.serverSyncTree_,e,n,null,!0),c},o=>(Ou(r,"get for query "+tn(e)+" failed: "+o),Promise.reject(new Error(o))))}function tC(r,e,n,a,o){Ou(r,"set",{path:e.toString(),value:n,priority:a});const c=am(r),d=en(n,a),f=Zp(r.serverSyncTree_,e),y=g_(d,f,c),x=ux(r),N=c_(r.serverSyncTree_,e,y,x,!0);im(r.eventQueue_,N),r.server_.put(e.toString(),d.val(!0),(S,V)=>{const z=S==="ok";z||Wn("set at "+e+" failed: "+S);const re=Ha(r.serverSyncTree_,x,!z);Jr(r.eventQueue_,e,re),ip(r,o,S,V)});const _=hx(r,e);Yo(r,_),Jr(r.eventQueue_,_,[])}function sC(r,e,n,a){Ou(r,"update",{path:e.toString(),value:n});let o=!0;const c=am(r),d={};if(En(n,(f,y)=>{o=!1,d[f]=f_(Ms(e,f),en(y),r.serverSyncTree_,c)}),o)Sn("update() called with empty data.  Don't do anything."),ip(r,a,"ok",void 0);else{const f=ux(r),y=jA(r.serverSyncTree_,e,d,f);im(r.eventQueue_,y),r.server_.merge(e.toString(),n,(x,N)=>{const _=x==="ok";_||Wn("update at "+e+" failed: "+x);const S=Ha(r.serverSyncTree_,f,!_),V=S.length>0?Yo(r,e):e;Jr(r.eventQueue_,V,S),ip(r,a,x,N)}),En(n,x=>{const N=hx(r,Ms(e,x));Yo(r,N)}),Jr(r.eventQueue_,e,[])}}function nC(r){Ou(r,"onDisconnectEvents");const e=am(r),n=yh();Jg(r.onDisconnect_,Ft(),(o,c)=>{const d=f_(o,c,r.serverSyncTree_,e);WN(n,o,d)});let a=[];Jg(n,Ft(),(o,c)=>{a=a.concat(Iu(r.serverSyncTree_,o,c));const d=hx(r,o);Yo(r,d)}),r.onDisconnect_=yh(),Jr(r.eventQueue_,Ft(),a)}function rC(r,e,n){let a;yt(e._path)===".info"?a=sp(r.infoSyncTree_,e,n):a=sp(r.serverSyncTree_,e,n),b_(r.eventQueue_,e._path,a)}function Hb(r,e,n){let a;yt(e._path)===".info"?a=Th(r.infoSyncTree_,e,n):a=Th(r.serverSyncTree_,e,n),b_(r.eventQueue_,e._path,a)}function iC(r){r.persistentConnection_&&r.persistentConnection_.interrupt(KA)}function Ou(r,...e){let n="";r.persistentConnection_&&(n=r.persistentConnection_.id+":"),Sn(n,...e)}function ip(r,e,n,a){e&&nc(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let c=o;a&&(c+=": "+a);const d=new Error(c);d.code=o,e(d)}})}function __(r,e,n){return Zp(r.serverSyncTree_,e,n)||tt.EMPTY_NODE}function dx(r,e=r.transactionQueueTree_){if(e||lm(r,e),ic(e)){const n=S_(r,e);Ce(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&aC(r,Mu(e),n)}else x_(e)&&tm(e,n=>{dx(r,n)})}function aC(r,e,n){const a=n.map(x=>x.currentWriteId),o=__(r,e,a);let c=o;const d=o.hash();for(let x=0;x<n.length;x++){const N=n[x];Ce(N.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),N.status=1,N.retryCount++;const _=Yn(e,N.path);c=c.updateChild(_,N.currentOutputSnapshotRaw)}const f=c.val(!0),y=e;r.server_.put(y.toString(),f,x=>{Ou(r,"transaction put response",{path:y.toString(),status:x});let N=[];if(x==="ok"){const _=[];for(let S=0;S<n.length;S++)n[S].status=2,N=N.concat(Ha(r.serverSyncTree_,n[S].currentWriteId)),n[S].onComplete&&_.push(()=>n[S].onComplete(null,!0,n[S].currentOutputSnapshotResolved)),n[S].unwatcher();lm(r,lx(r.transactionQueueTree_,e)),dx(r,r.transactionQueueTree_),Jr(r.eventQueue_,e,N);for(let S=0;S<_.length;S++)nc(_[S])}else{if(x==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{Wn("transaction at "+y.toString()+" failed: "+x);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=x}Yo(r,e)}},d)}function Yo(r,e){const n=j_(r,e),a=Mu(n),o=S_(r,n);return lC(r,o,a),a}function lC(r,e,n){if(e.length===0)return;const a=[];let o=[];const d=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const y=e[f],x=Yn(n,y.path);let N=!1,_;if(Ce(x!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===4)N=!0,_=y.abortReason,o=o.concat(Ha(r.serverSyncTree_,y.currentWriteId,!0));else if(y.status===0)if(y.retryCount>=JA)N=!0,_="maxretry",o=o.concat(Ha(r.serverSyncTree_,y.currentWriteId,!0));else{const S=__(r,y.path,d);y.currentInputSnapshot=S;const V=e[f].update(S.val());if(V!==void 0){sm("transaction failed: Data returned ",V,y.path);let z=en(V);typeof V=="object"&&V!=null&&Ui(V,".priority")||(z=z.updatePriority(S.getPriority()));const ce=y.currentWriteId,I=am(r),Ee=g_(z,S,I);y.currentOutputSnapshotRaw=z,y.currentOutputSnapshotResolved=Ee,y.currentWriteId=ux(r),d.splice(d.indexOf(ce),1),o=o.concat(c_(r.serverSyncTree_,y.path,Ee,y.currentWriteId,y.applyLocally)),o=o.concat(Ha(r.serverSyncTree_,ce,!0))}else N=!0,_="nodata",o=o.concat(Ha(r.serverSyncTree_,y.currentWriteId,!0))}Jr(r.eventQueue_,n,o),o=[],N&&(e[f].status=2,(function(S){setTimeout(S,Math.floor(0))})(e[f].unwatcher),e[f].onComplete&&(_==="nodata"?a.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):a.push(()=>e[f].onComplete(new Error(_),!1,null))))}lm(r,r.transactionQueueTree_);for(let f=0;f<a.length;f++)nc(a[f]);dx(r,r.transactionQueueTree_)}function j_(r,e){let n,a=r.transactionQueueTree_;for(n=yt(e);n!==null&&ic(a)===void 0;)a=lx(a,n),e=gs(e),n=yt(e);return a}function S_(r,e){const n=[];return T_(r,e,n),n.sort((a,o)=>a.order-o.order),n}function T_(r,e,n){const a=ic(e);if(a)for(let o=0;o<a.length;o++)n.push(a[o]);tm(e,o=>{T_(r,o,n)})}function lm(r,e){const n=ic(e);if(n){let a=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[a]=n[o],a++);n.length=a,p_(e,n.length>0?n:void 0)}tm(e,a=>{lm(r,a)})}function hx(r,e){const n=Mu(j_(r,e)),a=lx(r.transactionQueueTree_,e);return UA(a,o=>{Ng(r,o)}),Ng(r,a),y_(a,o=>{Ng(r,o)}),n}function Ng(r,e){const n=ic(e);if(n){const a=[];let o=[],c=-1;for(let d=0;d<n.length;d++)n[d].status===3||(n[d].status===1?(Ce(c===d-1,"All SENT items should be at beginning of queue."),c=d,n[d].status=3,n[d].abortReason="set"):(Ce(n[d].status===0,"Unexpected transaction status in abort"),n[d].unwatcher(),o=o.concat(Ha(r.serverSyncTree_,n[d].currentWriteId,!0)),n[d].onComplete&&a.push(n[d].onComplete.bind(null,new Error("set"),!1,null))));c===-1?p_(e,void 0):n.length=c+1,Jr(r.eventQueue_,Mu(e),o);for(let d=0;d<a.length;d++)nc(a[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(r){let e="";const n=r.split("/");for(let a=0;a<n.length;a++)if(n[a].length>0){let o=n[a];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function cC(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const n of r.split("&")){if(n.length===0)continue;const a=n.split("=");a.length===2?e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Wn(`Invalid query segment '${n}' in query '${r}'`)}return e}const Gb=function(r,e){const n=uC(r),a=n.namespace;n.domain==="firebase.com"&&fa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&n.domain!=="localhost"&&fa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||vE();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new kN(n.host,n.secure,a,o,e,"",a!==n.subdomain),path:new Qt(n.pathString)}},uC=function(r){let e="",n="",a="",o="",c="",d=!0,f="https",y=443;if(typeof r=="string"){let x=r.indexOf("//");x>=0&&(f=r.substring(0,x-1),r=r.substring(x+2));let N=r.indexOf("/");N===-1&&(N=r.length);let _=r.indexOf("?");_===-1&&(_=r.length),e=r.substring(0,Math.min(N,_)),N<_&&(o=oC(r.substring(N,_)));const S=cC(r.substring(Math.min(r.length,_)));x=e.indexOf(":"),x>=0?(d=f==="https"||f==="wss",y=parseInt(e.substring(x+1),10)):x=e.length;const V=e.slice(0,x);if(V.toLowerCase()==="localhost")n="localhost";else if(V.split(".").length<=2)n=V;else{const z=e.indexOf(".");a=e.substring(0,z).toLowerCase(),n=e.substring(z+1),c=a}"ns"in S&&(c=S.ns)}return{host:e,port:y,domain:n,subdomain:a,secure:d,scheme:f,pathString:o,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",dC=(function(){let r=0;const e=[];return function(n){const a=n===r;r=n;let o;const c=new Array(8);for(o=7;o>=0;o--)c[o]=Yb.charAt(n%64),n=Math.floor(n/64);Ce(n===0,"Cannot push at time == 0");let d=c.join("");if(a){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)d+=Yb.charAt(e[o]);return Ce(d.length===20,"nextPushId: Length should be 20."),d}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n,a,o){this.eventType=e,this.eventRegistration=n,this.snapshot=a,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+tn(this.snapshot.exportVal())}}class mC{constructor(e,n,a){this.eventRegistration=e,this.error=n,this.path=a}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ce(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,a,o){this._repo=e,this._path=n,this._queryParams=a,this._orderByCalled=o}get key(){return vt(this._path)?null:Fp(this._path)}get ref(){return new Bi(this._repo,this._path)}get _queryIdentifier(){const e=Db(this._queryParams),n=Lp(e);return n==="{}"?"default":n}get _queryObject(){return Db(this._queryParams)}isEqual(e){if(e=Ln(e),!(e instanceof pa))return!1;const n=this._repo===e._repo,a=$p(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&a&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+s4(this._path)}}function fC(r,e){if(r._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function om(r){let e=null,n=null;if(r.hasStart()&&(e=r.getIndexStartValue()),r.hasEnd()&&(n=r.getIndexEndValue()),r.getIndex()===Ya){const a="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(r.hasStart()){if(r.getIndexStartName()!==Xa)throw new Error(a);if(typeof e!="string")throw new Error(o)}if(r.hasEnd()){if(r.getIndexEndName()!==Za)throw new Error(a);if(typeof n!="string")throw new Error(o)}}else if(r.getIndex()===js){if(e!=null&&!rp(e)||n!=null&&!rp(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ce(r.getIndex()instanceof Vp||r.getIndex()===GN,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function mx(r){if(r.hasStart()&&r.hasEnd()&&r.hasLimit()&&!r.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Bi extends pa{constructor(e,n){super(e,n,new Jh,!1)}get parent(){const e=BN(this._path);return e===null?null:new Bi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Wo{constructor(e,n,a){this._node=e,this.ref=n,this._index=a}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Qt(e),a=Ko(this.ref,e);return new Wo(this._node.getChild(n),a,js)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(a,o)=>e(new Wo(o,Ko(this.ref,a),js)))}hasChild(e){const n=new Qt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ls(r,e){return r=Ln(r),r._checkNotDeleted("ref"),e!==void 0?Ko(r._root,e):r._root}function Ko(r,e){return r=Ln(r),yt(r._path)===null?HA("child","path",e):nm("child","path",e),new Bi(r._repo,Ms(r._path,e))}function Lu(r,e){r=Ln(r),rm("push",r._path),ac("push",e,r._path,!0);const n=N_(r._repo),a=dC(n),o=Ko(r,a),c=Ko(r,a);let d;return e!=null?d=Pu(c,e).then(()=>c):d=Promise.resolve(c),o.then=d.then.bind(d),o.catch=d.then.bind(d,void 0),o}function cm(r){return rm("remove",r._path),Pu(r,null)}function Pu(r,e){r=Ln(r),rm("set",r._path),ac("set",e,r._path,!1);const n=new Au;return tC(r._repo,r._path,e,null,n.wrapCallback(()=>{})),n.promise}function Jo(r,e){VA("update",e,r._path);const n=new Au;return sC(r._repo,r._path,e,n.wrapCallback(()=>{})),n.promise}function yi(r){r=Ln(r);const e=new E_(()=>{}),n=new um(e);return eC(r._repo,r,n).then(a=>new Wo(a,new Bi(r._repo,r._path),r._queryParams.getIndex()))}class um{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const a=n._queryParams.getIndex();return new hC("value",this,new Wo(e.snapshotNode,new Bi(n._repo,n._path),a))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mC(this,e,n):null}matches(e){return e instanceof um?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function gC(r,e,n,a,o){let c;if(typeof a=="object"&&(c=void 0,o=a),typeof a=="function"&&(c=a),o&&o.onlyOnce){const y=n,x=(N,_)=>{Hb(r._repo,r,f),y(N,_)};x.userCallback=n.userCallback,x.context=n.context,n=x}const d=new E_(n,c||void 0),f=new um(d);return rC(r._repo,r,f),()=>Hb(r._repo,r,f)}function lc(r,e,n,a){return gC(r,"value",e,n,a)}class Kl{}class pC extends Kl{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){ac("endAt",this._value,e._path,!0);const n=Kg(e._queryParams,this._value,this._key);if(mx(n),om(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pa(e._repo,e._path,n,e._orderByCalled)}}class xC extends Kl{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){ac("endBefore",this._value,e._path,!1);const n=E4(e._queryParams,this._value,this._key);if(mx(n),om(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pa(e._repo,e._path,n,e._orderByCalled)}}function A_(r,e){return new xC(r,e)}class yC extends Kl{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){ac("startAt",this._value,e._path,!0);const n=T4(e._queryParams,this._value,this._key);if(mx(n),om(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new pa(e._repo,e._path,n,e._orderByCalled)}}class vC extends Kl{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new pa(e._repo,e._path,S4(e._queryParams,this._limit),e._orderByCalled)}}function Ja(r){if(typeof r!="number"||Math.floor(r)!==r||r<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new vC(r)}class bC extends Kl{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){fC(e,"orderByChild");const n=new Qt(this._path);if(vt(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const a=new Vp(n),o=A4(e._queryParams,a);return om(o),new pa(e._repo,e._path,o,!0)}}function Fl(r){if(r==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(r==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(r==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return nm("orderByChild","path",r),new bC(r)}class wC extends Kl{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(ac("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new pC(this._value,this._key)._apply(new yC(this._value,this._key)._apply(e))}}function Uu(r,e){return new wC(r,e)}function Qa(r,...e){let n=Ln(r);for(const a of e)n=a._apply(n);return n}pA(Bi);wA(Bi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="FIREBASE_DATABASE_EMULATOR_HOST",ap={};let _C=!1;function jC(r,e,n,a){const o=e.lastIndexOf(":"),c=e.substring(0,o),d=Hl(c);r.repoInfo_=new kN(e,d,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,n),a&&(r.authTokenProvider_=a)}function C_(r,e,n,a,o){let c=a||r.options.databaseURL;c===void 0&&(r.options.projectId||fa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sn("Using default host for project ",r.options.projectId),c=`${r.options.projectId}-default-rtdb.firebaseio.com`);let d=Gb(c,o),f=d.repoInfo,y;typeof process<"u"&&mb&&(y=mb[NC]),y?(c=`http://${y}?ns=${f.namespace}`,d=Gb(c,o),f=d.repoInfo):d.repoInfo.secure;const x=new kE(r.name,r.options,e);GA("Invalid Firebase Database URL",d),vt(d.path)||fa("Database URL must point to the root of a Firebase Database (not including a child path).");const N=TC(f,r,x,new CE(r,n));return new k_(N,r)}function SC(r,e){const n=ap[e];(!n||n[r.key]!==r)&&fa(`Database ${e}(${r.repoInfo_}) has already been deleted.`),iC(r),delete n[r.key]}function TC(r,e,n,a){let o=ap[e.name];o||(o={},ap[e.name]=o);let c=o[r.toURLString()];return c&&fa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new QA(r,_C,n,a),o[r.toURLString()]=c,c}class k_{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(XA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Bi(this._repo,Ft())),this._rootInternal}_delete(){return this._rootInternal!==null&&(SC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&fa("Cannot call "+e+" on a deleted database.")}}function D_(r=Cu(),e){const n=Gl(r,"database").getImmediate({identifier:e});if(!n._instanceStarted){const a=Fh("database");a&&R_(n,...a)}return n}function R_(r,e,n,a={}){r=Ln(r),r._checkNotDeleted("useEmulator");const o=`${e}:${n}`,c=r._repoInternal;if(r._instanceStarted){if(o===r._repoInternal.repoInfo_.host&&gu(a,c.repoInfo_.emulatorOptions))return;fa("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(c.repoInfo_.nodeAdmin)a.mockUserToken&&fa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new nh(nh.OWNER);else if(a.mockUserToken){const f=typeof a.mockUserToken=="string"?a.mockUserToken:Dp(a.mockUserToken,r.app.options.projectId);d=new nh(f)}Hl(e)&&($h(e),zh("Database",!0)),jC(c,o,a,d)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(r){pN(Mp),Ni(new Kr("database",(e,{instanceIdentifier:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return C_(a,o,c,n)},"PUBLIC").setMultipleInstances(!0)),On(fb,gb,r),On(fb,gb,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC={".sv":"timestamp"};function fx(){return AC}ha.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};ha.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};EC();const Qo=Object.freeze(Object.defineProperty({__proto__:null,DataSnapshot:Wo,Database:k_,QueryConstraint:Kl,_QueryImpl:pa,_QueryParams:Jh,_ReferenceImpl:Bi,_repoManagerDatabaseFromApp:C_,_setSDKVersion:pN,_validatePathString:nm,_validateWritablePath:rm,child:Ko,connectDatabaseEmulator:R_,endBefore:A_,equalTo:Uu,get:yi,getDatabase:D_,limitToLast:Ja,onValue:lc,orderByChild:Fl,push:Lu,query:Qa,ref:ls,remove:cm,serverTimestamp:fx,set:Pu,update:Jo},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="firebasestorage.googleapis.com",CC="storageBucket",kC=120*1e3,DC=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl=class M_ extends ga{constructor(e,n,a=0){super(_g(e),`Firebase Storage: ${n} (${_g(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,M_.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _g(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Pi;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pi||(Pi={}));function _g(r){return"storage/"+r}function RC(){const r="An unknown error occurred, please check the error payload for server response.";return new rl(Pi.UNKNOWN,r)}function IC(){return new rl(Pi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MC(){return new rl(Pi.CANCELED,"User canceled the upload/download.")}function OC(r){return new rl(Pi.INVALID_URL,"Invalid URL '"+r+"'.")}function LC(r){return new rl(Pi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function Wb(r){return new rl(Pi.INVALID_ARGUMENT,r)}function O_(){return new rl(Pi.APP_DELETED,"The Firebase app was deleted.")}function PC(r){return new rl(Pi.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=vi.makeFromUrl(e,n)}catch{return new vi(e,"")}if(a.path==="")return a;throw LC(e)}static makeFromUrl(e,n){let a=null;const o="([A-Za-z0-9.\\-_]+)";function c(be){be.path.charAt(be.path.length-1)==="/"&&(be.path_=be.path_.slice(0,-1))}const d="(/(.*))?$",f=new RegExp("^gs://"+o+d,"i"),y={bucket:1,path:3};function x(be){be.path_=decodeURIComponent(be.path)}const N="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",V=new RegExp(`^https?://${_}/${N}/b/${o}/o${S}`,"i"),z={bucket:1,path:3},re=n===I_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,ce="([^?#]*)",I=new RegExp(`^https?://${re}/${o}/${ce}`,"i"),te=[{regex:f,indices:y,postModify:c},{regex:V,indices:z,postModify:x},{regex:I,indices:{bucket:1,path:2},postModify:x}];for(let be=0;be<te.length;be++){const Se=te[be],Ae=Se.regex.exec(e);if(Ae){const B=Ae[Se.indices.bucket];let M=Ae[Se.indices.path];M||(M=""),a=new vi(B,M),Se.postModify(a);break}}if(a==null)throw OC(e);return a}}class UC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(r,e,n){let a=1,o=null,c=null,d=!1,f=0;function y(){return f===2}let x=!1;function N(...ce){x||(x=!0,e.apply(null,ce))}function _(ce){o=setTimeout(()=>{o=null,r(V,y())},ce)}function S(){c&&clearTimeout(c)}function V(ce,...I){if(x){S();return}if(ce){S(),N.call(null,ce,...I);return}if(y()||d){S(),N.call(null,ce,...I);return}a<64&&(a*=2);let te;f===1?(f=2,te=0):te=(a+Math.random())*1e3,_(te)}let z=!1;function re(ce){z||(z=!0,S(),!x&&(o!==null?(ce||(f=2),clearTimeout(o),_(0)):ce||(f=1)))}return _(0),c=setTimeout(()=>{d=!0,re(!0)},n),re}function FC(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(r){return r!==void 0}function Kb(r,e,n,a){if(a<e)throw Wb(`Invalid value for '${r}'. Expected ${e} or greater.`);if(a>n)throw Wb(`Invalid value for '${r}'. Expected ${n} or less.`)}function zC(r){const e=encodeURIComponent;let n="?";for(const a in r)if(r.hasOwnProperty(a)){const o=e(a)+"="+e(r[a]);n=n+o+"&"}return n=n.slice(0,-1),n}var Eh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Eh||(Eh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n,a,o,c,d,f,y,x,N,_,S=!0,V=!1){this.url_=e,this.method_=n,this.headers_=a,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=y,this.timeout_=x,this.progressCallback_=N,this.connectionFactory_=_,this.retry=S,this.isUsingEmulator=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,re)=>{this.resolve_=z,this.reject_=re,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new Yd(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=f=>{const y=f.loaded,x=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,x)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const f=c.getErrorCode()===Eh.NO_ERROR,y=c.getStatus();if(!f||qC(y,this.additionalRetryCodes_)&&this.retry){const N=c.getErrorCode()===Eh.ABORT;a(!1,new Yd(!1,null,N));return}const x=this.successCodes_.indexOf(y)!==-1;a(!0,new Yd(x,c))})},n=(a,o)=>{const c=this.resolve_,d=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());$C(y)?c(y):c()}catch(y){d(y)}else if(f!==null){const y=RC();y.serverResponse=f.getErrorText(),this.errorCallback_?d(this.errorCallback_(f,y)):d(y)}else if(o.canceled){const y=this.appDelete_?O_():MC();d(y)}else{const y=IC();d(y)}};this.canceled_?n(!1,new Yd(!1,null,!0)):this.backoffId_=BC(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yd{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function HC(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function GC(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YC(r,e){e&&(r["X-Firebase-GMPID"]=e)}function WC(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function KC(r,e,n,a,o,c,d=!0,f=!1){const y=zC(r.urlParams),x=r.url+y,N=Object.assign({},r.headers);return YC(N,e),HC(N,n),GC(N,c),WC(N,a),new VC(x,r.method,N,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function QC(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this._service=e,n instanceof vi?this._location=n:this._location=vi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ah(e,n)}get root(){const e=new vi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QC(this._location.path)}get storage(){return this._service}get parent(){const e=JC(this._location.path);if(e===null)return null;const n=new vi(this._location.bucket,e);return new Ah(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PC(e)}}function Jb(r,e){const n=e==null?void 0:e[CC];return n==null?null:vi.makeFromBucketSpec(n,r)}function XC(r,e,n,a={}){r.host=`${e}:${n}`;const o=Hl(e);o&&($h(`https://${r.host}/b`),zh("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:c}=a;c&&(r._overrideAuthToken=typeof c=="string"?c:Dp(c,r.app.options.projectId))}class ZC{constructor(e,n,a,o,c,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=I_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kC,this._maxUploadRetryTime=DC,this._requests=new Set,o!=null?this._bucket=vi.makeFromBucketSpec(o,this._host):this._bucket=Jb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vi.makeFromBucketSpec(this._url,e):this._bucket=Jb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Yh(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ah(this,e)}_makeRequest(e,n,a,o,c=!0){if(this._deleted)return new UC(O_());{const d=KC(e,this._appId,a,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,o).getPromise()}}const Qb="@firebase/storage",Xb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="storage";function e3(r=Cu(),e){r=Ln(r);const a=Gl(r,L_).getImmediate({identifier:e}),o=Fh("storage");return o&&t3(a,...o),a}function t3(r,e,n,a={}){XC(r,e,n,a)}function s3(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),a=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new ZC(n,a,o,e,Mp)}function n3(){Ni(new Kr(L_,s3,"PUBLIC").setMultipleInstances(!0)),On(Qb,Xb,""),On(Qb,Xb,"esm2020")}n3();var Zb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gx;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(B,M){function F(){}F.prototype=M.prototype,B.F=M.prototype,B.prototype=new F,B.prototype.constructor=B,B.D=function(K,Y,Q){for(var U=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)U[gt-2]=arguments[gt];return M.prototype[Y].apply(K,U)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(B,M,F){F||(F=0);const K=Array(16);if(typeof M=="string")for(var Y=0;Y<16;++Y)K[Y]=M.charCodeAt(F++)|M.charCodeAt(F++)<<8|M.charCodeAt(F++)<<16|M.charCodeAt(F++)<<24;else for(Y=0;Y<16;++Y)K[Y]=M[F++]|M[F++]<<8|M[F++]<<16|M[F++]<<24;M=B.g[0],F=B.g[1],Y=B.g[2];let Q=B.g[3],U;U=M+(Q^F&(Y^Q))+K[0]+3614090360&4294967295,M=F+(U<<7&4294967295|U>>>25),U=Q+(Y^M&(F^Y))+K[1]+3905402710&4294967295,Q=M+(U<<12&4294967295|U>>>20),U=Y+(F^Q&(M^F))+K[2]+606105819&4294967295,Y=Q+(U<<17&4294967295|U>>>15),U=F+(M^Y&(Q^M))+K[3]+3250441966&4294967295,F=Y+(U<<22&4294967295|U>>>10),U=M+(Q^F&(Y^Q))+K[4]+4118548399&4294967295,M=F+(U<<7&4294967295|U>>>25),U=Q+(Y^M&(F^Y))+K[5]+1200080426&4294967295,Q=M+(U<<12&4294967295|U>>>20),U=Y+(F^Q&(M^F))+K[6]+2821735955&4294967295,Y=Q+(U<<17&4294967295|U>>>15),U=F+(M^Y&(Q^M))+K[7]+4249261313&4294967295,F=Y+(U<<22&4294967295|U>>>10),U=M+(Q^F&(Y^Q))+K[8]+1770035416&4294967295,M=F+(U<<7&4294967295|U>>>25),U=Q+(Y^M&(F^Y))+K[9]+2336552879&4294967295,Q=M+(U<<12&4294967295|U>>>20),U=Y+(F^Q&(M^F))+K[10]+4294925233&4294967295,Y=Q+(U<<17&4294967295|U>>>15),U=F+(M^Y&(Q^M))+K[11]+2304563134&4294967295,F=Y+(U<<22&4294967295|U>>>10),U=M+(Q^F&(Y^Q))+K[12]+1804603682&4294967295,M=F+(U<<7&4294967295|U>>>25),U=Q+(Y^M&(F^Y))+K[13]+4254626195&4294967295,Q=M+(U<<12&4294967295|U>>>20),U=Y+(F^Q&(M^F))+K[14]+2792965006&4294967295,Y=Q+(U<<17&4294967295|U>>>15),U=F+(M^Y&(Q^M))+K[15]+1236535329&4294967295,F=Y+(U<<22&4294967295|U>>>10),U=M+(Y^Q&(F^Y))+K[1]+4129170786&4294967295,M=F+(U<<5&4294967295|U>>>27),U=Q+(F^Y&(M^F))+K[6]+3225465664&4294967295,Q=M+(U<<9&4294967295|U>>>23),U=Y+(M^F&(Q^M))+K[11]+643717713&4294967295,Y=Q+(U<<14&4294967295|U>>>18),U=F+(Q^M&(Y^Q))+K[0]+3921069994&4294967295,F=Y+(U<<20&4294967295|U>>>12),U=M+(Y^Q&(F^Y))+K[5]+3593408605&4294967295,M=F+(U<<5&4294967295|U>>>27),U=Q+(F^Y&(M^F))+K[10]+38016083&4294967295,Q=M+(U<<9&4294967295|U>>>23),U=Y+(M^F&(Q^M))+K[15]+3634488961&4294967295,Y=Q+(U<<14&4294967295|U>>>18),U=F+(Q^M&(Y^Q))+K[4]+3889429448&4294967295,F=Y+(U<<20&4294967295|U>>>12),U=M+(Y^Q&(F^Y))+K[9]+568446438&4294967295,M=F+(U<<5&4294967295|U>>>27),U=Q+(F^Y&(M^F))+K[14]+3275163606&4294967295,Q=M+(U<<9&4294967295|U>>>23),U=Y+(M^F&(Q^M))+K[3]+4107603335&4294967295,Y=Q+(U<<14&4294967295|U>>>18),U=F+(Q^M&(Y^Q))+K[8]+1163531501&4294967295,F=Y+(U<<20&4294967295|U>>>12),U=M+(Y^Q&(F^Y))+K[13]+2850285829&4294967295,M=F+(U<<5&4294967295|U>>>27),U=Q+(F^Y&(M^F))+K[2]+4243563512&4294967295,Q=M+(U<<9&4294967295|U>>>23),U=Y+(M^F&(Q^M))+K[7]+1735328473&4294967295,Y=Q+(U<<14&4294967295|U>>>18),U=F+(Q^M&(Y^Q))+K[12]+2368359562&4294967295,F=Y+(U<<20&4294967295|U>>>12),U=M+(F^Y^Q)+K[5]+4294588738&4294967295,M=F+(U<<4&4294967295|U>>>28),U=Q+(M^F^Y)+K[8]+2272392833&4294967295,Q=M+(U<<11&4294967295|U>>>21),U=Y+(Q^M^F)+K[11]+1839030562&4294967295,Y=Q+(U<<16&4294967295|U>>>16),U=F+(Y^Q^M)+K[14]+4259657740&4294967295,F=Y+(U<<23&4294967295|U>>>9),U=M+(F^Y^Q)+K[1]+2763975236&4294967295,M=F+(U<<4&4294967295|U>>>28),U=Q+(M^F^Y)+K[4]+1272893353&4294967295,Q=M+(U<<11&4294967295|U>>>21),U=Y+(Q^M^F)+K[7]+4139469664&4294967295,Y=Q+(U<<16&4294967295|U>>>16),U=F+(Y^Q^M)+K[10]+3200236656&4294967295,F=Y+(U<<23&4294967295|U>>>9),U=M+(F^Y^Q)+K[13]+681279174&4294967295,M=F+(U<<4&4294967295|U>>>28),U=Q+(M^F^Y)+K[0]+3936430074&4294967295,Q=M+(U<<11&4294967295|U>>>21),U=Y+(Q^M^F)+K[3]+3572445317&4294967295,Y=Q+(U<<16&4294967295|U>>>16),U=F+(Y^Q^M)+K[6]+76029189&4294967295,F=Y+(U<<23&4294967295|U>>>9),U=M+(F^Y^Q)+K[9]+3654602809&4294967295,M=F+(U<<4&4294967295|U>>>28),U=Q+(M^F^Y)+K[12]+3873151461&4294967295,Q=M+(U<<11&4294967295|U>>>21),U=Y+(Q^M^F)+K[15]+530742520&4294967295,Y=Q+(U<<16&4294967295|U>>>16),U=F+(Y^Q^M)+K[2]+3299628645&4294967295,F=Y+(U<<23&4294967295|U>>>9),U=M+(Y^(F|~Q))+K[0]+4096336452&4294967295,M=F+(U<<6&4294967295|U>>>26),U=Q+(F^(M|~Y))+K[7]+1126891415&4294967295,Q=M+(U<<10&4294967295|U>>>22),U=Y+(M^(Q|~F))+K[14]+2878612391&4294967295,Y=Q+(U<<15&4294967295|U>>>17),U=F+(Q^(Y|~M))+K[5]+4237533241&4294967295,F=Y+(U<<21&4294967295|U>>>11),U=M+(Y^(F|~Q))+K[12]+1700485571&4294967295,M=F+(U<<6&4294967295|U>>>26),U=Q+(F^(M|~Y))+K[3]+2399980690&4294967295,Q=M+(U<<10&4294967295|U>>>22),U=Y+(M^(Q|~F))+K[10]+4293915773&4294967295,Y=Q+(U<<15&4294967295|U>>>17),U=F+(Q^(Y|~M))+K[1]+2240044497&4294967295,F=Y+(U<<21&4294967295|U>>>11),U=M+(Y^(F|~Q))+K[8]+1873313359&4294967295,M=F+(U<<6&4294967295|U>>>26),U=Q+(F^(M|~Y))+K[15]+4264355552&4294967295,Q=M+(U<<10&4294967295|U>>>22),U=Y+(M^(Q|~F))+K[6]+2734768916&4294967295,Y=Q+(U<<15&4294967295|U>>>17),U=F+(Q^(Y|~M))+K[13]+1309151649&4294967295,F=Y+(U<<21&4294967295|U>>>11),U=M+(Y^(F|~Q))+K[4]+4149444226&4294967295,M=F+(U<<6&4294967295|U>>>26),U=Q+(F^(M|~Y))+K[11]+3174756917&4294967295,Q=M+(U<<10&4294967295|U>>>22),U=Y+(M^(Q|~F))+K[2]+718787259&4294967295,Y=Q+(U<<15&4294967295|U>>>17),U=F+(Q^(Y|~M))+K[9]+3951481745&4294967295,B.g[0]=B.g[0]+M&4294967295,B.g[1]=B.g[1]+(Y+(U<<21&4294967295|U>>>11))&4294967295,B.g[2]=B.g[2]+Y&4294967295,B.g[3]=B.g[3]+Q&4294967295}a.prototype.v=function(B,M){M===void 0&&(M=B.length);const F=M-this.blockSize,K=this.C;let Y=this.h,Q=0;for(;Q<M;){if(Y==0)for(;Q<=F;)o(this,B,Q),Q+=this.blockSize;if(typeof B=="string"){for(;Q<M;)if(K[Y++]=B.charCodeAt(Q++),Y==this.blockSize){o(this,K),Y=0;break}}else for(;Q<M;)if(K[Y++]=B[Q++],Y==this.blockSize){o(this,K),Y=0;break}}this.h=Y,this.o+=M},a.prototype.A=function(){var B=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);B[0]=128;for(var M=1;M<B.length-8;++M)B[M]=0;M=this.o*8;for(var F=B.length-8;F<B.length;++F)B[F]=M&255,M/=256;for(this.v(B),B=Array(16),M=0,F=0;F<4;++F)for(let K=0;K<32;K+=8)B[M++]=this.g[F]>>>K&255;return B};function c(B,M){var F=f;return Object.prototype.hasOwnProperty.call(F,B)?F[B]:F[B]=M(B)}function d(B,M){this.h=M;const F=[];let K=!0;for(let Y=B.length-1;Y>=0;Y--){const Q=B[Y]|0;K&&Q==M||(F[Y]=Q,K=!1)}this.g=F}var f={};function y(B){return-128<=B&&B<128?c(B,function(M){return new d([M|0],M<0?-1:0)}):new d([B|0],B<0?-1:0)}function x(B){if(isNaN(B)||!isFinite(B))return _;if(B<0)return ce(x(-B));const M=[];let F=1;for(let K=0;B>=F;K++)M[K]=B/F|0,F*=4294967296;return new d(M,0)}function N(B,M){if(B.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(B.charAt(0)=="-")return ce(N(B.substring(1),M));if(B.indexOf("-")>=0)throw Error('number format error: interior "-" character');const F=x(Math.pow(M,8));let K=_;for(let Q=0;Q<B.length;Q+=8){var Y=Math.min(8,B.length-Q);const U=parseInt(B.substring(Q,Q+Y),M);Y<8?(Y=x(Math.pow(M,Y)),K=K.j(Y).add(x(U))):(K=K.j(F),K=K.add(x(U)))}return K}var _=y(0),S=y(1),V=y(16777216);r=d.prototype,r.m=function(){if(re(this))return-ce(this).m();let B=0,M=1;for(let F=0;F<this.g.length;F++){const K=this.i(F);B+=(K>=0?K:4294967296+K)*M,M*=4294967296}return B},r.toString=function(B){if(B=B||10,B<2||36<B)throw Error("radix out of range: "+B);if(z(this))return"0";if(re(this))return"-"+ce(this).toString(B);const M=x(Math.pow(B,6));var F=this;let K="";for(;;){const Y=be(F,M).g;F=I(F,Y.j(M));let Q=((F.g.length>0?F.g[0]:F.h)>>>0).toString(B);if(F=Y,z(F))return Q+K;for(;Q.length<6;)Q="0"+Q;K=Q+K}},r.i=function(B){return B<0?0:B<this.g.length?this.g[B]:this.h};function z(B){if(B.h!=0)return!1;for(let M=0;M<B.g.length;M++)if(B.g[M]!=0)return!1;return!0}function re(B){return B.h==-1}r.l=function(B){return B=I(this,B),re(B)?-1:z(B)?0:1};function ce(B){const M=B.g.length,F=[];for(let K=0;K<M;K++)F[K]=~B.g[K];return new d(F,~B.h).add(S)}r.abs=function(){return re(this)?ce(this):this},r.add=function(B){const M=Math.max(this.g.length,B.g.length),F=[];let K=0;for(let Y=0;Y<=M;Y++){let Q=K+(this.i(Y)&65535)+(B.i(Y)&65535),U=(Q>>>16)+(this.i(Y)>>>16)+(B.i(Y)>>>16);K=U>>>16,Q&=65535,U&=65535,F[Y]=U<<16|Q}return new d(F,F[F.length-1]&-2147483648?-1:0)};function I(B,M){return B.add(ce(M))}r.j=function(B){if(z(this)||z(B))return _;if(re(this))return re(B)?ce(this).j(ce(B)):ce(ce(this).j(B));if(re(B))return ce(this.j(ce(B)));if(this.l(V)<0&&B.l(V)<0)return x(this.m()*B.m());const M=this.g.length+B.g.length,F=[];for(var K=0;K<2*M;K++)F[K]=0;for(K=0;K<this.g.length;K++)for(let Y=0;Y<B.g.length;Y++){const Q=this.i(K)>>>16,U=this.i(K)&65535,gt=B.i(Y)>>>16,xe=B.i(Y)&65535;F[2*K+2*Y]+=U*xe,Ee(F,2*K+2*Y),F[2*K+2*Y+1]+=Q*xe,Ee(F,2*K+2*Y+1),F[2*K+2*Y+1]+=U*gt,Ee(F,2*K+2*Y+1),F[2*K+2*Y+2]+=Q*gt,Ee(F,2*K+2*Y+2)}for(B=0;B<M;B++)F[B]=F[2*B+1]<<16|F[2*B];for(B=M;B<2*M;B++)F[B]=0;return new d(F,0)};function Ee(B,M){for(;(B[M]&65535)!=B[M];)B[M+1]+=B[M]>>>16,B[M]&=65535,M++}function te(B,M){this.g=B,this.h=M}function be(B,M){if(z(M))throw Error("division by zero");if(z(B))return new te(_,_);if(re(B))return M=be(ce(B),M),new te(ce(M.g),ce(M.h));if(re(M))return M=be(B,ce(M)),new te(ce(M.g),M.h);if(B.g.length>30){if(re(B)||re(M))throw Error("slowDivide_ only works with positive integers.");for(var F=S,K=M;K.l(B)<=0;)F=Se(F),K=Se(K);var Y=Ae(F,1),Q=Ae(K,1);for(K=Ae(K,2),F=Ae(F,2);!z(K);){var U=Q.add(K);U.l(B)<=0&&(Y=Y.add(F),Q=U),K=Ae(K,1),F=Ae(F,1)}return M=I(B,Y.j(M)),new te(Y,M)}for(Y=_;B.l(M)>=0;){for(F=Math.max(1,Math.floor(B.m()/M.m())),K=Math.ceil(Math.log(F)/Math.LN2),K=K<=48?1:Math.pow(2,K-48),Q=x(F),U=Q.j(M);re(U)||U.l(B)>0;)F-=K,Q=x(F),U=Q.j(M);z(Q)&&(Q=S),Y=Y.add(Q),B=I(B,U)}return new te(Y,B)}r.B=function(B){return be(this,B).h},r.and=function(B){const M=Math.max(this.g.length,B.g.length),F=[];for(let K=0;K<M;K++)F[K]=this.i(K)&B.i(K);return new d(F,this.h&B.h)},r.or=function(B){const M=Math.max(this.g.length,B.g.length),F=[];for(let K=0;K<M;K++)F[K]=this.i(K)|B.i(K);return new d(F,this.h|B.h)},r.xor=function(B){const M=Math.max(this.g.length,B.g.length),F=[];for(let K=0;K<M;K++)F[K]=this.i(K)^B.i(K);return new d(F,this.h^B.h)};function Se(B){const M=B.g.length+1,F=[];for(let K=0;K<M;K++)F[K]=B.i(K)<<1|B.i(K-1)>>>31;return new d(F,B.h)}function Ae(B,M){const F=M>>5;M%=32;const K=B.g.length-F,Y=[];for(let Q=0;Q<K;Q++)Y[Q]=M>0?B.i(Q+F)>>>M|B.i(Q+F+1)<<32-M:B.i(Q+F);return new d(Y,B.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=N,gx=d}).apply(typeof Zb<"u"?Zb:typeof self<"u"?self:typeof window<"u"?window:{});var Wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};(function(){var r,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wd=="object"&&Wd];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var a=n(this);function o(h,v){if(v)e:{var w=a;h=h.split(".");for(var E=0;E<h.length-1;E++){var G=h[E];if(!(G in w))break e;w=w[G]}h=h[h.length-1],E=w[h],v=v(E),v!=E&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var w=[],E;for(E in v)Object.prototype.hasOwnProperty.call(v,E)&&w.push([E,v[E]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,w){return h.call.apply(h.bind,arguments)}function x(h,v,w){return x=y,x.apply(null,arguments)}function N(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var E=w.slice();return E.push.apply(E,arguments),h.apply(this,E)}}function _(h,v){function w(){}w.prototype=v.prototype,h.Z=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(E,G,Z){for(var we=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)we[Be-2]=arguments[Be];return v.prototype[G].apply(E,we)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function V(h){const v=h.length;if(v>0){const w=Array(v);for(let E=0;E<v;E++)w[E]=h[E];return w}return[]}function z(h,v){for(let E=1;E<arguments.length;E++){const G=arguments[E];var w=typeof G;if(w=w!="object"?w:G?Array.isArray(G)?"array":w:"null",w=="array"||w=="object"&&typeof G.length=="number"){w=h.length||0;const Z=G.length||0;h.length=w+Z;for(let we=0;we<Z;we++)h[w+we]=G[we]}else h.push(G)}}class re{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function ce(h){d.setTimeout(()=>{throw h},0)}function I(){var h=B;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Ee{constructor(){this.h=this.g=null}add(v,w){const E=te.get();E.set(v,w),this.h?this.h.next=E:this.g=E,this.h=E}}var te=new re(()=>new be,h=>h.reset());class be{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,Ae=!1,B=new Ee,M=()=>{const h=Promise.resolve(void 0);Se=()=>{h.then(F)}};function F(){for(var h;h=I();){try{h.h.call(h.g)}catch(w){ce(w)}var v=te;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}Ae=!1}function K(){this.u=this.u,this.C=this.C}K.prototype.u=!1,K.prototype.dispose=function(){this.u||(this.u=!0,this.N())},K.prototype[Symbol.dispose]=function(){this.dispose()},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return h})();function U(h){return/^[\s\xa0]*$/.test(h)}function gt(h,v){Y.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}_(gt,Y),gt.prototype.init=function(h,v){const w=this.type=h.type,E=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&gt.Z.h.call(this)},gt.prototype.h=function(){gt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),le=0;function fe(h,v,w,E,G){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!E,this.ha=G,this.key=++le,this.da=this.fa=!1}function ke(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function at(h,v,w){for(const E in h)v.call(w,h[E],E,h)}function W(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function ge(h){const v={};for(const w in h)v[w]=h[w];return v}const De="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(h,v){let w,E;for(let G=1;G<arguments.length;G++){E=arguments[G];for(w in E)h[w]=E[w];for(let Z=0;Z<De.length;Z++)w=De[Z],Object.prototype.hasOwnProperty.call(E,w)&&(h[w]=E[w])}}function Ne(h){this.src=h,this.g={},this.h=0}Ne.prototype.add=function(h,v,w,E,G){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const we=Re(h,v,E,G);return we>-1?(v=h[we],w||(v.fa=!1)):(v=new fe(v,this.src,Z,!!E,G),v.fa=w,h.push(v)),v};function Ye(h,v){const w=v.type;if(w in h.g){var E=h.g[w],G=Array.prototype.indexOf.call(E,v,void 0),Z;(Z=G>=0)&&Array.prototype.splice.call(E,G,1),Z&&(ke(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Re(h,v,w,E){for(let G=0;G<h.length;++G){const Z=h[G];if(!Z.da&&Z.listener==v&&Z.capture==!!w&&Z.ha==E)return G}return-1}var dt="closure_lm_"+(Math.random()*1e6|0),Qe={};function bs(h,v,w,E,G){if(Array.isArray(v)){for(let Z=0;Z<v.length;Z++)bs(h,v[Z],w,E,G);return null}return w=ot(w),h&&h[xe]?h.J(v,w,f(E)?!!E.capture:!1,G):An(h,v,w,!1,E,G)}function An(h,v,w,E,G,Z){if(!v)throw Error("Invalid event type");const we=f(G)?!!G.capture:!!G;let Be=Ie(h);if(Be||(h[dt]=Be=new Ne(h)),w=Be.add(v,w,E,we,Z),w.proxy)return w;if(E=sn(),w.proxy=E,E.src=h,E.listener=w,h.addEventListener)Q||(G=we),G===void 0&&(G=!1),h.addEventListener(v.toString(),E,G);else if(h.attachEvent)h.attachEvent(ur(v.toString()),E);else if(h.addListener&&h.removeListener)h.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return w}function sn(){function h(w){return v.call(h.src,h.listener,w)}const v=Te;return h}function Tr(h,v,w,E,G){if(Array.isArray(v))for(var Z=0;Z<v.length;Z++)Tr(h,v[Z],w,E,G);else E=f(E)?!!E.capture:!!E,w=ot(w),h&&h[xe]?(h=h.i,Z=String(v).toString(),Z in h.g&&(v=h.g[Z],w=Re(v,w,E,G),w>-1&&(ke(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete h.g[Z],h.h--)))):h&&(h=Ie(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Re(v,w,E,G)),(w=h>-1?v[h]:null)&&Er(w))}function Er(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[xe])Ye(v.i,h);else{var w=h.type,E=h.proxy;v.removeEventListener?v.removeEventListener(w,E,h.capture):v.detachEvent?v.detachEvent(ur(w),E):v.addListener&&v.removeListener&&v.removeListener(E),(w=Ie(v))?(Ye(w,h),w.h==0&&(w.src=null,v[dt]=null)):ke(h)}}}function ur(h){return h in Qe?Qe[h]:Qe[h]="on"+h}function Te(h,v){if(h.da)h=!0;else{v=new gt(v,this);const w=h.listener,E=h.ha||h.src;h.fa&&Er(h),h=w.call(E,v)}return h}function Ie(h){return h=h[dt],h instanceof Ne?h:null}var Ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(h){return typeof h=="function"?h:(h[Ve]||(h[Ve]=function(v){return h.handleEvent(v)}),h[Ve])}function st(){K.call(this),this.i=new Ne(this),this.M=this,this.G=null}_(st,K),st.prototype[xe]=!0,st.prototype.removeEventListener=function(h,v,w,E){Tr(this,h,v,w,E)};function nt(h,v){var w,E=h.G;if(E)for(w=[];E;E=E.G)w.push(E);if(h=h.M,E=v.type||v,typeof v=="string")v=new Y(v,h);else if(v instanceof Y)v.target=v.target||h;else{var G=v;v=new Y(E,h),ue(v,G)}G=!0;let Z,we;if(w)for(we=w.length-1;we>=0;we--)Z=v.g=w[we],G=Gt(Z,E,!0,v)&&G;if(Z=v.g=h,G=Gt(Z,E,!0,v)&&G,G=Gt(Z,E,!1,v)&&G,w)for(we=0;we<w.length;we++)Z=v.g=w[we],G=Gt(Z,E,!1,v)&&G}st.prototype.N=function(){if(st.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const w=h.g[v];for(let E=0;E<w.length;E++)ke(w[E]);delete h.g[v],h.h--}}this.G=null},st.prototype.J=function(h,v,w,E){return this.i.add(String(h),v,!1,w,E)},st.prototype.K=function(h,v,w,E){return this.i.add(String(h),v,!0,w,E)};function Gt(h,v,w,E){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let G=!0;for(let Z=0;Z<v.length;++Z){const we=v[Z];if(we&&!we.da&&we.capture==w){const Be=we.listener,Ue=we.ha||we.src;we.fa&&Ye(h.i,we),G=Be.call(Ue,E)!==!1&&G}}return G&&!E.defaultPrevented}function Jn(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Mt(h){h.g=Jn(()=>{h.g=null,h.i&&(h.i=!1,Mt(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Ar extends K{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Mt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(h){K.call(this),this.h=h,this.g={}}_(dr,K);var Qr=[];function wt(h){at(h.g,function(v,w){this.g.hasOwnProperty(w)&&Er(v)},h),h.g={}}dr.prototype.N=function(){dr.Z.N.call(this),wt(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rs=d.JSON.stringify,Os=d.JSON.parse,Pn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Cn(){}function Ss(){}var ps={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qn(){Y.call(this,"d")}_(Qn,Y);function Gs(){Y.call(this,"c")}_(Gs,Y);var Ts={},Xt=null;function fn(){return Xt=Xt||new st}Ts.Ia="serverreachability";function Es(h){Y.call(this,Ts.Ia,h)}_(Es,Y);function us(h){const v=fn();nt(v,new Es(v))}Ts.STAT_EVENT="statevent";function Xr(h,v){Y.call(this,Ts.STAT_EVENT,h),this.stat=v}_(Xr,Y);function Et(h){const v=fn();nt(v,new Xr(v,h))}Ts.Ja="timingevent";function Zr(h,v){Y.call(this,Ts.Ja,h),this.size=v}_(Zr,Y);function hr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Un(){this.g=!0}Un.prototype.ua=function(){this.g=!1};function Cr(h,v,w,E,G,Z){h.info(function(){if(h.g)if(Z){var we="",Be=Z.split("&");for(let p=0;p<Be.length;p++){var Ue=Be[p].split("=");if(Ue.length>1){const T=Ue[0];Ue=Ue[1];const R=T.split("_");we=R.length>=2&&R[1]=="type"?we+(T+"="+Ue+"&"):we+(T+"=redacted&")}}}else we=null;else we=Z;return"XMLHTTP REQ ("+E+") [attempt "+G+"]: "+v+`
`+w+`
`+we})}function Xn(h,v,w,E,G,Z,we){h.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+G+"]: "+v+`
`+w+`
`+Z+" "+we})}function Zn(h,v,w,E){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+kn(h,w)+(E?" "+E:"")})}function al(h,v){h.info(function(){return"TIMEOUT: "+v})}Un.prototype.info=function(){};function kn(h,v){if(!h.g)return v;if(!v)return null;try{const Z=JSON.parse(v);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var w=Z[h];if(!(w.length<2)){var E=w[1];if(Array.isArray(E)&&!(E.length<1)){var G=E[0];if(G!="noop"&&G!="stop"&&G!="close")for(let we=1;we<E.length;we++)E[we]=""}}}}return rs(Z)}catch{return v}}var xs={NO_ERROR:0,TIMEOUT:8},As={},kr;function mr(){}_(mr,Cn),mr.prototype.g=function(){return new XMLHttpRequest},kr=new mr;function _i(h){return encodeURIComponent(String(h))}function xa(h){var v=1;h=h.split(":");const w=[];for(;v>0&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function nn(h,v,w,E){this.j=h,this.i=v,this.l=w,this.S=E||1,this.V=new dr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fr}function fr(){this.i=null,this.g="",this.h=!1}var Dr={},is={};function gn(h,v,w){h.M=1,h.A=Ir(es(v)),h.u=w,h.R=!0,Cs(h,null)}function Cs(h,v){h.F=Date.now(),Ot(h),h.B=es(h.A);var w=h.B,E=h.S;Array.isArray(E)||(E=[String(E)]),qi(w.i,"t",E),h.C=0,w=h.j.L,h.h=new fr,h.g=D(h.j,w?v:null,!h.u),h.P>0&&(h.O=new Ar(x(h.Y,h,h.g),h.P)),v=h.V,w=h.g,E=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(Qr[0]=G.toString()),G=Qr);for(let Z=0;Z<G.length;Z++){const we=bs(w,G[Z],E||v.handleEvent,!1,v.h||v);if(!we)break;v.g[we.key]=we}v=h.J?ge(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),us(),Cr(h.i,h.v,h.B,h.l,h.S,h.u)}nn.prototype.ba=function(h){h=h.target;const v=this.O;v&&Us(h)==3?v.j():this.Y(h)},nn.prototype.Y=function(h){try{if(h==this.g)e:{const Be=Us(this.g),Ue=this.g.ya(),p=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||Pr(this.g)))){this.K||Be!=4||Ue==7||(Ue==8||p<=0?us(3):us(2)),ys(this);var v=this.g.ca();this.X=v;var w=ks(this);if(this.o=v==200,Xn(this.i,this.v,this.B,this.l,this.S,Be,v),this.o){if(this.U&&!this.L){t:{if(this.g){var E,G=this.g;if((E=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(E)){var Z=E;break t}}Z=null}if(h=Z)Zn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zs(this,h);else{this.o=!1,this.m=3,Et(12),Yt(this),Zt(this);break e}}if(this.R){h=!0;let T;for(;!this.K&&this.C<w.length;)if(T=Bn(this,w),T==is){Be==4&&(this.m=4,Et(14),h=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(T==Dr){this.m=4,Et(15),Zn(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else Zn(this.i,this.l,T,null),zs(this,T);if(Vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||w.length!=0||this.h.h||(this.m=1,Et(16),h=!1),this.o=this.o&&h,!h)Zn(this.i,this.l,w,"[Invalid Chunked Response]"),Yt(this),Zt(this);else if(w.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Br(we),we.P=!0,Et(11))}}else Zn(this.i,this.l,w,null),zs(this,w);Be==4&&Yt(this),this.o&&!this.K&&(Be==4?Fr(this.j,this):(this.o=!1,Ot(this)))}else ri(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),Yt(this),Zt(this)}}}catch{}finally{}};function ks(h){if(!Vt(h))return h.g.la();const v=Pr(h.g);if(v==="")return"";let w="";const E=v.length,G=Us(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Yt(h),Zt(h),"";h.h.i=new d.TextDecoder}for(let Z=0;Z<E;Z++)h.h.h=!0,w+=h.h.i.decode(v[Z],{stream:!(G&&Z==E-1)});return v.length=0,h.h.g+=w,h.C=0,h.h.g}function Vt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Bn(h,v){var w=h.C,E=v.indexOf(`
`,w);return E==-1?is:(w=Number(v.substring(w,E)),isNaN(w)?Dr:(E+=1,E+w>v.length?is:(v=v.slice(E,E+w),h.C=E+w,v)))}nn.prototype.cancel=function(){this.K=!0,Yt(this)};function Ot(h){h.T=Date.now()+h.H,pn(h,h.H)}function pn(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=hr(x(h.aa,h),v)}function ys(h){h.D&&(d.clearTimeout(h.D),h.D=null)}nn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(al(this.i,this.B),this.M!=2&&(us(),Et(17)),Yt(this),this.m=2,Zt(this)):pn(this,this.T-h)};function Zt(h){h.j.I==0||h.K||Fr(h.j,h)}function Yt(h){ys(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,wt(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function zs(h,v){try{var w=h.j;if(w.I!=0&&(w.g==h||Ht(w.h,h))){if(!h.L&&Ht(w.h,h)&&w.I==3){try{var E=w.Ba.g.parse(v)}catch{E=null}if(Array.isArray(E)&&E.length==3){var G=E;if(G[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)ci(w),vn(w);else break e;oi(w),Et(18)}}else w.xa=G[1],0<w.xa-w.K&&G[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=hr(x(w.Va,w),6e3));Lt(w.h)<=1&&w.ta&&(w.ta=void 0)}else b(w,11)}else if((h.L||w.g==h)&&ci(w),!U(v))for(G=w.Ba.g.parse(v),v=0;v<G.length;v++){let p=G[v];const T=p[0];if(!(T<=w.K))if(w.K=T,p=p[1],w.I==2)if(p[0]=="c"){w.M=p[1],w.ba=p[2];const R=p[3];R!=null&&(w.ka=R,w.j.info("VER="+w.ka));const A=p[4];A!=null&&(w.za=A,w.j.info("SVER="+w.za));const O=p[5];O!=null&&typeof O=="number"&&O>0&&(E=1.5*O,w.O=E,w.j.info("backChannelRequestTimeoutMs_="+E)),E=w;const H=h.g;if(H){const ie=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var Z=E.h;Z.g||ie.indexOf("spdy")==-1&&ie.indexOf("quic")==-1&&ie.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(rn(Z,Z.h),Z.h=null))}if(E.G){const ve=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;ve&&(E.wa=ve,zt(E.J,E.G,ve))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),E=w;var we=h;if(E.na=P(E,E.L?E.ba:null,E.W),we.L){He(E.h,we);var Be=we,Ue=E.O;Ue&&(Be.H=Ue),Be.D&&(ys(Be),Ot(Be)),E.g=we}else zn(E);w.i.length>0&&li(w)}else p[0]!="stop"&&p[0]!="close"||b(w,7);else w.I==3&&(p[0]=="stop"||p[0]=="close"?p[0]=="stop"?b(w,7):ai(w):p[0]!="noop"&&w.l&&w.l.qa(p),w.A=0)}}us(4)}catch{}}var Nt=class{constructor(h,v){this.g=h,this.map=v}};function Ds(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function At(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Lt(h){return h.h?1:h.g?h.g.size:0}function Ht(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function rn(h,v){h.g?h.g.add(v):h.h=v}function He(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Ds.prototype.cancel=function(){if(this.i=$t(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function $t(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.G);return v}return V(h.i)}var Rr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ya(h,v){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const E=h[w].indexOf("=");let G,Z=null;E>=0?(G=h[w].substring(0,E),Z=h[w].substring(E+1)):G=h[w],v(G,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Ys(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof Ys?(this.l=h.l,Je(this,h.j),this.o=h.o,this.g=h.g,Ct(this,h.u),this.h=h.h,ei(this,$e(h.i)),this.m=h.m):h&&(v=String(h).match(Rr))?(this.l=!1,Je(this,v[1]||"",!0),this.o=ji(v[2]||""),this.g=ji(v[3]||"",!0),Ct(this,v[4]),this.h=ji(v[5]||"",!0),ei(this,v[6]||"",!0),this.m=ji(v[7]||"")):(this.l=!1,this.i=new an(null,this.l))}Ys.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(ws(v,$i,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(ws(v,$i,!0),"@"),h.push(_i(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(ws(w,w.charAt(0)=="/"?Ls:Fe,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",ws(w,Ke)),h.join("")},Ys.prototype.resolve=function(h){const v=es(this);let w=!!h.j;w?Je(v,h.j):w=!!h.o,w?v.o=h.o:w=!!h.g,w?v.g=h.g:w=h.u!=null;var E=h.h;if(w)Ct(v,h.u);else if(w=!!h.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var G=v.h.lastIndexOf("/");G!=-1&&(E=v.h.slice(0,G+1)+E)}if(G=E,G==".."||G==".")E="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){E=G.lastIndexOf("/",0)==0,G=G.split("/");const Z=[];for(let we=0;we<G.length;){const Be=G[we++];Be=="."?E&&we==G.length&&Z.push(""):Be==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),E&&we==G.length&&Z.push("")):(Z.push(Be),E=!0)}E=Z.join("/")}else E=G}return w?v.h=E:w=h.i.toString()!=="",w?ei(v,$e(h.i)):w=!!h.m,w&&(v.m=h.m),v};function es(h){return new Ys(h)}function Je(h,v,w){h.j=w?ji(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ct(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function ei(h,v,w){v instanceof an?(h.i=v,Si(h.i,h.l)):(w||(v=ws(v,gr)),h.i=new an(v,h.l))}function zt(h,v,w){h.i.set(v,w)}function Ir(h){return zt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ji(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ws(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,Fi),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Fi(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var $i=/[#\/\?@]/g,Fe=/[#\?:]/g,Ls=/[#\?]/g,gr=/[#\?@]/g,Ke=/#/g;function an(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Dn(h){h.g||(h.g=new Map,h.h=0,h.i&&ya(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}r=an.prototype,r.add=function(h,v){Dn(this),this.i=null,h=yn(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function xn(h,v){Dn(h),v=yn(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function zi(h,v){return Dn(h),v=yn(h,v),h.g.has(v)}r.forEach=function(h,v){Dn(this),this.g.forEach(function(w,E){w.forEach(function(G){h.call(v,G,E,this)},this)},this)};function ti(h,v){Dn(h);let w=[];if(typeof v=="string")zi(h,v)&&(w=w.concat(h.g.get(yn(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)w=w.concat(h[v]);return w}r.set=function(h,v){return Dn(this),this.i=null,h=yn(this,h),zi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},r.get=function(h,v){return h?(h=ti(this,h),h.length>0?String(h[0]):v):v};function qi(h,v,w){xn(h,v),w.length>0&&(h.i=null,h.g.set(yn(h,v),V(w)),h.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let E=0;E<v.length;E++){var w=v[E];const G=_i(w);w=ti(this,w);for(let Z=0;Z<w.length;Z++){let we=G;w[Z]!==""&&(we+="="+_i(w[Z])),h.push(we)}}return this.i=h.join("&")};function $e(h){const v=new an;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function yn(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Si(h,v){v&&!h.j&&(Dn(h),h.i=null,h.g.forEach(function(w,E){const G=E.toLowerCase();E!=G&&(xn(this,E),qi(this,G,w))},h)),h.j=v}function Pt(h,v){const w=new Un;if(d.Image){const E=new Image;E.onload=N(Ps,w,"TestLoadImage: loaded",!0,v,E),E.onerror=N(Ps,w,"TestLoadImage: error",!1,v,E),E.onabort=N(Ps,w,"TestLoadImage: abort",!1,v,E),E.ontimeout=N(Ps,w,"TestLoadImage: timeout",!1,v,E),d.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=h}else v(!1)}function pr(h,v){const w=new Un,E=new AbortController,G=setTimeout(()=>{E.abort(),Ps(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:E.signal}).then(Z=>{clearTimeout(G),Z.ok?Ps(w,"TestPingServer: ok",!0,v):Ps(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),Ps(w,"TestPingServer: error",!1,v)})}function Ps(h,v,w,E,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),E(w)}catch{}}function si(){this.g=new Pn}function ni(h){this.i=h.Sb||null,this.h=h.ab||!1}_(ni,Cn),ni.prototype.g=function(){return new Mr(this.i,this.h)};function Mr(h,v){st.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Mr,st),r=Mr.prototype,r.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Ut(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mt(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ut(this)),this.g&&(this.readyState=3,Ut(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Or(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Or(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?mt(this):Ut(this),this.readyState==3&&Or(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,mt(this))},r.Na=function(h){this.g&&(this.response=h,mt(this))},r.ga=function(){this.g&&mt(this)};function mt(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ut(h)}r.setRequestHeader=function(h,v){this.A.append(h,v)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function Ut(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ws(h){let v="";return at(h,function(w,E){v+=E,v+=":",v+=w,v+=`\r
`}),v}function ds(h,v,w){e:{for(E in w){var E=!1;break e}E=!0}E||(w=Ws(w),typeof h=="string"?w!=null&&_i(w):zt(h,v,w))}function Tt(h){st.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Tt,st);var Fn=/^https?$/i,Vi=["POST","PUT"];r=Tt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,v,w,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kr.g(),this.g.onreadystatechange=S(x(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Z){Lr(this,Z);return}if(h=w||"",w=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var G in E)w.set(G,E[G]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const Z of E.keys())w.set(Z,E.get(Z));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Vi,v,void 0)>=0)||E||G||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,we]of w)this.g.setRequestHeader(Z,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){Lr(this,Z)}};function Lr(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Rn(h),Ns(h)}function Rn(h){h.A||(h.A=!0,nt(h,"complete"),nt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,nt(this,"complete"),nt(this,"abort"),Ns(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ns(this,!0)),Tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?xr(this):this.Xa())},r.Xa=function(){xr(this)};function xr(h){if(h.h&&typeof c<"u"){if(h.v&&Us(h)==4)setTimeout(h.Ca.bind(h),0);else if(nt(h,"readystatechange"),Us(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var E;if(E=Z===0){let we=String(h.D).match(Rr)[1]||null;!we&&d.self&&d.self.location&&(we=d.self.location.protocol.slice(0,-1)),E=!Fn.test(we?we.toLowerCase():"")}w=E}if(w)nt(h,"complete"),nt(h,"success");else{h.o=6;try{var G=Us(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",Rn(h)}}finally{Ns(h)}}}}function Ns(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,v||nt(h,"ready");try{w.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Us(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Us(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Os(v)}};function Pr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ri(h){const v={};h=(h.g&&Us(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<h.length;E++){if(U(h[E]))continue;var w=xa(h[E]);const G=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=v[G]||[];v[G]=Z,Z.push(w)}W(v,function(E){return E.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ur(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function ii(h){this.za=0,this.i=[],this.j=new Un,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ur("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ur("baseRetryDelayMs",5e3,h),this.Za=Ur("retryDelaySeedMs",1e4,h),this.Ta=Ur("forwardChannelMaxRetries",2,h),this.va=Ur("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ds(h&&h.concurrentRequestLimit),this.Ba=new si,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ii.prototype,r.ka=8,r.I=1,r.connect=function(h,v,w,E){Et(0),this.W=h,this.H=v||{},w&&E!==void 0&&(this.H.OSID=w,this.H.OAID=E),this.F=this.X,this.J=P(this,null,this.W),li(this)};function ai(h){if(er(h),h.I==3){var v=h.V++,w=es(h.J);if(zt(w,"SID",h.M),zt(w,"RID",v),zt(w,"TYPE","terminate"),yr(h,w),v=new nn(h,h.j,v),v.M=2,v.A=Ir(es(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.A,w=!0),w||(v.g=D(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ot(v)}k(h)}function vn(h){h.g&&(Br(h),h.g.cancel(),h.g=null)}function er(h){vn(h),h.v&&(d.clearTimeout(h.v),h.v=null),ci(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function li(h){if(!At(h.h)&&!h.m){h.m=!0;var v=h.Ea;Se||M(),Ae||(Se(),Ae=!0),B.add(v,h),h.D=0}}function $n(h,v){return Lt(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=hr(x(h.Ea,h,v),Hi(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new nn(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=ge(Z),ue(Z,this.U)):Z=this.U),this.u!==null||this.R||(G.J=Z,Z=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var E=this.i[w];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(v+=E,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=tr(this,G,v),w=es(this.J),zt(w,"RID",h),zt(w,"CVER",22),this.G&&zt(w,"X-HTTP-Session-Id",this.G),yr(this,w),Z&&(this.R?v="headers="+_i(Ws(Z))+"&"+v:this.u&&ds(w,this.u,Z)),rn(this.h,G),this.Ra&&zt(w,"TYPE","init"),this.S?(zt(w,"$req",v),zt(w,"SID","null"),G.U=!0,gn(G,w,null)):gn(G,w,v),this.I=2}}else this.I==3&&(h?va(this,h):this.i.length==0||At(this.h)||va(this))};function va(h,v){var w;v?w=v.l:w=h.V++;const E=es(h.J);zt(E,"SID",h.M),zt(E,"RID",w),zt(E,"AID",h.K),yr(h,E),h.u&&h.o&&ds(E,h.u,h.o),w=new nn(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),v&&(h.i=v.G.concat(h.i)),v=tr(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),rn(h.h,w),gn(w,E,v)}function yr(h,v){h.H&&at(h.H,function(w,E){zt(v,E,w)}),h.l&&at({},function(w,E){zt(v,E,w)})}function tr(h,v,w){w=Math.min(h.i.length,w);const E=h.l?x(h.l.Ka,h.l,h):null;e:{var G=h.i;let Be=-1;for(;;){const Ue=["count="+w];Be==-1?w>0?(Be=G[0].g,Ue.push("ofs="+Be)):Be=0:Ue.push("ofs="+Be);let p=!0;for(let T=0;T<w;T++){var Z=G[T].g;const R=G[T].map;if(Z-=Be,Z<0)Be=Math.max(0,G[T].g-100),p=!1;else try{Z="req"+Z+"_"||"";try{var we=R instanceof Map?R:Object.entries(R);for(const[A,O]of we){let H=O;f(O)&&(H=rs(O)),Ue.push(Z+A+"="+encodeURIComponent(H))}}catch(A){throw Ue.push(Z+"type="+encodeURIComponent("_badmap")),A}}catch{E&&E(R)}}if(p){we=Ue.join("&");break e}}we=void 0}return h=h.i.splice(0,w),v.G=h,we}function zn(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;Se||M(),Ae||(Se(),Ae=!0),B.add(v,h),h.A=0}}function oi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=hr(x(h.Da,h),Hi(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Ti(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=hr(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),vn(this),Ti(this))};function Br(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Ti(h){h.g=new nn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=es(h.na);zt(v,"RID","rpc"),zt(v,"SID",h.M),zt(v,"AID",h.K),zt(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&zt(v,"TO",h.ia),zt(v,"TYPE","xmlhttp"),yr(h,v),h.u&&h.o&&ds(v,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Ir(es(v)),w.u=null,w.R=!0,Cs(w,h)}r.Va=function(){this.C!=null&&(this.C=null,vn(this),oi(this),Et(19))};function ci(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Fr(h,v){var w=null;if(h.g==v){ci(h),Br(h),h.g=null;var E=2}else if(Ht(h.h,v))w=v.G,He(h.h,v),E=1;else return;if(h.I!=0){if(v.o)if(E==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var G=h.D;E=fn(),nt(E,new Zr(E,w)),li(h)}else zn(h);else if(G=v.m,G==3||G==0&&v.X>0||!(E==1&&$n(h,v)||E==2&&oi(h)))switch(w&&w.length>0&&(v=h.h,v.i=v.i.concat(w)),G){case 1:b(h,5);break;case 4:b(h,10);break;case 3:b(h,6);break;default:b(h,2)}}}function Hi(h,v){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*v}function b(h,v){if(h.j.info("Error code "+v),v==2){var w=x(h.bb,h),E=h.Ua;const G=!E;E=new Ys(E||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Je(E,"https"),Ir(E),G?Pt(E.toString(),w):pr(E.toString(),w)}else Et(2);h.I=0,h.l&&h.l.pa(v),k(h),er(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function k(h){if(h.I=0,h.ja=[],h.l){const v=$t(h.h);(v.length!=0||h.i.length!=0)&&(z(h.ja,v),z(h.ja,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.oa()}}function P(h,v,w){var E=w instanceof Ys?es(w):new Ys(w);if(E.g!="")v&&(E.g=v+"."+E.g),Ct(E,E.u);else{var G=d.location;E=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;const Z=new Ys(null);E&&Je(Z,E),v&&(Z.g=v),G&&Ct(Z,G),w&&(Z.h=w),E=Z}return w=h.G,v=h.wa,w&&v&&zt(E,w,v),zt(E,"VER",h.ka),yr(h,E),E}function D(h,v,w){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new Tt(new ni({ab:w})):new Tt(h.ma),v.Fa(h.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function $(){}r=$.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function ne(h,v){st.call(this),this.g=new ii(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!U(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!U(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Oe(this)}_(ne,st),ne.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ne.prototype.close=function(){ai(this.g)},ne.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=rs(h),h=w);v.i.push(new Nt(v.Ya++,h)),v.I==3&&li(v)},ne.prototype.N=function(){this.g.l=null,delete this.j,ai(this.g),delete this.g,ne.Z.N.call(this)};function de(h){Qn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}_(de,Qn);function he(){Gs.call(this),this.status=1}_(he,Gs);function Oe(h){this.g=h}_(Oe,$),Oe.prototype.ra=function(){nt(this.g,"a")},Oe.prototype.qa=function(h){nt(this.g,new de(h))},Oe.prototype.pa=function(h){nt(this.g,new he)},Oe.prototype.oa=function(){nt(this.g,"b")},ne.prototype.send=ne.prototype.o,ne.prototype.open=ne.prototype.m,ne.prototype.close=ne.prototype.close,xs.NO_ERROR=0,xs.TIMEOUT=8,xs.HTTP_ERROR=6,As.COMPLETE="complete",Ss.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",st.prototype.listen=st.prototype.J,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa}).apply(typeof Wd<"u"?Wd:typeof self<"u"?self:typeof window<"u"?window:{});const ew="@firebase/firestore",tw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=new Rp("@firebase/firestore");function bi(r,...e){if(Xo.logLevel<=Jt.DEBUG){const n=e.map(px);Xo.debug(`Firestore (${Bu}): ${r}`,...n)}}function P_(r,...e){if(Xo.logLevel<=Jt.ERROR){const n=e.map(px);Xo.error(`Firestore (${Bu}): ${r}`,...n)}}function r3(r,...e){if(Xo.logLevel<=Jt.WARN){const n=e.map(px);Xo.warn(`Firestore (${Bu}): ${r}`,...n)}}function px(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(r,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,U_(r,a,n)}function U_(r,e,n){let a=`FIRESTORE (${Bu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw P_(a),new Error(a)}function ou(r,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,r||U_(e,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class It extends ga{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Gn.UNAUTHENTICATED)))}shutdown(){}}class a3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class l3{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ou(this.o===void 0,42304);let a=this.i;const o=y=>this.i!==a?(a=this.i,n(y)):Promise.resolve();let c=new cu;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new cu,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},f=y=>{bi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>f(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(bi("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new cu)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(bi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ou(typeof a.accessToken=="string",31837,{l:a}),new B_(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ou(e===null||typeof e=="string",2055,{h:e}),new Gn(e)}}class o3{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class c3{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new o3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yh(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ou(this.o===void 0,3512);const a=c=>{c.error!=null&&bi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,bi("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const o=c=>{bi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):bi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ou(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sw(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<r;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=d3(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<n&&(a+=e.charAt(o[c]%62))}return a}}function nl(r,e){return r<e?-1:r>e?1:0}function m3(r,e){const n=Math.min(r.length,e.length);for(let a=0;a<n;a++){const o=r.charAt(a),c=e.charAt(a);if(o!==c)return jg(o)===jg(c)?nl(o,c):jg(o)?1:-1}return nl(r.length,e.length)}const f3=55296,g3=57343;function jg(r){const e=r.charCodeAt(0);return e>=f3&&e<=g3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="__name__";class Mi{constructor(e,n,a){n===void 0?n=0:n>e.length&&ju(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&ju(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const c=Mi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return nl(e.length,n.length)}static compareSegments(e,n){const a=Mi.isNumericId(e),o=Mi.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?Mi.extractNumericId(e).compare(Mi.extractNumericId(n)):m3(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gx.fromString(e.substring(4,e.length-2))}}class gi extends Mi{construct(e,n,a){return new gi(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new It(Rt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new gi(n)}static emptyPath(){return new gi([])}}const p3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cl extends Mi{construct(e,n,a){return new Cl(e,n,a)}static isValidIdentifier(e){return p3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nw}static keyField(){return new Cl([nw])}static fromServerFormat(e){const n=[];let a="",o=0;const c=()=>{if(a.length===0)throw new It(Rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let d=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new It(Rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new It(Rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=y,o+=2}else f==="`"?(d=!d,o++):f!=="."||d?(a+=f,o++):(c(),o++)}if(c(),d)throw new It(Rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cl(n)}static emptyPath(){return new Cl([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.path=e}static fromPath(e){return new Il(gi.fromString(e))}static fromName(e){return new Il(gi.fromString(e).popFirst(5))}static empty(){return new Il(gi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gi.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Il(new gi(e.slice()))}}function x3(r,e,n,a){if(e===!0&&a===!0)throw new It(Rt.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function y3(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function v3(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ju(12329,{type:typeof r})}function b3(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new It(Rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=v3(r);throw new It(Rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(r,e){const n={typeString:r};return e&&(n.value=e),n}function Fu(r,e){if(!y3(r))throw new It(Rt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){n=`JSON missing required field: '${a}'`;break}const d=r[a];if(o&&typeof d!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${a}' field to equal '${c.value}'`;break}}if(n)throw new It(Rt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=-62135596800,iw=1e6;class Oi{static now(){return Oi.fromMillis(Date.now())}static fromDate(e){return Oi.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*iw);return new Oi(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new It(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new It(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rw)throw new It(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iw}_compareTo(e){return this.seconds===e.seconds?nl(this.nanoseconds,e.nanoseconds):nl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Oi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fu(e,Oi._jsonSchema))return new Oi(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Oi._jsonSchemaVersion="firestore/timestamp/1.0",Oi._jsonSchema={type:Hs("string",Oi._jsonSchemaVersion),seconds:Hs("number"),nanoseconds:Hs("number")};function w3(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new N3("Invalid base64 string: "+c):c}})(e);return new $l(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new $l(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$l.EMPTY_BYTE_STRING=new $l("");const lp="(default)";class Ch{constructor(e,n){this.projectId=e,this.database=n||lp}static empty(){return new Ch("","")}get isDefaultDatabase(){return this.database===lp}isEqual(e){return e instanceof Ch&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,n=null,a=[],o=[],c=null,d="F",f=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function j3(r){return new _3(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aw,Dt;(Dt=aw||(aw={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new gx([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=1048576;function Sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,n,a=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&bi("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,a,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new cu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,c){const d=Date.now()+a,f=new xx(e,n,d,o,c);return f.start(a),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new It(Rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var lw,ow;(ow=lw||(lw={})).Ma="default",ow.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="firestore.googleapis.com",uw=!0;class dw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new It(Rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F_,this.ssl=uw}else this.host=e.host,this.ssl=e.ssl??uw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=S3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T3)throw new It(Rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=A3(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new It(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new It(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new It(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $_{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new It(Rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new It(Rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new i3;switch(a.type){case"firstParty":return new c3(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new It(Rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=cw.get(n);a&&(bi("ComponentProvider","Removing Datastore"),cw.delete(n),a.terminate())})(this),Promise.resolve()}}function C3(r,e,n,a={}){var x;r=b3(r,$_);const o=Hl(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${n}`;o&&($h(`https://${f}`),zh("Firestore",!0)),c.host!==F_&&c.host!==f&&r3("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:f,ssl:o,emulatorOptions:a};if(!gu(y,d)&&(r._setSettings(y),a.mockUserToken)){let N,_;if(typeof a.mockUserToken=="string")N=a.mockUserToken,_=Gn.MOCK_USER;else{N=Dp(a.mockUserToken,(x=r._app)==null?void 0:x.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new It(Rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Gn(S)}r._authCredentials=new a3(new B_(N,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new yx(this.firestore,e,this._query)}}class Li{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vx(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Li(this.firestore,e,this._key)}toJSON(){return{type:Li._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Fu(n,Li._jsonSchema))return new Li(e,a||null,new Il(gi.fromString(n.referencePath)))}}Li._jsonSchemaVersion="firestore/documentReference/1.0",Li._jsonSchema={type:Hs("string",Li._jsonSchemaVersion),referencePath:Hs("string")};class vx extends yx{constructor(e,n,a){super(e,n,j3(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Li(this.firestore,null,new Il(e))}withConverter(e){return new vx(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="AsyncQueue";class mw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new E3(this,"async_queue_retry"),this._c=()=>{const a=Sg();a&&bi(hw,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=Sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new cu;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!w3(e))throw e;bi(hw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,P_("INTERNAL UNHANDLED ERROR: ",fw(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=xx.createAndSchedule(this,e,n,a,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&ju(47125,{Pc:fw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function fw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class k3 extends $_{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new mw,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mw(e),this._firestoreClient=void 0,await e}}}function D3(r,e){const n=typeof r=="object"?r:Cu(),a=typeof r=="string"?r:lp,o=Gl(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=Fh("firestore");c&&C3(o,...c)}return o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oa($l.fromBase64String(e))}catch(n){throw new It(Rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oa($l.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fu(e,oa._jsonSchema))return oa.fromBase64String(e.bytes)}}oa._jsonSchemaVersion="firestore/bytes/1.0",oa._jsonSchema={type:Hs("string",oa._jsonSchemaVersion),bytes:Hs("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new It(Rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cl(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new It(Rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new It(Rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nl(this._lat,e._lat)||nl(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ol._jsonSchemaVersion}}static fromJSON(e){if(Fu(e,Ol._jsonSchema))return new Ol(e.latitude,e.longitude)}}Ol._jsonSchemaVersion="firestore/geoPoint/1.0",Ol._jsonSchema={type:Hs("string",Ol._jsonSchemaVersion),latitude:Hs("number"),longitude:Hs("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ll._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fu(e,Ll._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ll(e.vectorValues);throw new It(Rt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ll._jsonSchemaVersion="firestore/vectorValue/1.0",Ll._jsonSchema={type:Hs("string",Ll._jsonSchemaVersion),vectorValues:Hs("object")};const R3=new RegExp("[~\\*/\\[\\]]");function I3(r,e,n){if(e.search(R3)>=0)throw gw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r);try{return new z_(...e.split("."))._internalPath}catch{throw gw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r)}}function gw(r,e,n,a,o){let c=`Function ${e}() called with invalid data`;c+=". ";let d="";return new It(Rt.INVALID_ARGUMENT,c+r+d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n,a,o,c){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Li(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(V_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class M3 extends q_{data(){return super.data()}}function V_(r,e){return typeof e=="string"?I3(r,e):e instanceof z_?e._internalPath:e._delegate._internalPath}class Kd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $o extends q_{constructor(e,n,a,o,c,d){super(e,n,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(V_("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new It(Rt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$o._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$o._jsonSchemaVersion="firestore/documentSnapshot/1.0",$o._jsonSchema={type:Hs("string",$o._jsonSchemaVersion),bundleSource:Hs("string","DocumentSnapshot"),bundleName:Hs("string"),bundle:Hs("string")};class rh extends $o{data(e={}){return super.data(e)}}class uu{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Kd(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new rh(this._firestore,this._userDataWriter,a.key,a,new Kd(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new It(Rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((f=>{const y=new rh(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Kd(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const y=new rh(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Kd(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let x=-1,N=-1;return f.type!==0&&(x=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),N=d.indexOf(f.doc.key)),{type:O3(f.type),doc:y,oldIndex:x,newIndex:N}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new It(Rt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=h3.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function O3(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ju(61501,{type:r})}}uu._jsonSchemaVersion="firestore/querySnapshot/1.0",uu._jsonSchema={type:Hs("string",uu._jsonSchemaVersion),bundleSource:Hs("string","QuerySnapshot"),bundleName:Hs("string"),bundle:Hs("string")};(function(e,n=!0){(function(o){Bu=o})(Mp),Ni(new Kr("firestore",((a,{instanceIdentifier:o,options:c})=>{const d=a.getProvider("app").getImmediate(),f=new k3(new l3(a.getProvider("auth-internal")),new u3(d,a.getProvider("app-check-internal")),(function(x,N){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new It(Rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ch(x.options.projectId,N)})(d,o),d);return c={useFetchStreams:n,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),On(ew,tw,e),On(ew,tw,"esm2020")})();const dm={apiKey:"AIzaSyAkooeomw80N2p89zUaSB5L2AwoB-SSpKg",authDomain:"tradingpourlesnuls-e7da4.firebaseapp.com",databaseURL:"https://tradingpourlesnuls-e7da4-default-rtdb.firebaseio.com",projectId:"tradingpourlesnuls-e7da4",storageBucket:"tradingpourlesnuls-e7da4.appspot.com",messagingSenderId:"742975995598",appId:"1:742975995598:web:a873ce4b7b3fb5af899a9f",measurementId:"G-4SVCDJXSYN"},L3=Wh(dm);D3(L3);const H_=Wh(dm),os=D_(H_,dm.databaseURL);e3(H_);const kl=async r=>{try{const e=Object.fromEntries(Object.entries(r).filter(([o,c])=>c!==void 0));console.log("🧹 Message nettoyé avant envoi Firebase:",e);const n=ls(os,"messages");return{id:Lu(n,{...e,timestamp:fx()}).key||"",content:e.content,author:e.author,author_type:e.author_type,author_avatar:e.author_avatar,timestamp:new Date().toISOString(),channel_id:e.channel_id,attachment_data:e.attachment_data,attachment_type:e.attachment_type,attachment_name:e.attachment_name}}catch(e){return console.error("Erreur ajout message Firebase:",e),null}},bx=async(r,e=50)=>{try{console.log(`🔍 Chargement de ${e} messages pour ${r}...`);const n=performance.now(),a=ls(os,"messages"),o=Qa(a,Fl("channel_id"),Uu(r),Ja(e)),c=await yi(o),d=[];c.exists()&&c.forEach(y=>{const x=y.val();d.push({id:y.key,...x})}),d.sort((y,x)=>Number(y.timestamp)-Number(x.timestamp));const f=performance.now();return console.log(`✅ ${d.length} messages chargés pour ${r} en ${Math.round(f-n)}ms`),d}catch(n){return console.error("Erreur récupération messages Firebase:",n),[]}},kh=(r,e)=>{const n=ls(os,"messages"),a=Qa(n,Fl("channel_id"),Uu(r),Ja(3)),o=new Set;return{unsubscribe:lc(a,d=>{d.forEach(f=>{const y=f.val(),x=f.key;o.has(x)||(o.add(x),e({id:x,...y}))})})}},ih=async r=>{try{console.log("🚀 Conversion image en base64:",r.name,"Taille:",r.size);const e=new FileReader;return new Promise(n=>{e.onload=a=>{var c;const o=(c=a.target)==null?void 0:c.result;console.log("✅ Image convertie en base64"),n(o)},e.readAsDataURL(r)})}catch(e){return console.error("💥 ERREUR conversion base64:",e),null}},op=async r=>{try{const e=ls(os,"signals"),n=await yi(e),a=n.exists()?Object.values(n.val()):[],o=String(a.length+1).padStart(3,"0"),c=ls(os,"signals");return{id:Lu(c,{...r,referenceNumber:`#${o}`,timestamp:fx()}).key,...r,referenceNumber:`#${o}`,timestamp:new Date().toISOString()}}catch(e){return console.error("Erreur ajout signal Firebase:",e),null}},ua=async(r,e=3,n)=>{try{console.log(`🔍 Chargement de ${e} signaux pour ${r}...`);const a=performance.now(),o=ls(os,"signals");let c=[];if(r&&r!=="all"&&c.push(Fl("channel_id"),Uu(r)),n){const d=Qa(o,...c,Fl("timestamp"),A_(n),Ja(e)),f=await yi(d),y=[];f.exists()&&f.forEach(N=>{const _=N.val();y.push({id:N.key,..._})}),y.sort((N,_)=>new Date(N.timestamp).getTime()-new Date(_.timestamp).getTime());const x=performance.now();return console.log(`✅ ${y.length} signaux chargés pour ${r} en ${Math.round(x-a)}ms`),y}else{const d=r&&r!=="all"?Qa(o,...c,Ja(e)):Qa(o,Ja(e)),f=await yi(d),y=[];f.exists()&&f.forEach(N=>{const _=N.val();y.push({id:N.key,..._})}),y.sort((N,_)=>new Date(N.timestamp).getTime()-new Date(_.timestamp).getTime());const x=performance.now();return console.log(`✅ ${y.length} signaux chargés pour ${r} en ${Math.round(x-a)}ms`),y}}catch(a){return console.error("❌ Erreur récupération signaux Firebase:",a),[]}},Dh=(r,e)=>{const n=ls(os,"signals"),a=Qa(n,Fl("channel_id"),Uu(r),Ja(3));return{unsubscribe:lc(a,c=>{console.log("🔄 Signaux temps réel reçus pour",r,":",c.numChildren()),c.forEach(d=>{const f=d.val(),y=d.key;e({id:y,...f})})})}},ah=async(r,e,n,a)=>{try{const o=ls(os,`signals/${r}`);return await Jo(o,{status:e,pnl:n}),!0}catch(o){return console.error("Erreur mise à jour signal Firebase:",o),!1}},cp=async(r,e)=>{try{const n=ls(os,`signals/${r}`);return await Jo(n,{reactions:e}),!0}catch(n){return console.error("Erreur mise à jour réactions Firebase:",n),!1}},wx=async(r,e)=>{try{const n=ls(os,`messageReactions/${r}`);return await Jo(n,e),console.log("✅ Réactions message mises à jour dans Firebase:",r,e),!0}catch(n){return console.error("❌ Erreur mise à jour réactions message Firebase:",n),!1}},Nx=async r=>{try{const e=ls(os,`messageReactions/${r}`),n=await yi(e);return n.exists()?n.val():null}catch(e){return console.error("❌ Erreur récupération réactions message Firebase:",e),null}},up=()=>"user_unified",oc=async()=>{try{const{getCurrentUser:r}=await $s(async()=>{const{getCurrentUser:n}=await Promise.resolve().then(()=>Pk);return{getCurrentUser:n}},void 0),e=await r();if(e)return localStorage.setItem("user_id",e.id),console.log("🔄 ID utilisateur Supabase synchronisé:",e.id),e.id;{const n=up();return localStorage.setItem("user_id",n),console.log("🔄 ID utilisateur fallback synchronisé:",n),n}}catch(r){console.error("❌ Erreur synchronisation ID utilisateur:",r);const e=up();return localStorage.setItem("user_id",e),e}},G_=async r=>{try{console.log("🚀 Ajout trade personnel Firebase:",r);const e=await oc();let n,a;r.image1&&typeof r.image1=="object"&&r.image1 instanceof File?n=await new Promise(x=>{const N=new FileReader;N.onload=()=>x(N.result),N.readAsDataURL(r.image1)}):typeof r.image1=="string"&&(n=r.image1),r.image2&&typeof r.image2=="object"&&r.image2 instanceof File?a=await new Promise(x=>{const N=new FileReader;N.onload=()=>x(N.result),N.readAsDataURL(r.image2)}):typeof r.image2=="string"&&(a=r.image2);const o={...r,image1:n||null,image2:a||null,user_id:e,created_at:new Date().toISOString()},c=Object.fromEntries(Object.entries(o).filter(([x,N])=>N!==void 0)),d=ls(os,`personal_trades/${e}`),f=Lu(d);await Pu(f,c);const y={id:f.key,...c};return console.log("✅ Trade personnel sauvegardé Firebase:",y),y}catch(e){return console.error("❌ Erreur ajout trade personnel Firebase:",e),null}},Y_=async(r=100)=>{try{console.log("📊 Récupération trades personnels Firebase...");const e=await oc(),n=ls(os,`personal_trades/${e}`),a=Qa(n,Fl("created_at"),Ja(r)),o=await yi(a);console.log("🔍 Snapshot Firebase:",o.exists()?"EXISTE":"VIDE"),console.log("🔍 Données snapshot:",o.val());const c=[];return o.exists()&&o.forEach(d=>{const f=d.val();console.log("📋 Trade trouvé:",d.key,f),c.push({id:d.key,...f})}),c.sort((d,f)=>new Date(f.created_at||f.timestamp).getTime()-new Date(d.created_at||d.timestamp).getTime()),console.log(`✅ ${c.length} trades personnels récupérés Firebase`),console.log("📋 Détail des trades:",c),c}catch(e){return console.error("❌ Erreur récupération trades personnels Firebase:",e),[]}},W_=async r=>{try{console.log("🗑️ Suppression message Firebase:",r);const e=ls(os,`messages/${r}`);return await cm(e),console.log("✅ Message supprimé Firebase"),!0}catch(e){return console.error("❌ Erreur suppression message Firebase:",e),!1}},lh=async r=>{try{console.log("🗑️ Suppression trade personnel Firebase:",r);const e=ls(os,`personal_trades/${r}`);return await cm(e),console.log("✅ Trade personnel supprimé Firebase"),!0}catch(e){return console.error("❌ Erreur suppression trade personnel Firebase:",e),!1}},K_=(r,e)=>{let n=null;return(async()=>{try{console.log("👂 Démarrage écoute temps réel trades personnels...");const o=await oc(),{ref:c,onValue:d}=await $s(async()=>{const{ref:x,onValue:N}=await Promise.resolve().then(()=>Qo);return{ref:x,onValue:N}},void 0),{database:f}=await $s(async()=>{const{database:x}=await Promise.resolve().then(()=>Zo);return{database:x}},void 0),y=c(f,`personal_trades/${o}`);n=d(y,x=>{console.log("🔄 Mise à jour temps réel trades détectée");const N=[];x.exists()&&x.forEach(_=>{const S=_.val();N.push({id:_.key,...S})}),N.sort((_,S)=>new Date(S.created_at||S.timestamp).getTime()-new Date(_.created_at||_.timestamp).getTime()),console.log(`✅ ${N.length} trades synchronisés en temps réel`),r(N)},x=>{console.error("❌ Erreur écoute temps réel trades:",x),e&&e(x)}),console.log("✅ Écoute temps réel trades démarrée")}catch(o){console.error("❌ Erreur démarrage écoute temps réel:",o),e&&e(o)}})(),()=>{n&&(console.log("🛑 Arrêt écoute temps réel trades"),n(),n=null)}},_x=(r,e)=>{const n=ls(os,`messageReactions/${r}`);return lc(n,a=>{a.exists()?e(a.val()):e(null)})},Zo=Object.freeze(Object.defineProperty({__proto__:null,addMessage:kl,addPersonalTrade:G_,addSignal:op,database:os,deleteMessage:W_,deletePersonalTrade:lh,generateUserId:up,getMessageReactions:Nx,getMessages:bx,getPersonalTrades:Y_,getSignals:ua,listenToPersonalTrades:K_,subscribeToMessageReactions:_x,subscribeToMessages:kh,subscribeToSignals:Dh,syncUserId:oc,updateMessageReactions:wx,updateSignalReactions:cp,updateSignalStatus:ah,uploadImage:ih},Symbol.toStringTag,{value:"Module"})),P3=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...n)=>$s(async()=>{const{default:a}=await Promise.resolve().then(()=>cc);return{default:a}},void 0).then(({default:a})=>a(...n)):e=fetch,(...n)=>e(...n)};let jx=class extends Error{constructor(e,n="FunctionsError",a){super(e),this.name=n,this.context=a}};class U3 extends jx{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pw extends jx{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class xw extends jx{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var dp;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(dp||(dp={}));var B3=function(r,e,n,a){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function f(N){try{x(a.next(N))}catch(_){d(_)}}function y(N){try{x(a.throw(N))}catch(_){d(_)}}function x(N){N.done?c(N.value):o(N.value).then(f,y)}x((a=a.apply(r,e||[])).next())})};class F3{constructor(e,{headers:n={},customFetch:a,region:o=dp.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=P3(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var a;return B3(this,void 0,void 0,function*(){try{const{headers:o,method:c,body:d}=n;let f={},{region:y}=n;y||(y=this.region);const x=new URL(`${this.url}/${e}`);y&&y!=="any"&&(f["x-region"]=y,x.searchParams.set("forceFunctionRegion",y));let N;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",N=d):typeof d=="string"?(f["Content-Type"]="text/plain",N=d):typeof FormData<"u"&&d instanceof FormData?N=d:(f["Content-Type"]="application/json",N=JSON.stringify(d)));const _=yield this.fetch(x.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:N}).catch(re=>{throw new U3(re)}),S=_.headers.get("x-relay-error");if(S&&S==="true")throw new pw(_);if(!_.ok)throw new xw(_);let V=((a=_.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),z;return V==="application/json"?z=yield _.json():V==="application/octet-stream"?z=yield _.blob():V==="text/event-stream"?z=_:V==="multipart/form-data"?z=yield _.formData():z=yield _.text(),{data:z,error:null,response:_}}catch(o){return{data:null,error:o,response:o instanceof xw||o instanceof pw?o.context:void 0}}})}}var dn={},Eo={},Ao={},Co={},ko={},Do={},$3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},ec=$3();const z3=ec.fetch,J_=ec.fetch.bind(ec),Q_=ec.Headers,q3=ec.Request,V3=ec.Response,cc=Object.freeze(Object.defineProperty({__proto__:null,Headers:Q_,Request:q3,Response:V3,default:J_,fetch:z3},Symbol.toStringTag,{value:"Module"})),H3=N1(cc);var Jd={},yw;function X_(){if(yw)return Jd;yw=1,Object.defineProperty(Jd,"__esModule",{value:!0});class r extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Jd.default=r,Jd}var vw;function Z_(){if(vw)return Do;vw=1;var r=Do&&Do.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Do,"__esModule",{value:!0});const e=r(H3),n=r(X_());class a{constructor(c){var d,f;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(d=c.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=c.signal,this.isMaybeSingle=(f=c.isMaybeSingle)!==null&&f!==void 0?f:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,d){return this.headers=new Headers(this.headers),this.headers.set(c,d),this}then(c,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let y=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var N,_,S,V;let z=null,re=null,ce=null,I=x.status,Ee=x.statusText;if(x.ok){if(this.method!=="HEAD"){const Ae=await x.text();Ae===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((N=this.headers.get("Accept"))===null||N===void 0)&&N.includes("application/vnd.pgrst.plan+text"))?re=Ae:re=JSON.parse(Ae))}const be=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),Se=(S=x.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");be&&Se&&Se.length>1&&(ce=parseInt(Se[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(re)&&(re.length>1?(z={code:"PGRST116",details:`Results contain ${re.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},re=null,ce=null,I=406,Ee="Not Acceptable"):re.length===1?re=re[0]:re=null)}else{const be=await x.text();try{z=JSON.parse(be),Array.isArray(z)&&x.status===404&&(re=[],z=null,I=200,Ee="OK")}catch{x.status===404&&be===""?(I=204,Ee="No Content"):z={message:be}}if(z&&this.isMaybeSingle&&(!((V=z==null?void 0:z.details)===null||V===void 0)&&V.includes("0 rows"))&&(z=null,I=200,Ee="OK"),z&&this.shouldThrowOnError)throw new n.default(z)}return{error:z,data:re,count:ce,status:I,statusText:Ee}});return this.shouldThrowOnError||(y=y.catch(x=>{var N,_,S;return{error:{message:`${(N=x==null?void 0:x.name)!==null&&N!==void 0?N:"FetchError"}: ${x==null?void 0:x.message}`,details:`${(_=x==null?void 0:x.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(S=x==null?void 0:x.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),y.then(c,d)}returns(){return this}overrideTypes(){return this}}return Do.default=a,Do}var bw;function ej(){if(bw)return ko;bw=1;var r=ko&&ko.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ko,"__esModule",{value:!0});const e=r(Z_());class n extends e.default{select(o){let c=!1;const d=(o??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:c=!0,nullsFirst:d,foreignTable:f,referencedTable:y=f}={}){const x=y?`${y}.order`:"order",N=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${N?`${N},`:""}${o}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,c,{foreignTable:d,referencedTable:f=d}={}){const y=typeof f>"u"?"offset":`${f}.offset`,x=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(y,`${o}`),this.url.searchParams.set(x,`${c-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:c=!1,settings:d=!1,buffers:f=!1,wal:y=!1,format:x="text"}={}){var N;const _=[o?"analyze":null,c?"verbose":null,d?"settings":null,f?"buffers":null,y?"wal":null].filter(Boolean).join("|"),S=(N=this.headers.get("Accept"))!==null&&N!==void 0?N:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${x}; for="${S}"; options=${_};`),x==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return ko.default=n,ko}var ww;function Sx(){if(ww)return Co;ww=1;var r=Co&&Co.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Co,"__esModule",{value:!0});const e=r(ej());class n extends e.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}in(o,c){const d=Array.from(new Set(c)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:d,type:f}={}){let y="";f==="plain"?y="pl":f==="phrase"?y="ph":f==="websearch"&&(y="w");const x=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${y}fts${x}.${c}`),this}match(o){return Object.entries(o).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(o,c,d){return this.url.searchParams.append(o,`not.${c}.${d}`),this}or(o,{foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,c,d){return this.url.searchParams.append(o,`${c}.${d}`),this}}return Co.default=n,Co}var Nw;function tj(){if(Nw)return Ao;Nw=1;var r=Ao&&Ao.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ao,"__esModule",{value:!0});const e=r(Sx());class n{constructor(o,{headers:c={},schema:d,fetch:f}){this.url=o,this.headers=new Headers(c),this.schema=d,this.fetch=f}select(o,{head:c=!1,count:d}={}){const f=c?"HEAD":"GET";let y=!1;const x=(o??"*").split("").map(N=>/\s/.test(N)&&!y?"":(N==='"'&&(y=!y),N)).join("");return this.url.searchParams.set("select",x),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:c,defaultToNull:d=!0}={}){var f;const y="POST";if(c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const x=o.reduce((N,_)=>N.concat(Object.keys(_)),[]);if(x.length>0){const N=[...new Set(x)].map(_=>`"${_}"`);this.url.searchParams.set("columns",N.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:c,ignoreDuplicates:d=!1,count:f,defaultToNull:y=!0}={}){var x;const N="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),f&&this.headers.append("Prefer",`count=${f}`),y||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const _=o.reduce((S,V)=>S.concat(Object.keys(V)),[]);if(_.length>0){const S=[...new Set(_)].map(V=>`"${V}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:N,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}update(o,{count:c}={}){var d;const f="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var c;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Ao.default=n,Ao}var _w;function G3(){if(_w)return Eo;_w=1;var r=Eo&&Eo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Eo,"__esModule",{value:!0});const e=r(tj()),n=r(Sx());class a{constructor(c,{headers:d={},schema:f,fetch:y}={}){this.url=c,this.headers=new Headers(d),this.schemaName=f,this.fetch=y}from(c){const d=new URL(`${this.url}/${c}`);return new e.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new a(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,d={},{head:f=!1,get:y=!1,count:x}={}){var N;let _;const S=new URL(`${this.url}/rpc/${c}`);let V;f||y?(_=f?"HEAD":"GET",Object.entries(d).filter(([re,ce])=>ce!==void 0).map(([re,ce])=>[re,Array.isArray(ce)?`{${ce.join(",")}}`:`${ce}`]).forEach(([re,ce])=>{S.searchParams.append(re,ce)})):(_="POST",V=d);const z=new Headers(this.headers);return x&&z.set("Prefer",`count=${x}`),new n.default({method:_,url:S,headers:z,schema:this.schemaName,body:V,fetch:(N=this.fetch)!==null&&N!==void 0?N:fetch})}}return Eo.default=a,Eo}var jw;function Y3(){if(jw)return dn;jw=1;var r=dn&&dn.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(dn,"__esModule",{value:!0}),dn.PostgrestError=dn.PostgrestBuilder=dn.PostgrestTransformBuilder=dn.PostgrestFilterBuilder=dn.PostgrestQueryBuilder=dn.PostgrestClient=void 0;const e=r(G3());dn.PostgrestClient=e.default;const n=r(tj());dn.PostgrestQueryBuilder=n.default;const a=r(Sx());dn.PostgrestFilterBuilder=a.default;const o=r(ej());dn.PostgrestTransformBuilder=o.default;const c=r(Z_());dn.PostgrestBuilder=c.default;const d=r(X_());return dn.PostgrestError=d.default,dn.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:c.default,PostgrestError:d.default},dn}var W3=Y3();const K3=w1(W3),{PostgrestClient:J3,PostgrestQueryBuilder:T6,PostgrestFilterBuilder:E6,PostgrestTransformBuilder:A6,PostgrestBuilder:C6,PostgrestError:k6}=K3;class Q3{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const a=n.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const a=this.getWebSocketConstructor();return new a(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const X3="2.15.5",Z3=`realtime-js/${X3}`,e2="1.0.0",hp=1e4,t2=1e3,s2=100;var du;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(du||(du={}));var Xs;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Xs||(Xs={}));var fi;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(fi||(fi={}));var mp;(function(r){r.websocket="websocket"})(mp||(mp={}));var Dl;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Dl||(Dl={}));class n2{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),a=new TextDecoder;return this._decodeBroadcast(e,n,a)}_decodeBroadcast(e,n,a){const o=n.getUint8(1),c=n.getUint8(2);let d=this.HEADER_LENGTH+2;const f=a.decode(e.slice(d,d+o));d=d+o;const y=a.decode(e.slice(d,d+c));d=d+c;const x=JSON.parse(a.decode(e.slice(d,e.byteLength)));return{ref:null,topic:f,event:y,payload:x}}}class sj{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ms;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(ms||(ms={}));const Sw=(r,e,n={})=>{var a;const o=(a=n.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(e).reduce((c,d)=>(c[d]=r2(d,r,e,o),c),{})},r2=(r,e,n,a)=>{const o=e.find(f=>f.name===r),c=o==null?void 0:o.type,d=n[r];return c&&!a.includes(c)?nj(c,d):fp(d)},nj=(r,e)=>{if(r.charAt(0)==="_"){const n=r.slice(1,r.length);return o2(e,n)}switch(r){case ms.bool:return i2(e);case ms.float4:case ms.float8:case ms.int2:case ms.int4:case ms.int8:case ms.numeric:case ms.oid:return a2(e);case ms.json:case ms.jsonb:return l2(e);case ms.timestamp:return c2(e);case ms.abstime:case ms.date:case ms.daterange:case ms.int4range:case ms.int8range:case ms.money:case ms.reltime:case ms.text:case ms.time:case ms.timestamptz:case ms.timetz:case ms.tsrange:case ms.tstzrange:return fp(e);default:return fp(e)}},fp=r=>r,i2=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},a2=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},l2=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},o2=(r,e)=>{if(typeof r!="string")return r;const n=r.length-1,a=r[n];if(r[0]==="{"&&a==="}"){let c;const d=r.slice(1,n);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(f=>nj(e,f))}return r},c2=r=>typeof r=="string"?r.replace(" ","T"):r,rj=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Tg{constructor(e,n,a={},o=hp){this.channel=e,this.event=n,this.payload=a,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var a;return this._hasReceived(e)&&n((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tw;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Tw||(Tw={}));class hu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},o=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hu.syncState(this.state,o,c,d),this.pendingDiffs.forEach(y=>{this.state=hu.syncDiff(this.state,y,c,d)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},o=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=hu.syncDiff(this.state,o,c,d),f())}),this.onJoin((o,c,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:d})}),this.onLeave((o,c,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,a,o){const c=this.cloneDeep(e),d=this.transformState(n),f={},y={};return this.map(c,(x,N)=>{d[x]||(y[x]=N)}),this.map(d,(x,N)=>{const _=c[x];if(_){const S=N.map(ce=>ce.presence_ref),V=_.map(ce=>ce.presence_ref),z=N.filter(ce=>V.indexOf(ce.presence_ref)<0),re=_.filter(ce=>S.indexOf(ce.presence_ref)<0);z.length>0&&(f[x]=z),re.length>0&&(y[x]=re)}else f[x]=N}),this.syncDiff(c,{joins:f,leaves:y},a,o)}static syncDiff(e,n,a,o){const{joins:c,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return a||(a=()=>{}),o||(o=()=>{}),this.map(c,(f,y)=>{var x;const N=(x=e[f])!==null&&x!==void 0?x:[];if(e[f]=this.cloneDeep(y),N.length>0){const _=e[f].map(V=>V.presence_ref),S=N.filter(V=>_.indexOf(V.presence_ref)<0);e[f].unshift(...S)}a(f,N,y)}),this.map(d,(f,y)=>{let x=e[f];if(!x)return;const N=y.map(_=>_.presence_ref);x=x.filter(_=>N.indexOf(_.presence_ref)<0),e[f]=x,o(f,x,y),x.length===0&&delete e[f]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(a=>n(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,a)=>{const o=e[a];return"metas"in o?n[a]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):n[a]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ew;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Ew||(Ew={}));var mu;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(mu||(mu={}));var aa;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(aa||(aa={}));class Tx{constructor(e,n={config:{}},a){this.topic=e,this.params=n,this.socket=a,this.bindings={},this.state=Xs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Tg(this,fi.join,this.params,this.timeout),this.rejoinTimer=new sj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xs.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Xs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Xs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fi.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new hu(this),this.broadcastEndpointURL=rj(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var a,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Xs.closed){const{config:{broadcast:d,presence:f,private:y}}=this.params,x=(o=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(V=>V.filter))!==null&&o!==void 0?o:[],N=!!this.bindings[mu.PRESENCE]&&this.bindings[mu.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,_={},S={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:N}),postgres_changes:x,private:y};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(V=>e==null?void 0:e(aa.CHANNEL_ERROR,V)),this._onClose(()=>e==null?void 0:e(aa.CLOSED)),this.updateJoinPayload(Object.assign({config:S},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:V})=>{var z;if(this.socket.setAuth(),V===void 0){e==null||e(aa.SUBSCRIBED);return}else{const re=this.bindings.postgres_changes,ce=(z=re==null?void 0:re.length)!==null&&z!==void 0?z:0,I=[];for(let Ee=0;Ee<ce;Ee++){const te=re[Ee],{filter:{event:be,schema:Se,table:Ae,filter:B}}=te,M=V&&V[Ee];if(M&&M.event===be&&M.schema===Se&&M.table===Ae&&M.filter===B)I.push(Object.assign(Object.assign({},te),{id:M.id}));else{this.unsubscribe(),this.state=Xs.errored,e==null||e(aa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,e&&e(aa.SUBSCRIBED);return}}).receive("error",V=>{this.state=Xs.errored,e==null||e(aa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(V).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(aa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,a){return this.state===Xs.joined&&e===mu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,a)}async send(e,n={}){var a,o;if(!this._canPush()&&e.type==="broadcast"){const{event:c,payload:d}=e,y={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);return await((o=x.body)===null||o===void 0?void 0:o.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,f,y;const x=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((y=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||y===void 0)&&y.ack)&&c("ok"),x.receive("ok",()=>c("ok")),x.receive("error",()=>c("error")),x.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xs.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fi.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(o=>{a=new Tg(this,fi.leave,{},e),a.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xs.closed,this.bindings={}}async _fetchWithTimeout(e,n,a){const o=new AbortController,c=setTimeout(()=>o.abort(),a),d=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(c),d}_push(e,n,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Tg(this,e,n,a);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>s2){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,a){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,a){var o,c;const d=e.toLocaleLowerCase(),{close:f,error:y,leave:x,join:N}=fi;if(a&&[f,y,x,N].indexOf(d)>=0&&a!==this._joinRef())return;let S=this._onMessage(d,n,a);if(n&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(V=>{var z,re,ce;return((z=V.filter)===null||z===void 0?void 0:z.event)==="*"||((ce=(re=V.filter)===null||re===void 0?void 0:re.event)===null||ce===void 0?void 0:ce.toLocaleLowerCase())===d}).map(V=>V.callback(S,a)):(c=this.bindings[d])===null||c===void 0||c.filter(V=>{var z,re,ce,I,Ee,te;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in V){const be=V.id,Se=(z=V.filter)===null||z===void 0?void 0:z.event;return be&&((re=n.ids)===null||re===void 0?void 0:re.includes(be))&&(Se==="*"||(Se==null?void 0:Se.toLocaleLowerCase())===((ce=n.data)===null||ce===void 0?void 0:ce.type.toLocaleLowerCase()))}else{const be=(Ee=(I=V==null?void 0:V.filter)===null||I===void 0?void 0:I.event)===null||Ee===void 0?void 0:Ee.toLocaleLowerCase();return be==="*"||be===((te=n==null?void 0:n.event)===null||te===void 0?void 0:te.toLocaleLowerCase())}else return V.type.toLocaleLowerCase()===d}).map(V=>{if(typeof S=="object"&&"ids"in S){const z=S.data,{schema:re,table:ce,commit_timestamp:I,type:Ee,errors:te}=z;S=Object.assign(Object.assign({},{schema:re,table:ce,commit_timestamp:I,eventType:Ee,new:{},old:{},errors:te}),this._getPayloadRecords(z))}V.callback(S,a)})}_isClosed(){return this.state===Xs.closed}_isJoined(){return this.state===Xs.joined}_isJoining(){return this.state===Xs.joining}_isLeaving(){return this.state===Xs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,a){const o=e.toLocaleLowerCase(),c={type:o,filter:n,callback:a};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(e,n){const a=e.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&Tx.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const a in e)if(e[a]!==n[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fi.close,{},e)}_onError(e){this._on(fi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Sw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Sw(e.columns,e.old_record)),n}}const Eg=()=>{},Qd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},u2=[1e3,2e3,5e3,1e4],d2=1e4,h2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m2{constructor(e,n){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hp,this.transport=null,this.heartbeatIntervalMs=Qd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Eg,this.ref=0,this.reconnectTimer=null,this.logger=Eg,this.conn=null,this.sendBuffer=[],this.serializer=new n2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let c;return o?c=o:typeof fetch>"u"?c=(...d)=>$s(async()=>{const{default:f}=await Promise.resolve().then(()=>cc);return{default:f}},void 0).then(({default:f})=>f(...d)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...d)=>c(...d)},!(!((a=n==null?void 0:n.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${mp.websocket}`,this.httpEndpoint=rj(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Q3.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:e2}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,a){this.logger(e,n,a)}connectionState(){switch(this.conn&&this.conn.readyState){case du.connecting:return Dl.Connecting;case du.open:return Dl.Open;case du.closing:return Dl.Closing;default:return Dl.Closed}}isConnected(){return this.connectionState()===Dl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const a=`realtime:${e}`,o=this.getChannels().find(c=>c.topic===a);if(o)return o;{const c=new Tx(`realtime:${e}`,n,this);return this.channels.push(c),c}}push(e){const{topic:n,event:a,payload:o,ref:c}=e,d=()=>{this.encode(e,f=>{var y;(y=this.conn)===null||y===void 0||y.send(f)})};this.log("push",`${n} ${a} (${c})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(t2,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Qd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(x){this.log("error","error in heartbeat callback",x)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:o,payload:c,ref:d}=n,f=d?`(${d})`:"",y=c.status||"";this.log("receive",`${y} ${a} ${o} ${f}`.trim(),c),this.channels.filter(x=>x._isMember(a)).forEach(x=>x._trigger(o,c,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(fi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const a=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${a}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const a=new Blob([h2],{type:"application/javascript"});n=URL.createObjectURL(a)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const o={access_token:n,version:Z3};n&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(fi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(a=>{try{a(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(a){this.log("error",`error triggering ${e} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new sj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,a,o,c,d,f,y,x,N;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(a=e==null?void 0:e.timeout)!==null&&a!==void 0?a:hp,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:Qd.HEARTBEAT_INTERVAL,this.worker=(c=e==null?void 0:e.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=e==null?void 0:e.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:Eg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=e==null?void 0:e.reconnectAfterMs)!==null&&y!==void 0?y:(_=>u2[_-1]||d2),this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:((_,S)=>S(JSON.stringify(_))),this.decode=(N=e==null?void 0:e.decode)!==null&&N!==void 0?N:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ex extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Zs(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class f2 extends Ex{constructor(e,n,a){super(e),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gp extends Ex{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var g2=function(r,e,n,a){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function f(N){try{x(a.next(N))}catch(_){d(_)}}function y(N){try{x(a.throw(N))}catch(_){d(_)}}function x(N){N.done?c(N.value):o(N.value).then(f,y)}x((a=a.apply(r,e||[])).next())})};const ij=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...n)=>$s(async()=>{const{default:a}=await Promise.resolve().then(()=>cc);return{default:a}},void 0).then(({default:a})=>a(...n)):e=fetch,(...n)=>e(...n)},p2=()=>g2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $s(()=>Promise.resolve().then(()=>cc),void 0)).Response:Response}),pp=r=>{if(Array.isArray(r))return r.map(n=>pp(n));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([n,a])=>{const o=n.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[o]=pp(a)}),e},x2=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Jl=function(r,e,n,a){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function f(N){try{x(a.next(N))}catch(_){d(_)}}function y(N){try{x(a.throw(N))}catch(_){d(_)}}function x(N){N.done?c(N.value):o(N.value).then(f,y)}x((a=a.apply(r,e||[])).next())})};const Ag=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),y2=(r,e,n)=>Jl(void 0,void 0,void 0,function*(){const a=yield p2();r instanceof a&&!(n!=null&&n.noResolveJson)?r.json().then(o=>{const c=r.status||500,d=(o==null?void 0:o.statusCode)||c+"";e(new f2(Ag(o),c,d))}).catch(o=>{e(new gp(Ag(o),o))}):e(new gp(Ag(r),r))}),v2=(r,e,n,a)=>{const o={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!a?o:(x2(a)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(a)):o.body=a,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function $u(r,e,n,a,o,c){return Jl(this,void 0,void 0,function*(){return new Promise((d,f)=>{r(n,v2(e,a,o,c)).then(y=>{if(!y.ok)throw y;return a!=null&&a.noResolveJson?y:y.json()}).then(y=>d(y)).catch(y=>y2(y,f,a))})})}function Rh(r,e,n,a){return Jl(this,void 0,void 0,function*(){return $u(r,"GET",e,n,a)})}function Ii(r,e,n,a,o){return Jl(this,void 0,void 0,function*(){return $u(r,"POST",e,a,o,n)})}function xp(r,e,n,a,o){return Jl(this,void 0,void 0,function*(){return $u(r,"PUT",e,a,o,n)})}function b2(r,e,n,a){return Jl(this,void 0,void 0,function*(){return $u(r,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),a)})}function aj(r,e,n,a,o){return Jl(this,void 0,void 0,function*(){return $u(r,"DELETE",e,a,o,n)})}var Hn=function(r,e,n,a){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function f(N){try{x(a.next(N))}catch(_){d(_)}}function y(N){try{x(a.throw(N))}catch(_){d(_)}}function x(N){N.done?c(N.value):o(N.value).then(f,y)}x((a=a.apply(r,e||[])).next())})};const w2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Aw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class N2{constructor(e,n={},a,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=a,this.fetch=ij(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,a,o){return Hn(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},Aw),o);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const y=d.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),y&&c.append("metadata",this.encodeMetadata(y)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl),y&&c.append("metadata",this.encodeMetadata(y))):(c=a,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,y&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(y)))),o!=null&&o.headers&&(f=Object.assign(Object.assign({},f),o.headers));const x=this._removeEmptyFolders(n),N=this._getFinalPath(x),_=yield(e=="PUT"?xp:Ii)(this.fetch,`${this.url}/object/${N}`,c,Object.assign({headers:f},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:x,id:_.Id,fullPath:_.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Zs(c))return{data:null,error:c};throw c}})}upload(e,n,a){return Hn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,a)})}uploadToSignedUrl(e,n,a,o){return Hn(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(e),d=this._getFinalPath(c),f=new URL(this.url+`/object/upload/sign/${d}`);f.searchParams.set("token",n);try{let y;const x=Object.assign({upsert:Aw.upsert},o),N=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&a instanceof Blob?(y=new FormData,y.append("cacheControl",x.cacheControl),y.append("",a)):typeof FormData<"u"&&a instanceof FormData?(y=a,y.append("cacheControl",x.cacheControl)):(y=a,N["cache-control"]=`max-age=${x.cacheControl}`,N["content-type"]=x.contentType);const _=yield xp(this.fetch,f.toString(),y,{headers:N});return{data:{path:c,fullPath:_.Key},error:null}}catch(y){if(this.shouldThrowOnError)throw y;if(Zs(y))return{data:null,error:y};throw y}})}createSignedUploadUrl(e,n){return Hn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const c=yield Ii(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:o}),d=new URL(this.url+c.url),f=d.searchParams.get("token");if(!f)throw new Ex("No token returned by API");return{data:{signedUrl:d.toString(),path:e,token:f},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}update(e,n,a){return Hn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,a)})}move(e,n,a){return Hn(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Zs(o))return{data:null,error:o};throw o}})}copy(e,n,a){return Hn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ii(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Zs(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,a){return Hn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),c=yield Ii(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const d=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Zs(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,a){return Hn(this,void 0,void 0,function*(){try{const o=yield Ii(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),c=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Zs(o))return{data:null,error:o};throw o}})}download(e,n){return Hn(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),d=c?`?${c}`:"";try{const f=this._getFinalPath(e);return{data:yield(yield Rh(this.fetch,`${this.url}/${o}/${f}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Zs(f))return{data:null,error:f};throw f}})}info(e){return Hn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const a=yield Rh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:pp(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}exists(e){return Hn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield b2(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a)&&a instanceof gp){const o=a.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:a}}throw a}})}getPublicUrl(e,n){const a=this._getFinalPath(e),o=[],c=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";c!==""&&o.push(c);const f=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",y=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});y!==""&&o.push(y);let x=o.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${a}${x}`)}}}remove(e){return Hn(this,void 0,void 0,function*(){try{return{data:yield aj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}list(e,n,a){return Hn(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},w2),n),{prefix:e||""});return{data:yield Ii(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},a),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Zs(o))return{data:null,error:o};throw o}})}listV2(e,n){return Hn(this,void 0,void 0,function*(){try{const a=Object.assign({},e);return{data:yield Ii(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const _2="2.12.1",j2={"X-Client-Info":`storage-js/${_2}`};var Ro=function(r,e,n,a){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function f(N){try{x(a.next(N))}catch(_){d(_)}}function y(N){try{x(a.throw(N))}catch(_){d(_)}}function x(N){N.done?c(N.value):o(N.value).then(f,y)}x((a=a.apply(r,[])).next())})};class S2{constructor(e,n={},a,o){this.shouldThrowOnError=!1;const c=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},j2),n),this.fetch=ij(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ro(this,void 0,void 0,function*(){try{return{data:yield Rh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Zs(e))return{data:null,error:e};throw e}})}getBucket(e){return Ro(this,void 0,void 0,function*(){try{return{data:yield Rh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ro(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}updateBucket(e,n){return Ro(this,void 0,void 0,function*(){try{return{data:yield xp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}emptyBucket(e){return Ro(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ro(this,void 0,void 0,function*(){try{return{data:yield aj(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}}class T2 extends S2{constructor(e,n={},a,o){super(e,n,a,o)}from(e){return new N2(this.url,this.headers,e,this.fetch)}}const E2="2.57.4";let tu="";typeof Deno<"u"?tu="deno":typeof document<"u"?tu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?tu="react-native":tu="node";const A2={"X-Client-Info":`supabase-js-${tu}/${E2}`},C2={headers:A2},k2={schema:"public"},D2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},R2={};var I2=function(r,e,n,a){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function f(N){try{x(a.next(N))}catch(_){d(_)}}function y(N){try{x(a.throw(N))}catch(_){d(_)}}function x(N){N.done?c(N.value):o(N.value).then(f,y)}x((a=a.apply(r,e||[])).next())})};const M2=r=>{let e;return r?e=r:typeof fetch>"u"?e=J_:e=fetch,(...n)=>e(...n)},O2=()=>typeof Headers>"u"?Q_:Headers,L2=(r,e,n)=>{const a=M2(n),o=O2();return(c,d)=>I2(void 0,void 0,void 0,function*(){var f;const y=(f=yield e())!==null&&f!==void 0?f:r;let x=new o(d==null?void 0:d.headers);return x.has("apikey")||x.set("apikey",r),x.has("Authorization")||x.set("Authorization",`Bearer ${y}`),a(c,Object.assign(Object.assign({},d),{headers:x}))})};var P2=function(r,e,n,a){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function f(N){try{x(a.next(N))}catch(_){d(_)}}function y(N){try{x(a.throw(N))}catch(_){d(_)}}function x(N){N.done?c(N.value):o(N.value).then(f,y)}x((a=a.apply(r,[])).next())})};function U2(r){return r.endsWith("/")?r:r+"/"}function B2(r,e){var n,a;const{db:o,auth:c,realtime:d,global:f}=r,{db:y,auth:x,realtime:N,global:_}=e,S={db:Object.assign(Object.assign({},y),o),auth:Object.assign(Object.assign({},x),c),realtime:Object.assign(Object.assign({},N),d),storage:{},global:Object.assign(Object.assign(Object.assign({},_),f),{headers:Object.assign(Object.assign({},(n=_==null?void 0:_.headers)!==null&&n!==void 0?n:{}),(a=f==null?void 0:f.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>P2(this,void 0,void 0,function*(){return""})};return r.accessToken?S.accessToken=r.accessToken:delete S.accessToken,S}function F2(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(U2(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const lj="2.71.1",Po=30*1e3,yp=3,Cg=yp*Po,$2="http://localhost:9999",z2="supabase.auth.token",q2={"X-Client-Info":`gotrue-js/${lj}`},vp="X-Supabase-Api-Version",oj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},V2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,H2=600*1e3;class Ax extends Error{constructor(e,n,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=a}}function ut(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class G2 extends Ax{constructor(e,n,a){super(e,n,a),this.name="AuthApiError",this.status=n,this.code=a}}function Y2(r){return ut(r)&&r.name==="AuthApiError"}class cj extends Ax{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class il extends Ax{constructor(e,n,a,o){super(e,a,o),this.name=n,this.status=a}}class qa extends il{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function W2(r){return ut(r)&&r.name==="AuthSessionMissingError"}class Xd extends il{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zd extends il{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class eh extends il{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function K2(r){return ut(r)&&r.name==="AuthImplicitGrantRedirectError"}class Cw extends il{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bp extends il{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function kg(r){return ut(r)&&r.name==="AuthRetryableFetchError"}class kw extends il{constructor(e,n,a){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=a}}class wp extends il{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ih="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Dw=` 	
\r=`.split(""),J2=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Dw.length;e+=1)r[Dw[e].charCodeAt(0)]=-2;for(let e=0;e<Ih.length;e+=1)r[Ih[e].charCodeAt(0)]=e;return r})();function Rw(r,e,n){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;n(Ih[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;n(Ih[a]),e.queuedBits-=6}}function uj(r,e,n){const a=J2[r];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Iw(r){const e=[],n=d=>{e.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=d=>{Z2(d,a,n)};for(let d=0;d<r.length;d+=1)uj(r.charCodeAt(d),o,c);return e.join("")}function Q2(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function X2(r,e){for(let n=0;n<r.length;n+=1){let a=r.charCodeAt(n);if(a>55295&&a<=56319){const o=(a-55296)*1024&65535;a=(r.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}Q2(a,e)}}function Z2(r,e,n){if(e.utf8seq===0){if(r<=127){n(r);return}for(let a=1;a<6;a+=1)if((r>>7-a&1)===0){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ek(r){const e=[],n={queue:0,queuedBits:0},a=o=>{e.push(o)};for(let o=0;o<r.length;o+=1)uj(r.charCodeAt(o),n,a);return new Uint8Array(e)}function tk(r){const e=[];return X2(r,n=>e.push(n)),new Uint8Array(e)}function sk(r){const e=[],n={queue:0,queuedBits:0},a=o=>{e.push(o)};return r.forEach(o=>Rw(o,n,a)),Rw(null,n,a),e.join("")}function nk(r){return Math.round(Date.now()/1e3)+r}function rk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const mi=()=>typeof window<"u"&&typeof document<"u",jl={tested:!1,writable:!1},dj=()=>{if(!mi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jl.tested)return jl.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),jl.tested=!0,jl.writable=!0}catch{jl.tested=!0,jl.writable=!1}return jl.writable};function ik(r){const e={},n=new URL(r);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,c)=>{e[c]=o})}catch{}return n.searchParams.forEach((a,o)=>{e[o]=a}),e}const hj=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...n)=>$s(async()=>{const{default:a}=await Promise.resolve().then(()=>cc);return{default:a}},void 0).then(({default:a})=>a(...n)):e=fetch,(...n)=>e(...n)},ak=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Uo=async(r,e,n)=>{await r.setItem(e,JSON.stringify(n))},Sl=async(r,e)=>{const n=await r.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},za=async(r,e)=>{await r.removeItem(e)};class hm{constructor(){this.promise=new hm.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}hm.promiseConstructor=Promise;function Dg(r){const e=r.split(".");if(e.length!==3)throw new wp("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!V2.test(e[a]))throw new wp("JWT not in base64url format");return{header:JSON.parse(Iw(e[0])),payload:JSON.parse(Iw(e[1])),signature:ek(e[2]),raw:{header:e[0],payload:e[1]}}}async function lk(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function ok(r,e){return new Promise((a,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await r(c);if(!e(c,null,d)){a(d);return}}catch(d){if(!e(c,d)){o(d);return}}})()})}function ck(r){return("0"+r.toString(16)).substr(-2)}function uk(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=n.length;let o="";for(let c=0;c<56;c++)o+=n.charAt(Math.floor(Math.random()*a));return o}return crypto.getRandomValues(e),Array.from(e,ck).join("")}async function dk(r){const n=new TextEncoder().encode(r),a=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(a);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function hk(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const n=await dk(r);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Io(r,e,n=!1){const a=uk();let o=a;n&&(o+="/PASSWORD_RECOVERY"),await Uo(r,`${e}-code-verifier`,o);const c=await hk(a);return[c,a===c?"plain":"s256"]}const mk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fk(r){const e=r.headers.get(vp);if(!e||!e.match(mk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gk(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function pk(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mo(r){if(!xk.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Rg(){const r={};return new Proxy(r,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mw(r){return JSON.parse(JSON.stringify(r))}var yk=function(r,e){var n={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(n[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(r);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(r,a[o])&&(n[a[o]]=r[a[o]]);return n};const Al=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),vk=[502,503,504];async function Ow(r){var e;if(!ak(r))throw new bp(Al(r),0);if(vk.includes(r.status))throw new bp(Al(r),r.status);let n;try{n=await r.json()}catch(c){throw new cj(Al(c),c)}let a;const o=fk(r);if(o&&o.getTime()>=oj["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?a=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(a=n.error_code),a){if(a==="weak_password")throw new kw(Al(n),r.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new qa}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new kw(Al(n),r.status,n.weak_password.reasons);throw new G2(Al(n),r.status||500,a)}const bk=(r,e,n,a)=>{const o={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),n))};async function St(r,e,n,a){var o;const c=Object.assign({},a==null?void 0:a.headers);c[vp]||(c[vp]=oj["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const d=(o=a==null?void 0:a.query)!==null&&o!==void 0?o:{};a!=null&&a.redirectTo&&(d.redirect_to=a.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",y=await wk(r,e,n+f,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(y):{data:Object.assign({},y),error:null}}async function wk(r,e,n,a,o,c){const d=bk(e,a,o,c);let f;try{f=await r(n,Object.assign({},d))}catch(y){throw console.error(y),new bp(Al(y),0)}if(f.ok||await Ow(f),a!=null&&a.noResolveJson)return f;try{return await f.json()}catch(y){await Ow(y)}}function ia(r){var e;let n=null;Sk(r)&&(n=Object.assign({},r),r.expires_at||(n.expires_at=nk(r.expires_in)));const a=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:n,user:a},error:null}}function Lw(r){const e=ia(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Va(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Nk(r){return{data:r,error:null}}function _k(r){const{action_link:e,email_otp:n,hashed_token:a,redirect_to:o,verification_type:c}=r,d=yk(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:n,hashed_token:a,redirect_to:o,verification_type:c},y=Object.assign({},d);return{data:{properties:f,user:y},error:null}}function jk(r){return r}function Sk(r){return r.access_token&&r.refresh_token&&r.expires_in}const Ig=["global","local","others"];var Tk=function(r,e){var n={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(n[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(r);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(r,a[o])&&(n[a[o]]=r[a[o]]);return n};class Ek{constructor({url:e="",headers:n={},fetch:a}){this.url=e,this.headers=n,this.fetch=hj(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Ig[0]){if(Ig.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ig.join(", ")}`);try{return await St(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(ut(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,n={}){try{return await St(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Va})}catch(a){if(ut(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:n}=e,a=Tk(e,["options"]),o=Object.assign(Object.assign({},a),n);return"newEmail"in a&&(o.new_email=a==null?void 0:a.newEmail,delete o.newEmail),await St(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:_k,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ut(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await St(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Va})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,a,o,c,d,f,y;try{const x={nextPage:null,lastPage:0,total:0},N=await St(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:jk});if(N.error)throw N.error;const _=await N.json(),S=(d=N.headers.get("x-total-count"))!==null&&d!==void 0?d:0,V=(y=(f=N.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&y!==void 0?y:[];return V.length>0&&(V.forEach(z=>{const re=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),ce=JSON.parse(z.split(";")[1].split("=")[1]);x[`${ce}Page`]=re}),x.total=parseInt(S)),{data:Object.assign(Object.assign({},_),x),error:null}}catch(x){if(ut(x))return{data:{users:[]},error:x};throw x}}async getUserById(e){Mo(e);try{return await St(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Va})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Mo(e);try{return await St(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Va})}catch(a){if(ut(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,n=!1){Mo(e);try{return await St(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Va})}catch(a){if(ut(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){Mo(e.userId);try{const{data:n,error:a}=await St(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:a}}catch(n){if(ut(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Mo(e.userId),Mo(e.id);try{return{data:await St(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}}}function Pw(r={}){return{getItem:e=>r[e]||null,setItem:(e,n)=>{r[e]=n},removeItem:e=>{delete r[e]}}}function Ak(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Oo={debug:!!(globalThis&&dj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mj extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ck extends mj{}async function kk(r,e,n){Oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),Oo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async o=>{if(o){Oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await n()}finally{Oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(e===0)throw Oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Ck(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Oo.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Ak();const Dk={url:$2,storageKey:z2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:q2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Uw(r,e,n){return await n()}const Lo={};class Su{constructor(e){var n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Su.nextInstanceID,Su.nextInstanceID+=1,this.instanceID>0&&mi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Dk),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Ek({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=hj(o.fetch),this.lock=o.lock||Uw,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:mi()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=kk:this.lock=Uw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:dj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Pw(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Pw(this.memoryStorage)),mi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Lo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Lo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Lo[this.storageKey]=Object.assign(Object.assign({},Lo[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lj}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ik(window.location.href);let a="none";if(this._isImplicitGrantCallback(n)?a="implicit":await this._isPKCECallback(n)&&(a="pkce"),mi()&&this.detectSessionInUrl&&a!=="none"){const{data:o,error:c}=await this._getSessionFromURL(n,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),K2(c)){const y=(e=c.details)===null||e===void 0?void 0:e.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ut(n)?{error:n}:{error:new cj("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,a,o;try{const c=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:ia}),{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const y=d.session,x=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:x,session:y},error:null}}catch(c){if(ut(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(e){var n,a,o;try{let c;if("email"in e){const{email:N,password:_,options:S}=e;let V=null,z=null;this.flowType==="pkce"&&([V,z]=await Io(this.storage,this.storageKey)),c=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:N,password:_,data:(n=S==null?void 0:S.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:V,code_challenge_method:z},xform:ia})}else if("phone"in e){const{phone:N,password:_,options:S}=e;c=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:N,password:_,data:(a=S==null?void 0:S.data)!==null&&a!==void 0?a:{},channel:(o=S==null?void 0:S.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:ia})}else throw new Zd("You must provide either an email or phone number and a password");const{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const y=d.session,x=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:x,session:y},error:null}}catch(c){if(ut(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(e){try{let n;if("email"in e){const{email:c,password:d,options:f}=e;n=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Lw})}else if("phone"in e){const{phone:c,password:d,options:f}=e;n=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Lw})}else throw new Zd("You must provide either an email or phone number and a password");const{data:a,error:o}=n;return o?{data:{user:null,session:null},error:o}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Xd}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:o})}catch(n){if(ut(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,a,o,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,a,o,c,d,f,y,x,N,_,S,V;let z,re;if("message"in e)z=e.message,re=e.signature;else{const{chain:ce,wallet:I,statement:Ee,options:te}=e;let be;if(mi())if(typeof I=="object")be=I;else{const Ae=window;if("solana"in Ae&&typeof Ae.solana=="object"&&("signIn"in Ae.solana&&typeof Ae.solana.signIn=="function"||"signMessage"in Ae.solana&&typeof Ae.solana.signMessage=="function"))be=Ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(te!=null&&te.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");be=I}const Se=new URL((n=te==null?void 0:te.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in be&&be.signIn){const Ae=await be.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},te==null?void 0:te.signInWithSolana),{version:"1",domain:Se.host,uri:Se.href}),Ee?{statement:Ee}:null));let B;if(Array.isArray(Ae)&&Ae[0]&&typeof Ae[0]=="object")B=Ae[0];else if(Ae&&typeof Ae=="object"&&"signedMessage"in Ae&&"signature"in Ae)B=Ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)z=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),re=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in be)||typeof be.signMessage!="function"||!("publicKey"in be)||typeof be!="object"||!be.publicKey||!("toBase58"in be.publicKey)||typeof be.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");z=[`${Se.host} wants you to sign in with your Solana account:`,be.publicKey.toBase58(),...Ee?["",Ee,""]:[""],"Version: 1",`URI: ${Se.href}`,`Issued At: ${(o=(a=te==null?void 0:te.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=te==null?void 0:te.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${te.signInWithSolana.notBefore}`]:[],...!((d=te==null?void 0:te.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${te.signInWithSolana.expirationTime}`]:[],...!((f=te==null?void 0:te.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${te.signInWithSolana.chainId}`]:[],...!((y=te==null?void 0:te.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${te.signInWithSolana.nonce}`]:[],...!((x=te==null?void 0:te.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${te.signInWithSolana.requestId}`]:[],...!((_=(N=te==null?void 0:te.signInWithSolana)===null||N===void 0?void 0:N.resources)===null||_===void 0)&&_.length?["Resources",...te.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const Ae=await be.signMessage(new TextEncoder().encode(z),"utf8");if(!Ae||!(Ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");re=Ae}}try{const{data:ce,error:I}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:z,signature:sk(re)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(V=e.options)===null||V===void 0?void 0:V.captchaToken}}:null),xform:ia});if(I)throw I;return!ce||!ce.session||!ce.user?{data:{user:null,session:null},error:new Xd}:(ce.session&&(await this._saveSession(ce.session),await this._notifyAllSubscribers("SIGNED_IN",ce.session)),{data:Object.assign({},ce),error:I})}catch(ce){if(ut(ce))return{data:{user:null,session:null},error:ce};throw ce}}async _exchangeCodeForSession(e){const n=await Sl(this.storage,`${this.storageKey}-code-verifier`),[a,o]=(n??"").split("/");try{const{data:c,error:d}=await St(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:ia});if(await za(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new Xd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:d})}catch(c){if(ut(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(e){try{const{options:n,provider:a,token:o,access_token:c,nonce:d}=e,f=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:o,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ia}),{data:y,error:x}=f;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Xd}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:y,error:x})}catch(n){if(ut(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,a,o,c,d;try{if("email"in e){const{email:f,options:y}=e;let x=null,N=null;this.flowType==="pkce"&&([x,N]=await Io(this.storage,this.storageKey));const{error:_}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},create_user:(a=y==null?void 0:y.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:N},redirectTo:y==null?void 0:y.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:f,options:y}=e,{data:x,error:N}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=y==null?void 0:y.data)!==null&&o!==void 0?o:{},create_user:(c=y==null?void 0:y.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},channel:(d=y==null?void 0:y.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:N}}throw new Zd("You must provide either an email or phone number.")}catch(f){if(ut(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var n,a;try{let o,c;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,c=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:f}=await St(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:ia});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const y=d.session,x=d.user;return y!=null&&y.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),{data:{user:x,session:y},error:null}}catch(o){if(ut(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,a,o;try{let c=null,d=null;return this.flowType==="pkce"&&([c,d]=await Io(this.storage,this.storageKey)),await St(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:Nk})}catch(c){if(ut(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:a}=e;if(a)throw a;if(!n)throw new qa;const{error:o}=await St(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(ut(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:a,type:o,options:c}=e,{error:d}=await St(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in e){const{phone:a,type:o,options:c}=e,{data:d,error:f}=await St(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new Zd("You must provide either an email or phone number and a type")}catch(n){if(ut(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await a,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Sl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<Cg:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.userStorage){const d=await Sl(this.userStorage,this.storageKey+"-user");d!=null&&d.user?e.user=d.user:e.user=Rg()}if(this.storage.isServer&&e.user){let d=this.suppressGetSessionWarning;e=new Proxy(e,{get:(y,x,N)=>(!d&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(y,x,N))})}return{data:{session:e},error:null}}const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?{data:{session:null},error:c}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Va}):await this._useSession(async n=>{var a,o,c;const{data:d,error:f}=n;if(f)throw f;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qa}:await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Va})})}catch(n){if(ut(n))return W2(n)&&(await this._removeSession(),await za(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async a=>{const{data:o,error:c}=a;if(c)throw c;if(!o.session)throw new qa;const d=o.session;let f=null,y=null;this.flowType==="pkce"&&e.email!=null&&([f,y]=await Io(this.storage,this.storageKey));const{data:x,error:N}=await St(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:y}),jwt:d.access_token,xform:Va});if(N)throw N;return d.user=x.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(a){if(ut(a))return{data:{user:null},error:a};throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qa;const n=Date.now()/1e3;let a=n,o=!0,c=null;const{payload:d}=Dg(e.access_token);if(d.exp&&(a=d.exp,o=a<=n),o){const{session:f,error:y}=await this._callRefreshToken(e.refresh_token);if(y)return{data:{user:null,session:null},error:y};if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:y}=await this._getUser(e.access_token);if(y)throw y;c={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:a-n,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(n){if(ut(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var a;if(!e){const{data:d,error:f}=n;if(f)throw f;e=(a=d.session)!==null&&a!==void 0?a:void 0}if(!(e!=null&&e.refresh_token))throw new qa;const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?{data:{user:null,session:null},error:c}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ut(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!mi())throw new eh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new eh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Cw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Cw("No code detected.");const{data:Ee,error:te}=await this._exchangeCodeForSession(e.code);if(te)throw te;const be=new URL(window.location.href);return be.searchParams.delete("code"),window.history.replaceState(window.history.state,"",be.toString()),{data:{session:Ee.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:o,access_token:c,refresh_token:d,expires_in:f,expires_at:y,token_type:x}=e;if(!c||!f||!d||!x)throw new eh("No session defined in URL");const N=Math.round(Date.now()/1e3),_=parseInt(f);let S=N+_;y&&(S=parseInt(y));const V=S-N;V*1e3<=Po&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${V}s, should have been closer to ${_}s`);const z=S-_;N-z>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",z,S,N):N-z<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",z,S,N);const{data:re,error:ce}=await this._getUser(c);if(ce)throw ce;const I={provider_token:a,provider_refresh_token:o,access_token:c,expires_in:_,expires_at:S,refresh_token:d,token_type:x,user:re.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:I,redirectType:e.type},error:null}}catch(a){if(ut(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Sl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var a;const{data:o,error:c}=n;if(c)return{error:c};const d=(a=o.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:f}=await this.admin.signOut(d,e);if(f&&!(Y2(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await za(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=rk(),a={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async n=>{var a,o;try{const{data:{session:c},error:d}=n;if(d)throw d;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,n={}){let a=null,o=null;this.flowType==="pkce"&&([a,o]=await Io(this.storage,this.storageKey,!0));try{return await St(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(c){if(ut(c))return{data:null,error:c};throw c}}async getUserIdentities(){var e;try{const{data:n,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:a,error:o}=await this._useSession(async c=>{var d,f,y,x,N;const{data:_,error:S}=c;if(S)throw S;const V=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(y=e.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await St(this.fetch,"GET",V,{headers:this.headers,jwt:(N=(x=_.session)===null||x===void 0?void 0:x.access_token)!==null&&N!==void 0?N:void 0})});if(o)throw o;return mi()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:e.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(ut(a))return{data:{provider:e.provider,url:null},error:a};throw a}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var a,o;const{data:c,error:d}=n;if(d)throw d;return await St(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(ut(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return await ok(async o=>(o>0&&await lk(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await St(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ia})),(o,c)=>{const d=200*Math.pow(2,o);return c&&kg(c)&&Date.now()+d-a<Po})}catch(a){if(this._debug(n,"error",a),ut(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",a),mi()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const o=await Sl(this.storage,this.storageKey);if(o&&this.userStorage){let d=await Sl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await Uo(this.userStorage,this.storageKey+"-user",d)),o.user=(e=d==null?void 0:d.user)!==null&&e!==void 0?e:Rg()}else if(o&&!o.user&&!o.user){const d=await Sl(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(o.user=d.user,await za(this.storage,this.storageKey+"-user"),await Uo(this.storage,this.storageKey,o)):o.user=Rg()}if(this._debug(a,"session from storage",o),!this._isValidSession(o)){this._debug(a,"session is not valid"),o!==null&&await this._removeSession();return}const c=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Cg;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${Cg}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),kg(d)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(o.access_token);!f&&(d!=null&&d.user)?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(a,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(a,"error",o),console.error(o);return}finally{this._debug(a,"end")}}async _callRefreshToken(e){var n,a;if(!e)throw new qa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new hm;const{data:c,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!c.session)throw new qa;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={session:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(o,"error",c),ut(c)){const d={session:null,error:c};return kg(c)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,a=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:n});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,n)}catch(y){c.push(y)}});if(await Promise.all(d),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&await Uo(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const c=Mw(o);await Uo(this.storage,this.storageKey,c)}else{const o=Mw(n);await Uo(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await za(this.storage,this.storageKey),await za(this.storage,this.storageKey+"-code-verifier"),await za(this.storage,this.storageKey+"-user"),this.userStorage&&await za(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&mi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Po);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((a.expires_at*1e3-e)/Po);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Po}ms, refresh threshold is ${yp} ticks`),o<=yp&&await this._callRefreshToken(a.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof mj)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,a){const o=[`provider=${encodeURIComponent(n)}`];if(a!=null&&a.redirectTo&&o.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&o.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,d]=await Io(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(f.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);o.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&o.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var a;const{data:o,error:c}=n;return c?{data:null,error:c}:await St(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(ut(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var a,o;const{data:c,error:d}=n;if(d)return{data:null,error:d};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:y,error:x}=await St(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return x?{data:null,error:x}:(e.factorType==="totp"&&(!((o=y==null?void 0:y.totp)===null||o===void 0)&&o.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),{data:y,error:null})})}catch(n){if(ut(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:o,error:c}=n;if(c)return{data:null,error:c};const{data:d,error:f}=await St(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(n){if(ut(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:o,error:c}=n;return c?{data:null,error:c}:await St(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(ut(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:a}=await this._challenge({factorId:e.factorId});return a?{data:null,error:a}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const a=(e==null?void 0:e.factors)||[],o=a.filter(d=>d.factor_type==="totp"&&d.status==="verified"),c=a.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:a,totp:o,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,a;const{data:{session:o},error:c}=e;if(c)return{data:null,error:c};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Dg(o.access_token);let f=null;d.aal&&(f=d.aal);let y=f;((a=(n=o.user.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(y="aal2");const N=d.amr||[];return{data:{currentLevel:f,nextLevel:y,currentAuthenticationMethods:N},error:null}}))}async fetchJwk(e,n={keys:[]}){let a=n.keys.find(f=>f.kid===e);if(a)return a;const o=Date.now();if(a=this.jwks.keys.find(f=>f.kid===e),a&&this.jwks_cached_at+H2>o)return a;const{data:c,error:d}=await St(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,a=c.keys.find(f=>f.kid===e),!a)?null:a}async getClaims(e,n={}){try{let a=e;if(!a){const{data:V,error:z}=await this.getSession();if(z||!V.session)return{data:null,error:z};a=V.session.access_token}const{header:o,payload:c,signature:d,raw:{header:f,payload:y}}=Dg(a);n!=null&&n.allowExpired||gk(c.exp);const x=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!x){const{error:V}=await this.getUser(a);if(V)throw V;return{data:{claims:c,header:o,signature:d},error:null}}const N=pk(o.alg),_=await crypto.subtle.importKey("jwk",x,N,!0,["verify"]);if(!await crypto.subtle.verify(N,_,d,tk(`${f}.${y}`)))throw new wp("Invalid JWT signature");return{data:{claims:c,header:o,signature:d},error:null}}catch(a){if(ut(a))return{data:null,error:a};throw a}}}Su.nextInstanceID=0;const Rk=Su;class Ik extends Rk{constructor(e){super(e)}}var Mk=function(r,e,n,a){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function f(N){try{x(a.next(N))}catch(_){d(_)}}function y(N){try{x(a.throw(N))}catch(_){d(_)}}function x(N){N.done?c(N.value):o(N.value).then(f,y)}x((a=a.apply(r,[])).next())})};class Ok{constructor(e,n,a){var o,c,d;this.supabaseUrl=e,this.supabaseKey=n;const f=F2(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const y=`sb-${f.hostname.split(".")[0]}-auth-token`,x={db:k2,realtime:R2,auth:Object.assign(Object.assign({},D2),{storageKey:y}),global:C2},N=B2(a??{},x);this.storageKey=(o=N.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=N.global.headers)!==null&&c!==void 0?c:{},N.accessToken?(this.accessToken=N.accessToken,this.auth=new Proxy({},{get:(_,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=N.auth)!==null&&d!==void 0?d:{},this.headers,N.global.fetch),this.fetch=L2(n,this._getAccessToken.bind(this),N.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},N.realtime)),this.rest=new J3(new URL("rest/v1",f).href,{headers:this.headers,schema:N.db.schema,fetch:this.fetch}),this.storage=new T2(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),N.accessToken||this._listenForAuthEvents()}get functions(){return new F3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},a={}){return this.rest.rpc(e,n,a)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Mk(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(n=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:a,storage:o,userStorage:c,storageKey:d,flowType:f,lock:y,debug:x},N,_){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ik({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),N),storageKey:d,autoRefreshToken:e,persistSession:n,detectSessionInUrl:a,storage:o,userStorage:c,flowType:f,lock:y,debug:x,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(V=>V.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new m2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(e,n,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Cx=(r,e,n)=>new Ok(r,e,n);function Lk(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Lk()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Bw={SUPABASE_URL:"https://bamwcozzfshuozsfmjah.supabase.co",SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXdjb3p6ZnNodW96c2ZtamFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxMDM0ODcsImV4cCI6MjA2NTY3OTQ4N30.NWSUKoYLl0oGS-dXf4jhtmLRiSuBSk-0lV3NRHJLvrs"},cs=Cx(Bw.SUPABASE_URL,Bw.SUPABASE_ANON_KEY,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),Kn=async()=>{const{data:{user:r},error:e}=await cs.auth.getUser();if(e)throw e;return r},fj=async()=>{const{error:r}=await cs.auth.signOut();if(r)throw r},kx=async r=>{var e;try{const n=r||((e=await Kn())==null?void 0:e.id);if(!n)return!1;const{data:a,error:o}=await cs.from("user_profiles").select("role").eq("id",n).single();return o?(console.error("Erreur vérification admin:",o),!1):(a==null?void 0:a.role)==="admin"}catch(n){return console.error("Erreur vérification admin:",n),!1}},gj=async(r,e)=>{try{const{data:n,error:a}=await cs.auth.signInWithPassword({email:r,password:e});if(a)throw a;if(!n.user)throw new Error("Aucun utilisateur retourné");if(!await kx(n.user.id))throw await cs.auth.signOut(),new Error("Accès administrateur refusé");return{data:n,error:null}}catch(n){return console.error("Erreur connexion admin:",n),{data:null,error:n instanceof Error?n:new Error("Erreur de connexion admin")}}},zu=async r=>{try{const e=await Kn();if(!e)throw new Error("Utilisateur non connecté");console.log("🔍 getUserProfileByType - Recherche profil pour:",{userId:e.id,userEmail:e.email,userType:r});const{data:n,error:a}=await cs.from("user_profiles").select("*").eq("id",e.id).single();if(console.log("📊 Résultat de la requête Supabase:",{data:n,error:a,errorCode:a==null?void 0:a.code}),a&&a.code!=="PGRST116")throw a;return{data:n,error:null}}catch(e){return console.error("❌ Erreur getUserProfileByType:",e),{data:null,error:e}}},zo=async(r,e,n="user")=>{try{const a=await Kn();if(!a)throw new Error("Utilisateur non connecté");console.log("🔄 updateUserProfile appelé:",{userId:a.id,userEmail:a.email,name:r,avatarUrl:e,userType:n});const o={id:a.id,name:r,email:a.email,updated_at:new Date().toISOString()};e!==void 0&&(o.avatar_url=e),console.log("📝 Données à envoyer à Supabase:",o);const{data:c,error:d}=await cs.from("user_profiles").upsert(o).select().single();if(d)throw d;return console.log("✅ Profil mis à jour dans Supabase:",c),{data:c,error:null}}catch(a){return console.error("❌ Erreur mise à jour profil:",a),{data:null,error:a instanceof Error?a:new Error("Erreur mise à jour profil")}}},pj=async(r,e,n="text")=>{try{const a=await Kn();if(!a)throw new Error("Utilisateur non connecté");const{data:o}=await zu("user"),c=(o==null?void 0:o.name)||a.email||"Utilisateur",d=(o==null?void 0:o.avatar_url)||null,{data:f,error:y}=await cs.from("chat_messages").insert({content:e,channel_id:r,author_id:a.id,author_name:c,author_avatar:d,message_type:n}).select(`
        *,
        author:user_profiles!author_id(id, name, email, avatar_url)
      `).single();if(y)throw y;return{data:f,error:null}}catch(a){return console.error("Erreur envoi message:",a),{data:null,error:a instanceof Error?a:new Error("Erreur envoi message")}}},xj=async(r,e=50)=>{try{const{data:n,error:a}=await cs.from("chat_messages").select(`
        *,
        author:user_profiles!author_id(id, name, email, avatar_url),
        reactions:message_reactions(reaction, user_id)
      `).eq("channel_id",r).order("created_at",{ascending:!1}).limit(e);if(a)throw a;return{data:(n==null?void 0:n.reverse())||[],error:null}}catch(n){return console.error("Erreur récupération messages:",n),{data:[],error:n instanceof Error?n:new Error("Erreur récupération messages")}}},yj=(r,e)=>cs.channel(`messages:${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`channel_id=eq.${r}`},async n=>{const{data:a}=await cs.from("chat_messages").select(`
            *,
            author:user_profiles!author_id(id, name, email, avatar_url)
          `).eq("id",n.new.id).single();a&&e(a)}).subscribe(),vj=async r=>{try{const e=await Kn();if(!e)return console.error("❌ Utilisateur non connecté"),null;console.log("🚀 Ajout trade personnel Supabase:",r);let n=null,a=null;r.image1&&typeof r.image1=="object"?n=await new Promise(y=>{const x=new FileReader;x.onload=()=>y(x.result),x.readAsDataURL(r.image1)}):typeof r.image1=="string"&&(n=r.image1),r.image2&&typeof r.image2=="object"?a=await new Promise(y=>{const x=new FileReader;x.onload=()=>y(x.result),x.readAsDataURL(r.image2)}):typeof r.image2=="string"&&(a=r.image2);const o={user_id:e.id,date:r.date,symbol:r.symbol,type:r.type,entry:parseFloat(r.entry),exit:parseFloat(r.exit),stop_loss:r.stopLoss?parseFloat(r.stopLoss):null,pnl:parseFloat(r.pnl),status:r.status,loss_reason:r.lossReason||null,notes:r.notes||null,image1:n,image2:a,timestamp:r.timestamp||new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})};r.account&&(o.account=r.account);const{data:c,error:d}=await cs.from("personal_trades").insert(o).select("*").single();return d?(console.error("❌ Erreur ajout trade Supabase:",d),null):(console.log("✅ Trade personnel sauvegardé Supabase:",c),{...c,entry:c.entry.toString(),exit:c.exit.toString(),stopLoss:c.stop_loss?c.stop_loss.toString():void 0,pnl:c.pnl.toString()})}catch(e){return console.error("❌ Erreur ajout trade personnel Supabase:",e),null}},Np=async(r=100)=>{try{const e=await Kn();if(!e)return console.error("❌ Utilisateur non connecté"),[];console.log("📊 Récupération trades personnels Supabase...");const{data:n,error:a}=await cs.from("personal_trades").select("*").eq("user_id",e.id).order("date",{ascending:!1}).order("created_at",{ascending:!1}).limit(r);return a?(console.error("❌ Erreur récupération trades Supabase:",a),[]):(console.log("✅ Trades personnels récupérés:",n.length),n.length>0&&console.log("🔍 PREMIER TRADE BRUT:",JSON.stringify(n[0],null,2)),n.map(c=>({id:c.id,user_id:c.user_id,date:c.date,symbol:c.symbol,type:c.type,entry:c.entry.toString(),exit:c.exit.toString(),stopLoss:c.stop_loss?c.stop_loss.toString():void 0,pnl:c.pnl.toString(),status:c.status,lossReason:c.loss_reason||void 0,notes:c.notes||void 0,image1:c.image1||void 0,image2:c.image2||void 0,timestamp:c.timestamp||void 0,account:c.account||"Compte Principal",created_at:c.created_at,updated_at:c.updated_at})))}catch(e){return console.error("❌ Erreur récupération trades personnels Supabase:",e),[]}},oh=async r=>{try{const e=await Kn();if(!e)return console.error("❌ Utilisateur non connecté"),!1;const{error:n}=await cs.from("personal_trades").delete().eq("id",r).eq("user_id",e.id);return n?(console.error("❌ Erreur suppression trade Supabase:",n),!1):(console.log("✅ Trade supprimé avec succès"),!0)}catch(e){return console.error("❌ Erreur suppression trade Supabase:",e),!1}},bj=(r,e)=>{let n=null;return Kn().then(a=>{if(!a){console.error("❌ Utilisateur non connecté"),e&&e(new Error("Utilisateur non connecté"));return}n=a.id,console.log("👂 Démarrage écoute temps réel trades Supabase pour user:",n),Np().then(o=>{r(o)}),cs.channel("personal_trades_changes").on("postgres_changes",{event:"*",schema:"public",table:"personal_trades",filter:`user_id=eq.${n}`},o=>{console.log("🔄 Changement détecté dans trades:",o),Np().then(c=>{r(c)})}).subscribe(),console.log("✅ Abonnement temps réel trades actif")}),()=>{console.log("🛑 Arrêt écoute temps réel trades Supabase"),cs.channel("personal_trades_changes").unsubscribe()}},Dx=async()=>{try{const r=await Kn();if(!r)return console.error("❌ Utilisateur non connecté"),[];const{data:e,error:n}=await cs.from("user_accounts").select("*").eq("user_id",r.id).order("is_default",{ascending:!1}).order("created_at",{ascending:!0});return n?(console.error("❌ Erreur récupération comptes:",n),[]):(console.log("✅ Comptes récupérés:",e),e||[])}catch(r){return console.error("❌ Erreur getUserAccounts:",r),[]}},Mh=async(r,e,n)=>{try{const a=await Kn();if(!a)return console.error("❌ Utilisateur non connecté"),null;console.log("🚀 Ajout compte utilisateur:",r,"avec balance initiale:",e||0,"minimum:",n||0);const{data:o,error:c}=await cs.from("user_accounts").insert({user_id:a.id,account_name:r,is_default:!1}).select().single();return c?(console.error("❌ Erreur ajout compte:",c),null):(console.log("✅ Compte ajouté:",o),o)}catch(a){return console.error("❌ Erreur addUserAccount:",a),null}},Rx=async r=>{try{const e=await Kn();if(!e)return console.error("❌ Utilisateur non connecté"),!1;console.log("🗑️ Suppression compte:",r);const{error:n}=await cs.from("user_accounts").delete().eq("id",r).eq("user_id",e.id);return n?(console.error("❌ Erreur suppression compte:",n),!1):(console.log("✅ Compte supprimé"),!0)}catch(e){return console.error("❌ Erreur deleteUserAccount:",e),!1}},Oh=async(r,e)=>{try{const n=await Kn();if(!n)return console.error("❌ Utilisateur non connecté"),null;console.log("✏️ Mise à jour compte:",r,e);const{data:a,error:o}=await cs.from("user_accounts").select("*").eq("id",r).eq("user_id",n.id).single();if(o)return console.error("❌ Erreur lecture compte:",o),null;if(!a)return console.error("❌ Compte non trouvé"),null;const{data:c,error:d}=await cs.from("user_accounts").update(e).eq("id",r).eq("user_id",n.id).select();return d?(console.error("❌ Erreur mise à jour compte:",d),null):(console.log("✅ Compte mis à jour"),c&&c.length>0?c[0]:null)}catch(n){return console.error("❌ Erreur updateUserAccount:",n),null}},Pk=Object.freeze(Object.defineProperty({__proto__:null,addPersonalTrade:vj,addUserAccount:Mh,deletePersonalTrade:oh,deleteUserAccount:Rx,getCurrentUser:Kn,getMessages:xj,getPersonalTrades:Np,getUserAccounts:Dx,getUserProfileByType:zu,isUserAdmin:kx,listenToPersonalTrades:bj,sendMessage:pj,signInAdmin:gj,signOut:fj,subscribeToMessages:yj,supabase:cs,updateUserAccount:Oh,updateUserProfile:zo},Symbol.toStringTag,{value:"Module"})),Lh=({channelId:r,currentUserId:e,supabase:n})=>(console.log("ProfitLoss component rendering with props:",{channelId:r,currentUserId:e,supabase:n}),t.jsx("div",{className:"w-full h-full bg-blue-500 flex items-center justify-center",children:t.jsx("div",{className:"text-white text-2xl font-bold",children:"💬 CHAT SALON ACTIF"})})),wj="@firebase/installations",Ix="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=1e4,_j=`w:${Ix}`,jj="FIS_v2",Uk="https://firebaseinstallations.googleapis.com/v1",Bk=3600*1e3,Fk="installations",$k="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zl=new qh(Fk,$k,zk);function Sj(r){return r instanceof ga&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj({projectId:r}){return`${Uk}/projects/${r}/installations`}function Ej(r){return{token:r.token,requestStatus:2,expiresIn:Vk(r.expiresIn),creationTime:Date.now()}}async function Aj(r,e){const a=(await e.json()).error;return zl.create("request-failed",{requestName:r,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function Cj({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function qk(r,{refreshToken:e}){const n=Cj(r);return n.append("Authorization",Hk(e)),n}async function kj(r){const e=await r();return e.status>=500&&e.status<600?r():e}function Vk(r){return Number(r.replace("s","000"))}function Hk(r){return`${jj} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk({appConfig:r,heartbeatServiceProvider:e},{fid:n}){const a=Tj(r),o=Cj(r),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&o.append("x-firebase-client",x)}const d={fid:n,authVersion:jj,appId:r.appId,sdkVersion:_j},f={method:"POST",headers:o,body:JSON.stringify(d)},y=await kj(()=>fetch(a,f));if(y.ok){const x=await y.json();return{fid:x.fid||n,registrationStatus:2,refreshToken:x.refreshToken,authToken:Ej(x.authToken)}}else throw await Aj("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=/^[cdef][\w-]{21}$/,_p="";function Kk(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const n=Jk(r);return Wk.test(n)?n:_p}catch{return _p}}function Jk(r){return Yk(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=new Map;function Ij(r,e){const n=mm(r);Mj(n,e),Qk(n,e)}function Mj(r,e){const n=Rj.get(r);if(n)for(const a of n)a(e)}function Qk(r,e){const n=Xk();n&&n.postMessage({key:r,fid:e}),Zk()}let Ml=null;function Xk(){return!Ml&&"BroadcastChannel"in self&&(Ml=new BroadcastChannel("[Firebase] FID Change"),Ml.onmessage=r=>{Mj(r.data.key,r.data.fid)}),Ml}function Zk(){Rj.size===0&&Ml&&(Ml.close(),Ml=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="firebase-installations-database",tD=1,ql="firebase-installations-store";let Mg=null;function Mx(){return Mg||(Mg=Gh(eD,tD,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(ql)}}})),Mg}async function Ph(r,e){const n=mm(r),o=(await Mx()).transaction(ql,"readwrite"),c=o.objectStore(ql),d=await c.get(n);return await c.put(e,n),await o.done,(!d||d.fid!==e.fid)&&Ij(r,e.fid),e}async function Oj(r){const e=mm(r),a=(await Mx()).transaction(ql,"readwrite");await a.objectStore(ql).delete(e),await a.done}async function fm(r,e){const n=mm(r),o=(await Mx()).transaction(ql,"readwrite"),c=o.objectStore(ql),d=await c.get(n),f=e(d);return f===void 0?await c.delete(n):await c.put(f,n),await o.done,f&&(!d||d.fid!==f.fid)&&Ij(r,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(r){let e;const n=await fm(r.appConfig,a=>{const o=sD(a),c=nD(r,o);return e=c.registrationPromise,c.installationEntry});return n.fid===_p?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function sD(r){const e=r||{fid:Kk(),registrationStatus:0};return Lj(e)}function nD(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(zl.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=rD(r,n);return{installationEntry:n,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:iD(r)}:{installationEntry:e}}async function rD(r,e){try{const n=await Gk(r,e);return Ph(r.appConfig,n)}catch(n){throw Sj(n)&&n.customData.serverCode===409?await Oj(r.appConfig):await Ph(r.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function iD(r){let e=await Fw(r.appConfig);for(;e.registrationStatus===1;)await Dj(100),e=await Fw(r.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:a}=await Ox(r);return a||n}return e}function Fw(r){return fm(r,e=>{if(!e)throw zl.create("installation-not-found");return Lj(e)})}function Lj(r){return aD(r)?{fid:r.fid,registrationStatus:0}:r}function aD(r){return r.registrationStatus===1&&r.registrationTime+Nj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD({appConfig:r,heartbeatServiceProvider:e},n){const a=oD(r,n),o=qk(r,n),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&o.append("x-firebase-client",x)}const d={installation:{sdkVersion:_j,appId:r.appId}},f={method:"POST",headers:o,body:JSON.stringify(d)},y=await kj(()=>fetch(a,f));if(y.ok){const x=await y.json();return Ej(x)}else throw await Aj("Generate Auth Token",y)}function oD(r,{fid:e}){return`${Tj(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(r,e=!1){let n;const a=await fm(r.appConfig,c=>{if(!Pj(c))throw zl.create("not-registered");const d=c.authToken;if(!e&&dD(d))return c;if(d.requestStatus===1)return n=cD(r,e),c;{if(!navigator.onLine)throw zl.create("app-offline");const f=mD(c);return n=uD(r,f),f}});return n?await n:a.authToken}async function cD(r,e){let n=await $w(r.appConfig);for(;n.authToken.requestStatus===1;)await Dj(100),n=await $w(r.appConfig);const a=n.authToken;return a.requestStatus===0?Lx(r,e):a}function $w(r){return fm(r,e=>{if(!Pj(e))throw zl.create("not-registered");const n=e.authToken;return fD(n)?{...e,authToken:{requestStatus:0}}:e})}async function uD(r,e){try{const n=await lD(r,e),a={...e,authToken:n};return await Ph(r.appConfig,a),n}catch(n){if(Sj(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Oj(r.appConfig);else{const a={...e,authToken:{requestStatus:0}};await Ph(r.appConfig,a)}throw n}}function Pj(r){return r!==void 0&&r.registrationStatus===2}function dD(r){return r.requestStatus===2&&!hD(r)}function hD(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+Bk}function mD(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function fD(r){return r.requestStatus===1&&r.requestTime+Nj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(r){const e=r,{installationEntry:n,registrationPromise:a}=await Ox(e);return a?a.catch(console.error):Lx(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(r,e=!1){const n=r;return await xD(n),(await Lx(n,e)).token}async function xD(r){const{registrationPromise:e}=await Ox(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(r){if(!r||!r.options)throw Og("App Configuration");if(!r.name)throw Og("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!r.options[n])throw Og(n);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Og(r){return zl.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="installations",vD="installations-internal",bD=r=>{const e=r.getProvider("app").getImmediate(),n=yD(e),a=Gl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},wD=r=>{const e=r.getProvider("app").getImmediate(),n=Gl(e,Uj).getImmediate();return{getId:()=>gD(n),getToken:o=>pD(n,o)}};function ND(){Ni(new Kr(Uj,bD,"PUBLIC")),Ni(new Kr(vD,wD,"PRIVATE"))}ND();On(wj,Ix);On(wj,Ix,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="/firebase-messaging-sw.js",jD="/firebase-cloud-messaging-push-scope",Bj="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",SD="https://fcmregistrations.googleapis.com/v1",Fj="google.c.a.c_id",TD="google.c.a.c_l",ED="google.c.a.ts",AD="google.c.a.e",zw=1e4;var qw;(function(r){r[r.DATA_MESSAGE=1]="DATA_MESSAGE",r[r.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(qw||(qw={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Tu;(function(r){r.PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked"})(Tu||(Tu={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(r){const e=new Uint8Array(r);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function CD(r){const e="=".repeat((4-r.length%4)%4),n=(r+e).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(n),o=new Uint8Array(a.length);for(let c=0;c<a.length;++c)o[c]=a.charCodeAt(c);return o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="fcm_token_details_db",kD=5,Vw="fcm_token_object_Store";async function DD(r){if("databases"in indexedDB&&!(await indexedDB.databases()).map(c=>c.name).includes(Lg))return null;let e=null;return(await Gh(Lg,kD,{upgrade:async(a,o,c,d)=>{if(o<2||!a.objectStoreNames.contains(Vw))return;const f=d.objectStore(Vw),y=await f.index("fcmSenderId").get(r);if(await f.clear(),!!y){if(o===2){const x=y;if(!x.auth||!x.p256dh||!x.endpoint)return;e={token:x.fcmToken,createTime:x.createTime??Date.now(),subscriptionOptions:{auth:x.auth,p256dh:x.p256dh,endpoint:x.endpoint,swScope:x.swScope,vapidKey:typeof x.vapidKey=="string"?x.vapidKey:la(x.vapidKey)}}}else if(o===3){const x=y;e={token:x.fcmToken,createTime:x.createTime,subscriptionOptions:{auth:la(x.auth),p256dh:la(x.p256dh),endpoint:x.endpoint,swScope:x.swScope,vapidKey:la(x.vapidKey)}}}else if(o===4){const x=y;e={token:x.fcmToken,createTime:x.createTime,subscriptionOptions:{auth:la(x.auth),p256dh:la(x.p256dh),endpoint:x.endpoint,swScope:x.swScope,vapidKey:la(x.vapidKey)}}}}}})).close(),await mg(Lg),await mg("fcm_vapid_details_db"),await mg("undefined"),RD(e)?e:null}function RD(r){if(!r||!r.subscriptionOptions)return!1;const{subscriptionOptions:e}=r;return typeof r.createTime=="number"&&r.createTime>0&&typeof r.token=="string"&&r.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="firebase-messaging-database",MD=1,Vl="firebase-messaging-store";let Pg=null;function Px(){return Pg||(Pg=Gh(ID,MD,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Vl)}}})),Pg}async function $j(r){const e=Bx(r),a=await(await Px()).transaction(Vl).objectStore(Vl).get(e);if(a)return a;{const o=await DD(r.appConfig.senderId);if(o)return await Ux(r,o),o}}async function Ux(r,e){const n=Bx(r),o=(await Px()).transaction(Vl,"readwrite");return await o.objectStore(Vl).put(e,n),await o.done,e}async function OD(r){const e=Bx(r),a=(await Px()).transaction(Vl,"readwrite");await a.objectStore(Vl).delete(e),await a.done}function Bx({appConfig:r}){return r.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Tn=new qh("messaging","Messaging",LD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(r,e){const n=await $x(r),a=qj(e),o={method:"POST",headers:n,body:JSON.stringify(a)};let c;try{c=await(await fetch(Fx(r.appConfig),o)).json()}catch(d){throw Tn.create("token-subscribe-failed",{errorInfo:d==null?void 0:d.toString()})}if(c.error){const d=c.error.message;throw Tn.create("token-subscribe-failed",{errorInfo:d})}if(!c.token)throw Tn.create("token-subscribe-no-token");return c.token}async function UD(r,e){const n=await $x(r),a=qj(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(a)};let c;try{c=await(await fetch(`${Fx(r.appConfig)}/${e.token}`,o)).json()}catch(d){throw Tn.create("token-update-failed",{errorInfo:d==null?void 0:d.toString()})}if(c.error){const d=c.error.message;throw Tn.create("token-update-failed",{errorInfo:d})}if(!c.token)throw Tn.create("token-update-no-token");return c.token}async function zj(r,e){const a={method:"DELETE",headers:await $x(r)};try{const c=await(await fetch(`${Fx(r.appConfig)}/${e}`,a)).json();if(c.error){const d=c.error.message;throw Tn.create("token-unsubscribe-failed",{errorInfo:d})}}catch(o){throw Tn.create("token-unsubscribe-failed",{errorInfo:o==null?void 0:o.toString()})}}function Fx({projectId:r}){return`${SD}/projects/${r}/registrations`}async function $x({appConfig:r,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function qj({p256dh:r,auth:e,endpoint:n,vapidKey:a}){const o={web:{endpoint:n,auth:e,p256dh:r}};return a!==Bj&&(o.web.applicationPubKey=a),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=10080*60*1e3;async function FD(r){const e=await qD(r.swRegistration,r.vapidKey),n={vapidKey:r.vapidKey,swScope:r.swRegistration.scope,endpoint:e.endpoint,auth:la(e.getKey("auth")),p256dh:la(e.getKey("p256dh"))},a=await $j(r.firebaseDependencies);if(a){if(VD(a.subscriptionOptions,n))return Date.now()>=a.createTime+BD?zD(r,{token:a.token,createTime:Date.now(),subscriptionOptions:n}):a.token;try{await zj(r.firebaseDependencies,a.token)}catch(o){console.warn(o)}return Hw(r.firebaseDependencies,n)}else return Hw(r.firebaseDependencies,n)}async function $D(r){const e=await $j(r.firebaseDependencies);e&&(await zj(r.firebaseDependencies,e.token),await OD(r.firebaseDependencies));const n=await r.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function zD(r,e){try{const n=await UD(r.firebaseDependencies,e),a={...e,token:n,createTime:Date.now()};return await Ux(r.firebaseDependencies,a),n}catch(n){throw n}}async function Hw(r,e){const a={token:await PD(r,e),createTime:Date.now(),subscriptionOptions:e};return await Ux(r,a),a.token}async function qD(r,e){const n=await r.pushManager.getSubscription();return n||r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:CD(e)})}function VD(r,e){const n=e.vapidKey===r.vapidKey,a=e.endpoint===r.endpoint,o=e.auth===r.auth,c=e.p256dh===r.p256dh;return n&&a&&o&&c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(r){const e={from:r.from,collapseKey:r.collapse_key,messageId:r.fcmMessageId};return HD(e,r),GD(e,r),YD(e,r),e}function HD(r,e){if(!e.notification)return;r.notification={};const n=e.notification.title;n&&(r.notification.title=n);const a=e.notification.body;a&&(r.notification.body=a);const o=e.notification.image;o&&(r.notification.image=o);const c=e.notification.icon;c&&(r.notification.icon=c)}function GD(r,e){e.data&&(r.data=e.data)}function YD(r,e){var o,c,d,f;if(!e.fcmOptions&&!((o=e.notification)!=null&&o.click_action))return;r.fcmOptions={};const n=((c=e.fcmOptions)==null?void 0:c.link)??((d=e.notification)==null?void 0:d.click_action);n&&(r.fcmOptions.link=n);const a=(f=e.fcmOptions)==null?void 0:f.analytics_label;a&&(r.fcmOptions.analyticsLabel=a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(r){return typeof r=="object"&&!!r&&Fj in r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(r){if(!r||!r.options)throw Ug("App Configuration Object");if(!r.name)throw Ug("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=r;for(const a of e)if(!n[a])throw Ug(a);return{appName:r.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Ug(r){return Tn.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,n,a){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=KD(e);this.firebaseDependencies={app:e,appConfig:o,installations:n,analyticsProvider:a}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj(r){try{r.swRegistration=await navigator.serviceWorker.register(_D,{scope:jD}),r.swRegistration.update().catch(()=>{}),await QD(r.swRegistration)}catch(e){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function QD(r){return new Promise((e,n)=>{const a=setTimeout(()=>n(new Error(`Service worker not registered after ${zw} ms`)),zw),o=r.installing||r.waiting;r.active?(clearTimeout(a),e()):o?o.onstatechange=c=>{var d;((d=c.target)==null?void 0:d.state)==="activated"&&(o.onstatechange=null,clearTimeout(a),e())}:(clearTimeout(a),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(r,e){if(!e&&!r.swRegistration&&await Vj(r),!(!e&&r.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");r.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(r,e){e?r.vapidKey=e:r.vapidKey||(r.vapidKey=Bj)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hj(r,e){if(!navigator)throw Tn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Tn.create("permission-blocked");return await ZD(r,e==null?void 0:e.vapidKey),await XD(r,e==null?void 0:e.serviceWorkerRegistration),FD(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(r,e,n){const a=tR(e);(await r.firebaseDependencies.analyticsProvider.get()).logEvent(a,{message_id:n[Fj],message_name:n[TD],message_time:n[ED],message_device_time:Math.floor(Date.now()/1e3)})}function tR(r){switch(r){case Tu.NOTIFICATION_CLICKED:return"notification_open";case Tu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(r,e){const n=e.data;if(!n.isFirebaseMessaging)return;r.onMessageHandler&&n.messageType===Tu.PUSH_RECEIVED&&(typeof r.onMessageHandler=="function"?r.onMessageHandler(Gw(n)):r.onMessageHandler.next(Gw(n)));const a=n.data;WD(a)&&a[AD]==="1"&&await eR(r,n.messageType,a)}const Yw="@firebase/messaging",Ww="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=r=>{const e=new JD(r.getProvider("app").getImmediate(),r.getProvider("installations-internal").getImmediate(),r.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>sR(e,n)),e},rR=r=>{const e=r.getProvider("messaging").getImmediate();return{getToken:a=>Hj(e,a)}};function iR(){Ni(new Kr("messaging",nR,"PUBLIC")),Ni(new Kr("messaging-internal",rR,"PRIVATE")),On(Yw,Ww),On(Yw,Ww,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(){try{await cN()}catch{return!1}return typeof window<"u"&&oN()&&J1()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(r){if(!navigator)throw Tn.create("only-available-in-window");return r.swRegistration||await Vj(r),$D(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(r,e){if(!navigator)throw Tn.create("only-available-in-window");return r.onMessageHandler=e,()=>{r.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(r=Cu()){return Gj().then(e=>{if(!e)throw Tn.create("unsupported-browser")},e=>{throw Tn.create("indexed-db-unsupported")}),Gl(Ln(r),"messaging").getImmediate()}async function Wj(r,e){return r=Ln(r),Hj(r,e)}function oR(r){return r=Ln(r),aR(r)}function Kj(r,e){return r=Ln(r),lR(r,e)}iR();const jp=Object.freeze(Object.defineProperty({__proto__:null,deleteToken:oR,getMessaging:Yj,getToken:Wj,isSupported:Gj,onMessage:Kj},Symbol.toStringTag,{value:"Module"})),cR=Wh(dm);let gm=null;try{typeof window<"u"&&"serviceWorker"in navigator&&(gm=Yj(cR))}catch{console.log("⚠️ Firebase Messaging non supporté dans ce navigateur")}const uR=async()=>{if(!("Notification"in window))return console.log("❌ Ce navigateur ne supporte pas les notifications"),!1;if(Notification.permission==="granted")return console.log("✅ Permission de notifications déjà accordée"),await Sp(),!0;if(Notification.permission==="denied")return console.log("❌ Permission de notifications refusée"),!1;try{const r=await Notification.requestPermission();return console.log("📱 Permission notifications:",r),r==="granted"&&await Sp(),r==="granted"}catch(r){return console.error("❌ Erreur demande permission notifications:",r),!1}},Sp=async()=>{try{if("serviceWorker"in navigator){const r=await navigator.serviceWorker.register("/sw.js");console.log("✅ Service Worker enregistré:",r);const e=await Wj(gm,{vapidKey:"BKATJNvQG6Ix5oelm4oKxaskNzNk9uTcXqrwRr8wBalBJZDvcGGZdG2KxeLbM8hfCWtlmHxpu_yXiNzMdiD-bP0",serviceWorkerRegistration:r});return e?(console.log("✅ Token FCM obtenu:",e),localStorage.setItem("fcmToken",e),e):(console.log("❌ Aucun token FCM disponible"),null)}else return console.log("❌ Service Worker non supporté"),null}catch(r){return console.error("❌ Erreur obtention token FCM:",r),null}},Eu=r=>{if(console.log("📱 Envoi notification locale..."),!("Notification"in window)||Notification.permission!=="granted"){console.log("❌ Notifications non disponibles");return}try{const e=new Notification(r.title,{body:r.body,icon:r.icon||"/FAVICON.png",badge:r.badge||"/FAVICON.png",tag:r.tag||"trading-signal",data:r.data,requireInteraction:!0,silent:!1});e.onclick=n=>{var a;n.preventDefault(),e.close(),window.focus(),(a=r.data)!=null&&a.channelId&&window.dispatchEvent(new CustomEvent("signalNotificationClicked",{detail:{channelId:r.data.channelId}}))},setTimeout(()=>{e.close()},1e4),console.log("📱 Notification locale envoyée:",r.title)}catch(e){console.error("❌ Erreur envoi notification locale:",e)}},ch=r=>{console.log("📱 Notification nouveau signal:",r);const e={title:"Signal Trade",body:`${r.type} ${r.symbol} - Entrée: ${r.entry} | TP: ${r.takeProfit} | SL: ${r.stopLoss}`,icon:"/FAVICON.png",badge:"/FAVICON.png",tag:`signal-${r.id}`,data:{signalId:r.id,channelId:r.channel_id,type:"new_signal"}};console.log("🔍 Debug notifications:",{serviceWorker:"serviceWorker"in navigator,notification:"Notification"in window,permission:Notification.permission}),"serviceWorker"in navigator&&"Notification"in window&&Notification.permission==="granted"?(console.log("📱 Envoi notification via Service Worker..."),navigator.serviceWorker.ready.then(n=>{n.showNotification(e.title,{body:e.body,icon:e.icon,badge:e.badge,tag:e.tag,data:e.data,requireInteraction:!0}),console.log("✅ Notification envoyée via Service Worker")}).catch(n=>{console.error("❌ Erreur Service Worker notification:",n),Eu(e)})):(console.log("📱 Fallback notification locale (Service Worker non disponible)"),Eu(e))},Tp=r=>{const e=r.status==="WIN"?"✅":r.status==="LOSS"?"❌":"⚖️",n=r.status==="WIN"?"GAGNANT":r.status==="LOSS"?"PERDANT":"BREAK-EVEN",a={title:`${e} Signal ${r.symbol} ${n}`,body:`P&L: ${r.pnl||"N/A"} - ${r.closeMessage||"Position fermée"}`,icon:"/FAVICON.png",badge:"/FAVICON.png",tag:`signal-closed-${r.id}`,data:{signalId:r.id,channelId:r.channel_id,type:"signal_closed"}};gm?console.log("📱 Tentative notification push signal fermé..."):(console.log("📱 Fallback notification locale signal fermé"),Eu(a))},Ep=async()=>{if(console.log("🚀 Initialisation du système de notifications push..."),localStorage.getItem("notificationsDisabled")==="true"){console.log("🔴 NOTIFICATIONS DÉSACTIVÉES PAR L'UTILISATEUR - AUCUNE INITIALISATION");return}try{if(await uR()){console.log("✅ Notifications activées");try{const n=await Sp();if(n){console.log("✅ Token FCM obtenu pour notifications push:",n);try{console.log("🔄 Tentative sauvegarde token FCM dans Firebase...");const{ref:a,set:o}=await $s(async()=>{const{ref:f,set:y}=await Promise.resolve().then(()=>Qo);return{ref:f,set:y}},void 0),{database:c}=await $s(async()=>{const{database:f}=await Promise.resolve().then(()=>Zo);return{database:f}},void 0);console.log("✅ Imports Firebase réussis");const d=a(c,`fcm_tokens/${n.replace(/[.#$[\]]/g,"_")}`);console.log("✅ Référence Firebase créée:",d.key),await o(d,{token:n,timestamp:Date.now(),userAgent:navigator.userAgent}),console.log("💾 Token FCM sauvegardé dans Firebase Database")}catch(a){console.error("❌ Erreur sauvegarde token FCM:",a),console.error("❌ Détails erreur:",a.message)}}}catch(n){console.error("❌ Erreur enregistrement FCM:",n)}Kj(gm,n=>{console.log("📱 Message FCM reçu:",n);const a=n.notification;a&&Eu({title:a.title||"Nouvelle notification",body:a.body||"",icon:a.icon||"/FAVICON.png",data:n.data})}),window.addEventListener("signalNotificationClicked",n=>{const{channelId:a}=n.detail;console.log("📱 Notification cliquée, canal:",a),window.dispatchEvent(new CustomEvent("navigateToChannel",{detail:{channelId:a}}))})}else console.log("❌ Notifications non autorisées")}catch(e){console.error("❌ Erreur initialisation notifications:",e)}},Pl=[{value:"mauvais_entree",emoji:"🎯",label:"Mauvais point d'entrée"},{value:"stop_trop_serre",emoji:"⚠️",label:"Stop-loss trop serré"},{value:"news_impact",emoji:"📰",label:"Impact de news/événements"},{value:"psychologie",emoji:"🧠",label:"Erreur psychologique (FOMO/Panic)"},{value:"analyse_technique",emoji:"📊",label:"Erreur d'analyse technique"},{value:"gestion_risque",emoji:"💰",label:"Mauvaise gestion du risque"},{value:"timing",emoji:"⏰",label:"Mauvais timing"},{value:"volatilite",emoji:"📈",label:"Volatilité excessive"},{value:"autre",emoji:"🔧",label:"Autre raison"}],Jj=r=>{const e=Pl.find(n=>n.value===r);return e?`${e.emoji} ${e.label}`:r},Kw={url:"https://bamwcozzfshuozsfmjah.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXdjb3p6ZnNodW96c2ZtamFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxMDM0ODcsImV4cCI6MjA2NTY3OTQ4N30.NWSUKoYLl0oGS-dXf4jhtmLRiSuBSk-0lV3NRHJLvrs"},uh=Cx(Kw.url,Kw.anonKey),Qj=async(r,e)=>{try{console.log("🔄 Synchronisation photo de profil...");const n=r==="admin"?"adminProfileImage":"userProfileImage";localStorage.setItem(n,e),console.log("💾 Sauvegardé dans localStorage");const a=r==="admin"?"admin_user":"default_user",{data:o}=await uh.from("user_profiles").select("*").eq("user_id",a).eq("user_type",r).single();return o?(await uh.from("user_profiles").update({profile_image:e,updated_at:new Date().toISOString()}).eq("user_id",a),console.log("🔄 Profil mis à jour dans Supabase")):(await uh.from("user_profiles").insert({user_id:a,user_type:r,profile_image:e,display_name:r==="admin"?"Admin":"TheTheTrader"}),console.log("✨ Nouveau profil créé dans Supabase")),{success:!0}}catch(n){return console.error("❌ Erreur sync profile:",n),{success:!1,error:n}}},dR=async r=>{try{const e=r==="admin"?"adminProfileImage":"userProfileImage",n=localStorage.getItem(e);if(n)return console.log("📱 Photo trouvée dans localStorage"),n;const a=r==="admin"?"admin_user":"default_user",{data:o}=await uh.from("user_profiles").select("profile_image").eq("user_id",a).eq("user_type",r).single();return o!=null&&o.profile_image?(localStorage.setItem(e,o.profile_image),console.log("☁️ Photo trouvée dans Supabase et sauvegardée localement"),o.profile_image):(console.log("❌ Aucune photo de profil trouvée"),null)}catch(e){return console.error("❌ Erreur récupération profile:",e),null}},hR=async r=>await dR(r);function mR(){const[r,e]=L.useState([]),[n,a]=L.useState({totalPnL:0,winRate:0,totalTrades:0,avgWin:0,avgLoss:0,activeSignals:0}),o=async()=>{try{console.log("📊 [STATS-SYNC] Chargement de TOUS les signaux pour synchronisation...");const x=["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"];let N=[];for(const _ of x)try{const S=await ua(_,100);S&&S.length>0&&(console.log(`🔍 [STATS-SYNC] Signaux bruts de ${_}:`,S),S.forEach(V=>{console.log(`🔍 [STATS-SYNC] Signal ${V.id} de ${_}:`,{image:V.image,attachment_data:V.attachment_data,ALL_KEYS:Object.keys(V)})}),N=[...N,...S])}catch(S){console.error(`❌ [STATS-SYNC] Erreur chargement signaux pour ${_}:`,S)}if(N.length>0){const _=N.map(S=>{var re,ce,I;const z=S.status&&S.status!=="ACTIVE"?new Date(S.timestamp||Date.now()).toISOString():new Date(S.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return{id:S.id||"",type:S.type,symbol:S.symbol,timeframe:S.timeframe,entry:((re=S.entry)==null?void 0:re.toString())||"N/A",takeProfit:((ce=S.takeProfit)==null?void 0:ce.toString())||"N/A",stopLoss:((I=S.stopLoss)==null?void 0:I.toString())||"N/A",description:S.description||"",image:S.image,timestamp:z,originalTimestamp:S.timestamp||Date.now(),status:S.status||"ACTIVE",channel_id:S.channel_id,reactions:S.reactions||[],pnl:S.pnl,closeMessage:S.closeMessage,attachment_data:S.attachment_data,attachment_type:S.attachment_type,attachment_name:S.attachment_name}});e(_),console.log(`✅ [STATS-SYNC] ${_.length} signaux synchronisés`)}}catch(x){console.error("❌ [STATS-SYNC] Erreur synchronisation:",x)}},c=x=>{const N=x.filter(te=>te.status!=="ACTIVE"),_=x.filter(te=>te.status==="ACTIVE"),S=te=>{if(!te)return 0;const be=te.replace(/[$,]/g,"").trim(),Se=Number(be);return isNaN(Se)?0:Se},V=N.filter(te=>te.pnl&&te.pnl!=="0"&&te.pnl!=="$0").reduce((te,be)=>te+S(be.pnl),0),z=N.length>0?Math.round(N.filter(te=>te.status==="WIN").length/N.length*100):0,re=N.filter(te=>te.status==="WIN"&&te.pnl&&te.pnl!=="0"&&te.pnl!=="$0"),ce=N.filter(te=>te.status==="LOSS"&&te.pnl&&te.pnl!=="0"&&te.pnl!=="$0"),I=re.length>0?Math.round(re.reduce((te,be)=>te+S(be.pnl),0)/re.length):0,Ee=ce.length>0?Math.round(ce.reduce((te,be)=>te+Math.abs(S(be.pnl)),0)/ce.length):0;return{totalPnL:Math.round(V),winRate:z,totalTrades:N.length,avgWin:I,avgLoss:Ee,activeSignals:_.length}};return L.useEffect(()=>{const x=c(r);a(x)},[r]),L.useEffect(()=>{o();const x=setInterval(o,3e4);return()=>clearInterval(x)},[]),{allSignalsForStats:r,stats:n,refreshStats:o,getWeeklyBreakdown:()=>{const x=new Date,N=x.getMonth(),_=x.getFullYear(),S=[];for(let V=1;V<=5;V++){const z=new Date(_,N,(V-1)*7+1),re=new Date(_,N,V*7),ce=r.filter(B=>{const M=new Date(B.originalTimestamp);return M>=z&&M<=re&&M.getMonth()===N&&M.getFullYear()===_}),I=ce.filter(B=>B.status!=="ACTIVE"),Ee=I.reduce((B,M)=>{if(!M.pnl)return B;const F=M.pnl.replace(/[$,]/g,"").trim(),K=Number(F);return B+(isNaN(K)?0:K)},0),te=I.filter(B=>B.status==="WIN").length,be=I.filter(B=>B.status==="LOSS").length,Se=Math.ceil(x.getDate()/7),Ae=V===Se;S.push({week:`Week ${V}`,trades:ce.length,pnl:Ee,wins:te,losses:be,isCurrentWeek:Ae})}return S},getTodaySignals:()=>{const x=new Date;return r.filter(N=>{const _=new Date(N.originalTimestamp);return _.getDate()===x.getDate()&&_.getMonth()===x.getMonth()&&_.getFullYear()===x.getFullYear()})},getThisMonthSignals:()=>{const x=new Date;return r.filter(N=>{const _=new Date(N.originalTimestamp);return _.getMonth()===x.getMonth()&&_.getFullYear()===x.getFullYear()})}}}function fR(){const[r,e]=L.useState({dailyData:{},totalPnL:0,totalTrades:0,winRate:0,avgWin:0,avgLoss:0}),n=async()=>{try{console.log("📅 [CALENDAR-SYNC] Chargement des données du calendrier...");const c=["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"];let d=[];for(const f of c)try{const y=await ua(f,100);y&&y.length>0&&(d=[...d,...y])}catch(y){console.error(`❌ [CALENDAR-SYNC] Erreur chargement signaux pour ${f}:`,y)}if(d.length>0){console.log("🔍 [CALENDAR-SYNC] Signaux bruts reçus:",d);const f=d.map(I=>{var Ee,te,be;return console.log("🔍 [CALENDAR-SYNC] Signal individuel COMPLET:",{id:I.id,symbol:I.symbol,image:I.image,attachment_data:I.attachment_data,attachment_type:I.attachment_type,attachment_name:I.attachment_name,status:I.status,timestamp:I.timestamp,ALL_KEYS:Object.keys(I)}),{id:I.id||"",type:I.type,symbol:I.symbol,timeframe:I.timeframe,entry:((Ee=I.entry)==null?void 0:Ee.toString())||"N/A",takeProfit:((te=I.takeProfit)==null?void 0:te.toString())||"N/A",stopLoss:((be=I.stopLoss)==null?void 0:be.toString())||"N/A",description:I.description||"",timestamp:I.timestamp||Date.now(),status:I.status||"ACTIVE",channel_id:I.channel_id,pnl:I.pnl,closeMessage:I.closeMessage,image:I.image,attachment_data:I.attachment_data,attachment_type:I.attachment_type,attachment_name:I.attachment_name}}),y={};f.forEach(I=>{const Ee=new Date(I.timestamp),te=`${Ee.getFullYear()}-${String(Ee.getMonth()+1).padStart(2,"0")}-${String(Ee.getDate()).padStart(2,"0")}`;if(y[te]||(y[te]={signals:[],pnl:0,trades:0}),y[te].signals.push(I),y[te].trades++,I.pnl&&I.status!=="ACTIVE"){const be=I.pnl.replace(/[$,]/g,"").trim(),Se=Number(be);isNaN(Se)||(y[te].pnl+=Se)}});const x=f.filter(I=>I.status!=="ACTIVE"),N=x.reduce((I,Ee)=>{if(!Ee.pnl)return I;const te=Ee.pnl.replace(/[$,]/g,"").trim(),be=Number(te);return I+(isNaN(be)?0:be)},0),_=x.length,S=_>0?Math.round(x.filter(I=>I.status==="WIN").length/_*100):0,V=x.filter(I=>I.status==="WIN"&&I.pnl),z=x.filter(I=>I.status==="LOSS"&&I.pnl),re=V.length>0?Math.round(V.reduce((I,Ee)=>{const te=Ee.pnl.replace(/[$,]/g,"").trim(),be=Number(te);return I+(isNaN(be)?0:be)},0)/V.length):0,ce=z.length>0?Math.round(z.reduce((I,Ee)=>{const te=Ee.pnl.replace(/[$,]/g,"").trim(),be=Number(te);return I+Math.abs(isNaN(be)?0:be)},0)/z.length):0;e({dailyData:y,totalPnL:Math.round(N),totalTrades:_,winRate:S,avgWin:re,avgLoss:ce}),console.log(`✅ [CALENDAR-SYNC] ${f.length} signaux organisés par date`)}}catch(c){console.error("❌ [CALENDAR-SYNC] Erreur synchronisation:",c)}},a=c=>{const d=c.getMonth(),f=c.getFullYear();let y=0,x=0,N=0,_=0;Object.entries(r.dailyData).forEach(([V,z])=>{const re=new Date(V);re.getMonth()===d&&re.getFullYear()===f&&(y+=z.pnl,x+=z.trades,N+=z.signals.filter(ce=>ce.status==="WIN").length,_+=z.signals.filter(ce=>ce.status==="LOSS").length)});const S=x>0?Math.round(N/x*100):0;return{totalPnL:y,totalTrades:x,winRate:S,avgWin:N>0?Math.round(y/N):0,avgLoss:_>0?Math.round(Math.abs(y)/_):0}},o=c=>{const d=c||new Date,f=d.getMonth(),y=d.getFullYear(),x=[];for(let N=1;N<=5;N++){const _=new Date(y,f,(N-1)*7+1),S=new Date(y,f,N*7);let V=0,z=0,re=0,ce=0;Object.entries(r.dailyData).forEach(([Se,Ae])=>{const B=new Date(Se);B>=_&&B<=S&&B.getMonth()===f&&B.getFullYear()===y&&(V+=Ae.trades,z+=Ae.pnl,re+=Ae.signals.filter(M=>M.status==="WIN").length,ce+=Ae.signals.filter(M=>M.status==="LOSS").length)});const I=new Date,Ee=Math.ceil(I.getDate()/7),te=N===Ee&&I.getMonth()===f&&I.getFullYear()===y,be=[];Object.entries(r.dailyData).forEach(([Se,Ae])=>{const B=new Date(Se);B>=_&&B<=S&&B.getMonth()===f&&B.getFullYear()===y&&be.push(...Ae.signals)}),x.push({week:`Week ${N}`,weekNum:N,trades:V,pnl:z,wins:re,losses:ce,isCurrentWeek:te,signals:be})}return x};return L.useEffect(()=>{n();const c=setInterval(n,3e4);return()=>clearInterval(c)},[]),{calendarStats:r,getMonthlyStats:a,getWeeklyBreakdown:o,refreshCalendar:n}}const gR=({chatHash:r="!1V9roB"})=>{const e=L.useRef(null),n=L.useRef(!1);return L.useEffect(()=>{if(n.current||!e.current)return;const a=document.createElement("script");return a.src=`https://rumbletalk.com/client/?${r}:`,a.async=!0,a.id="rumbletalk-script",a.onload=()=>{console.log("✅ Script RumbleTalk chargé avec succès"),n.current=!0},a.onerror=()=>{console.error("❌ Erreur chargement script RumbleTalk")},e.current.appendChild(a),()=>{e.current&&a.parentNode&&(e.current.removeChild(a),n.current=!1,console.log("🔄 Script RumbleTalk retiré"))}},[r]),t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx("div",{style:{height:"700px",width:"100%",maxWidth:"1200px"},children:t.jsx("div",{id:"rt-557e982f6b67541655c3270785d365db",ref:e})})})},pR="https://bamwcozzfshuozsfmjah.supabase.co",xR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXdjb3p6ZnNodW96c2ZtamFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxMDM0ODcsImV4cCI6MjA2NTY3OTQ4N30.NWSUKoYLl0oGS-dXf4jhtmLRiSuBSk-0lV3NRHJLvrs",eu=Cx(pR,xR);function yR(){var Hi;console.log("🚀 TradingPlatformShell chargé !");const{stats:r,allSignalsForStats:e}=mR();console.log("📊 Stats:",r),console.log("📡 RealTime Signals:",e);const{calendarStats:n,getMonthlyStats:a}=fR();console.log("📅 Calendar Stats:",n),console.log("✅ Tous les hooks chargés !");const o=[{id:"fondamentaux",name:"fondamentaux",emoji:"📚",fullName:"Fondamentaux"},{id:"letsgooo-model",name:"letsgooo-model",emoji:"🚀",fullName:"Letsgooo-model"},{id:"general-chat-2",name:"general-chat-2",emoji:"📈",fullName:"Indices"},{id:"general-chat-3",name:"general-chat-3",emoji:"🪙",fullName:"Crypto"},{id:"general-chat-4",name:"general-chat-4",emoji:"💱",fullName:"Forex"},{id:"video",name:"video",emoji:"📺",fullName:"Livestream"},{id:"journal",name:"journal",emoji:"📓",fullName:"Journal Perso"},{id:"trading-journal",name:"trading-journal",emoji:"📓",fullName:"Journal Perso"},{id:"calendrier",name:"calendrier",emoji:"📅",fullName:"Journal Signaux"}];L.useEffect(()=>{const b=localStorage.getItem("messageReactions");if(b)try{N(JSON.parse(b))}catch(k){console.error("Erreur lors du chargement des réactions:",k)}},[]),L.useEffect(()=>{eu.auth.getSession().then(({data:{session:k}})=>{k!=null&&k.user&&(S({id:k.user.id,email:k.user.email||""}),console.log("🔇 Notifications désactivées sur PWA"))});const{data:{subscription:b}}=eu.auth.onAuthStateChange((k,P)=>{P!=null&&P.user?(k==="SIGNED_IN"&&(console.log("🔄 Nouvel utilisateur connecté, nettoyage des données..."),us(""),Et(null),K({}),N({}),console.log("🔇 Notifications désactivées sur PWA après connexion"),Object.keys(localStorage).forEach(D=>{D.startsWith("userUsername_")&&!D.endsWith(`_${P.user.id}`)&&(localStorage.removeItem(D),console.log("🧹 Ancienne clé localStorage supprimée:",D))})),S({id:P.user.id,email:P.user.email||""})):(S(null),us(""),Et(null),K({}),N({}),console.log("🧹 États utilisateur nettoyés après déconnexion"))});return()=>b.unsubscribe()},[]);const[c,d]=L.useState(!1),[f,y]=L.useState(!1),[x,N]=L.useState({}),[_,S]=L.useState(null),[V,z]=L.useState({}),[re,ce]=L.useState({}),[I,Ee]=L.useState({id:"general-chat",name:"general-chat"}),[te,be]=L.useState("signals"),[Se,Ae]=L.useState("channels"),[B,M]=L.useState(""),[F,K]=L.useState({}),[Y,Q]=L.useState(!1),[U,gt]=L.useState(!1),[xe,le]=L.useState(!1);L.useEffect(()=>{if(console.log("💬 Chargement Tawk.to pour utilisateur..."),document.getElementById("tawkto-user-script")){console.log("⚠️ Tawk.to déjà chargé");return}window.Tawk_API=window.Tawk_API||{},window.Tawk_LoadStart=new Date;const b=document.createElement("script");return b.async=!0,b.src="https://embed.tawk.to/68ec2d91af8498194f4f9fc1/1j7d940jh",b.charset="UTF-8",b.setAttribute("crossorigin","*"),b.id="tawkto-user-script",b.onload=()=>{console.log("✅ Tawk.to chargé pour utilisateur")},b.onerror=()=>{console.error("❌ Erreur chargement Tawk.to")},document.head.appendChild(b),()=>{const k=document.getElementById("tawkto-user-script");k&&k.remove()}},[]),L.useEffect(()=>{fe()},[]);const fe=async()=>{try{const b=await Dx();if(b.length>0){Ds(b);const k=b.find(P=>P.is_default)||b[0];Lt(k.account_name)}else{const k=await Mh("Compte Principal");k&&(Ds([k]),Lt("Compte Principal"))}}catch(b){console.error("❌ Erreur chargement comptes:",b);const k=localStorage.getItem("tradingAccounts");if(k){const P=JSON.parse(k);Ds(P.map(D=>({id:`local-${D}`,user_id:"local",account_name:D,is_default:D==="Compte Principal",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}))),Lt("Compte Principal")}}},ke=async b=>{Ds(b),localStorage.setItem("tradingAccounts",JSON.stringify(b.map(D=>D.account_name)));const k=b.reduce((D,$)=>($.initial_balance!==void 0&&(D[$.account_name]=$.initial_balance),D),{});localStorage.setItem("accountBalances",JSON.stringify(k));const P=b.reduce((D,$)=>($.minimum_balance!==void 0&&(D[$.account_name]=$.minimum_balance),D),{});localStorage.setItem("accountMinimums",JSON.stringify(P))},at=async()=>{if(console.log("🔍 [DEBUG] handleAddAccount appelé"),console.log("🔍 [DEBUG] newAccountName:",He),console.log("🔍 [DEBUG] newAccountBalance:",Rr),!He.trim()){alert("Veuillez entrer un nom de compte");return}if(Nt.some(b=>b.account_name===He.trim())){alert("Ce nom de compte existe déjà");return}try{const b=parseFloat(Rr)||0,k=parseFloat(Ys)||0;console.log("🔍 [DEBUG] Appel addUserAccount avec:",He.trim(),b,k);const P=await Mh(He.trim(),b,k);if(console.log("🔍 [DEBUG] Réponse addUserAccount:",P),P){const D={...P,initial_balance:b,minimum_balance:k},$=[...Nt,D];await ke($),Lt(He.trim()),$t(""),ya(""),es(""),rn(!1),console.log("✅ [DEBUG] Compte ajouté avec succès")}else console.error("❌ [DEBUG] addUserAccount a retourné null"),alert("Erreur lors de l'ajout du compte")}catch(b){console.error("❌ [DEBUG] Erreur ajout compte:",b),alert("Erreur lors de l'ajout du compte: "+b)}},W=b=>{Lt(b)},ge=async b=>{if(b!=="Compte Principal")try{console.log(`🗑️ Début suppression du compte "${b}"`);const k=Yt.filter(D=>(D.account||"Compte Principal")===b);console.log(`🗑️ Suppression de ${k.length} trades pour le compte "${b}"`);for(const D of k){const $=await oh(D.id);console.log(`🗑️ Trade ${D.id} supprimé:`,$)}zs(D=>D.filter($=>($.account||"Compte Principal")!==b));const P=Nt.find(D=>D.account_name===b);if(console.log("🗑️ Compte trouvé:",P),P&&P.id.startsWith("local-")){const D=Nt.filter($=>$.account_name!==b);await ke(D),console.log("✅ Compte local supprimé")}else if(P){console.log(`🗑️ Suppression du compte Supabase ID: ${P.id}`);const D=await Rx(P.id);if(console.log("🗑️ Résultat suppression Supabase:",D),D){const $=Nt.filter(ne=>ne.id!==P.id);Ds($),console.log("✅ État local mis à jour, comptes restants:",$.length)}else{console.error("❌ Échec suppression Supabase, mais on continue avec la suppression locale");const $=Nt.filter(ne=>ne.id!==P.id);Ds($),console.log("✅ État local mis à jour (fallback), comptes restants:",$.length)}}At===b&&(Lt("Compte Principal"),console.log('✅ Compte sélectionné changé vers "Compte Principal"')),console.log(`✅ Compte "${b}" supprimé avec succès`)}catch(k){console.error("❌ Erreur suppression compte:",k),alert("Erreur lors de la suppression du compte")}},De=async b=>{const k=b==="Compte Principal",P=prompt(`Options pour "${b}":

1 - Renommer le compte
2 - Modifier balance et stop-loss
`+(k?"":`3 - Supprimer le compte
`)+`
Entrez votre choix:`,"1");P==="1"?await Ne(b):P==="2"?await ue(b):P==="3"&&!k&&confirm(`Supprimer le compte "${b}" et tous ses trades ?`)&&await ge(b)},ue=async b=>{console.log("🔧 handleEditAccountSettings appelé pour:",b);const k=Nt.find(Oe=>Oe.account_name===b);if(console.log("📋 Compte trouvé:",k),!k){console.error("❌ Compte non trouvé");return}const P=k.initial_balance||0,D=k.minimum_balance||0;console.log("💰 Valeurs actuelles - Balance:",P,"Minimum:",D);const $=prompt(`Balance initiale pour "${b}":`,P.toString());if($===null)return;const ne=prompt(`Stop-loss (minimum) pour "${b}":`,D.toString());if(ne===null)return;const de=parseFloat($)||0,he=parseFloat(ne)||0;console.log("💸 Nouvelles valeurs - Balance:",de,"Minimum:",he);try{console.log("🚀 Appel updateUserAccount avec ID:",k.id);const Oe=await Oh(k.id,{initial_balance:de,minimum_balance:he});if(console.log("📝 Résultat updateUserAccount:",Oe),Oe){const h=Nt.map(v=>v.id===k.id?{...v,initial_balance:de,minimum_balance:he}:v);Ds(h),console.log("✅ Paramètres du compte mis à jour"),alert("Paramètres mis à jour avec succès !")}else console.error("❌ updateUserAccount a retourné null"),alert("Erreur: Impossible de mettre à jour les paramètres")}catch(Oe){console.error("❌ Erreur mise à jour paramètres:",Oe),alert("Erreur lors de la mise à jour des paramètres: "+Oe)}},Ne=async b=>{const k=prompt(`Renommer "${b}" en:`,b);if(!(!k||k.trim()===""||k===b))try{const P=Nt.find($=>$.account_name===b);if(!P){alert("Compte non trouvé");return}console.log("🔄 Renommage compte dans Supabase:",b,"→",k.trim()),await Oh(P.id,{account_name:k.trim()})?(console.log("✅ Compte renommé dans Supabase"),Ds($=>$.map(ne=>ne.id===P.id?{...ne,account_name:k.trim()}:ne)),At===b&&Lt(k.trim()),zs($=>$.map(ne=>(ne.account||"Compte Principal")===b?{...ne,account:k.trim()}:ne)),alert(`Compte renommé: ${b} → ${k.trim()}`)):(console.error("❌ Échec renommage dans Supabase"),alert("Erreur lors du renommage du compte"))}catch(P){console.error("❌ Erreur renommage compte:",P),alert("Erreur: "+P.message)}},[Ye,Re]=L.useState(!1),[dt,Qe]=L.useState(!1),[bs,An]=L.useState(null),[sn,Tr]=L.useState(null),[Er,ur]=L.useState(""),[Te,Ie]=L.useState(null),[Ve,ot]=L.useState([]);L.useEffect(()=>{(async()=>{try{console.log("📊 [USER] Chargement de TOUS les signaux pour calendrier...");const k=["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"];let P=[];for(const D of k)try{const $=await ua(D,999);P=[...P,...$]}catch($){console.error(`❌ [USER] Erreur chargement ${D}:`,$)}if(P.length>0){const D=P.map($=>{var ne,de,he;return{id:$.id||"",type:$.type,symbol:$.symbol,timeframe:$.timeframe,entry:((ne=$.entry)==null?void 0:ne.toString())||"N/A",takeProfit:((de=$.takeProfit)==null?void 0:de.toString())||"N/A",stopLoss:((he=$.stopLoss)==null?void 0:he.toString())||"N/A",description:$.description||"",image:$.image||$.attachment_data,attachment_data:$.attachment_data||$.image,attachment_type:$.attachment_type,attachment_name:$.attachment_name,closure_image:$.closure_image,closure_image_type:$.closure_image_type,closure_image_name:$.closure_image_name,timestamp:new Date($.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),originalTimestamp:$.timestamp||Date.now(),status:$.status||"ACTIVE",channel_id:$.channel_id,reactions:$.reactions||[],pnl:$.pnl,closeMessage:$.closeMessage}});ot(D),console.log(`✅ [USER] ${D.length} signaux chargés pour calendrier`)}}catch(k){console.error("❌ [USER] Erreur chargement signaux calendrier:",k)}})()},[I.id]);const[st,nt]=L.useState(!1),[Gt,Jn]=L.useState(0),[Mt,Ar]=L.useState({}),[dr,Qr]=L.useState({}),[wt,rs]=L.useState([]),Os=async(b,k=!1)=>{try{const P=await bx(b,999999),ne=(["general-chat","general-chat-2","general-chat-3","general-chat-4","profit-loss","video"].includes(b)?P:P.reverse()).map(de=>({id:de.id||"",text:de.content,timestamp:new Date(de.timestamp||Date.now()).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),author:de.author,author_avatar:de.author_avatar,attachment:void 0,attachment_data:de.attachment_data}));K(de=>({...de,[b]:ne.map(he=>({id:he.id,text:he.text,user:he.author,author:he.author,author_avatar:he.author_avatar,timestamp:he.timestamp,attachment_data:he.attachment_data}))})),console.log(`✅ Messages chargés pour ${b}:`,ne.length,"/",P.length),!k&&!["calendrier","trading-journal","forex-signaux","crypto-signaux","futures-signaux","fondamentaux","letsgooo-model"].includes(b)&&setTimeout(()=>{er()},100)}catch(P){console.error("❌ Erreur chargement messages:",P)}};L.useEffect(()=>{const b=async()=>{try{const k=Object.values(F).flat(),P=k.map(async de=>{const he=await Nx(de.id);return he?{messageId:de.id,reactions:he}:null}),D=await Promise.all(P),$={};D.forEach(de=>{de&&($[de.messageId]=de.reactions)}),N($),console.log("✅ Réactions messages chargées depuis Firebase:",Object.keys($).length);const ne=k.map(de=>_x(de.id,he=>{he&&N(Oe=>({...Oe,[de.id]:he}))}));return()=>{ne.forEach(de=>{de&&typeof de=="function"&&de()})}}catch(k){console.error("❌ Erreur chargement réactions messages Firebase:",k)}};Object.keys(F).length>0&&b()},[F]);const Pn=async b=>{try{const P=(await ua(b,3)).map(D=>{var $,ne,de;return{id:D.id||"",type:D.type,symbol:D.symbol,timeframe:D.timeframe,entry:(($=D.entry)==null?void 0:$.toString())||"N/A",takeProfit:((ne=D.takeProfit)==null?void 0:ne.toString())||"N/A",stopLoss:((de=D.stopLoss)==null?void 0:de.toString())||"N/A",description:D.description||"",image:D.image||D.attachment_data,attachment_data:D.attachment_data||D.image,attachment_type:D.attachment_type,attachment_name:D.attachment_name,closure_image:D.closure_image,closure_image_type:D.closure_image_type,closure_image_name:D.closure_image_name,timestamp:new Date(D.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:D.status||"ACTIVE",channel_id:D.channel_id,reactions:[],pnl:D.pnl,closeMessage:D.closeMessage}});rs(D=>[...D.filter(ne=>ne.channel_id!==b),...P.reverse()]),["calendrier","trading-journal","forex-signaux","crypto-signaux","futures-signaux","fondamentaux","letsgooo-model"].includes(b)||setTimeout(()=>{er()},100)}catch(k){console.error("❌ Erreur chargement signaux:",k)}};L.useEffect(()=>{(async()=>{await Os(I.id),await Pn(I.id),await Ep()})()},[]),L.useEffect(()=>{const b=ls(os,"messages/admin_broadcast"),k=lc(b,P=>{const D=P.val();if(D){const $=Object.keys(D),ne=D[$[$.length-1]];ne&&ne.message_type==="admin_notification"&&Eu("📢 Message Admin",ne.text)}});return()=>k()},[]),L.useEffect(()=>{const k=["fondamentaux","letsgooo-model","general-chat","general-chat-2","general-chat-3","general-chat-4","profit-loss"].map(P=>kh(P,D=>{console.log(`🔄 Nouveau message reçu dans ${P}:`,D),I.id!==P&&(console.log(`📊 Incrementing unread count for ${P}`),Ar($=>({...$,[P]:($[P]||0)+1})))}));return()=>{k.forEach(P=>P.unsubscribe())}},[]),L.useEffect(()=>{console.log("🔄 Changement de canal utilisateur:",I.id),["calendrier","trading-journal","journal","video","trading-hub"].includes(I.id)||(Os(I.id),Pn(I.id));const k=Dh(I.id,D=>{if(console.log("🔄 Signal mis à jour reçu:",D),rs($=>$.map(ne=>ne.id===D.id?{...ne,reactions:D.reactions||[]}:ne)),D.status!=="ACTIVE"&&D.closeMessage){const $=Date.now(),ne=new Date(D.timestamp).getTime();$-ne<5e3&&Tp(D)}}),P=Dh(I.id,D=>{var he,Oe,h;console.log("🆕 Nouveau signal reçu utilisateur:",D);const $={id:D.id||"",type:D.type,symbol:D.symbol,timeframe:D.timeframe,entry:((he=D.entry)==null?void 0:he.toString())||"N/A",takeProfit:((Oe=D.takeProfit)==null?void 0:Oe.toString())||"N/A",stopLoss:((h=D.stopLoss)==null?void 0:h.toString())||"N/A",description:D.description||"",image:D.image||D.attachment_data,attachment_data:D.attachment_data||D.image,attachment_type:D.attachment_type,attachment_name:D.attachment_name,closure_image:D.closure_image,closure_image_type:D.closure_image_type,closure_image_name:D.closure_image_name,timestamp:new Date(D.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:D.status||"ACTIVE",channel_id:D.channel_id,reactions:[],pnl:D.pnl,closeMessage:D.closeMessage};rs(v=>{const w=v.filter(G=>G.channel_id===I.id);return[...v.filter(G=>G.channel_id!==I.id),...w,$]});const ne=Date.now(),de=new Date(D.timestamp).getTime();ne-de<1e4&&ch($),["calendrier","trading-journal","forex-signaux","crypto-signaux","futures-signaux","fondamentaux","letsgooo-model"].includes(I.id)||setTimeout(()=>{er()},100)});return()=>{k.unsubscribe(),P.unsubscribe()}},[I.id]);const[Cn,Ss]=L.useState(""),[ps,Qn]=L.useState(null),[Gs,Ts]=L.useState(!1),[Xt,fn]=L.useState(""),[Es,us]=L.useState(null),[Xr,Et]=L.useState(null),[Zr,hr]=L.useState(()=>localStorage.getItem("notificationsDisabled")!=="true"),Un=async()=>{if(Zr){console.log("🔕 Désactivation des notifications...");try{const{getMessaging:b,deleteToken:k}=await $s(async()=>{const{getMessaging:de,deleteToken:he}=await Promise.resolve().then(()=>jp);return{getMessaging:de,deleteToken:he}},void 0),{database:P}=await $s(async()=>{const{database:de}=await Promise.resolve().then(()=>Zo);return{database:de}},void 0),{ref:D,remove:$,get:ne}=await $s(async()=>{const{ref:de,remove:he,get:Oe}=await Promise.resolve().then(()=>Qo);return{ref:de,remove:he,get:Oe}},void 0);try{const de=b(),he=await de.getToken();if(he){console.log("🗑️ Suppression token FCM...");const Oe=he.replace(/[.#$[\]]/g,"_"),h=D(P,`fcm_tokens/${Oe}`);await $(h),await k(de),console.log("✅ Token FCM supprimé")}}catch(de){console.log("⚠️ Erreur suppression token:",de)}localStorage.setItem("notificationsDisabled","true"),hr(!1),console.log("✅ Notifications désactivées")}catch(b){console.error("❌ Erreur désactivation notifications:",b)}}else{console.log("🔔 Activation des notifications..."),localStorage.removeItem("notificationsDisabled");try{await Ep(),hr(!0),console.log("✅ Notifications activées")}catch(b){console.error("❌ Erreur activation notifications:",b),alert("Impossible d'activer les notifications. Vérifiez les permissions de votre navigateur.")}}},Cr=async()=>{if(Xt.trim()){try{if(!_)console.error("❌ Utilisateur non connecté"),localStorage.setItem("userUsername",Xt.trim()),us(Xt.trim()),console.log("✅ Username sauvegardé en localStorage:",Xt.trim());else{const{data:b,error:k}=await zo(Xt.trim(),void 0,"user");!k&&b?(us(Xt.trim()),Et(P=>P&&{...P,name:Xt.trim()}),console.log("✅ Username updated successfully in Supabase:",Xt.trim())):(console.error("❌ Error updating username in Supabase:",k),localStorage.setItem(`userUsername_${_.id}`,Xt.trim()),us(Xt.trim()),console.log("✅ Username sauvegardé en localStorage (fallback):",Xt.trim()))}}catch(b){console.error("❌ Error updating username:",b),_?localStorage.setItem(`userUsername_${_.id}`,Xt.trim()):localStorage.setItem("userUsername",Xt.trim()),us(Xt.trim()),console.log("✅ Username sauvegardé en localStorage (fallback):",Xt.trim())}Ts(!1),fn("")}},Xn=()=>{Ts(!1),fn("")};L.useEffect(()=>{(async()=>{var k;try{const P=eu.auth.getUser(),D=await eu.auth.getSession();(k=D.data.session)!=null&&k.user&&console.log("✅ Session utilisateur trouvée:",D.data.session.user.email)}catch(P){console.error("❌ Pas de session Supabase:",P)}})()},[]),L.useEffect(()=>{(async()=>{var P,D;console.log("🔄 Initialisation profil utilisateur..."),console.log("📱 PWA Mode:",window.matchMedia("(display-mode: standalone)").matches),console.log("🌐 User Agent:",navigator.userAgent.includes("Mobile")?"MOBILE":"DESKTOP");const k=await hR("user");if(k?(Qn(k),console.log("✅ Photo de profil utilisateur chargée")):console.log("❌ Aucune photo de profil utilisateur trouvée"),_){console.log("👤 Utilisateur connecté:",_.id,_.email);try{const{data:$}=await zu("user");if(console.log("📦 Profil récupéré de Supabase:",$),$!=null&&$.name)Et($),us($.name),$.avatar_url&&(Qn($.avatar_url),localStorage.setItem("userProfileImage",$.avatar_url),console.log("✅ Avatar chargé depuis profil Supabase")),console.log("✅ Profil utilisateur chargé depuis Supabase:",$);else{console.log("⚠️ Pas de profil trouvé, création du profil par défaut...");const ne=((P=_.email)==null?void 0:P.split("@")[0])||"Anonyme",{data:de}=await zo(ne,void 0,"user");if(de)Et(de),us(ne),console.log("✅ Nouveau profil créé dans Supabase:",de);else{const he=localStorage.getItem(`userUsername_${_.id}`);he?(us(he),console.log("✅ Username chargé depuis localStorage:",he)):(us(ne),console.log("✅ Username défini depuis email:",ne))}}}catch($){console.error("❌ Erreur lors du chargement du profil Supabase:",$);const ne=localStorage.getItem(`userUsername_${_.id}`);if(ne)us(ne),console.log("✅ Username chargé depuis localStorage (fallback):",ne);else{const de=((D=_.email)==null?void 0:D.split("@")[0])||"Anonyme";us(de),console.log("✅ Username défini depuis email (fallback):",de)}}}else{const $=localStorage.getItem("userUsername");$?(us($),console.log("✅ Username chargé depuis localStorage (pas connecté):",$)):(us("Anonyme"),console.log("✅ Username par défaut (pas connecté)"))}})()},[_]),L.useEffect(()=>{const k=["fondamentaux","letsgooo-model","general-chat","general-chat-2","general-chat-3","general-chat-4","profit-loss","trading-journal"].map(P=>kh(P,D=>{const $=dr[P]||0,ne=typeof D.timestamp=="number"?D.timestamp:Date.now();($===0||ne>$)&&I.id!==P&&(Ar(de=>({...de,[P]:(de[P]||0)+1})),console.log(`📊 Unread message added to ${P}: ${D.content}`))}));return()=>{k.forEach(P=>P.unsubscribe())}},[I.id,dr]);const[Zn,al]=L.useState(!1),[kn,xs]=L.useState(""),[As,kr]=L.useState(""),[mr,_i]=L.useState(0),[xa,nn]=L.useState(!1),[fr,Dr]=L.useState(!1),[is,gn]=L.useState(()=>{const b=localStorage.getItem("customLossReasons");return b?JSON.parse(b):Pl}),[Cs,ks]=L.useState({value:"",emoji:"",label:""}),[Vt,Bn]=L.useState(null),[Ot,pn]=L.useState(()=>{const b=localStorage.getItem("selectedDate");return b?new Date(b):null});L.useEffect(()=>{Ot?localStorage.setItem("selectedDate",Ot.toISOString()):localStorage.removeItem("selectedDate")},[Ot]),L.useEffect(()=>{const b=["crypto","forex","indices","fondamentaux","letsgooo-model"],k={};b.forEach(P=>{const D=localStorage.getItem(`lastRead_${P}`);D&&(k[P]=D)}),z(k)},[]);const ys=b=>{const k=new Date().toISOString();z(P=>({...P,[b]:k})),localStorage.setItem(`lastRead_${b}`,k)},Zt=(b,k)=>{console.log("🔄 handleChannelChange appelé:",{channelId:b,channelName:k}),vn(!1),ys(b),I.id==="trading-journal"&&b!=="trading-journal"&&pn(null),Ee({id:b,name:k}),be("signals"),console.log("✅ selectedChannel mis à jour:",{id:b,name:k}),Qr(P=>({...P,[b]:Date.now()})),Ar(P=>({...P,[b]:0})),console.log(`📊 Channel opened: ${b} at ${new Date().toLocaleTimeString()}`)},[Yt,zs]=L.useState([]),[Nt,Ds]=L.useState([]),[At,Lt]=L.useState("Compte Principal"),[Ht,rn]=L.useState(!1),[He,$t]=L.useState(""),[Rr,ya]=L.useState(""),[Ys,es]=L.useState(""),[Je,Ct]=L.useState({symbol:"",type:"BUY",entry:"",exit:"",stopLoss:"",pnl:"",status:"WIN",lossReason:"",notes:"",image1:null,image2:null});L.useEffect(()=>{(async()=>{const k=await oc();console.log("🔄 ID utilisateur synchronisé au démarrage PWA:",k)})()},[]),L.useEffect(()=>{console.log("👂 Démarrage synchronisation temps réel trades [PWA]...");const b=bj(k=>{console.log("🔄 Mise à jour trades reçue [PWA]:",k.length),zs(k)},k=>{console.error("❌ Erreur synchronisation temps réel [PWA]:",k)});return()=>{console.log("🛑 Arrêt synchronisation temps réel [PWA]"),b()}},[]),L.useEffect(()=>{console.log("🔥 DEBUG TRADES:",Yt),console.log("🔥 Nombre de trades:",Yt.length),console.log("🔥 Channel actuel:",I.id),console.log("🔥 View actuel:",te)},[Yt,I.id,te]),L.useEffect(()=>{console.log("📊 Unread messages state:",Mt)},[Mt]);const[ei,zt]=L.useState({type:"BUY",symbol:"",timeframe:"",entry:"",takeProfit:"",stopLoss:"",description:"",image:null}),[Ir,ji]=L.useState(!1),[ws,Fi]=L.useState(""),[$i,Fe]=L.useState(!1),[Ls,gr]=L.useState(""),[Ke,an]=L.useState(new Date),Dn=L.useRef(null),xn=L.useRef(null),zi=()=>{an(b=>{const k=new Date(b);return k.setMonth(b.getMonth()-1),k})},ti=()=>{an(b=>{const k=new Date(b);return k.setMonth(b.getMonth()+1),k})},qi=b=>["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"][b.getMonth()],$e=b=>{if(!b)return 0;const k=b.replace(/[^\d.-]/g,"");return parseFloat(k)||0};L.useEffect(()=>{(async()=>{try{console.log("📊 Chargement de TOUS les signaux pour statistiques et calendrier...");const k=["fondamentaux","letsgooo-model"];let P=[];for(const D of k)try{console.log(`🔍 Chargement signaux pour ${D}...`);const $=await ua(D,100);$&&$.length>0&&(P=[...P,...$],console.log(`✅ ${$.length} signaux chargés pour ${D}`))}catch($){console.error(`❌ Erreur chargement signaux pour ${D}:`,$)}if(P.length>0){const D=P.map($=>{var ne,de,he;return{id:$.id||"",type:$.type,symbol:$.symbol,timeframe:$.timeframe,entry:((ne=$.entry)==null?void 0:ne.toString())||"N/A",takeProfit:((de=$.takeProfit)==null?void 0:de.toString())||"N/A",stopLoss:((he=$.stopLoss)==null?void 0:he.toString())||"N/A",description:$.description||"",image:$.image||$.attachment_data,attachment_data:$.attachment_data||$.image,attachment_type:$.attachment_type,attachment_name:$.attachment_name,closure_image:$.closure_image,closure_image_type:$.closure_image_type,closure_image_name:$.closure_image_name,timestamp:new Date($.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),originalTimestamp:$.timestamp||Date.now(),status:$.status||"ACTIVE",channel_id:$.channel_id,reactions:$.reactions||[],pnl:$.pnl,closeMessage:$.closeMessage}});ot(D),console.log(`✅ ${D.length} signaux formatés chargés pour statistiques au total`),console.log("📊 Signaux par canal:",k.map($=>({channel:$,count:D.filter(ne=>ne.channel_id===$).length})))}else console.log("⚠️ Aucun signal trouvé pour les statistiques")}catch(k){console.error("❌ Erreur chargement signaux pour statistiques:",k)}})()},[]);const yn=()=>e.filter(k=>{const P=new Date(k.originalTimestamp||k.timestamp),D=new Date(Ke);return P.getDate()===D.getDate()&&P.getMonth()===D.getMonth()&&P.getFullYear()===D.getFullYear()}).length,Si=()=>e.filter(k=>{const P=new Date(k.originalTimestamp||k.timestamp);return P.getMonth()===Ke.getMonth()&&P.getFullYear()===Ke.getFullYear()}).length,Pt=()=>e.filter(k=>{const P=new Date(k.originalTimestamp||k.timestamp);return P.getMonth()===Ke.getMonth()&&P.getFullYear()===Ke.getFullYear()}).reduce((k,P)=>P.pnl?k+$e(P.pnl):k,0),pr=()=>{const b=e.filter(P=>{const D=new Date(P.originalTimestamp||P.timestamp);return D.getMonth()===Ke.getMonth()&&D.getFullYear()===Ke.getFullYear()});if(b.length===0)return 0;const k=b.filter(P=>P.status==="WIN").length;return Math.round(k/b.length*100)},Ps=()=>{const b=e.filter($=>{const ne=new Date($.originalTimestamp||$.timestamp);return ne.getMonth()===Ke.getMonth()&&ne.getFullYear()===Ke.getFullYear()}),k=[],P=new Date(Ke.getFullYear(),Ke.getMonth(),1),D=new Date;for(let $=1;$<=5;$++){const ne=new Date(P);ne.setDate(1+($-1)*7);const de=new Date(ne);de.setDate(ne.getDate()+6);const he=b.filter(E=>{const G=new Date(E.originalTimestamp||E.timestamp);return G>=ne&&G<=de}),Oe=he.filter(E=>E.status==="WIN").length,h=he.filter(E=>E.status==="LOSS").length,v=he.reduce((E,G)=>G.pnl?E+$e(G.pnl):E,0),w=D>=ne&&D<=de;k.push({week:`Week ${$}`,weekNum:$,trades:he.length,wins:Oe,losses:h,pnl:Math.round(v),isCurrentWeek:w})}return k},si=()=>r.totalPnL,ni=()=>r.winRate,[Mr,Or]=L.useState(0);L.useEffect(()=>{console.log("🔄 Trigger stats update - Account:",At,"Trades:",Yt.length),Or(b=>b+1)},[At,Yt]);const mt=()=>{const b=Yt.filter(k=>(k.account||"Compte Principal")===At);return console.log("🔍 DEBUG getTradesForSelectedAccount:",{selectedAccount:At,totalTrades:Yt.length,filteredTrades:b.length,allTrades:Yt.map(k=>({symbol:k.symbol,account:k.account||"Compte Principal"}))}),b},Ut=()=>{const b=Nt.find(D=>D.account_name===At);let k=(b==null?void 0:b.initial_balance)||0;if(!k){const D=localStorage.getItem("accountBalances");D&&(k=JSON.parse(D)[At]||0)}const P=ds();return k+P},Ws=()=>{const b=Nt.find(Oe=>Oe.account_name===At),k=Ut();b!=null&&b.initial_balance;const P=(b==null?void 0:b.minimum_balance)||0;if(P===0)return{currentStopLoss:null,remaining:null,percentage:null,isAtRisk:!1};const D=ds(),$=Math.max(P,P+Math.max(0,D)),ne=k-$,de=$>0?(k/$-1)*100:0,he=ne<k*.1;return{currentStopLoss:$,remaining:ne,percentage:de,isAtRisk:he,pnl:D}},ds=()=>mt().reduce((b,k)=>b+$e(k.pnl),0),Tt=b=>mt().filter(k=>{const P=new Date(k.date);return P.getMonth()===b.getMonth()&&P.getFullYear()===b.getFullYear()}),Fn=()=>Tt(Ke).reduce((k,P)=>k+$e(P.pnl),0),Vi=()=>{const b=Tt(Ke);if(b.length===0)return 0;const k=b.filter(P=>P.status==="WIN").length;return Math.round(k/b.length*100)},Lr=()=>{const k=Tt(Ke).filter(D=>D.status==="WIN");if(k.length===0)return 0;const P=k.reduce((D,$)=>D+$e($.pnl),0);return Math.round(P/k.length)},Rn=()=>{const k=Tt(Ke).filter(D=>D.status==="LOSS");if(k.length===0)return 0;const P=k.reduce((D,$)=>D+Math.abs($e($.pnl)),0);return Math.round(P/k.length)},xr=()=>{const k=mt().filter($=>$.status==="LOSS"),P={};k.forEach($=>{const ne=$.lossReason||"non_specifiee";P[ne]||(P[ne]={count:0,totalPnl:0,trades:[]}),P[ne].count++,P[ne].totalPnl+=$e($.pnl),P[ne].trades.push($)});const D=Object.entries(P).filter(([$])=>$!=="non_specifiee").map(([$,ne])=>({reason:$,count:ne.count,totalPnl:ne.totalPnl,avgPnl:Math.round(ne.totalPnl/ne.count),percentage:Math.round(ne.count/k.length*100)})).sort(($,ne)=>ne.count-$.count);return{totalLosses:k.length,totalLossPnl:k.reduce(($,ne)=>$+$e(ne.pnl),0),reasons:D}},Ns=b=>{const k=is.find(P=>P.value===b);return k?`${k.emoji} ${k.label}`:Jj(b)},Us=()=>{const b=new Date,k=b.toISOString().split("T")[0],P=Tt(Ke);return Ke.getMonth()===b.getMonth()&&Ke.getFullYear()===b.getFullYear()?P.filter(D=>D.date===k):[]},Pr=()=>Tt(Ke),ri=()=>{const b=Ke.getMonth(),k=Ke.getFullYear(),P=[],$=new Date(k,b,1).getDay(),ne=$===0?6:$-1;for(let de=1;de<=4;de++){const he=new Date(k,b,1);he.setDate(1-ne+(de-1)*7);const Oe=new Date(he);Oe.setDate(he.getDate()+6);const h=mt().filter(Ue=>{const p=new Date(Ue.date);return p>=he&&p<=Oe&&p.getMonth()===b&&p.getFullYear()===k}),v=h.reduce((Ue,p)=>Ue+$e(p.pnl),0),w=h.filter(Ue=>Ue.status==="WIN").length,E=h.filter(Ue=>Ue.status==="LOSS").length,G=new Date,Z=b===G.getMonth()&&k===G.getFullYear(),we=Math.ceil(G.getDate()/7),Be=Z&&de===we;P.push({week:`Week ${de}`,weekNum:de,trades:h.length,pnl:v,wins:w,losses:E,isCurrentWeek:Be})}return P},Ur=(b,k,P)=>{const D=parseFloat(b),$=parseFloat(k),ne=parseFloat(P);if(isNaN(D)||isNaN($)||isNaN(ne))return"N/A";const de=Math.abs(D-ne),he=Math.abs($-D);return de===0?"N/A":(he/de).toFixed(2)},ii=async b=>{try{if(console.log("🔥 handleAddReaction called:",{messageId:b}),!b){console.error("❌ messageId invalide:",b);return}const k=(_==null?void 0:_.email)||"Anonymous";console.log("👤 Utilisateur actuel:",k),N(ne=>{if(!ne||typeof ne!="object")return console.error("❌ messageReactions n'est pas un objet:",ne),ne;const de=ne[b]||{fire:0,users:[]},he=Array.isArray(de.users)?de.users.indexOf(k):-1;return he===-1?(console.log("➕ Ajouter réaction pour:",b),{...ne,[b]:{fire:(de.fire||0)+1,users:[...de.users||[],k]}}):(console.log("➖ Retirer réaction pour:",b),{...ne,[b]:{fire:Math.max(0,(de.fire||0)-1),users:(de.users||[]).filter((Oe,h)=>h!==he)}})});const P=x[b]||{fire:0,users:[]},D=Array.isArray(P.users)?P.users.indexOf(k):-1;let $;D===-1?$={fire:(P.fire||0)+1,users:[...P.users||[],k]}:$={fire:Math.max(0,(P.fire||0)-1),users:(P.users||[]).filter((ne,de)=>de!==D)},console.log("💾 Sauvegarde Firebase:",{messageId:b,newReactions:$,currentUser:k}),await wx(b,$),console.log("✅ Réaction message synchronisée:",b,$,"par utilisateur:",k)}catch(k){console.error("❌ Erreur réaction message:",k),console.error("Erreur lors de l'ajout de la réaction")}},[ai,vn]=L.useState(!1),er=()=>{if(ai){console.log("⏸️ Scroll déjà en cours, ignoré");return}vn(!0),console.log("🔄 Scrolling to bottom user...",{hasRef:!!xn.current,channelId:I.id}),xn.current&&(xn.current.scrollTop=xn.current.scrollHeight);const b=document.querySelector(".overflow-y-auto.overflow-x-hidden.p-4.space-y-4.pb-32");b&&(b.scrollTop=b.scrollHeight,console.log("✅ Scroll with CSS selector worked")),document.querySelectorAll('[class*="overflow-y-auto"]').forEach((P,D)=>{P.scrollTop=P.scrollHeight,console.log(`📜 Scrolled container ${D}`)}),setTimeout(()=>{vn(!1),console.log("✅ Scroll to bottom user completed")},300)},li=async()=>{console.log("🚪 Déconnexion utilisateur en cours...");try{try{console.log("🔔 🔴 SUPPRESSION COMPLÈTE DE TOUS LES TOKENS FCM...");const{getMessaging:P,deleteToken:D}=await $s(async()=>{const{getMessaging:h,deleteToken:v}=await Promise.resolve().then(()=>jp);return{getMessaging:h,deleteToken:v}},void 0),{ref:$,remove:ne,get:de}=await $s(async()=>{const{ref:h,remove:v,get:w}=await Promise.resolve().then(()=>Qo);return{ref:h,remove:v,get:w}},void 0),{database:he}=await $s(async()=>{const{database:h}=await Promise.resolve().then(()=>Zo);return{database:h}},void 0);localStorage.setItem("notificationsDisabled","true"),console.log("🔴 FLAG notificationsDisabled activé - empêche réinitialisation automatique");const Oe=localStorage.getItem("fcmToken");Oe&&(console.log("🗑️ Token FCM trouvé dans localStorage:",Oe.substring(0,20)+"..."),localStorage.removeItem("fcmToken"),console.log("✅ Token FCM supprimé de localStorage"));try{const h=P(),v=await h.getToken();if(v){console.log("🗑️ Token FCM actuel du navigateur:",v.substring(0,20)+"...");const w=v.replace(/[.#$[\]]/g,"_"),E=$(he,`fcm_tokens/${w}`);await ne(E),console.log("✅ Token supprimé de Firebase Database"),await D(h),console.log("✅ Token supprimé du navigateur")}}catch(h){console.log("⚠️ Erreur récupération token actuel (normal si déjà supprimé):",h.message)}try{console.log("🔔 🔴 SUPPRESSION DE TOUS LES TOKENS DANS FIREBASE...");const h=$(he,"fcm_tokens"),v=await de(h);if(v.exists()){const w=v.val();console.log("📊 Nombre total de tokens trouvés:",Object.keys(w).length);for(const E of Object.keys(w))console.log("🗑️ Suppression token:",E.substring(0,20)+"..."),await ne($(he,`fcm_tokens/${E}`));console.log("✅ ✅ ✅ TOUS LES TOKENS SUPPRIMÉS DE FIREBASE")}else console.log("⚠️ Aucun token trouvé dans Firebase Database")}catch(h){console.error("❌ Erreur suppression totale des tokens:",h)}try{if("serviceWorker"in navigator){const h=await navigator.serviceWorker.getRegistrations();console.log("📊 Nombre de service workers trouvés:",h.length);for(const v of h)console.log("🗑️ Désinscription service worker:",v.scope),await v.unregister();console.log("✅ Tous les service workers désinscrits")}}catch(h){console.error("❌ Erreur désinscription service workers:",h)}console.log("✅ ✅ ✅ NETTOYAGE COMPLET DES NOTIFICATIONS TERMINÉ")}catch(P){console.error("❌ Erreur suppression notifications:",P)}const{error:b}=await eu.auth.signOut();if(b?console.error("❌ Erreur déconnexion Supabase:",b):console.log("✅ Déconnexion Supabase réussie"),["signals","chat_messages","trading_stats","user_session","userUsername","adminUsername","messageReactions","lastReadTimes","userProfiles","supabaseProfile"].forEach(P=>{localStorage.removeItem(P),console.log(`🧹 Supprimé: ${P}`)}),_){const P=`userUsername_${_.id}`;localStorage.removeItem(P),console.log(`🧹 Supprimé clé utilisateur spécifique: ${P}`)}console.log("🧹 Nettoyage localStorage terminé"),console.log("🔄 Rechargement complet de la page..."),window.location.replace("/"),setTimeout(()=>{window.location.reload()},100)}catch(b){console.error("❌ Erreur lors de la déconnexion:",b),window.location.replace("/"),setTimeout(()=>{window.location.reload()},100)}},$n=b=>{var P;const k=(P=b.target.files)==null?void 0:P[0];if(console.log("📁 USER File selected:",k?k.name:"NO FILE"),k&&k.type.startsWith("image/")){console.log("🖼️ USER Processing image...");const D=new FileReader;D.onload=async $=>{var he;const ne=(he=$.target)==null?void 0:he.result;console.log("💾 USER Syncing to localStorage AND Supabase..."),Qn(ne);const de=await Qj("user",ne);de.success?console.log("✅ USER Profile image synchronized across all devices!"):console.error("❌ USER Sync failed:",de.error),await zo(Es||void 0,ne,"user"),console.log("✅ Avatar sauvegardé dans le profil utilisateur")},D.readAsDataURL(k)}};L.useEffect(()=>{["calendrier","trading-journal"].includes(I.id)||setTimeout(()=>{xn.current&&(xn.current.scrollTop=xn.current.scrollHeight)},100)},[F,I.id,wt]);const va=()=>{nn(!0)},yr=async()=>{if(!Je.symbol||!Je.entry||!Je.exit||!Je.pnl){alert("Veuillez remplir les champs obligatoires (Symbol, Entry, Exit, PnL)");return}const b=P=>{const D=P.getFullYear(),$=String(P.getMonth()+1).padStart(2,"0"),ne=String(P.getDate()).padStart(2,"0");return`${D}-${$}-${ne}`},k={date:b(Ot||new Date),symbol:Je.symbol,type:Je.type,entry:Je.entry,exit:Je.exit,stopLoss:Je.stopLoss,pnl:Je.pnl,status:Je.status,lossReason:Je.lossReason,notes:Je.notes,image1:Je.image1,image2:Je.image2,timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),account:At};try{const P=await vj(k);P?(zs(D=>[P,...D]),Ct({symbol:"",type:"BUY",entry:"",exit:"",stopLoss:"",pnl:"",status:"WIN",lossReason:"",notes:"",image1:null,image2:null}),nn(!1)):alert("Erreur lors de la sauvegarde du trade")}catch(P){console.error("❌ Erreur lors de la sauvegarde du trade:",P),alert("Erreur lors de la sauvegarde: "+P.message)}},tr=b=>{var ne,de,he,Oe,h,v,w;b.preventDefault();const k=b.clipboardData.getData("text/html")||"",P=b.clipboardData.getData("text")||"";console.log("📋 Paste detected - HTML:",k.slice(0,300)),console.log("📋 Paste detected - Text:",P.slice(0,300));const D={};let $=!1;if(k.includes("data-tradingview-clip"))try{const E=/data-tradingview-clip="([^"]+)"/,G=k.match(E);if(G&&G[1]){const Z=G[1].replace(/&(?:quot|#34);/g,'"'),we=JSON.parse(Z);console.log("📊 TradingView data parsed:",we);const Be=(de=(ne=we.sources)==null?void 0:ne[0])==null?void 0:de.source,Ue=Be==null?void 0:Be.points,p=Be==null?void 0:Be.state,T=p==null?void 0:p.stopLevel,R=p==null?void 0:p.profitLevel;if(Ue&&Ue.length>=2){$=!0;let A=(p==null?void 0:p.symbol)||"",O=A.split(":")[1]||A;O.startsWith("NQ1")?O="NQ":O.startsWith("ES1")?O="ES":O.startsWith("MNQ")&&(O="MNQ"),D.symbol=O;const H=Be==null?void 0:Be.type;H==="LineToolRiskRewardLong"||/long/i.test(H)?(D.tradeType="BUY",D.outcome="WIN"):(H==="LineToolRiskRewardShort"||/short/i.test(H))&&(D.tradeType="SELL",D.outcome="WIN");const ie=(he=Ue[0])==null?void 0:he.price;if(ie!==void 0&&(D.entryPrice=ie.toString()),Ue.length>1){const ve=(Oe=Ue[Ue.length-1])==null?void 0:Oe.price;ve!==void 0&&(D.exitPrice=ve.toString())}if(T!==void 0&&R!==void 0){const ve=Math.round(R/T*100)/100;if(D.rr=ve.toString(),ie!==void 0){let _e;if(D.tradeType==="BUY"){const je=T/4;_e=ie-je}else{const je=T/4;_e=ie+je}D.stopLoss=_e.toString()}}if((h=Ue[0])!=null&&h.time_t){const ve=Ue[0].time_t,je=new Date(ve*1e3).toTimeString().split(" ")[0].slice(0,5);if(D.entryTime=je,Ue.length>1&&((v=Ue[1])!=null&&v.time_t)){const Ge=Ue[1].time_t,ct=new Date(Ge*1e3).toTimeString().split(" ")[0].slice(0,5);D.exitTime=ct;const Pe=(Ge-ve)*1e3,qe=Math.round(Pe/6e4);if(qe<60)D.tradeDuration=`${qe}m`;else{const Me=Math.floor(qe/60),Le=qe%60;D.tradeDuration=`${Me}h ${Le}m`}}}if((w=Ue[0])!=null&&w.time_t){let _e=new Date(Ue[0].time_t*1e3).getUTCHours()-4;_e<0&&(_e+=24);let je="";_e>=0&&_e<3?je="Asian Session":_e>=3&&_e<8?je="London":_e>=8&&_e<12?je="London/NY Overlap":_e>=12&&_e<17&&(je="New York PM"),je&&(D.session=je)}if(D.entryPrice&&D.exitPrice){const ve=parseFloat(D.entryPrice),_e=parseFloat(D.exitPrice);let je=0;D.tradeType==="BUY"?je=_e-ve:je=ve-_e,D.pnl=je.toString()}}}}catch(E){console.error("❌ Error parsing TradingView data:",E)}if(!$){/long/i.test(P)?(D.tradeType="BUY",D.outcome="WIN",$=!0):/short/i.test(P)&&(D.tradeType="SELL",D.outcome="WIN",$=!0);const E=P.match(/\b([A-Z]{1,6}\d*(?:USD|BTC|ETH|EUR)?)\b/);E&&(D.symbol=E[1],$=!0);const G=P.match(/\b\d+(\.\d+)?\b/g)||[];G.length>=2&&(D.entryPrice=G[0],D.exitPrice=G[1],G.length>=3&&(D.stopLoss=G[2]),$=!0)}if($){if(console.log("✅ Données extraites:",D),D.symbol&&Ct(E=>({...E,symbol:D.symbol})),D.tradeType&&Ct(E=>({...E,type:D.tradeType})),D.outcome&&Ct(E=>({...E,status:D.outcome})),D.entryPrice&&Ct(E=>({...E,entry:D.entryPrice})),D.exitPrice&&Ct(E=>({...E,exit:D.exitPrice})),D.stopLoss&&Ct(E=>({...E,stopLoss:D.stopLoss})),D.pnl&&Ct(E=>({...E,pnl:D.pnl})),Object.keys(D).length>0){const E=`Importé depuis TradingView:
${JSON.stringify(D,null,2)}`;Ct(G=>({...G,notes:G.notes?`${G.notes}

${E}`:E}))}}else Ct(E=>({...E,notes:`Pasted text:
${P}

${E.notes||""}`})),console.warn("⚠️ Could not extract structured trade data; added raw text to notes.")},zn=b=>{try{const k=b.getFullYear(),P=String(b.getMonth()+1).padStart(2,"0"),D=String(b.getDate()).padStart(2,"0"),$=`${k}-${P}-${D}`;console.log("Recherche trades pour date:",$,"Compte:",At);const ne=mt();if(console.log("Trades du compte:",ne),!Array.isArray(ne))return console.error("accountTrades n'est pas un tableau:",ne),[];const de=ne.filter(he=>!he||!he.date?(console.log("Trade invalide:",he),!1):he.date===$);return console.log("Trades filtrés:",de),de}catch(k){return console.error("Erreur dans getTradesForDate:",k),[]}},oi=b=>{try{const k=mt();if(!Array.isArray(k))return console.error("accountTrades n'est pas un tableau:",k),[];console.log("🔍 DEBUG getTradesForWeek - Trades du compte:",k),console.log("🔍 DEBUG getTradesForWeek - Semaine demandée:",b);const P=new Date,D=P.getMonth(),$=P.getFullYear(),ne=new Date($,D,1),de=ne.getDay(),he=new Date(ne),Oe=de===0?-6:-(de-1);he.setDate(he.getDate()+Oe);const h=new Date(he);h.setDate(he.getDate()+(b-1)*7);const v=new Date(h);v.setDate(h.getDate()+6),v.setHours(23,59,59,999),console.log(`🔍 Recherche trades pour semaine ${b}:`,h.toDateString(),"à",v.toDateString()),console.log("🔍 Dates des trades:",k.map(E=>E.date));const w=k.filter(E=>{if(!E||!E.date)return console.log("🔍 Trade invalide:",E),!1;const G=new Date(E.date);G.setHours(0,0,0,0);const Z=new Date(h);Z.setHours(0,0,0,0);const we=G>=Z&&G<=v;return console.log(`🔍 Trade ${E.date} (${G.toDateString()}) dans semaine ${b}?`,we),we});return console.log(`✅ Trades trouvés pour semaine ${b}:`,w.length),w}catch(k){return console.error("❌ Erreur dans getTradesForWeek:",k),[]}},Br=b=>Ve.filter(k=>{const P=new Date(k.originalTimestamp||k.timestamp);return isNaN(P.getTime())?!1:P.getDate()===b.getDate()&&P.getMonth()===b.getMonth()&&P.getFullYear()===b.getFullYear()}),Ti=b=>{const k=new Date,P=k.getMonth(),D=k.getFullYear(),$=new Date(D,P,1),ne=$.getDay(),de=new Date($),he=ne===0?-6:-(ne-1);de.setDate(de.getDate()+he);const Oe=new Date(de);Oe.setDate(de.getDate()+(b-1)*7);const h=new Date(Oe);return h.setDate(Oe.getDate()+6),h.setHours(23,59,59,999),Ve.filter(v=>{const w=new Date(v.originalTimestamp||v.timestamp);return isNaN(w.getTime())?!1:w>=Oe&&w<=h})},ci=async()=>{var b;if(c){console.log("⚠️ Message déjà en cours d'envoi, ignoré");return}if(Cn.trim()){d(!0),console.log("🚀 Début envoi message côté:",window.matchMedia("(display-mode: standalone)").matches?"PWA":"Desktop"),console.log("📝 Message à envoyer:",Cn),console.log("📺 Canal sélectionné:",I.id),console.log("📊 Messages actuels avant envoi:",((b=F[I.id])==null?void 0:b.length)||0);try{const k={id:`local-${Date.now()}`,text:Cn,user:Es||"Anonyme",author:Es||"Anonyme",author_avatar:ps||void 0,timestamp:new Date().toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),attachment_data:void 0};console.log("📱 Message local créé (pas encore affiché):",k);const P={channel_id:I.id,content:Cn,author:Es||"Anonyme",author_type:"user",author_avatar:ps||void 0};console.log("📤 Envoi vers Firebase:",P);const D=await kl(P);D?console.log("✅ Message envoyé à Firebase:",D):(console.error("❌ Erreur envoi message Firebase"),K($=>{const ne=$[I.id]||[];return{...$,[I.id]:[...ne,k]}}))}catch(k){console.error("💥 ERREUR envoi message:",k),console.log("💾 Message local conservé en cas d'erreur")}setTimeout(()=>{er()},50),Ss("")}d(!1)},Fr=()=>{var P;console.log("🔥 getTradingCalendar appelé pour channel:",I.id),console.log("🔥 personalTrades dans calendrier:",Yt.length);const b=I.id==="journal"||I.id==="trading-journal",k=window.innerWidth<768;return t.jsxs("div",{className:"bg-gray-900 text-white p-2 md:p-4 h-full overflow-y-auto",style:{paddingTop:k&&b?"20px":"0px",marginTop:k&&!b?"-9px":"0px"},children:[t.jsxs("div",{className:`flex flex-col md:flex-row items-start md:items-center justify-between mb-6 md:mb-8 pb-4 gap-4 md:gap-0 ${k&&!b?"":"border-b border-gray-600"}`,children:[t.jsxs("div",{className:"hidden md:flex md:items-center md:gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:I.id==="trading-journal"||I.id==="journal"?"Mon Journal Perso":"Journal des Signaux"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:I.id==="trading-journal"||I.id==="journal"?"Journal tous tes trades":"Suivi des performances des signaux"})]}),(I.id==="trading-journal"||I.id==="journal")&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("select",{value:At,onChange:D=>W(D.target.value),className:"bg-yellow-500/20 hover:bg-yellow-500/30 border border-yellow-500/50 text-yellow-300 hover:text-yellow-200 rounded-lg px-3 py-2 text-sm font-medium focus:outline-none focus:border-yellow-500 cursor-pointer h-9",style:{height:"36px"},children:Nt.map(D=>t.jsx("option",{value:D.account_name,children:D.account_name},D.id))}),t.jsx("button",{onClick:()=>De(At),className:"bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/50 text-blue-300 hover:text-blue-200 px-3 py-2 rounded-lg text-sm font-medium",title:"Options du compte",children:"⚙️"}),t.jsx("button",{onClick:()=>rn(!0),className:"bg-green-500/20 hover:bg-green-500/30 border border-green-500/50 text-green-300 hover:text-green-200 px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap",children:"+ Ajouter compte"})]})]}),t.jsxs("div",{className:`flex items-center ${I.id==="trading-journal"||I.id==="journal"?"gap-4":""}`,children:[t.jsxs("div",{className:"flex items-center gap-3 text-white",children:[t.jsx("button",{onClick:zi,className:"p-2 hover:bg-gray-700 rounded-lg text-lg font-bold",children:"‹"}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-lg font-semibold",children:qi(Ke)}),t.jsx("div",{className:"text-sm text-gray-400",children:Ke.getFullYear()})]}),t.jsx("button",{onClick:ti,className:"p-2 hover:bg-gray-700 rounded-lg text-lg font-bold",children:"›"})]}),(I.id==="trading-journal"||I.id==="journal")&&t.jsx("button",{onClick:va,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Trade"})]})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[t.jsxs("div",{className:"flex-1 w-full",children:[t.jsx("div",{className:"grid grid-cols-7 gap-0.5 md:gap-1 mb-4 w-full",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(D=>t.jsx("div",{className:"text-center text-gray-400 font-semibold py-3 text-sm uppercase tracking-wide",children:D.substring(0,3)},D))}),t.jsx("div",{className:"grid grid-cols-7 gap-0.5 md:gap-1 w-full",children:(()=>{const D=new Date(Ke.getFullYear(),Ke.getMonth(),1),ne=new Date(Ke.getFullYear(),Ke.getMonth()+1,0).getDate(),de=D.getDay(),he=de===0?6:de-1,Oe=Math.ceil((he+ne)/7)*7;return Array.from({length:Oe},(h,v)=>{const w=v-he+1,E=new Date,G=w===E.getDate()&&Ke.getMonth()===E.getMonth()&&Ke.getFullYear()===E.getFullYear();if(w<1)return t.jsx("div",{className:"border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 bg-gray-800 border-gray-700",style:{minHeight:"64px"}},v);if(w>ne)return t.jsx("div",{className:"border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 bg-gray-800 border-gray-700",style:{minHeight:"64px"}},v);const Z=I.id==="trading-journal"||I.id==="journal"?mt().filter(Ue=>{const p=new Date(Ue.date);return p.getDate()===w&&p.getMonth()===Ke.getMonth()&&p.getFullYear()===Ke.getFullYear()}):[],we=I.id!=="trading-journal"&&I.id!=="journal"?e.filter(Ue=>{const p=new Date(Ue.originalTimestamp||Ue.timestamp);return isNaN(p.getTime())?!1:p.getDate()===w&&p.getMonth()===Ke.getMonth()&&p.getFullYear()===Ke.getFullYear()}):[];let Be="bg-gray-700 border-gray-600 text-gray-400";if(I.id==="trading-journal"||I.id==="journal"){if(Z.length>0){Z.length;const Ue=Z.reduce((p,T)=>T.pnl?p+$e(T.pnl):p,0);Ue>0?Be="bg-green-400/40 border-green-300/30 text-white":Ue<0?Be="bg-red-500/60 border-red-400/50 text-white":Be="bg-blue-500/60 border-blue-400/50 text-white"}}else if(we.length>0){we.length;const Ue=we.reduce((p,T)=>T.pnl?p+$e(T.pnl):p,0);Ue>0?Be="bg-green-400/40 border-green-300/30 text-white":Ue<0?Be="bg-red-500/60 border-red-400/50 text-white":Be="bg-blue-500/60 border-blue-400/50 text-white"}return t.jsx("div",{onClick:Ue=>{try{Ue.preventDefault(),Ue.stopPropagation();const p=new Date(Ke.getFullYear(),Ke.getMonth(),w);if(I.id==="trading-journal"||I.id==="journal"){pn(p);const T=zn(p);console.log("Clic sur jour:",w,"Trades trouvés:",T.length),T.length>0&&(console.log("Trades trouvés, ouverture modal..."),An(p),Re(!0))}else Br(p).length>0&&(Tr(p),Qe(!0))}catch(p){console.error("Erreur lors du clic sur le jour:",p),console.error("Erreur lors du clic sur le jour:",p)}},className:`
                    border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 cursor-pointer transition-all hover:shadow-md
                      ${Be}
                    ${G?"ring-2 ring-blue-400":""}
                      ${I.id==="trading-journal"&&Ot&&Ot.getDate()===w&&Ot.getMonth()===Ke.getMonth()&&Ot.getFullYear()===Ke.getFullYear()?"ring-2 ring-purple-400":""}
                  `,style:{minHeight:"64px"},children:t.jsxs("div",{className:"flex flex-col h-full justify-between",children:[t.jsx("div",{className:"text-xs md:text-sm font-semibold",children:w}),(()=>{let Ue=0,p=0;if(I.id==="trading-journal"||I.id==="journal"){const T=mt().filter(R=>{const A=new Date(R.date);return A.getDate()===w&&A.getMonth()===Ke.getMonth()&&A.getFullYear()===Ke.getFullYear()});p=T.length,Ue=T.reduce((R,A)=>A.pnl?R+$e(A.pnl):R,0)}else{const T=Ve.filter(R=>{const A=new Date(R.originalTimestamp||R.timestamp);return A.getDate()===w&&A.getMonth()===Ke.getMonth()&&A.getFullYear()===Ke.getFullYear()});p=T.length,Ue=T.reduce((R,A)=>A.pnl?R+$e(A.pnl):R,0)}return t.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[Ue!==0&&t.jsxs("div",{className:"text-xs font-bold text-center",children:["$",Ue.toFixed(0)]}),p>0&&t.jsx("div",{className:"text-xs font-bold text-right self-end",children:p})]})})()]})},v)})})()},`calendar-${I.id}-${At}-${Yt.length}-${Mr}-${Ke.getMonth()}-${Ke.getFullYear()}`),(I.id==="trading-journal"||I.id==="journal")&&t.jsxs("div",{className:"mt-4 space-y-3",children:[t.jsx("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Solde du compte"}),t.jsx("p",{className:"text-xs text-gray-400",children:At})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-lg font-bold ${Ut()>=(((P=Nt.find(D=>D.account_name===At))==null?void 0:P.initial_balance)||0)?"text-green-400":"text-red-400"}`,children:["$",Ut().toFixed(2)]}),t.jsxs("div",{className:"text-xs text-gray-400",children:["Balance initiale: $",(()=>{const D=Nt.find(ne=>ne.account_name===At);let $=(D==null?void 0:D.initial_balance)||0;if(!$){const ne=localStorage.getItem("accountBalances");ne&&($=JSON.parse(ne)[At]||0)}return $.toFixed(2)})()]}),t.jsxs("div",{className:"text-xs text-gray-400",children:["Stop-loss: $",(()=>{var $;return(($=Ws().currentStopLoss)==null?void 0:$.toFixed(2))||"Non défini"})()]}),t.jsxs("div",{className:"text-xs text-gray-400",children:["Marge de sécurité: $",(()=>{var $;return(($=Ws().remaining)==null?void 0:$.toFixed(2))||"N/A"})()]})]})]})}),(()=>{const D=xr();return D.totalLosses>0?t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-sm font-medium text-red-300",children:"📊 Analyse des Pertes"}),t.jsx("button",{onClick:()=>Dr(!0),className:"text-gray-400 hover:text-white transition-colors",title:"Gérer les raisons de perte",children:"⚙️"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Total pertes:"}),t.jsx("span",{className:"text-red-300",children:D.totalLosses})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"P&L total pertes:"}),t.jsxs("span",{className:"text-red-300",children:["$",D.totalLossPnl]})]}),D.reasons.length>0?D.reasons.slice(0,3).map(($,ne)=>t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-400 truncate",children:Ns($.reason)}),t.jsxs("span",{className:"text-red-300",children:[$.count," (",$.percentage,"%)"]})]},$.reason)):t.jsx("div",{className:"text-xs text-gray-500 italic",children:"Ajoute des raisons aux pertes pour voir l'analyse"})]})]}):null})()]}),t.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4 pt-3 border-t border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500/60 border border-green-400/50 rounded"}),t.jsx("span",{className:"text-xs text-gray-300",children:"WIN"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500/60 border border-red-400/50 rounded"}),t.jsx("span",{className:"text-xs text-gray-300",children:"LOSS"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-500/60 border border-blue-400/50 rounded"}),t.jsx("span",{className:"text-xs text-gray-300",children:"BREAK"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-gray-700 border border-gray-600 rounded"}),t.jsx("span",{className:"text-xs text-gray-300",children:"NO TRADE"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 border-2 border-blue-400 rounded"}),t.jsx("span",{className:"text-xs text-gray-300",children:"Today"})]})]})]}),t.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-xl p-4 md:p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-6",children:I.id==="trading-journal"||I.id==="journal"?"Mon Journal Perso":"Statistiques Signaux"}),t.jsxs("div",{className:"space-y-4 mb-8",children:[t.jsxs("div",{className:`border rounded-lg p-4 border ${(I.id==="trading-journal"||I.id==="journal"?Fn():Pt())>=0?"bg-green-600/20 border-green-500/30":"bg-red-600/20 border-red-500/30"}`,children:[t.jsx("div",{className:`text-sm mb-1 ${(I.id==="trading-journal"||I.id==="journal"?Fn():Pt())>=0?"text-green-300":"text-red-300"}`,children:"P&L Total"}),t.jsxs("div",{className:`text-2xl font-bold ${(I.id==="trading-journal"||I.id==="journal"?Fn():Pt())>=0?"text-green-200":"text-red-200"}`,children:[(I.id==="trading-journal"||I.id==="journal"?Fn():Pt())>=0?"+":"","$",I.id==="trading-journal"||I.id==="journal"?Fn():Pt()]})]}),t.jsxs("div",{className:"bg-blue-600/20 border-blue-500/30 rounded-lg p-4 border",children:[t.jsx("div",{className:"text-sm text-blue-300 mb-1",children:"Win Rate"}),t.jsxs("div",{className:"text-2xl font-bold text-blue-200",children:[I.id==="trading-journal"||I.id==="journal"?Vi():pr(),"%"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Aujourd'hui"}),t.jsx("div",{className:"text-lg font-bold text-blue-400",children:I.id==="trading-journal"||I.id==="journal"?Us().length:yn()})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Ce mois"}),t.jsx("div",{className:"text-lg font-bold text-white",children:I.id==="trading-journal"||I.id==="journal"?Pr().length:Si()})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Win"}),t.jsx("div",{className:"text-lg font-bold text-green-400",children:I.id==="trading-journal"||I.id==="journal"?Lr()>0?`+$${Lr()}`:"-":a(Ke).avgWin>0?`+$${a(Ke).avgWin}`:"-"})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Loss"}),t.jsx("div",{className:"text-lg font-bold text-red-400",children:I.id==="trading-journal"||I.id==="journal"?Rn()>0?`-$${Rn()}`:"-":a(Ke).avgLoss>0?`-$${a(Ke).avgLoss}`:"-"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Weekly Breakdown"}),t.jsx("div",{className:"space-y-2",children:(I.id==="trading-journal"||I.id==="journal"?ri():Ps()).map((D,$)=>t.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer hover:bg-gray-600/50 transition-colors ${D.isCurrentWeek?"bg-blue-600/20 border-blue-500/30":"bg-gray-700/50 border-gray-600"}`,onClick:()=>{Jn(D.weekNum),nt(!0)},children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`text-sm font-medium ${D.isCurrentWeek?"text-blue-300":"text-gray-300"}`,children:D.week}),t.jsxs("div",{className:"text-xs text-gray-400",children:[D.trades," trade",D.trades!==1?"s":""]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[D.wins>0||D.losses>0?t.jsxs("div",{className:"flex items-center gap-1",children:[D.wins>0&&t.jsxs("div",{className:"text-sm bg-green-500 text-white px-3 py-1 rounded-lg font-bold shadow-lg",children:[D.wins,"W"]}),D.losses>0&&t.jsxs("div",{className:"text-sm bg-red-500 text-white px-3 py-1 rounded-lg font-bold shadow-lg",children:[D.losses,"L"]})]}):t.jsx("div",{className:"text-sm text-gray-500 px-3 py-1",children:"-"}),t.jsx("div",{className:`text-xs ${D.pnl>0?"text-green-400":D.pnl<0?"text-red-400":"text-gray-500"}`,children:D.pnl!==0?`${D.pnl>0?"+":""}$${D.pnl}`:""})]})]},$))})]}),t.jsx("div",{className:"h-24 md:h-32"})]},`stats-${At}-${Ke.getMonth()}-${Ke.getFullYear()}-${Mr}`)]})]})};return t.jsxs("div",{className:"h-screen w-full bg-gray-900 text-white overflow-hidden flex",style:{paddingTop:"0px"},children:[t.jsxs("div",{className:"hidden md:flex w-56 min-w-56 flex-shrink-0 bg-gray-800 flex-col",children:[t.jsx("div",{className:"p-4 border-b border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",onChange:$n,className:"hidden",accept:"image/*"}),t.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:ps?t.jsx("img",{src:ps,alt:"Profile",className:"w-full h-full object-cover"}):"TT"})]}),t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium cursor-pointer hover:text-blue-300 transition-colors",onContextMenu:b=>{b.preventDefault(),fn(Es||""),Ts(!0)},onTouchStart:b=>{const k=setTimeout(()=>{fn(Es||""),Ts(!0)},500);b.currentTarget.dataset.timeout=k},onTouchEnd:b=>{const k=b.currentTarget.dataset.timeout;k&&(clearTimeout(k),delete b.currentTarget.dataset.timeout)},title:"Clic droit ou appui long pour modifier",children:Gs?t.jsx("input",{type:"text",value:Xt,onChange:b=>fn(b.target.value),className:"bg-gray-700 text-white text-sm px-2 py-1 rounded border border-gray-600 w-24",autoFocus:!0,onKeyDown:b=>{b.key==="Enter"?Cr():b.key==="Escape"&&Xn()}}):Es||"Chargement..."}),t.jsx("p",{className:"text-xs text-gray-400",children:"En ligne"})]}),Gs&&t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:Cr,className:"text-xs bg-green-600 hover:bg-green-700 px-2 py-0.5 rounded text-white",children:"✓"}),t.jsx("button",{onClick:Xn,className:"text-xs bg-red-600 hover:bg-red-700 px-2 py-0.5 rounded text-white",children:"✗"})]})]})})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"ÉDUCATION"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("button",{onClick:()=>Zt("fondamentaux","fondamentaux"),className:`w-full text-left px-3 py-2 rounded text-sm ${I.id==="fondamentaux"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"📚 Fondamentaux"}),t.jsx("button",{onClick:()=>Zt("letsgooo-model","letsgooo-model"),className:`w-full text-left px-3 py-2 rounded text-sm ${I.id==="letsgooo-model"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"🚀 Letsgooo-model"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"SIGNAUX"}),t.jsx("div",{className:"space-y-1",children:o.filter(b=>["general-chat-2","general-chat-3","general-chat-4"].includes(b.id)).map(b=>t.jsxs("button",{onClick:()=>Zt(b.id,b.name),className:`w-full text-left px-3 py-2 rounded text-sm ${I.id===b.id?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[b.emoji," ",b.fullName]},b.id))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"TRADING HUB"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("button",{onClick:()=>Zt("calendrier","calendrier"),className:`w-full text-left px-3 py-2 rounded text-sm ${I.id==="calendrier"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"📅 Journal Signaux"}),t.jsx("button",{onClick:()=>Zt("journal","journal"),className:`w-full text-left px-3 py-2 rounded text-sm ${I.id==="journal"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"📓 Journal Perso"}),t.jsx("button",{onClick:()=>Zt("video","video"),className:`w-full text-left px-3 py-2 rounded text-sm ${I.id==="video"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"📺 Livestream"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[t.jsx("h4",{className:"text-sm font-medium mb-2",children:"Statistiques"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Win Rate:"}),t.jsxs("span",{className:"text-blue-400",children:[ni(),"%"]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Total Trades:"}),t.jsx("span",{className:"text-purple-400",children:e.length})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Signaux actifs:"}),t.jsx("span",{className:"text-yellow-400",children:e.filter(b=>b.status==="ACTIVE").length})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"P&L Total:"}),t.jsxs("span",{className:si()>=0?"text-green-400":"text-red-400",children:[si()>=0?"+":"","$",si()]})]})]})]}),t.jsx("button",{onClick:Un,className:`w-full px-4 py-3 rounded-lg font-medium transition-all duration-200 shadow-sm ${Zr?"bg-green-500/20 hover:bg-green-500/30 text-green-400 border border-green-500/30 hover:border-green-500/50":"bg-gray-600/20 hover:bg-gray-600/30 text-gray-400 border border-gray-600/30 hover:border-gray-600/50"}`,children:Zr?"🔔 Notifications ON":"🔕 Notifications OFF"})]})]}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsx("div",{className:`md:hidden bg-gray-800 p-3 fixed top-0 left-0 right-0 z-30 ${I.id==="calendrier"||I.id==="trading-journal"||I.id==="journal"?"":"border-b border-gray-700"}`,style:{height:"60px"},children:Se==="channels"?t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",onChange:$n,className:"hidden",accept:"image/*"}),t.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:ps?t.jsx("img",{src:ps,alt:"Profile",className:"w-full h-full object-cover"}):"TT"})]}),t.jsx("div",{className:"flex-1",children:Gs?t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("input",{type:"text",value:Xt,onChange:b=>fn(b.target.value),className:"text-sm bg-transparent border border-blue-400 rounded px-1 py-0.5 text-white placeholder-gray-400 focus:outline-none focus:border-blue-300",placeholder:"Nouveau nom...",autoFocus:!0,onKeyPress:b=>b.key==="Enter"&&Cr(),onKeyDown:b=>b.key==="Escape"&&Xn()}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:Cr,className:"text-xs bg-green-600 hover:bg-green-700 px-2 py-0.5 rounded text-white",children:"✓"}),t.jsx("button",{onClick:Xn,className:"text-xs bg-red-600 hover:bg-red-700 px-2 py-0.5 rounded text-white",children:"✗"})]})]}):t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium cursor-pointer hover:text-blue-300 transition-colors",onContextMenu:b=>{b.preventDefault(),fn(Es||""),Ts(!0)},onTouchStart:b=>{const k=setTimeout(()=>{fn(Es||""),Ts(!0)},500);b.currentTarget.dataset.timeout=k},onTouchEnd:b=>{const k=b.currentTarget.dataset.timeout;k&&(clearTimeout(k),delete b.currentTarget.dataset.timeout)},title:"Clic droit ou appui long pour modifier",children:Es||"Chargement..."})})})})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:Un,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${Zr?"bg-green-400/20 hover:bg-green-400/30 text-green-200 border border-green-400/30":"bg-gray-600/20 hover:bg-gray-600/30 text-gray-300 border border-gray-600/30"}`,children:Zr?"🔔":"🔕"}),t.jsx("button",{onClick:li,className:"text-gray-400 hover:text-white",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})]})]}):t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("button",{onClick:()=>Ae("channels"),className:"flex items-center gap-2 text-gray-400 hover:text-white",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),t.jsx("span",{className:"text-sm font-medium",children:te==="calendar"?"📅 Journal Signaux":((Hi=o.find(b=>b.id===I.id))==null?void 0:Hi.fullName)||I.name})]})})}),t.jsxs("div",{className:"md:hidden relative flex-1 overflow-hidden",style:{paddingTop:"60px"},children:[t.jsx("div",{className:`absolute inset-0 bg-gray-800 transform transition-transform duration-300 ease-in-out z-10 ${Se==="channels"?"translate-x-0":"-translate-x-full"}`,children:t.jsxs("div",{className:"p-4 space-y-3 h-full overflow-y-auto",style:{paddingTop:"80px"},children:[t.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Win Rate:"}),t.jsxs("span",{className:"text-gray-200 font-medium",children:[pr(),"%"]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"P&L Total:"}),t.jsxs("span",{className:Pt()>=0?"text-green-200 font-medium":"text-red-200 font-medium",children:[Pt()>=0?"+":"","$",Pt()]})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Signaux actifs:"}),t.jsx("span",{className:"text-gray-200 font-medium",children:e.filter(b=>b.status==="ACTIVE").length})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Total Trades:"}),t.jsx("span",{className:"text-gray-200 font-medium",children:e.length})]})]})]})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1",children:"ÉDUCATION"}),t.jsx("div",{className:"space-y-2",children:o.filter(b=>["fondamentaux","letsgooo-model"].includes(b.id)).map(b=>t.jsx("button",{onClick:()=>{Zt(b.id,b.name),Ae("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:b.emoji}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-white",children:b.fullName}),t.jsx("p",{className:"text-sm text-gray-400",children:"Contenu éducatif"})]})]})},b.id))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1",children:"SIGNAUX"}),t.jsx("div",{className:"space-y-2",children:o.filter(b=>["general-chat-2","general-chat-3","general-chat-4"].includes(b.id)).map(b=>t.jsx("button",{onClick:()=>{Zt(b.id,b.name),Ae("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:b.emoji}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-white",children:b.fullName}),t.jsx("p",{className:"text-sm text-gray-400",children:"Canal de signaux"})]})]})},b.id))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1",children:"TRADING HUB"}),t.jsxs("div",{className:"space-y-2",children:[o.filter(b=>["video","trading-hub"].includes(b.id)).map(b=>t.jsx("button",{onClick:()=>{Zt(b.id,b.name),Ae("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:b.emoji}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-white",children:b.fullName}),t.jsx("p",{className:"text-sm text-gray-400",children:"Hub de trading"})]})]})},b.id)),t.jsx("button",{onClick:()=>{Zt("calendrier","calendrier"),Ae("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:"📅"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-white",children:"Journal Signaux"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Suivi des performances"})]})]})}),t.jsx("button",{onClick:()=>{Zt("trading-journal","trading-journal"),Ae("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:"📊"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-white",children:"Journal Perso"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Journal personnel"})]})]})})]})]})]})}),t.jsx("div",{className:`absolute inset-0 bg-gray-900 transform transition-transform duration-300 ease-in-out z-10 ${Se==="content"?"translate-x-0":"translate-x-full"}`,children:te==="calendar"||I.id==="trading-journal"||I.id==="calendrier"||I.id==="video"||I.id==="journal"?t.jsxs("div",{className:"bg-gray-900 text-white p-4 md:p-6 h-full overflow-y-auto overflow-x-hidden",style:{paddingTop:"0px"},children:[I.id==="trading-journal"||I.id==="journal"?t.jsx("div",{className:"mb-4 md:mb-6 border-b border-gray-600 pb-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Mon Journal Perso"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Journal tous tes trades"})]}),t.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("select",{value:At,onChange:b=>W(b.target.value),className:"bg-yellow-500/20 hover:bg-yellow-500/30 border border-yellow-500/50 text-yellow-300 hover:text-yellow-200 rounded-lg px-3 py-2 text-sm font-medium focus:outline-none focus:border-yellow-500 cursor-pointer h-9",style:{height:"36px"},children:Nt.map(b=>t.jsx("option",{value:b.account_name,children:b.account_name},b.id))}),t.jsx("button",{onClick:()=>De(At),className:"bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/50 text-blue-300 hover:text-blue-200 px-3 py-2 rounded-lg text-sm font-medium",title:"Options du compte",children:"⚙️"}),t.jsx("button",{onClick:()=>rn(!0),className:"bg-green-500/20 hover:bg-green-500/30 border border-green-500/50 text-green-300 hover:text-green-200 px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap",children:"+ Ajouter compte"})]})})]})}):null,(te==="calendar"||I.id==="calendrier")&&I.id!=="trading-journal"&&t.jsx("div",{className:"flex justify-between items-center mb-6 border-b border-gray-600 pb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Journal des Signaux"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Suivi des performances des signaux"})]})}),(I.id==="calendrier"||I.id==="trading-journal"||I.id==="journal")&&Fr(),I.id==="video"&&t.jsx("div",{className:"flex flex-col h-full bg-gray-900",children:t.jsxs("div",{className:"text-center space-y-4 w-full max-w-[95vw] mx-auto p-4 pt-16",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Livestream"}),t.jsx("p",{className:"text-gray-400",children:"Attache ta ceinture cousin"}),t.jsxs("div",{className:"w-full relative",id:"video-container",children:[t.jsx("button",{onClick:()=>{const b=document.getElementById("video-container");b&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.msRequestFullscreen&&b.msRequestFullscreen())},className:"absolute top-4 right-4 z-10 text-white text-4xl font-bold hover:text-gray-300 transition-colors bg-black bg-opacity-50 px-2 py-1 rounded",title:"Plein écran",children:"⤢"}),t.jsx("iframe",{src:"https://tote-livestream-033.app.100ms.live/streaming/meeting/hzs-ukns-nts",width:"100%",height:"500px",style:{border:"none",borderRadius:"8px"},allow:"camera; microphone; display-capture; fullscreen",allowFullScreen:!0})]})]})}),(console.log("Vérification affichage trades:",{channel:I.id,selectedDate:Ot,shouldShow:I.id==="trading-journal"&&Ot,tradesCount:Ot?zn(Ot).length:0}),I.id==="trading-journal"&&Ot)&&t.jsxs("div",{className:"mt-8 border-t border-gray-600 pt-6",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Trades du ",Ot.toLocaleDateString("fr-FR")]}),zn(Ot).length===0?t.jsx("div",{className:"text-center py-8 text-gray-400",children:"Aucun trade pour cette date"}):t.jsx("div",{className:"space-y-4",children:zn(Ot).map(b=>t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${b.status==="WIN"?"bg-green-500 text-white":b.status==="LOSS"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:b.status}),t.jsx("span",{className:"text-white font-semibold",children:b.symbol}),t.jsx("span",{className:"text-gray-400",children:b.type})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:`text-lg font-bold ${parseFloat(b.pnl)>=0?"text-green-400":"text-red-400"}`,children:[parseFloat(b.pnl)>=0?"+":"",b.pnl,"$"]}),t.jsx("button",{onClick:async()=>{confirm("Supprimer ce trade ?")&&await oh(b.id)&&zs(P=>P.filter(D=>D.id!==b.id))},className:"text-red-400 hover:text-red-300 transition-colors",title:"Supprimer ce trade",children:"❌"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Entry:"}),t.jsx("span",{className:"text-white ml-2",children:b.entry})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Exit:"}),t.jsx("span",{className:"text-white ml-2",children:b.exit})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Stop Loss:"}),t.jsx("span",{className:"text-white ml-2",children:b.stopLoss||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Time:"}),t.jsx("span",{className:"text-white ml-2",children:b.timestamp})]})]}),b.notes&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[t.jsx("span",{className:"text-gray-400 text-sm",children:"Notes:"}),t.jsx("p",{className:"text-white text-sm mt-1",children:b.notes})]}),(b.image1||b.image2)&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[t.jsx("span",{className:"text-gray-400 text-sm",children:"Images:"}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[b.image1&&t.jsx("img",{src:b.image1,alt:"Trade screenshot 1",className:"w-20 h-20 object-cover rounded border border-gray-600"}),b.image2&&t.jsx("img",{src:b.image2,alt:"Trade screenshot 2",className:"w-20 h-20 object-cover rounded border border-gray-600"})]})]})]},b.id))})]})]}):t.jsxs("div",{className:"p-4 md:p-6 space-y-4 w-full h-full overflow-y-auto",style:{paddingTop:"80px",paddingBottom:"100px"},children:[te==="signals"&&(I.id==="calendrier"||I.id==="journal")?Fr():null,te==="signals"&&!["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4","profit-loss","video","","calendrier","journal"].includes(I.id)?t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex justify-center pt-2 sticky top-0 bg-gray-900 p-2 rounded z-10",children:t.jsx("button",{onClick:async()=>{try{const b=wt.filter(k=>k.channel_id===I.id);if(b.length>0){const k=b[b.length-1],P=new Date(k.timestamp).getTime();console.log("🔍 Chargement de signaux plus anciens avant:",P);const D=await ua(I.id,10,P);if(D&&D.length>0){const $=D.map(he=>{var Oe,h,v;return{id:he.id||"",type:he.type,symbol:he.symbol,timeframe:he.timeframe,entry:((Oe=he.entry)==null?void 0:Oe.toString())||"N/A",takeProfit:((h=he.takeProfit)==null?void 0:h.toString())||"N/A",stopLoss:((v=he.stopLoss)==null?void 0:v.toString())||"N/A",description:he.description||"",image:he.image||he.attachment_data,attachment_data:he.attachment_data||he.image,attachment_type:he.attachment_type,attachment_name:he.attachment_name,closure_image:he.closure_image,closure_image_type:he.closure_image_type,closure_image_name:he.closure_image_name,timestamp:new Date(he.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:he.status||"ACTIVE",channel_id:he.channel_id,reactions:he.reactions||[],pnl:he.pnl,closeMessage:he.closeMessage}}),ne=new Set(b.map(he=>he.id)),de=$.filter(he=>!ne.has(he.id));de.length>0?(rs(he=>[...he,...de]),console.log(`✅ ${de.length} nouveaux signaux ajoutés`)):console.log("ℹ️ Aucun nouveau signal à ajouter")}else console.log("ℹ️ Aucun signal plus ancien trouvé")}}catch(b){console.error("❌ Erreur lors du chargement de signaux supplémentaires:",b)}},className:"px-4 py-2 text-sm rounded bg-gray-700 hover:bg-gray-600 text-white",children:"Voir plus (+10)"})}),wt.filter(b=>b.channel_id===I.id).length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-sm",children:"Aucun signal pour le moment"}),t.jsx("div",{className:"text-gray-500 text-xs mt-1",children:'Créez votre premier signal avec le bouton "+"'})]}):wt.filter(b=>b.channel_id===I.id).map(b=>t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:ps?t.jsx("img",{src:ps,alt:"Profile",className:"w-full h-full object-cover"}):"TT"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),t.jsx("span",{className:"text-xs text-gray-400",children:b.timestamp})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 max-w-2xl md:max-w-2xl max-w-full",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${b.status==="ACTIVE"?"bg-green-500":"bg-gray-500"}`}),t.jsxs("h3",{className:"font-bold text-white text-lg",children:["Signal ",b.type," ",b.symbol," – ",b.timeframe]})]}),t.jsxs("div",{className:"space-y-2",children:[b.entry!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Entrée : ",b.entry," USD"]})]}),b.stopLoss!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Stop Loss : ",b.stopLoss," USD"]})]}),b.takeProfit!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Take Profit : ",b.takeProfit," USD"]})]})]}),b.entry!=="N/A"&&b.takeProfit!=="N/A"&&b.stopLoss!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-red-400 text-sm",children:"🎯"}),t.jsxs("span",{className:"text-white text-sm",children:["Ratio R:R : ≈ ",Ur(b.entry,b.takeProfit,b.stopLoss)]})]}),b.closeMessage&&t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-yellow-400 text-sm",children:"🔒"}),t.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:b.closeMessage})]})]})}),b.image&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:b.image,alt:"Signal screenshot",className:"max-w-full md:max-w-2xl rounded-lg border border-gray-600"})})]})]},b.id))]}):["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"].includes(I.id)?t.jsx("div",{className:"flex flex-col h-full",children:t.jsxs("div",{ref:xn,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4 pb-32",children:[I.id==="fondamentaux"&&t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[t.jsxs("div",{className:"text-center mb-8 p-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl text-white",children:[t.jsx("div",{className:"flex justify-center mb-0",children:t.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-48 w-auto object-cover",style:{clipPath:"inset(10% 5% 15% 5%)"}})}),t.jsx("p",{className:"text-xl opacity-90 -mt-3",children:"Guide complet des concepts fondamentaux et stratégies avancées"})]}),t.jsxs("div",{className:"space-y-6 text-gray-300",children:[t.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4",children:t.jsxs("p",{className:"text-yellow-200",children:[t.jsx("strong",{children:"📖 Avertissement :"})," Ce guide présente un ensemble de concepts appris et expérimentés sur les marchés financiers. Il ne s'agit pas d'inventions originales, mais d'un setup personnel basé sur l'observation et l'expérience pratique."]})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"1. 📚 Introduction"}),t.jsx("p",{children:"Ce document vous présente les fondamentaux essentiels pour comprendre comment les charts évoluent et ce qui influence leurs mouvements. L'objectif est de construire une base solide avant d'aborder les stratégies avancées."})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"2. 🧠 Fondamentaux des Charts"}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"📈 Qu'est-ce qu'une Chart ?"}),t.jsx("p",{className:"mb-3",children:"Une chart (ou graphique) est une représentation visuelle du prix d'un actif financier dans le temps (Bitcoin, or, actions, etc.)."}),t.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[t.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Elle permet de :"}),t.jsxs("ul",{className:"space-y-1 text-sm",children:[t.jsx("li",{children:"→ Voir comment le prix évolue"}),t.jsx("li",{children:"→ Trouver des points d'entrée/sortie"}),t.jsx("li",{children:"→ Comprendre le comportement du marché"})]})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"🕯️ Comprendre les Bougies"}),t.jsx("p",{className:"mb-3",children:"Chaque bougie montre l'évolution du prix sur une période donnée (1 min, 1h, 1 jour, etc.)"}),t.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[t.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Composition d'une bougie :"}),t.jsxs("ul",{className:"space-y-1 text-sm",children:[t.jsxs("li",{children:["→ ",t.jsx("strong",{children:"Le corps (body) :"})," différence entre ouverture et clôture"]}),t.jsxs("li",{children:["→ ",t.jsx("strong",{children:"Les mèches (wicks) :"})," les plus hauts et plus bas atteints"]}),t.jsxs("li",{children:["→ ",t.jsx("strong",{children:"Couleur :"})," verte/blanche si clôture > ouverture, rouge/noire si clôture < ouverture"]})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"3. 🧠 Mouvement des Prix (Modèle AMD)"}),t.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 mb-4",children:t.jsxs("p",{children:[t.jsx("strong",{children:"🚗💨 Analogie :"})," Le prix, c'est comme un voyage de A à B. Pour avancer, il a besoin de liquidité, comme une voiture a besoin d'essence."]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"1️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Accumulation"}),t.jsx("p",{className:"text-sm",children:"Le prix se prépare 🛑⛽"})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"2️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),t.jsx("p",{className:"text-sm",children:"Il piège les traders 🎯🪤"})]}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"3️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),t.jsx("p",{className:"text-sm",children:"Le vrai mouvement 🚀📈"})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"4. 📈 Support et Résistance"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[t.jsx("strong",{className:"text-green-300",children:"🔹 Support"}),t.jsx("br",{}),t.jsx("span",{className:"text-sm",children:"Zone où le prix rebondit vers le haut 🔼"})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[t.jsx("strong",{className:"text-red-300",children:"🔹 Résistance"}),t.jsx("br",{}),t.jsx("span",{className:"text-sm",children:"Zone où le prix bloque et redescend 🔽"})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"5. 🔬 Concepts Avancés"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"🧱 ORDER BLOCK (OB)"}),t.jsx("p",{className:"mb-2",children:"Un Order Block représente la dernière bougie haussière (ou baissière) avant un mouvement impulsif majeur dans la direction opposée."}),t.jsxs("div",{className:"text-sm text-blue-300",children:["→ Ces zones deviennent des repères de liquidité",t.jsx("br",{}),"→ Souvent retestées par le prix",t.jsx("br",{}),"→ Offrent des points d'entrée à fort potentiel"]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"⚡📉📈 FVG – Fair Value Gap"}),t.jsx("p",{className:"mb-2",children:"Un FVG est une zone de déséquilibre créée lors d'un mouvement rapide et violent du marché 🚀."}),t.jsxs("div",{className:"text-sm text-blue-300",children:["→ Le prix revient fréquemment combler ces gaps",t.jsx("br",{}),"→ Zones intéressantes pour entrer ou sortir d'une position"]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"🦄 Unicorn"}),t.jsx("p",{className:"mb-2",children:"C'est un setup formé par l'association d'un Breaker (BRKR) ⚡ et d'un Fair Value Gap (FVG) 📉."}),t.jsxs("div",{className:"text-sm text-blue-300",children:["→ Zone à forte probabilité de réaction du prix",t.jsx("br",{}),"→ Rassemble deux zones institutionnelles clés",t.jsx("br",{}),"→ Point d'entrée ou de prise de profit idéal"]})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"6. 🕵️ CRT – Candle Range Theory"}),t.jsx("p",{className:"mb-4",children:"La Candle Range Theory (CRT) est une méthode d'analyse basée sur 3 bougies consécutives."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"1️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"La Range"}),t.jsxs("p",{className:"text-sm",children:["Bougie avec grand corps",t.jsx("br",{}),"Zone de stagnation"]})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"2️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),t.jsxs("p",{className:"text-sm",children:["Va chercher la liquidité",t.jsx("br",{}),"Piège les traders"]})]}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"3️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),t.jsxs("p",{className:"text-sm",children:["Bougie directionnelle",t.jsx("br",{}),"Zone d'entrée"]})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:'7. 📌 Le Setup "A+"'}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 mb-4",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"PRINCIPE DU MODÈLE"}),t.jsx("p",{className:"mb-2",children:"Le principe du modèle, c'est de prendre position après la phase de manipulation ⏸️, sur la timeframe basse (LTF) du contexte défini sur la timeframe haute (HTF) 📊."}),t.jsx("p",{children:"🎯 Cela permet d'éviter les pièges des faux breakouts 🚫 et de s'aligner avec la vraie direction du mouvement ➡️."})]})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold mb-2",children:"⚠️ Avertissement Légal"}),t.jsx("p",{className:"text-sm",children:"Ce document est fourni à des fins éducatives uniquement. Le trading comporte des risques significatifs de perte financière. Il est essentiel de bien comprendre les risques avant de trader et ne jamais risquer plus que ce que vous pouvez vous permettre de perdre."})]})]})]}),(F[I.id]||[]).length>0&&(F[I.id]||[]).map((b,k)=>{var de,he,Oe;let P;typeof b.timestamp=="string"?P=new Date(b.timestamp):typeof b.timestamp=="number"?P=new Date(b.timestamp):P=new Date,isNaN(P.getTime())&&(P=new Date),P.toDateString();const D=k>0?F[I.id][k-1]:null;if(D){let h;typeof D.timestamp=="string"?h=new Date(D.timestamp):typeof D.timestamp=="number"?h=new Date(D.timestamp):h=new Date,isNaN(h.getTime())||h.toDateString()}const $=new Date,ne=new Date($);return ne.setDate(ne.getDate()-1),P.toDateString()===$.toDateString()||P.toDateString()===ne.toDateString()||P.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),t.jsx("div",{children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:b.author_avatar?t.jsx("img",{src:b.author_avatar,alt:"Profile",className:"w-full h-full object-cover"}):b.author==="Admin"?"A":b.author===Es?Es.charAt(0).toUpperCase():"U"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-semibold text-white",children:b.author}),t.jsx("span",{className:"text-xs text-gray-400",children:b.timestamp})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 hover:shadow-lg hover:shadow-gray-900/50 transition-shadow duration-200 max-w-full break-words","data-signal-id":b.text.includes("[SIGNAL_ID:")?(de=b.text.match(/\[SIGNAL_ID:([^\]]+)\]/))==null?void 0:de[1]:void 0,children:[t.jsx("div",{className:"text-white",children:b.text.includes("[SIGNAL_ID:")?t.jsxs(t.Fragment,{children:[b.text.split("[SIGNAL_ID:")[0],t.jsxs("span",{className:"text-gray-700 text-xs",children:["[SIGNAL_ID:",b.text.split("[SIGNAL_ID:")[1].split("]")[0],"]"]}),b.text.split("]").slice(1).join("]"),(()=>{const h=b.text.includes("SIGNAL FERMÉ");return console.log("🔍 Debug flèche USER - message.text:",b.text),console.log("🔍 Debug flèche USER - isClosureMessage:",h),h&&console.log("✅ Flèche USER devrait apparaître !"),h})()&&t.jsx("span",{className:"ml-2 text-blue-400 hover:text-blue-300 cursor-pointer text-2xl transition-colors inline-block bg-blue-500/20 px-2 py-1 rounded-lg hover:bg-blue-500/30",onClick:()=>{const h=b.text.match(/\[SIGNAL_ID:([^\]]+)\]/),v=h?h[1]:"";console.log("🔍 Debug flèche USER - signalId extrait:",v),console.log("🔍 Debug flèche USER - message.text:",b.text);const w=document.querySelector(`[data-signal-id="${v}"]`);console.log("🔍 Debug flèche USER - élément trouvé:",w),console.log("🔍 Debug flèche USER - sélecteur utilisé:",`[data-signal-id="${v}"]`);const E=document.querySelectorAll("[data-signal-id]");if(console.log("🔍 Debug flèche USER - tous les éléments signal:",E),w&&w.offsetParent!==null)console.log("🔍 Debug flèche USER - scroll vers élément:",w),console.log("🔍 Debug flèche USER - élément visible:",w.offsetParent!==null),console.log("🔍 Debug flèche USER - élément dans viewport:",w.getBoundingClientRect()),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{w.scrollIntoView({behavior:"smooth",block:"center"}),w.classList.add("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20"),setTimeout(()=>{w.classList.remove("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20")},5e3)},500),console.log("✅ Navigation USER vers le signal original réussie");else{console.log("❌ Signal original USER non trouvé"),console.log("🔍 Debug flèche USER - recherche alternative...");const G=document.querySelectorAll("div");let Z=null;for(let we of G)if(we.textContent&&we.textContent.includes(v)&&we.classList.contains("bg-gray-700")){Z=we,console.log("🔍 Debug flèche USER - message trouvé par contenu:",Z);break}Z?(Z.scrollIntoView({behavior:"smooth",block:"center"}),Z.classList.add("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20"),setTimeout(()=>{Z.classList.remove("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20")},5e3),console.log("✅ Navigation USER réussie par contenu")):console.log("❌ Aucun message trouvé avec ce signalId dans toute la page")}},title:"Aller au signal original",children:"⬆️"})]}):b.text}),b.text.includes("[SIGNAL_ID:")&&!b.text.includes("SIGNAL FERMÉ")&&(()=>{const h=b.text.match(/\[SIGNAL_ID:([^\]]+)\]/),v=h?h[1]:"",w=wt.find(G=>G.id===v),E=w&&["WIN","LOSS","BE"].includes(w.status);return t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-400",children:"Résultat du signal:"}),t.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${E&&(w==null?void 0:w.status)==="WIN"?"bg-green-500 text-white border-2 border-green-400 shadow-lg":E&&(w==null?void 0:w.status)==="LOSS"?"bg-red-500 text-white border-2 border-red-400 shadow-lg":E&&(w==null?void 0:w.status)==="BE"?"bg-blue-500 text-white border-2 border-blue-400 shadow-lg":"bg-gray-500/30 text-gray-400 border border-gray-500/30"}`,children:E&&(w==null?void 0:w.status)==="WIN"?"🟢 WIN":E&&(w==null?void 0:w.status)==="LOSS"?"🔴 LOSS":E&&(w==null?void 0:w.status)==="BE"?"🔵 BE":"⏳ EN ATTENTE"})]}),E&&t.jsx("div",{className:"mt-2 text-xs text-gray-400",children:t.jsxs("span",{className:"cursor-pointer text-blue-400 hover:text-blue-300 underline",onClick:()=>{const G=document.querySelector(`[data-signal-id="${v}"]`);G&&G.offsetParent!==null&&(G.scrollIntoView({behavior:"smooth",block:"center"}),G.classList.add("ring-2","ring-blue-400","ring-opacity-50"),setTimeout(()=>{G.classList.remove("ring-2","ring-blue-400","ring-opacity-50")},3e3))},children:["Signal ",(w==null?void 0:w.id)||""," fermé avec ",w!=null&&w.pnl?`P&L: ${w.pnl}`:"aucun P&L"]})})]})})(),b.attachment_data&&t.jsx("div",{className:"mt-2",children:t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:b.attachment_data,alt:"Attachment",className:"mt-2 max-w-xs md:max-w-3xl max-h-40 md:max-h-96 object-contain rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Ie(b.attachment_data)}),t.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Cliquez pour agrandir"})]})})]}),t.jsx("div",{className:"mt-2 flex justify-start",children:t.jsxs("button",{onClick:()=>ii(b.id),className:`flex items-center gap-1 px-2 py-1 rounded text-xs transition-colors ${(((he=x[b.id])==null?void 0:he.users)||[]).includes((_==null?void 0:_.email)||"Anonymous")?"bg-orange-500 text-white hover:bg-orange-600":"bg-gray-600 text-gray-300 hover:bg-gray-500 hover:text-white"}`,children:["🔥",t.jsx("span",{className:"text-xs",children:((Oe=x[b.id])==null?void 0:Oe.fire)||0})]})})]})]})},b.id)}),t.jsx("div",{ref:Dn})]})}):null]})})]}),t.jsx("div",{className:"hidden md:block flex-1 overflow-y-auto overflow-x-hidden",children:te==="calendar"||I.id==="trading-journal"?Fr():t.jsxs("div",{className:"p-4 md:p-6 space-y-4 w-full",style:{paddingTop:"80px"},children:[te==="signals"&&(I.id==="calendrier"||I.id==="journal")?Fr():null,te==="signals"&&!["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4","profit-loss","video","trading-hub","","calendrier","journal"].includes(I.id)?t.jsx("div",{className:"space-y-4",children:wt.filter(b=>b.channel_id===I.id).length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-sm",children:"Aucun signal pour le moment"}),t.jsx("div",{className:"text-gray-500 text-xs mt-1",children:'Créez votre premier signal avec le bouton "+"'})]}):wt.filter(b=>b.channel_id===I.id).map(b=>t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:ps?t.jsx("img",{src:ps,alt:"Profile",className:"w-full h-full object-cover"}):"TT"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),t.jsx("span",{className:"text-xs text-gray-400",children:b.timestamp})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 max-w-full md:max-w-2xl",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${b.status==="ACTIVE"?"bg-green-500":"bg-gray-500"}`}),t.jsxs("h3",{className:"font-bold text-white text-lg",children:["Signal ",b.type," ",b.symbol," – ",b.timeframe]})]}),t.jsxs("div",{className:"space-y-2",children:[b.entry!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Entrée : ",b.entry," USD"]})]}),b.stopLoss!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Stop Loss : ",b.stopLoss," USD"]})]}),b.takeProfit!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Take Profit : ",b.takeProfit," USD"]})]})]}),b.entry!=="N/A"&&b.takeProfit!=="N/A"&&b.stopLoss!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-red-400 text-sm",children:"🎯"}),t.jsxs("span",{className:"text-white text-sm",children:["Ratio R:R : ≈ ",Ur(b.entry,b.takeProfit,b.stopLoss)]})]}),b.closeMessage&&t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-yellow-400 text-sm",children:"🔒"}),t.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:b.closeMessage})]})]})}),b.image&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:b.image,alt:"Signal screenshot",className:"max-w-full md:max-w-2xl rounded-lg border border-gray-600"})})]})]},b.id))}):I.id==="profit-loss"?t.jsx(Lh,{}):I.id==="video"?t.jsx("div",{className:"flex flex-col h-full bg-gray-900",children:t.jsx("div",{className:"flex-1 flex flex-col gap-4 p-2",children:t.jsx("div",{className:"flex-1 bg-gray-900 rounded-lg overflow-hidden",children:t.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 pt-16",children:t.jsxs("div",{className:"text-center space-y-4 w-full max-w-[95vw] mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Livestream"}),t.jsx("p",{className:"text-gray-400",children:"Attache ta ceinture cousin"}),t.jsxs("div",{className:"w-full relative",children:[t.jsx("button",{onClick:()=>{const b=document.querySelector('iframe[src*="100ms.live"]');b&&b.requestFullscreen&&b.requestFullscreen()},className:"absolute top-4 right-4 z-10 text-white text-4xl font-bold hover:text-gray-300 transition-colors",children:"⤢"}),t.jsx("iframe",{src:"https://tote-livestream-033.app.100ms.live/streaming/meeting/hzs-ukns-nts",width:"100%",height:"1700px",style:{border:"none",borderRadius:"8px"},allow:"camera; microphone; display-capture; fullscreen",allowFullScreen:!0})]})]})})})})}):I.id==="trading-hub"?t.jsx("div",{className:"flex flex-col h-full bg-gray-900",children:t.jsxs("div",{className:"flex-1 flex flex-col p-4",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"💬 Trading Hub"}),t.jsx("p",{className:"text-gray-400",children:"Discute avec la communauté en temps réel"})]}),t.jsx("div",{className:"flex-1 flex items-center justify-center",children:t.jsx(gR,{})})]})}):I.id==="video"?t.jsx("div",{className:"flex flex-col h-full bg-gray-900",children:t.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 p-4",children:[t.jsx("div",{className:"flex-1 bg-gray-900 rounded-lg overflow-hidden",children:t.jsx("div",{className:"h-full flex flex-col items-center justify-center p-8",children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto",children:t.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M8 5v14l11-7z"})})}),t.jsx("h2",{className:"text-xl font-bold text-white",children:"Livestream Trading"}),t.jsx("p",{className:"text-gray-400",children:"Session de trading en direct"}),t.jsxs("div",{className:"w-full max-w-7xl relative",children:[t.jsx("button",{onClick:()=>{const b=document.querySelector('iframe[src*="100ms.live"]');b&&b.requestFullscreen&&b.requestFullscreen()},className:"absolute top-4 right-4 z-10 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"📺 Plein écran"}),t.jsx("iframe",{src:"https://admintrading.app.100ms.live/meeting/kor-inbw-yiz",width:"100%",height:"1200px",style:{border:"none",borderRadius:"8px"},allow:"camera; microphone; display-capture; fullscreen",allowFullScreen:!0})]})]})})}),t.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-lg flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-gray-700",children:[t.jsx("h3",{className:"font-semibold text-white",children:"💬 Chat Live"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Commentaires en direct"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:(F.video||[]).length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-sm",children:"Aucun message"}),t.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Soyez le premier à commenter !"})]}):(F.video||[]).map(b=>t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{className:"h-6 w-6 bg-blue-500 rounded-full flex items-center justify-center text-xs",children:"T"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-medium text-white text-sm",children:b.author}),t.jsx("span",{className:"text-xs text-gray-400",children:b.timestamp})]}),t.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:t.jsx("p",{className:"text-white text-sm",children:b.text})})]})]},b.id))}),t.jsx("div",{className:"p-4 border-t border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:Cn,onChange:b=>Ss(b.target.value),onKeyDown:b=>b.key==="Enter"&&ci(),placeholder:"Commenter le stream...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 text-sm"}),t.jsx("button",{onClick:ci,className:"bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-white text-sm",children:"Envoyer"})]})})]})]})}):["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"].includes(I.id)?t.jsx("div",{className:"flex flex-col h-full",children:t.jsxs("div",{ref:xn,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4 pb-32",children:[(F[I.id]||[]).length>0&&(F[I.id]||[]).map((b,k)=>{var de,he;let P;typeof b.timestamp=="string"?P=new Date(b.timestamp):typeof b.timestamp=="number"?P=new Date(b.timestamp):P=new Date,isNaN(P.getTime())&&(P=new Date),P.toDateString();const D=k>0?F[I.id][k-1]:null;if(D){let Oe;typeof D.timestamp=="string"?Oe=new Date(D.timestamp):typeof D.timestamp=="number"?Oe=new Date(D.timestamp):Oe=new Date,isNaN(Oe.getTime())||Oe.toDateString()}const $=new Date,ne=new Date($);return ne.setDate(ne.getDate()-1),P.toDateString()===$.toDateString()||P.toDateString()===ne.toDateString()||P.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),t.jsx("div",{children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:b.author_avatar?t.jsx("img",{src:b.author_avatar,alt:"Profile",className:"w-full h-full object-cover"}):b.author==="Admin"?"A":b.author===Es?Es.charAt(0).toUpperCase():"U"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-semibold text-white",children:b.author}),t.jsx("span",{className:"text-xs text-gray-400",children:b.timestamp})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 hover:shadow-lg hover:shadow-gray-900/50 transition-shadow duration-200 max-w-full break-words",children:[t.jsx("div",{className:"text-white",children:b.text.includes("[SIGNAL_ID:")?t.jsxs(t.Fragment,{children:[b.text.split("[SIGNAL_ID:")[0],t.jsxs("span",{className:"text-gray-700 text-xs",children:["[SIGNAL_ID:",b.text.split("[SIGNAL_ID:")[1].split("]")[0],"]"]}),b.text.split("]").slice(1).join("]"),(()=>{const Oe=b.text.includes("SIGNAL FERMÉ");return console.log("🔍 Debug flèche USER - message.text:",b.text),console.log("🔍 Debug flèche USER - isClosureMessage:",Oe),Oe&&console.log("✅ Flèche USER devrait apparaître !"),Oe})()&&t.jsx("span",{className:"ml-2 text-blue-400 hover:text-blue-300 cursor-pointer text-2xl transition-colors inline-block bg-blue-500/20 px-2 py-1 rounded-lg hover:bg-blue-500/30",onClick:()=>{const Oe=b.text.match(/\[SIGNAL_ID:([^\]]+)\]/),h=Oe?Oe[1]:"";console.log("🔍 Debug flèche USER - signalId extrait:",h),console.log("🔍 Debug flèche USER - message.text:",b.text);const v=document.querySelector(`[data-signal-id="${h}"]`);console.log("🔍 Debug flèche USER - élément trouvé:",v),console.log("🔍 Debug flèche USER - sélecteur utilisé:",`[data-signal-id="${h}"]`);const w=document.querySelectorAll("[data-signal-id]");if(console.log("🔍 Debug flèche USER - tous les éléments signal:",w),v&&v.offsetParent!==null)console.log("🔍 Debug flèche USER - scroll vers élément:",v),console.log("🔍 Debug flèche USER - élément visible:",v.offsetParent!==null),console.log("🔍 Debug flèche USER - élément dans viewport:",v.getBoundingClientRect()),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{v.scrollIntoView({behavior:"smooth",block:"center"}),v.classList.add("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20"),setTimeout(()=>{v.classList.remove("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20")},5e3)},500),console.log("✅ Navigation USER vers le signal original réussie");else{console.log("❌ Signal original USER non trouvé"),console.log("🔍 Debug flèche USER - recherche alternative...");const E=document.querySelectorAll("div");let G=null;for(let Z of E)if(Z.textContent&&Z.textContent.includes(h)&&Z.classList.contains("bg-gray-700")){G=Z,console.log("🔍 Debug flèche USER - message trouvé par contenu:",G);break}G?(G.scrollIntoView({behavior:"smooth",block:"center"}),G.classList.add("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20"),setTimeout(()=>{G.classList.remove("ring-4","ring-yellow-400","ring-opacity-100","bg-yellow-400/20")},5e3),console.log("✅ Navigation USER réussie par contenu")):console.log("❌ Aucun message trouvé avec ce signalId dans toute la page")}},title:"Aller au signal original",children:"⬆️"})]}):b.text}),b.text.includes("[SIGNAL_ID:")&&!b.text.includes("SIGNAL FERMÉ")&&(()=>{const Oe=b.text.match(/\[SIGNAL_ID:([^\]]+)\]/),h=Oe?Oe[1]:"",v=wt.find(E=>E.id===h),w=v&&["WIN","LOSS","BE"].includes(v.status);return t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-400",children:"Résultat du signal:"}),t.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${w&&(v==null?void 0:v.status)==="WIN"?"bg-green-500 text-white border-2 border-green-400 shadow-lg":w&&(v==null?void 0:v.status)==="LOSS"?"bg-red-500 text-white border-2 border-red-400 shadow-lg":w&&(v==null?void 0:v.status)==="BE"?"bg-blue-500 text-white border-2 border-blue-400 shadow-lg":"bg-gray-500/30 text-gray-400 border border-gray-500/30"}`,children:w&&(v==null?void 0:v.status)==="WIN"?"🟢 WIN":w&&(v==null?void 0:v.status)==="LOSS"?"🔴 LOSS":w&&(v==null?void 0:v.status)==="BE"?"🔵 BE":"⏳ EN ATTENTE"})]}),w&&t.jsx("div",{className:"mt-2 text-xs text-gray-400",children:t.jsxs("span",{className:"cursor-pointer text-blue-400 hover:text-blue-300 underline",onClick:()=>{const E=document.querySelector(`[data-signal-id="${h}"]`);E&&E.offsetParent!==null&&(E.scrollIntoView({behavior:"smooth",block:"center"}),E.classList.add("ring-2","ring-blue-400","ring-opacity-50"),setTimeout(()=>{E.classList.remove("ring-2","ring-blue-400","ring-opacity-50")},3e3))},children:["Signal ",(v==null?void 0:v.id)||""," fermé avec ",v!=null&&v.pnl?`P&L: ${v.pnl}`:"aucun P&L"]})})]})})(),b.attachment_data&&t.jsx("div",{className:"mt-2",children:t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:b.attachment_data,alt:"Attachment",className:"mt-2 max-w-xs md:max-w-3xl max-h-40 md:max-h-96 object-contain rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Ie(b.attachment_data)}),t.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Cliquez pour agrandir"})]})})]}),t.jsx("div",{className:"mt-2 flex justify-start",children:t.jsxs("button",{onClick:()=>ii(b.id),className:`flex items-center gap-1 px-2 py-1 rounded text-xs transition-colors ${(((de=x[b.id])==null?void 0:de.users)||[]).includes((_==null?void 0:_.email)||"Anonymous")?"bg-orange-500 text-white hover:bg-orange-600":"bg-gray-600 text-gray-300 hover:bg-gray-500 hover:text-white"}`,children:["🔥",t.jsx("span",{className:"text-xs",children:((he=x[b.id])==null?void 0:he.fire)||0})]})})]})]})},b.id)}),t.jsx("div",{ref:Dn})]})}):null]})})]}),xa&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Ajouter un trade"}),t.jsx("button",{onClick:()=>nn(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"📋 Coller données TradingView"}),t.jsx("div",{className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 min-h-[80px] flex items-center justify-center cursor-pointer",onPaste:tr,onDrop:b=>{b.preventDefault();const k=b.dataTransfer.getData("text");k&&tr({preventDefault:()=>{},clipboardData:{getData:D=>D==="text/html"?"":D==="text"?k:""}})},onDragOver:b=>b.preventDefault(),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"📋 Cliquez ici et collez (Ctrl+V)"}),t.jsx("div",{className:"text-xs text-gray-500",children:"ou glissez-déposez du texte"})]})}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Collez directement depuis TradingView"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Ct({...Je,type:"BUY"}),className:`px-3 py-2 rounded text-sm ${Je.type==="BUY"?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:"📈 BUY"}),t.jsx("button",{onClick:()=>Ct({...Je,type:"SELL"}),className:`px-3 py-2 rounded text-sm ${Je.type==="SELL"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:"📉 SELL"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Symbole *"}),t.jsx("input",{type:"text",value:Je.symbol,onChange:b=>Ct({...Je,symbol:b.target.value}),placeholder:"BTC, ETH, NQ1!, etc.",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix d'entrée *"}),t.jsx("input",{type:"text",value:Je.entry,onChange:b=>Ct({...Je,entry:b.target.value}),placeholder:"45000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix de sortie *"}),t.jsx("input",{type:"text",value:Je.exit,onChange:b=>Ct({...Je,exit:b.target.value}),placeholder:"46000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stop Loss"}),t.jsx("input",{type:"text",value:Je.stopLoss,onChange:b=>Ct({...Je,stopLoss:b.target.value}),placeholder:"44000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"P&L *"}),t.jsx("input",{type:"text",value:Je.pnl,onChange:b=>Ct({...Je,pnl:b.target.value}),placeholder:"+500 ou -200",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Résultat"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Ct({...Je,status:"WIN"}),className:`px-3 py-2 rounded text-sm ${Je.status==="WIN"?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:"✅ WIN"}),t.jsx("button",{onClick:()=>Ct({...Je,status:"LOSS"}),className:`px-3 py-2 rounded text-sm ${Je.status==="LOSS"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:"❌ LOSS"}),t.jsx("button",{onClick:()=>Ct({...Je,status:"BE"}),className:`px-3 py-2 rounded text-sm ${Je.status==="BE"?"bg-blue-600 text-white":"bg-gray-600 text-gray-300"}`,children:"⚖️ BE"})]})]}),Je.status==="LOSS"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Raison du Stop-Loss"}),t.jsxs("select",{value:Je.lossReason,onChange:b=>Ct({...Je,lossReason:b.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:[t.jsx("option",{value:"",children:"Sélectionner une raison..."}),is.map(b=>t.jsxs("option",{value:b.value,children:[b.emoji," ",b.label]},b.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),t.jsx("textarea",{value:Je.notes,onChange:b=>Ct({...Je,notes:b.target.value}),placeholder:"Notes sur le trade...",rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Image 1"}),t.jsx("input",{type:"file",accept:"image/*",onChange:b=>{var P;const k=(P=b.target.files)==null?void 0:P[0];k&&Ct({...Je,image1:k})},className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Image 2"}),t.jsx("input",{type:"file",accept:"image/*",onChange:b=>{var P;const k=(P=b.target.files)==null?void 0:P[0];k&&Ct({...Je,image2:k})},className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:()=>nn(!1),className:"flex-1 bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Annuler"}),t.jsx("button",{onClick:yr,className:"flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white",children:"Ajouter le trade"})]})]})]})})}),Ye&&bs&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-white",children:["Trades du ",bs.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),t.jsx("button",{onClick:()=>Re(!1),className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),t.jsx("div",{className:"space-y-4",children:zn(bs).map(b=>t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${b.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:b.type}),t.jsx("span",{className:"text-lg font-bold text-white",children:b.symbol})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:`text-lg font-bold ${b.pnl&&parseFloat(b.pnl)>=0?"text-green-400":"text-red-400"}`,children:[b.pnl&&parseFloat(b.pnl)>=0?"+":"",b.pnl||"0","$"]}),t.jsx("button",{onClick:async()=>{confirm("Supprimer ce trade ?")&&await oh(b.id)&&zs(P=>P.filter(D=>D.id!==b.id))},className:"text-red-400 hover:text-red-300 text-xl font-bold",title:"Supprimer ce trade",children:"×"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),t.jsx("span",{className:"text-white ml-2",children:b.entry})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Exit:"}),t.jsx("span",{className:"text-white ml-2",children:b.exit})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),t.jsx("span",{className:"text-white ml-2",children:b.stopLoss})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Status:"}),t.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${b.status==="WIN"?"bg-green-600 text-white":b.status==="LOSS"?"bg-red-600 text-white":"bg-blue-600 text-white"}`,children:b.status})]})]}),b.notes&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Notes:"}),t.jsx("p",{className:"text-white mt-1",children:b.notes})]}),(b.image1||b.image2)&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Images:"}),t.jsxs("div",{className:"mt-2 space-y-3 flex flex-col items-center",children:[b.image1&&t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"📸 Image 1:"}),t.jsx("div",{className:"mt-1",children:t.jsx("img",{src:b.image1 instanceof File?URL.createObjectURL(b.image1):b.image1,alt:"Trade image 1",className:"w-96 h-96 object-cover rounded cursor-pointer hover:opacity-80 border border-gray-600",onClick:()=>Ie(b.image1 instanceof File?URL.createObjectURL(b.image1):b.image1)})})]}),b.image2&&t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"📸 Image 2:"}),t.jsx("div",{className:"mt-1",children:t.jsx("img",{src:b.image2 instanceof File?URL.createObjectURL(b.image2):b.image2,alt:"Trade image 2",className:"w-96 h-96 object-cover rounded cursor-pointer hover:opacity-80 border border-gray-600",onClick:()=>Ie(b.image2 instanceof File?URL.createObjectURL(b.image2):b.image2)})})]})]})]}),t.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400",children:t.jsxs("span",{children:["Ajouté le ",b.timestamp]})})]},b.id))}),t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:t.jsx("button",{onClick:()=>Re(!1),className:"w-full bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Fermer"})})]})})}),dt&&sn&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-white",children:[I.id==="trading-journal"?"Trades du":"Signaux du"," ",sn.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),t.jsx("button",{onClick:()=>Qe(!1),className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),t.jsx("div",{className:"space-y-4",children:(I.id==="trading-journal"?zn(sn).length>0:Br(sn).length>0)?(()=>{const b=I.id==="trading-journal"?zn(sn):Br(sn);return console.log("🔍 [POPUP USER] Données reçues dans le popup:",b),b.forEach(k=>{console.log("🔍 [POPUP USER] Signal individuel COMPLET:",{id:k.id,symbol:k.symbol,image:k.image,attachment_data:k.attachment_data,attachment_type:k.attachment_type,attachment_name:k.attachment_name,closure_image:k.closure_image,closure_image_type:k.closure_image_type,closure_image_name:k.closure_image_name,status:k.status,timestamp:k.timestamp,ALL_KEYS:Object.keys(k)})}),b.map(k=>t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${k.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:k.type}),t.jsx("span",{className:"text-lg font-bold text-white",children:k.symbol}),t.jsx("span",{className:"text-sm text-gray-400",children:k.timeframe})]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${k.status==="WIN"?"bg-green-600 text-white":k.status==="LOSS"?"bg-red-600 text-white":k.status==="BE"?"bg-blue-600 text-white":"bg-yellow-600 text-white"}`,children:k.status})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),t.jsx("span",{className:"text-white ml-2",children:k.entry})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Take Profit:"}),t.jsx("span",{className:"text-white ml-2",children:k.takeProfit})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),t.jsx("span",{className:"text-white ml-2",children:k.stopLoss})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"PnL:"}),t.jsx("span",{className:`ml-2 font-bold ${k.pnl&&k.pnl.includes("-")?"text-red-400":"text-green-400"}`,children:k.pnl||"N/A"})]})]}),(k.image||k.attachment_data||k.closure_image)&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Images:"}),t.jsxs("div",{className:"mt-2 space-y-3 flex flex-col items-center",children:[(k.image||k.attachment_data)&&t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"📸 Image de création:"}),t.jsx("div",{className:"mt-1",children:t.jsx("img",{src:k.image||k.attachment_data,alt:"Signal image",className:"w-96 h-96 object-cover rounded cursor-pointer hover:opacity-80 border border-gray-600",onClick:()=>Ie(k.image||k.attachment_data)})})]}),k.closure_image&&t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"📸 Image de fermeture:"}),t.jsx("div",{className:"mt-1",children:t.jsx("img",{src:k.closure_image,alt:"Signal closure image",className:"w-96 h-96 object-cover rounded cursor-pointer hover:opacity-80 border border-gray-600",onClick:()=>Ie(k.closure_image)})})]})]})]})]},k.id))})():t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"📅"}),t.jsx("div",{className:"text-gray-300 text-lg font-medium",children:I.id==="trading-journal"?"Aucun trade pour ce jour":"Aucun signal pour ce jour"}),t.jsx("div",{className:"text-gray-500 text-sm mt-1",children:I.id==="trading-journal"?'Ajoute tes trades avec le bouton "+" pour les voir ici':"Les signaux apparaîtront ici quand ils seront créés"})]})}),t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:t.jsx("button",{onClick:()=>Qe(!1),className:"w-full bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Fermer"})})]})})}),st&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold text-white",children:[I.id==="trading-journal"||I.id==="journal"?"Trades de la Semaine":"Signaux de la Semaine"," ",Gt]}),t.jsx("button",{onClick:()=>nt(!1),className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),t.jsx("div",{className:"space-y-4",children:I.id==="trading-journal"||I.id==="journal"?oi(Gt).length>0?oi(Gt).map(b=>t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${b.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:b.type}),t.jsx("span",{className:"text-lg font-bold text-white",children:b.symbol}),t.jsx("span",{className:"text-sm text-gray-400",children:b.date})]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${b.status==="WIN"?"bg-green-600 text-white":b.status==="LOSS"?"bg-red-600 text-white":b.status==="BE"?"bg-blue-600 text-white":"bg-yellow-600 text-white"}`,children:b.status})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),t.jsx("span",{className:"text-white ml-2",children:b.entry})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Exit:"}),t.jsx("span",{className:"text-white ml-2",children:b.exit})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),t.jsx("span",{className:"text-white ml-2",children:b.stopLoss})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"PnL:"}),t.jsx("span",{className:`ml-2 font-bold ${b.pnl&&b.pnl.includes("-")?"text-red-400":"text-green-400"}`,children:b.pnl||"N/A"})]})]}),b.notes&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Notes:"}),t.jsx("p",{className:"text-white mt-1",children:b.notes})]}),(b.image1||b.image2)&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Images:"}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[b.image1&&t.jsx("img",{src:b.image1,alt:"Trade image 1",className:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>Ie(b.image1)}),b.image2&&t.jsx("img",{src:b.image2,alt:"Trade image 2",className:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>Ie(b.image2)})]})]}),t.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400",children:t.jsxs("span",{children:["Créé le ",b.timestamp]})})]},b.id)):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"📊"}),t.jsx("div",{className:"text-gray-300 text-lg font-medium",children:"Aucun trade pour cette semaine"}),t.jsx("div",{className:"text-gray-500 text-sm mt-1",children:"Tes trades apparaîtront ici quand tu les ajouteras"})]}):Ti(Gt).length>0?Ti(Gt).map(b=>t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${b.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:b.type}),t.jsx("span",{className:"text-lg font-bold text-white",children:b.symbol}),t.jsx("span",{className:"text-sm text-gray-400",children:b.timeframe})]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${b.status==="WIN"?"bg-green-600 text-white":b.status==="LOSS"?"bg-red-600 text-white":b.status==="BE"?"bg-blue-600 text-white":"bg-yellow-600 text-white"}`,children:b.status})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),t.jsx("span",{className:"text-white ml-2",children:b.entry})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Take Profit:"}),t.jsx("span",{className:"text-white ml-2",children:b.takeProfit})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),t.jsx("span",{className:"text-white ml-2",children:b.stopLoss})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"PnL:"}),t.jsx("span",{className:`ml-2 font-bold ${b.pnl&&b.pnl.includes("-")?"text-red-400":"text-green-400"}`,children:b.pnl||"N/A"})]})]}),(b.image||b.attachment_data||b.closure_image)&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Images:"}),t.jsxs("div",{className:"mt-2 space-y-3 flex flex-col items-center",children:[(b.image||b.attachment_data)&&t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"📸 Image de création:"}),t.jsx("div",{className:"mt-1",children:t.jsx("img",{src:b.image||b.attachment_data,alt:"Signal image",className:"w-96 h-96 object-cover rounded cursor-pointer hover:opacity-80 border border-gray-600",onClick:()=>Ie(b.image||b.attachment_data)})})]}),b.closure_image&&t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"📸 Image de fermeture:"}),t.jsx("div",{className:"mt-1",children:t.jsx("img",{src:b.closure_image,alt:"Signal closure image",className:"w-96 h-96 object-cover rounded cursor-pointer hover:opacity-80 border border-gray-600",onClick:()=>Ie(b.closure_image)})})]})]})]})]},b.id)):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"📅"}),t.jsx("div",{className:"text-gray-300 text-lg font-medium",children:"Aucun signal pour cette semaine"}),t.jsx("div",{className:"text-gray-500 text-sm mt-1",children:"Les signaux apparaîtront ici quand ils seront créés"})]})}),t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:t.jsx("button",{onClick:()=>nt(!1),className:"w-full bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Fermer"})})]})})},`week-modal-${At}-${Gt}`),Te&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>Ie(null),children:t.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[t.jsx("img",{src:Te,alt:"Image agrandie",className:"max-w-full max-h-full object-contain rounded-lg",onClick:b=>b.stopPropagation()}),t.jsx("button",{onClick:()=>Ie(null),className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white rounded-full w-10 h-10 flex items-center justify-center text-xl",children:"×"})]})}),Ht&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-96",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Ajouter un nouveau compte"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Nom du compte"}),t.jsx("input",{type:"text",value:He,onChange:b=>$t(b.target.value),placeholder:"Ex: Compte Demo, Compte Live...",className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 focus:outline-none focus:border-blue-500",onKeyPress:b=>b.key==="Enter"&&at()})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Balance initiale ($)"}),t.jsx("input",{type:"number",value:Rr,onChange:b=>ya(b.target.value),placeholder:"Ex: 10000",className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 focus:outline-none focus:border-blue-500",onKeyPress:b=>b.key==="Enter"&&at()})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Balance minimum ($)"}),t.jsx("input",{type:"number",value:Ys,onChange:b=>es(b.target.value),placeholder:"Ex: 5000 (seuil d'arrêt)",className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 focus:outline-none focus:border-blue-500",onKeyPress:b=>b.key==="Enter"&&at()})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:at,className:"flex-1 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-white font-medium",children:"Ajouter"}),t.jsx("button",{onClick:()=>{rn(!1),$t("")},className:"flex-1 bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg text-white font-medium",children:"Annuler"})]})]})}),fr&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-gray-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-white",children:"⚙️ Gérer les raisons de perte"}),t.jsx("button",{onClick:()=>{Dr(!1),Bn(null),ks({value:"",emoji:"",label:""})},className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),t.jsxs("div",{className:"mb-6 p-4 bg-gray-700 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:Vt!==null?"✏️ Modifier la raison":"➕ Ajouter une raison"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[t.jsx("input",{type:"text",placeholder:"Emoji",value:Cs.emoji,onChange:b=>ks({...Cs,emoji:b.target.value}),className:"bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white text-center text-2xl",maxLength:2,disabled:Vt!==null}),t.jsx("input",{type:"text",placeholder:"Nom",value:Cs.label,onChange:b=>{const k=b.target.value,P=k.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");ks({...Cs,label:k,value:P})},className:"flex-1 bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{if(!Cs.label.trim()){alert("Entre un nom");return}if(Vt!==null){if(!Cs.label.trim()){alert("Entre un nom");return}const b=[...is];b[Vt]=Cs,gn(b),localStorage.setItem("customLossReasons",JSON.stringify(b)),Bn(null)}else{if(!Cs.value||!Cs.emoji||!Cs.label){alert("Remplis tous les champs");return}const b=[...is,Cs];gn(b),localStorage.setItem("customLossReasons",JSON.stringify(b))}ks({value:"",emoji:"",label:""})},className:"flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white font-medium",children:Vt!==null?"✓ Modifier":"+ Ajouter"}),Vt!==null&&t.jsx("button",{onClick:()=>{Bn(null),ks({value:"",emoji:"",label:""})},className:"bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded text-white",children:"Annuler"})]})]}),t.jsxs("div",{className:"space-y-2 mb-6",children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:["Raisons actuelles (",is.length,") :"]}),is.map((b,k)=>t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors",children:[t.jsx("span",{className:"text-2xl",children:b.emoji}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-white font-medium",children:b.label}),t.jsx("div",{className:"text-xs text-gray-400 font-mono",children:b.value})]}),t.jsx("button",{onClick:()=>{ks(b),Bn(k)},className:"text-blue-400 hover:text-blue-300 px-3 py-1 text-sm",title:"Modifier le nom",children:"✏️"})]},k))]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{confirm("Réinitialiser aux raisons par défaut ?")&&(gn(Pl),localStorage.setItem("customLossReasons",JSON.stringify(Pl)),Bn(null),ks({value:"",emoji:"",label:""}))},className:"flex-1 bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded text-white font-medium",children:"🔄 Réinitialiser"}),t.jsx("button",{onClick:()=>{Dr(!1),Bn(null),ks({value:"",emoji:"",label:""})},className:"flex-1 bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded text-white font-medium",children:"Fermer"})]})]})})})]})}function vR({onLogin:r}){const[e,n]=L.useState(""),[a,o]=L.useState(""),[c,d]=L.useState(!1),[f,y]=L.useState(null),x=async()=>{if(!e||!a){y("Veuillez remplir tous les champs");return}d(!0),y(null);try{console.log("🔐 Tentative de connexion admin:",e);const{data:_,error:S}=await gj(e,a);if(S){console.error("❌ Erreur authentification admin:",S.message),y(S.message==="Accès administrateur refusé"?"Accès refusé. Seuls les administrateurs peuvent se connecter ici.":"Email ou mot de passe incorrect.");return}_!=null&&_.user?(console.log("✅ Connexion admin réussie:",_.user.email),r(_)):y("Erreur de connexion inattendue")}catch(_){console.error("❌ Erreur connexion admin:",_),y("Erreur de connexion. Veuillez réessayer.")}finally{d(!1)}},N=_=>{_.key==="Enter"&&!c&&x()};return t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-gray-900 rounded-lg p-8 w-full max-w-md",children:[t.jsx("h2",{className:"text-white text-2xl font-bold mb-6 text-center",children:"🔐 Accès Admin"}),f&&t.jsx("div",{className:"bg-red-600 text-white p-3 rounded mb-4 text-sm",children:f}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("input",{type:"email",placeholder:"Email administrateur",value:e,onChange:_=>n(_.target.value),onKeyPress:N,disabled:c,className:"w-full p-3 bg-gray-800 text-white rounded border border-gray-700 focus:border-blue-500 disabled:opacity-50",autoComplete:"email"}),t.jsx("input",{type:"password",placeholder:"Mot de passe",value:a,onChange:_=>o(_.target.value),onKeyPress:N,disabled:c,className:"w-full p-3 bg-gray-800 text-white rounded border border-gray-700 focus:border-blue-500 disabled:opacity-50",autoComplete:"current-password"}),t.jsx("button",{onClick:x,disabled:c,className:"w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:c?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connexion..."]}):"Se connecter"})]}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx("p",{className:"text-gray-400 text-xs",children:"🔒 Authentification Supabase sécurisée"})})]})})}/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xj=(...r)=>r.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=L.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:c,iconNode:d,...f},y)=>L.createElement("svg",{ref:y,...wR,width:e,height:e,stroke:r,strokeWidth:a?Number(n)*24/Number(e):n,className:Xj("lucide",o),...f},[...d.map(([x,N])=>L.createElement(x,N)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=(r,e)=>{const n=L.forwardRef(({className:a,...o},c)=>L.createElement(NR,{ref:c,iconNode:e,className:Xj(`lucide-${bR(r)}`,a),...o}));return n.displayName=`${r}`,n};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],jR=cr("Copy",_R);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],TR=cr("EllipsisVertical",SR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]],AR=cr("Forward",ER);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],kR=cr("Heart",CR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],RR=cr("Info",DR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],MR=cr("Mic",IR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],LR=cr("Paperclip",OR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],UR=cr("PenLine",PR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],Jw=cr("Pin",BR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],Qw=cr("Reply",FR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],zR=cr("Send",$R);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],VR=cr("Smile",qR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],GR=cr("Star",HR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],WR=cr("Trash2",YR),Bg=({onUnreadCountChange:r,isActive:e})=>{var sn,Tr,Er,ur;const[n,a]=L.useState(""),[o,c]=L.useState(null),[d,f]=L.useState(null),[y,x]=L.useState(null),[N,_]=L.useState(null),[S,V]=L.useState(0),[z,re]=L.useState(!0),[ce,I]=L.useState(1),[Ee,te]=L.useState(null),[be,Se]=L.useState(null),Ae=L.useRef(null),B=L.useRef(null),[M,F]=L.useState({admin:{id:"admin",name:"Admin",email:"admin@local.com",avatar:"https://ui-avatars.com/api/?name=Admin&background=4ade80",initials:"AD"},user:{id:"user",name:"Utilisateur",email:"user@local.com",avatar:"https://ui-avatars.com/api/?name=Utilisateur&background=3b82f6",initials:"US"}}),[K,Y]=L.useState([]),Q=["❤️","😂","😮","😢","😡","👍","👎","👏","🙏","🔥"],[U,gt]=L.useState("admin"),[xe,le]=L.useState("Admin");M.admin;const fe=Te=>{console.log("🔍 isCurrentUser check (local):",{senderId:Te,currentUserId:U});const Ie=Te===U;return console.log(Ie?"✅ Utilisateur actuel":"⬅️ Autre utilisateur"),Ie};L.useEffect(()=>{const Te=Ie=>{Ae.current&&!Ae.current.contains(Ie.target)&&(x(null),_(null))};return document.addEventListener("mousedown",Te),()=>{document.removeEventListener("mousedown",Te)}},[]),L.useEffect(()=>{localStorage.getItem("adminAuthenticated")==="true"?(gt("admin"),le("Admin"),console.log("✅ Mode admin local détecté")):(gt("user"),le("Utilisateur"),console.log("✅ Mode utilisateur local"))},[]),L.useEffect(()=>{U&&(Y([]),I(0),console.log("✅ ChatZone vide - connexion Supabase uniquement"))},[U]);const ke=()=>{B.current&&B.current.scrollIntoView({behavior:"smooth"})};L.useEffect(()=>{ke()},[K]),L.useEffect(()=>{e&&I(K.length-1)},[K.length,e]),L.useEffect(()=>{e&&V(0)},[e]),L.useEffect(()=>{console.log("🔔 ChatZone: unreadCount changed to:",S,"parentIsActive:",e),r&&r("chatzone",S)},[S,r]),L.useEffect(()=>{const Te=()=>{S>0&&(re(!0),I(K.length-1),V(0))},Ie=document.querySelector(".flex-1.overflow-y-auto");if(Ie)return Ie.addEventListener("scroll",Te),window.addEventListener("focus",Te),window.addEventListener("click",Te),()=>{Ie.removeEventListener("scroll",Te),window.removeEventListener("focus",Te),window.removeEventListener("click",Te)}},[S,K.length]);const at=async()=>{if(n.trim()){if(o)Y(Te=>Te.map(Ie=>Ie.id===o?{...Ie,text:n,edited:!0}:Ie)),c(null);else{const Te={id:Date.now(),text:n,sender:U||"00000000-0000-0000-0000-000000000001",senderName:xe||"Admin",time:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:"sent",reactions:{},pinned:!1,edited:!1,replyTo:d};try{console.log("📤 Envoi message Supabase - currentUserId:",U,"currentUserName:",xe);const{data:Ie}=await cs.from("chat_channels").select("id").eq("name","chatzone").single();if(!Ie){console.log("❌ Canal chatzone non trouvé dans la base");return}const{data:Ve,error:ot}=await cs.from("chat_messages").insert({channel_id:Ie.id,user_id:U,user_name:xe||"Admin",message:n,message_type:"text",status:"sent"});ot?console.log("❌ Erreur envoi Supabase:",ot):(console.log("✅ Message envoyé à Supabase"),Y(st=>[...st,Te]))}catch(Ie){console.log("❌ Erreur envoi message Supabase:",Ie)}f(null)}a("")}},W=Te=>{Te.key==="Enter"&&!Te.shiftKey&&(Te.preventDefault(),at())},ge=(Te,Ie)=>{Te.preventDefault(),x({x:Te.clientX,y:Te.clientY,messageId:Ie})},De=(Te,Ie)=>{Se(Ie);const Ve=setTimeout(()=>{const ot=Te.touches[0];x({x:ot.clientX,y:ot.clientY,messageId:Ie}),Se(null),navigator.vibrate&&navigator.vibrate(50)},500);te(Ve)},ue=()=>{Ee&&(clearTimeout(Ee),te(null)),Se(null)},Ne=()=>{Ee&&(clearTimeout(Ee),te(null)),Se(null)},Ye=Te=>{switch(Te){case"sent":return"✓";case"delivered":return"✓✓";case"read":return"✓✓";default:return""}},Re=Te=>{switch(Te){case"sent":return"text-gray-400";case"delivered":return"text-gray-400";case"read":return"text-blue-400";default:return"text-gray-400"}},dt=(Te,Ie)=>{const Ve=K.find(ot=>ot.id===Ie);switch(Te){case"reply":f(Ve);break;case"edit":(Ve==null?void 0:Ve.sender)===U&&(c(Ie),a(Ve.text));break;case"delete":Y(st=>st.filter(nt=>nt.id!==Ie));break;case"copy":navigator.clipboard.writeText(Ve==null?void 0:Ve.text);break;case"forward":alert("Fonctionnalité de transfert - À implémenter");break;case"pin":Y(st=>st.map(nt=>nt.id===Ie?{...nt,pinned:!nt.pinned}:nt));break;case"info":const ot=M[Ve==null?void 0:Ve.sender];alert(`Info du message:
Envoyé par: ${ot==null?void 0:ot.name}
À: ${Ve==null?void 0:Ve.time}
Statut: ${Ve==null?void 0:Ve.status}`);break;case"star":alert("Message ajouté aux favoris");break}x(null)},Qe=(Te,Ie)=>{Y(Ve=>Ve.map(ot=>{if(ot.id===Te){const st={...ot.reactions};return st[Ie]?st[Ie].includes(U)?(st[Ie]=st[Ie].filter(nt=>nt!==U),st[Ie].length===0&&delete st[Ie]):st[Ie].push(U):st[Ie]=[U],{...ot,reactions:st}}return ot})),_(null)},bs=Te=>K.find(Ie=>Ie.id===Te),An=K.reduce((Te,Ie,Ve)=>{const ot=K[Ve-1],st=!ot||ot.sender!==Ie.sender||new Date(`2024-01-01 ${Ie.time}`)-new Date(`2024-01-01 ${ot.time}`)>3e5;return Te.push({...Ie,showProfile:st}),Te},[]);return t.jsxs("div",{className:"flex flex-col h-screen bg-gray-100",children:[t.jsxs("div",{className:"bg-green-600 text-white p-4 flex items-center justify-between shadow-md",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"relative w-10 h-10 rounded-full overflow-hidden bg-green-500 flex items-center justify-center",children:[t.jsx("img",{src:"https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=150&h=150&fit=crop&crop=face",alt:"Chat de groupe",className:"w-full h-full object-cover",onError:Te=>{Te.target.style.display="none",Te.target.nextSibling.style.display="flex"}}),t.jsx("span",{className:"text-white font-semibold hidden",children:"CG"}),S>0&&t.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[20px] h-5 flex items-center justify-center px-1 shadow-lg animate-pulse",children:S>99?"99+":S})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"font-semibold",children:"Chat Support Client"}),t.jsx("p",{className:"text-sm text-green-100",children:S>0?`${S} nouveau${S>1?"x":""} message${S>1?"s":""}`:"3 utilisateurs en ligne"})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-green-700 hover:bg-green-800 px-3 py-1 rounded text-sm transition-colors",title:"Actualiser les messages",children:"🔄"}),t.jsx(TR,{size:20,className:"cursor-pointer hover:bg-green-700 rounded p-1 transition-colors"})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-gradient-to-b from-green-50 to-gray-50",children:t.jsxs("div",{className:"space-y-4 px-4",children:[An.map(Te=>{var ot,st,nt,Gt,Jn;const Ie=fe(Te.sender),Ve=M[Te.sender];return t.jsxs("div",{children:[Te.pinned&&t.jsx("div",{className:"text-center mb-2",children:t.jsxs("span",{className:"bg-yellow-200 text-yellow-800 px-3 py-1 rounded-full text-xs flex items-center justify-center w-fit mx-auto",children:[t.jsx(Jw,{size:12,className:"mr-1"}),"Message épinglé"]})}),t.jsx("div",{className:`flex ${Ie?"justify-end":"justify-start"}`,children:t.jsxs("div",{className:`flex items-start max-w-2xl ${Ie?"flex-row-reverse":"space-x-3"}`,children:[Te.showProfile&&!Ie&&t.jsxs("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-400 flex-shrink-0",children:[t.jsx("img",{src:Ve==null?void 0:Ve.avatar,alt:Ve==null?void 0:Ve.name,className:"w-full h-full object-cover",onError:Mt=>{Mt.target.style.display="none",Mt.target.nextSibling.style.display="flex"}}),t.jsx("div",{className:"w-full h-full bg-blue-500 text-white text-xs font-semibold flex items-center justify-center hidden",children:Ve==null?void 0:Ve.initials})]}),!Te.showProfile&&!Ie&&t.jsx("div",{className:"w-8 h-8 flex-shrink-0"}),t.jsxs("div",{className:"relative group",children:[Te.showProfile&&!Ie&&t.jsx("p",{className:"text-xs text-gray-600 mb-1 ml-2 font-medium",children:Ve==null?void 0:Ve.name}),t.jsxs("div",{className:`px-4 py-3 rounded-2xl shadow-sm relative cursor-pointer transition-all hover:shadow-md select-none ${Ie?"bg-green-500 text-white rounded-br-md":"bg-white text-gray-800 border border-gray-200 rounded-bl-md"} ${Te.pinned?"ring-2 ring-yellow-300":""} ${be===Te.id?"scale-95 shadow-xl":""}`,onClick:Mt=>ge(Mt,Te.id),onTouchStart:Mt=>De(Mt,Te.id),onTouchEnd:ue,onTouchMove:Ne,onContextMenu:Mt=>{Mt.preventDefault(),ge(Mt,Te.id)},style:{WebkitUserSelect:"none",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent"},children:[Te.replyTo&&t.jsxs("div",{className:`mb-2 p-2 rounded border-l-4 ${Ie?"bg-green-600 border-green-300 text-green-100":"bg-gray-100 border-gray-400 text-gray-600"}`,children:[t.jsxs("p",{className:"text-xs opacity-75",children:["Réponse à ",(nt=M[(st=bs((ot=Te.replyTo)==null?void 0:ot.id))==null?void 0:st.sender])==null?void 0:nt.name]}),t.jsx("p",{className:"text-xs truncate",children:(Jn=bs((Gt=Te.replyTo)==null?void 0:Gt.id))==null?void 0:Jn.text})]}),t.jsx("p",{className:"text-sm leading-relaxed",children:Te.text}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[Te.edited&&t.jsx("span",{className:`text-xs opacity-75 ${Ie?"text-green-100":"text-gray-500"}`,children:"modifié"}),t.jsx("p",{className:`text-xs ${Ie?"text-green-100":"text-gray-500"}`,children:Te.time})]}),Ie&&t.jsx("span",{className:`text-xs ${Re(Te.status)}`,children:Ye(Te.status)})]})]}),Object.keys(Te.reactions).length>0&&t.jsx("div",{className:`flex flex-wrap gap-1 mt-1 ${Ie?"justify-end":"justify-start"}`,children:Object.entries(Te.reactions).map(([Mt,Ar])=>t.jsxs("span",{className:"bg-gray-100 hover:bg-gray-200 rounded-full px-2 py-1 text-xs flex items-center space-x-1 cursor-pointer shadow-sm border border-gray-200",onClick:dr=>{dr.stopPropagation(),Qe(Te.id,Mt)},children:[t.jsx("span",{children:Mt}),t.jsx("span",{className:"text-gray-600",children:Ar.length})]},Mt))}),t.jsx("div",{className:`absolute top-0 opacity-0 group-hover:opacity-100 transition-opacity ${Ie?"-left-16":"-right-16"}`,children:t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("button",{className:"bg-gray-700 text-white p-1 rounded-full hover:bg-gray-800",onClick:Mt=>{Mt.stopPropagation(),_(Te.id)},children:t.jsx(kR,{size:12})}),t.jsx("button",{className:"bg-gray-700 text-white p-1 rounded-full hover:bg-gray-800",onClick:Mt=>{Mt.stopPropagation(),f(Te)},children:t.jsx(Qw,{size:12})})]})})]})]})})]},Te.id)}),t.jsx("div",{ref:B})]})}),d&&t.jsx("div",{className:"bg-gray-200 border-l-4 border-green-500 p-3 mx-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Réponse à ",(sn=M[d.sender])==null?void 0:sn.name]}),t.jsx("p",{className:"text-sm text-gray-600 truncate",children:d.text})]}),t.jsx("button",{onClick:()=>f(null),className:"text-gray-500 hover:text-gray-700",children:"×"})]})}),t.jsxs("div",{className:"bg-white border-t border-gray-200 p-6 shadow-lg",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(VR,{size:24,className:"text-gray-400 cursor-pointer hover:text-green-500 transition-colors"}),t.jsx(LR,{size:24,className:"text-gray-400 cursor-pointer hover:text-green-500 transition-colors"}),t.jsx("div",{className:"flex-1 relative",children:t.jsx("textarea",{placeholder:o?"Modifier le message...":d?`Répondre à ${(Tr=M[d.sender])==null?void 0:Tr.name}...`:"Tapez votre message...",className:"w-full px-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all resize-none text-black",rows:"1",value:n,onChange:Te=>a(Te.target.value),onKeyPress:W,style:{minHeight:"48px",maxHeight:"120px"}})}),n.trim()?t.jsx("button",{onClick:at,className:"bg-green-500 hover:bg-green-600 text-white rounded-full p-2 transition-colors",children:t.jsx(zR,{size:20})}):t.jsx(MR,{size:24,className:"text-gray-400 cursor-pointer hover:text-green-500 transition-colors"})]}),o&&t.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm text-gray-600",children:[t.jsx("span",{children:"Mode modification"}),t.jsx("button",{onClick:()=>{c(null),a("")},className:"text-red-500 hover:text-red-700",children:"Annuler"})]})]}),y&&t.jsxs("div",{ref:Ae,className:"fixed bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",style:{left:y.x,top:y.y},children:[t.jsxs("button",{onClick:()=>dt("reply",y.messageId),className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center space-x-2 text-black",children:[t.jsx(Qw,{size:16}),t.jsx("span",{children:"Répondre"})]}),((Er=K.find(Te=>Te.id===y.messageId))==null?void 0:Er.sender)===U&&t.jsxs("button",{onClick:()=>dt("edit",y.messageId),className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center space-x-2 text-black",children:[t.jsx(UR,{size:16}),t.jsx("span",{children:"Modifier"})]}),t.jsxs("button",{onClick:()=>dt("copy",y.messageId),className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center space-x-2 text-black",children:[t.jsx(jR,{size:16}),t.jsx("span",{children:"Copier"})]}),t.jsxs("button",{onClick:()=>dt("forward",y.messageId),className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center space-x-2 text-black",children:[t.jsx(AR,{size:16}),t.jsx("span",{children:"Transférer"})]}),t.jsxs("button",{onClick:()=>dt("star",y.messageId),className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center space-x-2 text-black",children:[t.jsx(GR,{size:16}),t.jsx("span",{children:"Ajouter aux favoris"})]}),t.jsxs("button",{onClick:()=>dt("pin",y.messageId),className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center space-x-2 text-black",children:[t.jsx(Jw,{size:16}),t.jsx("span",{children:(ur=K.find(Te=>Te.id===y.messageId))!=null&&ur.pinned?"Désépingler":"Épingler"})]}),t.jsxs("button",{onClick:()=>dt("info",y.messageId),className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center space-x-2 text-black",children:[t.jsx(RR,{size:16}),t.jsx("span",{children:"Info message"})]}),t.jsx("hr",{className:"my-2"}),t.jsxs("button",{onClick:()=>dt("delete",y.messageId),className:"w-full px-4 py-2 text-left hover:bg-red-50 text-red-600 flex items-center space-x-2",children:[t.jsx(WR,{size:16}),t.jsx("span",{children:"Supprimer"})]})]}),N&&t.jsx("div",{ref:Ae,className:"fixed bg-white rounded-lg shadow-lg border border-gray-200 p-3 z-50",style:{left:(y==null?void 0:y.x)||0,top:((y==null?void 0:y.y)||0)-60},children:t.jsx("div",{className:"flex space-x-2",children:Q.map(Te=>t.jsx("button",{onClick:()=>Qe(N,Te),className:"hover:bg-gray-100 p-2 rounded text-lg",children:Te},Te))})})]})},KR=()=>{L.useRef(null);const r=L.useRef(!1);return L.useEffect(()=>{console.log("🚀 ChatCommunauteAdmin monté");const e=document.getElementById("tawkto-script-admin");e&&(console.log("⚠️ Script Tawk.to déjà présent, suppression..."),e.remove()),console.log("🔄 Chargement du script Tawk.to..."),window.Tawk_API=window.Tawk_API||{},window.Tawk_LoadStart=new Date;const n=document.createElement("script");return n.async=!0,n.src="https://embed.tawk.to/68ec2d91af8498194f4f9fc1/1j7d940jh",n.charset="UTF-8",n.setAttribute("crossorigin","*"),n.id="tawkto-script-admin",n.onload=()=>{console.log("✅ Script Tawk.to chargé avec succès"),r.current=!0},n.onerror=a=>{console.error("❌ Erreur chargement script Tawk.to:",a)},console.log("📝 Ajout du script Tawk.to..."),document.head.appendChild(n),()=>{console.log("🧹 Nettoyage du script Tawk.to...");const a=document.getElementById("tawkto-script-admin");a&&a.parentNode&&(a.parentNode.removeChild(a),r.current=!1,console.log("✅ Script Tawk.to retiré")),window.Tawk_API&&delete window.Tawk_API}},[]),t.jsx("div",{className:"flex flex-col h-full bg-gray-900",children:t.jsxs("div",{className:"flex-1 flex flex-col p-4 pt-16",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"💬 Chat Communauté"}),t.jsx("p",{className:"text-gray-400",children:"Discute avec la communauté en temps réel via Tawk.to"}),t.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Le widget de chat apparaîtra en bas à droite de l'écran"})]}),t.jsx("div",{className:"flex-1 flex items-center justify-center",children:t.jsxs("div",{className:"text-gray-400 text-center",children:[t.jsx("p",{className:"text-xl mb-2",children:"🎯 Widget de chat actif"}),t.jsx("p",{children:"Le chat Tawk.to est disponible en bas à droite de votre écran"})]})})]})})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="type.googleapis.com/google.protobuf.Int64Value",QR="type.googleapis.com/google.protobuf.UInt64Value";function Zj(r,e){const n={};for(const a in r)r.hasOwnProperty(a)&&(n[a]=e(r[a]));return n}function Uh(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>Uh(e));if(typeof r=="function"||typeof r=="object")return Zj(r,e=>Uh(e));throw new Error("Data cannot be encoded in JSON: "+r)}function tc(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case JR:case QR:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>tc(e)):typeof r=="function"||typeof r=="object"?Zj(r,e=>tc(e)):r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class or extends ga{constructor(e,n,a){super(`${zx}/${e}`,n||""),this.details=a,Object.setPrototypeOf(this,or.prototype)}}function XR(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Bh(r,e){let n=XR(r),a=n,o;try{const c=e&&e.error;if(c){const d=c.status;if(typeof d=="string"){if(!Xw[d])return new or("internal","internal");n=Xw[d],a=d}const f=c.message;typeof f=="string"&&(a=f),o=c.details,o!==void 0&&(o=tc(o))}}catch{}return n==="ok"?null:new or(n,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n,a,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Yh(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||n.get().then(c=>this.auth=c,()=>{}),this.messaging||a.get().then(c=>this.messaging=c,()=>{}),this.appCheck||o==null||o.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),a=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:a,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="us-central1",e6=/^data: (.*?)(?:\n|$)/;function t6(r){let e=null;return{promise:new Promise((n,a)=>{e=setTimeout(()=>{a(new or("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}class s6{constructor(e,n,a,o,c=Ap,d=(...f)=>fetch(...f)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new ZR(e,n,a,o),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(c);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=Ap}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function n6(r,e,n){const a=Hl(e);r.emulatorOrigin=`http${a?"s":""}://${e}:${n}`,a&&($h(r.emulatorOrigin+"/backends"),zh("Functions",!0))}function r6(r,e,n){const a=o=>a6(r,e,o,{});return a.stream=(o,c)=>o6(r,e,o,c),a}function eS(r){return r.emulatorOrigin&&Hl(r.emulatorOrigin)?"include":void 0}async function i6(r,e,n,a,o){n["Content-Type"]="application/json";let c;try{c=await a(r,{method:"POST",body:JSON.stringify(e),headers:n,credentials:eS(o)})}catch{return{status:0,json:null}}let d=null;try{d=await c.json()}catch{}return{status:c.status,json:d}}async function tS(r,e){const n={},a=await r.contextProvider.getContext(e.limitedUseAppCheckTokens);return a.authToken&&(n.Authorization="Bearer "+a.authToken),a.messagingToken&&(n["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=a.appCheckToken),n}function a6(r,e,n,a){const o=r._url(e);return l6(r,o,n,a)}async function l6(r,e,n,a){n=Uh(n);const o={data:n},c=await tS(r,a),d=a.timeout||7e4,f=t6(d),y=await Promise.race([i6(e,o,c,r.fetchImpl,r),f.promise,r.cancelAllRequests]);if(f.cancel(),!y)throw new or("cancelled","Firebase Functions instance was deleted.");const x=Bh(y.status,y.json);if(x)throw x;if(!y.json)throw new or("internal","Response is not valid JSON object.");let N=y.json.data;if(typeof N>"u"&&(N=y.json.result),typeof N>"u")throw new or("internal","Response is missing data field.");return{data:tc(N)}}function o6(r,e,n,a){const o=r._url(e);return c6(r,o,n,a||{})}async function c6(r,e,n,a){var S;n=Uh(n);const o={data:n},c=await tS(r,a);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await r.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:c,signal:a==null?void 0:a.signal,credentials:eS(r)})}catch(V){if(V instanceof Error&&V.name==="AbortError"){const re=new or("cancelled","Request was cancelled.");return{data:Promise.reject(re),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(re)}}}}}}const z=Bh(0,null);return{data:Promise.reject(z),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(z)}}}}}}let f,y;const x=new Promise((V,z)=>{f=V,y=z});(S=a==null?void 0:a.signal)==null||S.addEventListener("abort",()=>{const V=new or("cancelled","Request was cancelled.");y(V)});const N=d.body.getReader(),_=u6(N,f,y,a==null?void 0:a.signal);return{stream:{[Symbol.asyncIterator](){const V=_.getReader();return{async next(){const{value:z,done:re}=await V.read();return{value:z,done:re}},async return(){return await V.cancel(),{done:!0,value:void 0}}}}},data:x}}function u6(r,e,n,a){const o=(d,f)=>{const y=d.match(e6);if(!y)return;const x=y[1];try{const N=JSON.parse(x);if("result"in N){e(tc(N.result));return}if("message"in N){f.enqueue(tc(N.message));return}if("error"in N){const _=Bh(0,N);f.error(_),n(_);return}}catch(N){if(N instanceof or){f.error(N),n(N);return}}},c=new TextDecoder;return new ReadableStream({start(d){let f="";return y();async function y(){if(a!=null&&a.aborted){const x=new or("cancelled","Request was cancelled");return d.error(x),n(x),Promise.resolve()}try{const{value:x,done:N}=await r.read();if(N){f.trim()&&o(f.trim(),d),d.close();return}if(a!=null&&a.aborted){const S=new or("cancelled","Request was cancelled");d.error(S),n(S),await r.cancel();return}f+=c.decode(x,{stream:!0});const _=f.split(`
`);f=_.pop()||"";for(const S of _)S.trim()&&o(S.trim(),d);return y()}catch(x){const N=x instanceof or?x:Bh(0,null);d.error(N),n(N)}}},cancel(){return r.cancel()}})}const Zw="@firebase/functions",eN="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6="auth-internal",h6="app-check-internal",m6="messaging-internal";function f6(r){const e=(n,{instanceIdentifier:a})=>{const o=n.getProvider("app").getImmediate(),c=n.getProvider(d6),d=n.getProvider(m6),f=n.getProvider(h6);return new s6(o,c,d,f,a)};Ni(new Kr(zx,e,"PUBLIC").setMultipleInstances(!0)),On(Zw,eN,r),On(Zw,eN,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(r=Cu(),e=Ap){const a=Gl(Ln(r),zx).getImmediate({identifier:e}),o=Fh("functions");return o&&g6(a,...o),a}function g6(r,e,n){n6(Ln(r),e,n)}function sh(r,e,n){return r6(Ln(r),e)}f6();const p6=async()=>{try{return await fj(),localStorage.removeItem("adminAuthenticated"),localStorage.removeItem("adminUser"),console.log("✅ Déconnexion admin réussie"),{error:null}}catch(r){return console.error("❌ Erreur déconnexion admin:",r),{error:r instanceof Error?r:new Error("Erreur déconnexion")}}};function x6(){var Ue;const[r,e]=L.useState({id:"fondamentaux",name:"fondamentaux"}),[n,a]=L.useState("signals"),[o,c]=L.useState("channels"),[d,f]=L.useState(!0),[y,x]=L.useState(""),[N,_]=L.useState({}),[S,V]=L.useState([]),[z,re]=L.useState("Compte Principal"),[ce,I]=L.useState(!1),[Ee,te]=L.useState(""),[be,Se]=L.useState(""),[Ae,B]=L.useState(""),[M,F]=L.useState(!1),[K,Y]=L.useState(""),[Q,U]=L.useState(!1),[gt,xe]=L.useState("");L.useEffect(()=>{if(console.log("💬 Chargement Tawk.to pour admin..."),document.getElementById("tawkto-admin-script")){console.log("⚠️ Tawk.to déjà chargé");return}window.Tawk_API=window.Tawk_API||{},window.Tawk_LoadStart=new Date;const p=document.createElement("script");return p.async=!0,p.src="https://embed.tawk.to/68ec2d91af8498194f4f9fc1/1j7d940jh",p.charset="UTF-8",p.setAttribute("crossorigin","*"),p.id="tawkto-admin-script",p.onload=()=>{console.log("✅ Tawk.to chargé pour admin")},p.onerror=()=>{console.error("❌ Erreur chargement Tawk.to")},document.head.appendChild(p),()=>{const T=document.getElementById("tawkto-admin-script");T&&T.remove()}},[]);const[le,fe]=L.useState(!1),[ke,at]=L.useState(!1),[W,ge]=L.useState(!1),[De,ue]=L.useState(!1),[Ne,Ye]=L.useState(!1),[Re,dt]=L.useState(!1),[Qe,bs]=L.useState(null),[An,sn]=L.useState(null),[Tr,Er]=L.useState(""),[ur,Te]=L.useState(null),[Ie,Ve]=L.useState(!1),[ot,st]=L.useState(""),[nt,Gt]=L.useState("Admin"),[Jn,Mt]=L.useState({});L.useEffect(()=>{const p=async()=>{try{const T=Object.values(N).flat(),R=T.map(async ie=>{const ve=await Nx(ie.id);return ve?{messageId:ie.id,reactions:ve}:null}),A=await Promise.all(R),O={};A.forEach(ie=>{ie&&(O[ie.messageId]=ie.reactions)}),Mt(O),console.log("✅ Réactions messages admin chargées depuis Firebase:",Object.keys(O).length);const H=T.map(ie=>_x(ie.id,ve=>{ve&&(Mt(_e=>({..._e,[ie.id]:ve})),console.log("🔥 Réaction message mise à jour en temps réel:",ie.id,ve))}));return()=>{H.forEach(ie=>{ie&&typeof ie=="function"&&ie()})}}catch(T){console.error("❌ Erreur chargement réactions messages admin Firebase:",T)}};Object.keys(N).length>0&&p()},[N]),L.useEffect(()=>{console.log("🔄 Admin: Abonnement global aux changements de réactions");const p=ls(os,"messageReactions"),T=lc(p,R=>{if(R.exists()){const A=R.val();console.log("🔥 Admin: Réactions reçues en temps réel:",A),Mt(A)}});return()=>{console.log("🔄 Admin: Désabonnement global des réactions"),T()}},[]),L.useEffect(()=>{const T=["fondamentaux","letsgooo-model","general-chat","general-chat-2","general-chat-3","general-chat-4"].map(R=>Dh(R,A=>{console.log("🔄 Signal mis à jour reçu:",A),rs(O=>O.map(H=>H.id===A.id?{...H,reactions:A.reactions||[]}:H))}));return()=>{T.forEach(R=>{R&&typeof R.unsubscribe=="function"&&R.unsubscribe()})}},[]);const Ar=async p=>{const T="Admin";try{Mt(H=>{const ie=H[p]||{fire:0,users:[]},ve=ie.users.indexOf(T);if(ve===-1)return{...H,[p]:{fire:ie.fire+1,users:[...ie.users,T]}};{const _e=ie.users.filter((je,Ge)=>Ge!==ve);return{...H,[p]:{fire:ie.fire-1,users:_e}}}});const R=Jn[p]||{fire:0,users:[]},A=R.users.indexOf(T);let O;A===-1?O={fire:R.fire+1,users:[...R.users,T]}:O={fire:R.fire-1,users:R.users.filter((H,ie)=>ie!==A)},await wx(p,O),console.log("✅ Réaction message admin synchronisée avec Firebase:",p,O,"par utilisateur:",T)}catch(R){console.error("❌ Erreur synchronisation réaction admin Firebase:",R),Mt(A=>{const O=A[p]||{fire:0,users:[]};return{...A,[p]:O}})}},[dr,Qr]=L.useState({}),[wt,rs]=L.useState([]),Os=async p=>{try{const R=(await bx(p)).map(A=>({id:A.id||"",text:A.content,timestamp:new Date(A.timestamp||Date.now()).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),author:A.author,author_avatar:A.author_avatar,attachment:A.attachment_data?{type:A.attachment_type||"image/jpeg",name:A.attachment_name||"image.jpg"}:void 0,attachment_data:A.attachment_data}));gn(A=>({...A,[p]:R})),console.log(`✅ Messages chargés pour ${p}:`,R.length),setTimeout(()=>{tr()},5)}catch(T){console.error("❌ Erreur chargement messages:",T)}};L.useEffect(()=>{const T=["fondamentaux","letsgooo-model","general-chat","general-chat-2","general-chat-3","general-chat-4"].map(R=>kh(R,A=>{console.log(`🔄 Nouveau message reçu dans ${R}:`,A),r.id!==R&&console.log(`📊 Message reçu dans ${R} (canal non actif)`)}));return()=>{T.forEach(R=>R.unsubscribe())}},[]),L.useEffect(()=>{At(r.id),Ep()},[]),L.useEffect(()=>{Os(r.id),At(r.id),setTimeout(()=>{tr()},50)},[r.id]),L.useEffect(()=>{rs(p=>p.map(T=>({...T,status:T.status||"ACTIVE"})))},[]);const[Pn,Cn]=L.useState(""),[Ss,ps]=L.useState(null);L.useEffect(()=>{(async()=>{console.log("🔄 Initialisation profil admin..."),console.log("📱 PWA Mode:",window.matchMedia("(display-mode: standalone)").matches),console.log("🌐 User Agent:",navigator.userAgent.includes("Mobile")?"MOBILE":"DESKTOP");const T=localStorage.getItem("adminProfileImage");T?(ps(T),console.log("✅ Photo de profil admin chargée depuis localStorage:",T)):console.log("❌ Aucune photo de profil admin trouvée");try{const R=await Kn();if(R){console.log("👤 Utilisateur admin connecté:",R.id,R.email);const{data:A}=await zu("admin");if(console.log("📦 Profil admin récupéré de Supabase:",A),A!=null&&A.name)Gt(A.name),console.log("✅ Nom d'utilisateur admin chargé depuis Supabase:",A.name);else{console.log("⚠️ Pas de profil admin trouvé, création du profil par défaut...");const O="Admin",{data:H}=await zo(O,void 0,"admin");if(H)Gt(O),console.log("✅ Nouveau profil admin créé dans Supabase:",H);else{const ie=localStorage.getItem("adminUsername");ie?(Gt(ie),console.log("✅ Username admin chargé depuis localStorage:",ie)):(Gt(O),console.log("✅ Username admin défini par défaut:",O))}}}else{console.log("❌ Aucun utilisateur admin connecté");const A=localStorage.getItem("adminUsername");A&&Gt(A)}}catch(R){console.error("❌ Erreur lors du chargement du nom d'utilisateur admin:",R);const A=localStorage.getItem("adminUsername");A?(Gt(A),console.log("✅ Username admin chargé depuis localStorage (fallback):",A)):console.log(`❌ Aucun nom d'utilisateur admin trouvé, garder "Admin"`)}})()},[]);const[Qn,Gs]=L.useState(!1),[Ts,Xt]=L.useState(""),[fn,Es]=L.useState(""),[us,Xr]=L.useState(0),[Et,Zr]=L.useState([]),[hr,Un]=L.useState(!1),[Cr,Xn]=L.useState(!1),[Zn,al]=L.useState(null),[kn,xs]=L.useState({email:"",password:""}),[As,kr]=L.useState(""),[mr,_i]=L.useState("all"),[xa,nn]=L.useState("created_at"),[fr,Dr]=L.useState("desc"),[is,gn]=L.useState({});L.useEffect(()=>{},[]),L.useEffect(()=>{console.log("🔍 Profile image state:",Ss)},[Ss]);const[Cs,ks]=L.useState(!1),[Vt,Bn]=L.useState(!1),[Ot,pn]=L.useState(()=>{const p=localStorage.getItem("customLossReasons");return p?JSON.parse(p):Pl}),[ys,Zt]=L.useState({value:"",emoji:"",label:""}),[Yt,zs]=L.useState(null),[Nt,Ds]=L.useState(()=>{const p=localStorage.getItem("selectedDate");return p?new Date(p):null});L.useEffect(()=>{Nt?localStorage.setItem("selectedDate",Nt.toISOString()):localStorage.removeItem("selectedDate")},[Nt]);const At=async p=>{try{console.log("🔍 Début loadSignals pour channel:",p);const T=performance.now(),R=await ua(p),A=performance.now();console.log(`⏱️ getSignals a pris ${A-T} millisecondes`),console.log("🔍 Signaux reçus pour channel",p,":",R);const O=R.map(H=>{var ie,ve,_e;return{id:H.id||"",type:H.type,symbol:H.symbol,timeframe:H.timeframe,entry:((ie=H.entry)==null?void 0:ie.toString())||"N/A",takeProfit:((ve=H.takeProfit)==null?void 0:ve.toString())||"N/A",stopLoss:((_e=H.stopLoss)==null?void 0:_e.toString())||"N/A",description:H.description||"",image:null,timestamp:new Date(H.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:H.status||"ACTIVE",channel_id:H.channel_id,reactions:H.reactions||[],pnl:H.pnl,closeMessage:H.closeMessage}});rs(O.reverse()),console.log(`✅ Signaux chargés pour ${p}:`,O.length),console.log("🎯 État signals admin après setSignals:",O)}catch(T){console.error("❌ Erreur chargement signaux:",T)}},Lt=(p,T)=>{r.id==="trading-journal"&&p!=="trading-journal"&&Ds(null),e({id:p,name:T}),a("signals"),yr(),console.log(`📊 Channel changed to ${p}`)},[Ht,rn]=L.useState([]),[He,$t]=L.useState({symbol:"",type:"BUY",entry:"",exit:"",stopLoss:"",pnl:"",status:"WIN",lossReason:"",notes:"",image1:null,image2:null});L.useEffect(()=>{(async()=>{const T=await oc();console.log("🔄 ID utilisateur synchronisé au démarrage ADMIN:",T)})()},[]),L.useEffect(()=>{console.log("👂 Démarrage synchronisation temps réel trades [ADMIN]...");const p=K_(T=>{console.log("🔄 Mise à jour trades reçue [ADMIN]:",T.length),rn(T)},T=>{console.error("❌ Erreur synchronisation temps réel [ADMIN]:",T)});return()=>{console.log("🛑 Arrêt synchronisation temps réel [ADMIN]"),p()}},[]);const Rr=async()=>{try{const p=await Dx();V(p),console.log("✅ [ADMIN] Comptes chargés:",p.length)}catch(p){console.error("❌ [ADMIN] Erreur chargement comptes:",p)}},ya=p=>{re(p),localStorage.setItem("selectedAccount",p),Ds(null),rn(T=>[...T]),a("signals"),setTimeout(()=>a("calendar"),100)},Ys=async()=>{if(!Ee.trim()){alert("Veuillez entrer un nom de compte");return}if(S.some(p=>p.account_name===Ee.trim())){alert("Ce nom de compte existe déjà");return}try{const p=parseFloat(be)||0,T=parseFloat(Ae)||0;console.log("🔍 [ADMIN] Appel addUserAccount avec:",Ee.trim(),p,T);const R=await Mh(Ee.trim(),p,T);if(R){const A={...R,initial_balance:p,minimum_balance:T},O=[...S,A];V(O),re(Ee.trim()),te(""),Se(""),B(""),I(!1),console.log("✅ [ADMIN] Compte ajouté avec succès")}}catch(p){console.error("❌ [ADMIN] Erreur ajout compte:",p),alert("Erreur lors de l'ajout du compte")}},es=async p=>{try{const T=Ht.filter(A=>(A.account||"Compte Principal")===p);console.log(`🗑️ [ADMIN] Suppression de ${T.length} trades pour le compte "${p}"`);for(const A of T)await lh(A.id);const R=S.find(A=>A.account_name===p);if(R){await Rx(R.id);const A=S.filter(O=>O.id!==R.id);V(A),z===p&&re("Compte Principal"),console.log("✅ [ADMIN] Compte supprimé:",p)}}catch(T){console.error("❌ [ADMIN] Erreur suppression compte:",T),alert("Erreur lors de la suppression du compte")}},Je=async p=>{const T=p==="Compte Principal",R=prompt(`Options pour "${p}":

1 - Renommer le compte
2 - Modifier balance et stop-loss
`+(T?"":`3 - Supprimer le compte
`)+`
Entrez votre choix:`,"1");R==="1"?await Ir(p):R==="2"?await zt(p):R==="3"&&!T&&confirm(`Supprimer le compte "${p}" et tous ses trades ?`)&&await es(p)},Ct=async()=>{if(!K.trim()){alert("Veuillez saisir un message");return}try{const p=["general-chat","general-chat-2","general-chat-3","general-chat-4","profit-loss"];for(const T of p)await kl(T,`📢 MESSAGE ADMIN: ${K}`,"Admin");await op("admin-notification",{symbol:"📢 MESSAGE ADMIN",type:"ADMIN_MESSAGE",entry:K,status:"ACTIVE",timestamp:new Date().toISOString(),channel_id:"admin-notification",pnl:0,reactions:{}}),await ch({symbol:"📢 MESSAGE ADMIN",type:"ADMIN_MESSAGE",entry:K,status:"ACTIVE",timestamp:new Date().toISOString(),channel_id:"admin-notification"}),Y(""),F(!1),alert("Message admin envoyé dans tous les salons de chat !")}catch(p){console.error("❌ Erreur envoi notification:",p),alert("Erreur lors de l'envoi du message: "+p.message)}},ei=async()=>{if(!gt.trim()){alert("Veuillez saisir un message");return}try{const p=th(),T=sh(p,"sendLivestreamNotification"),R=[],A=ls(os,"fcm_tokens"),O=await yi(A);if(O.exists()){const H=O.val();Object.values(H).forEach(ie=>{ie.token&&R.push(ie.token)})}if(R.length>0){console.log("📱 Envoi notification livestream personnalisée à",R.length,"utilisateurs..."),console.log("📝 Message personnalisé:",gt);const H=await T({tokens:R,customMessage:gt});console.log("✅ Notification livestream envoyée:",H.data),alert(`✅ Notification envoyée à ${H.data.successCount} utilisateurs!`),xe(""),U(!1)}else alert("⚠️ Aucun utilisateur avec notifications activées")}catch(p){console.error("❌ Erreur envoi notification livestream:",p),console.error("❌ Détails erreur:",p),alert("❌ Erreur lors de l'envoi de la notification: "+p.message)}},zt=async p=>{const T=S.find(_e=>_e.account_name===p);if(!T)return;const R=T.initial_balance||0,A=T.minimum_balance||0,O=prompt(`Balance initiale pour "${p}":`,R.toString());if(O===null)return;const H=prompt(`Stop-loss (minimum) pour "${p}":`,A.toString());if(H===null)return;const ie=parseFloat(O)||0,ve=parseFloat(H)||0;try{if(await Oh(T.id,{initial_balance:ie,minimum_balance:ve})){const je=S.map(Ge=>Ge.id===T.id?{...Ge,initial_balance:ie,minimum_balance:ve}:Ge);V(je),console.log("✅ [ADMIN] Paramètres du compte mis à jour")}}catch(_e){console.error("❌ [ADMIN] Erreur mise à jour paramètres:",_e),alert("Erreur lors de la mise à jour des paramètres")}},Ir=async p=>{const T=prompt(`Renommer "${p}" en:`,p);if(!(!T||T.trim()===""||T===p))try{const R=S.find(A=>A.account_name===p);if(R){const A=S.map(O=>O.id===R.id?{...O,account_name:T.trim()}:O);V(A),z===p&&re(T.trim()),rn(O=>O.map(H=>(H.account||"Compte Principal")===p?{...H,account:T.trim()}:H)),console.log("✅ [ADMIN] Compte renommé:",p,"->",T)}}catch(R){console.error("❌ [ADMIN] Erreur renommage compte:",R)}};L.useEffect(()=>{Rr()},[]);const ji=()=>Ht.filter(p=>{const T=p.account||"Compte Principal";return p.account||console.log("🚨 Trade sans compte détecté:",p.symbol,p.date,"-> assigné à Compte Principal"),T===z}),ws=()=>{const p=S.find(A=>A.account_name===z);let T=(p==null?void 0:p.initial_balance)||0;if(!T){const A=localStorage.getItem("accountBalances");A&&(T=JSON.parse(A)[z]||0)}const R=$i();return T+R},Fi=()=>{const p=S.find(_e=>_e.account_name===z),T=ws();p!=null&&p.initial_balance;const R=(p==null?void 0:p.minimum_balance)||0;if(R===0)return{currentStopLoss:null,remaining:null,percentage:null,isAtRisk:!1};const A=$i(),O=Math.max(R,R+Math.max(0,A)),H=T-O,ie=O>0?(T/O-1)*100:0,ve=H<T*.1;return{currentStopLoss:O,remaining:H,percentage:ie,isAtRisk:ve,pnl:A}},$i=()=>ji().reduce((p,T)=>p+parseFloat(T.pnl||"0"),0);L.useEffect(()=>{console.log("Trades chargés:",Ht)},[Ht]),L.useEffect(()=>{console.log("🔄 useEffect loadSignals appelé pour channel:",r.id),At(r.id)},[r.id]);const[Fe,Ls]=L.useState({type:"BUY",symbol:"",timeframe:"",entry:"",takeProfit:"",stopLoss:"",description:"",image:null}),[gr,Ke]=L.useState(!1),[an,Dn]=L.useState(""),[xn,zi]=L.useState(!1),[ti,qi]=L.useState(""),[$e,yn]=L.useState(new Date);L.useEffect(()=>{const p=new Date;console.log("🔄 [ADMIN] Mise à jour currentDate vers la date actuelle:",p.toDateString()),yn(p)},[]);const Si=L.useRef(null),Pt=L.useRef(null),pr=p=>{const T=[];return p.symbol&&T.push(`Symbol: ${p.symbol}`),p.tradeType&&T.push(`Type: ${p.tradeType.toUpperCase()}`),p.entryPrice&&T.push(`Entry: ${p.entryPrice}`),p.exitPrice&&T.push(`Exit: ${p.exitPrice}`),p.stopLoss&&T.push(`SL: ${p.stopLoss}`),p.rr&&T.push(`R:R: ${p.rr}`),p.session&&T.push(`Session: ${p.session}`),p.tradeDuration&&T.push(`Duration: ${p.tradeDuration}`),`[Auto-extracted] ${T.join(" | ")}`},Ps=p=>{Ls(T=>({...T,...p}))},si=p=>{var H,ie,ve,_e,je,Ge,et;p.preventDefault();const T=p.clipboardData.getData("text/html")||"",R=p.clipboardData.getData("text")||"";gr&&Dn(`HTML: ${T.slice(0,300)}...
Text: ${R.slice(0,300)}...`);const A={};let O=!1;if(T.includes("data-tradingview-clip"))try{const ct=/data-tradingview-clip="([^"]+)"/,Pe=T.match(ct);if(Pe&&Pe[1]){const qe=Pe[1].replace(/&(?:quot|#34);/g,'"'),Me=JSON.parse(qe);gr&&Dn(JSON.stringify(Me,null,2));const Le=(ie=(H=Me.sources)==null?void 0:H[0])==null?void 0:ie.source,rt=Le==null?void 0:Le.points,lt=Le==null?void 0:Le.state,pt=lt==null?void 0:lt.stopLevel,bn=lt==null?void 0:lt.profitLevel;if(rt&&rt.length>=2){O=!0;let qn=(lt==null?void 0:lt.symbol)||"",Ks=qn.split(":")[1]||qn;Ks.startsWith("NQ1")?Ks="NQ":Ks.startsWith("ES1")?Ks="ES":Ks.startsWith("MNQ")&&(Ks="MNQ"),A.symbol=Ks;const sr=Le==null?void 0:Le.type;sr==="LineToolRiskRewardLong"||/long/i.test(sr)?(A.tradeType="buy",A.outcome="WIN"):(sr==="LineToolRiskRewardShort"||/short/i.test(sr))&&(A.tradeType="sell",A.outcome="WIN");const vr=(ve=rt[0])==null?void 0:ve.price;if(vr!==void 0&&(A.entryPrice=vr.toString()),rt.length>1){const Ei=(_e=rt[rt.length-1])==null?void 0:_e.price;Ei!==void 0&&(A.exitPrice=Ei.toString())}if(pt!==void 0&&bn!==void 0&&vr!==void 0){const Ei=Math.round(bn/pt*100)/100;A.rr=Ei.toString();let wn,nr;if(A.tradeType==="buy"){const ba=pt/4,ln=bn/4;wn=vr-ba,nr=vr+ln}else{const ba=pt/4,ln=bn/4;wn=vr+ba,nr=vr-ln}A.stopLoss=wn.toString(),A.takeProfit=nr.toString()}if((je=rt[0])!=null&&je.time_t){const Ei=rt[0].time_t,nr=new Date(Ei*1e3).toTimeString().split(" ")[0].slice(0,5);if(A.entryTime=nr,rt.length>1&&((Ge=rt[1])!=null&&Ge.time_t)){const ba=rt[1].time_t,ll=new Date(ba*1e3).toTimeString().split(" ")[0].slice(0,5);A.exitTime=ll;const qu=(ba-Ei)*1e3,ol=Math.round(qu/6e4);if(ol<60)A.tradeDuration=`${ol}m`;else{const Vu=Math.floor(ol/60),Hu=ol%60;A.tradeDuration=`${Vu}h ${Hu}m`}}}if((et=rt[0])!=null&&et.time_t){let wn=new Date(rt[0].time_t*1e3).getUTCHours()-4;wn<0&&(wn+=24);let nr="";wn>=0&&wn<3?nr="Asian Session":wn>=3&&wn<8?nr="London":wn>=8&&wn<12?nr="London/NY Overlap":wn>=12&&wn<17&&(nr="New York PM"),nr&&(A.session=nr)}}}}catch(ct){console.error("Error parsing TradingView data:",ct),gr&&Dn(`Error parsing: ${ct instanceof Error?ct.message:typeof ct=="symbol"?ct.toString():String(ct)}`)}if(!O){/long/i.test(R)?(A.tradeType="buy",A.outcome="WIN",O=!0):/short/i.test(R)&&(A.tradeType="sell",A.outcome="WIN",O=!0);const ct=R.match(/\b([A-Z]{1,6}\d*(?:USD|BTC|ETH|EUR)?)\b/);ct&&(A.symbol=ct[1],O=!0);const Pe=R.match(/\b\d+(\.\d+)?\b/g)||[];Pe.length>=2&&(A.entryPrice=Pe[0],A.exitPrice=Pe[1],Pe.length>=3&&(A.rr=Pe[2]),O=!0)}if(O){if(Ps({type:A.tradeType==="buy"?"BUY":"SELL",symbol:A.symbol||Fe.symbol,entry:A.entryPrice||Fe.entry,takeProfit:A.takeProfit||Fe.takeProfit,stopLoss:A.stopLoss||Fe.stopLoss}),Object.keys(A).length>0){const ct=pr(A);Ps({description:Fe.description?`${Fe.description}

${ct}`:ct})}qi("")}else Ps({description:`Pasted text:
${R}

${Fe.description||""}`}),qi("Could not extract structured trade data; added raw text to description.");zi(!1)},ni=()=>{yn(p=>{const T=new Date(p);return T.setMonth(p.getMonth()-1),T})},Mr=()=>{yn(p=>{const T=new Date(p);return T.setMonth(p.getMonth()+1),T})},Or=p=>["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"][p.getMonth()],mt=p=>{if(!p)return 0;const T=p.replace(/[^\d.-]/g,"");return parseFloat(T)||0},[Ut,Ws]=L.useState([]);L.useEffect(()=>{(async()=>{try{console.log("📊 [ADMIN] Chargement de TOUS les signaux pour statistiques et calendrier...");const T=["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"];let R=[];for(const A of T)try{console.log(`🔍 [ADMIN] Chargement signaux pour ${A}...`);const O=await ua(A,100);O&&O.length>0&&(R=[...R,...O],console.log(`✅ [ADMIN] ${O.length} signaux chargés pour ${A}`))}catch(O){console.error(`❌ [ADMIN] Erreur chargement signaux pour ${A}:`,O)}if(R.length>0){const A=R.map(O=>{var ve,_e,je;const ie=O.status&&O.status!=="ACTIVE"?new Date(O.timestamp||Date.now()).toISOString():new Date(O.timestamp||Date.now()).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return{id:O.id||"",type:O.type,symbol:O.symbol,timeframe:O.timeframe,entry:((ve=O.entry)==null?void 0:ve.toString())||"N/A",takeProfit:((_e=O.takeProfit)==null?void 0:_e.toString())||"N/A",stopLoss:((je=O.stopLoss)==null?void 0:je.toString())||"N/A",description:O.description||"",image:O.image||O.attachment_data,attachment_data:O.attachment_data||O.image,attachment_type:O.attachment_type,attachment_name:O.attachment_name,closure_image:O.closure_image,closure_image_type:O.closure_image_type,closure_image_name:O.closure_image_name,timestamp:ie,originalTimestamp:O.timestamp||Date.now(),status:O.status||"ACTIVE",channel_id:O.channel_id,reactions:O.reactions||[],pnl:O.pnl,closeMessage:O.closeMessage}});Ws(A),console.log(`✅ [ADMIN] ${A.length} signaux formatés chargés pour statistiques au total`),console.log("📊 [ADMIN] Signaux par canal:",T.map(O=>({channel:O,count:A.filter(H=>H.channel_id===O).length})))}else console.log("⚠️ [ADMIN] Aucun signal trouvé pour les statistiques")}catch(T){console.error("❌ [ADMIN] Erreur chargement signaux pour statistiques:",T)}})()},[r.id]),L.useEffect(()=>{wt.length>0&&(console.log("🔄 [ADMIN] Mise à jour temps réel des statistiques..."),console.log("📊 [ADMIN] Signaux actuels dans le fil:",wt.length),Ws(p=>{const T=new Set(p.map(A=>A.id)),R=wt.filter(A=>!T.has(A.id));if(R.length>0){console.log(`✅ [ADMIN] ${R.length} nouveaux signaux ajoutés aux stats`);const A=R.map(O=>({...O,originalTimestamp:O.timestamp||Date.now(),attachment_data:O.attachment_data,attachment_type:O.attachment_type,attachment_name:O.attachment_name}));return[...p,...A]}return p}))},[wt]);const ds=()=>{console.log("🔍 [ADMIN] calculateTotalPnL - allSignalsForStats:",Ut.length);const T=Rn().filter(A=>A.pnl&&A.status!=="ACTIVE");console.log("🔍 [ADMIN] Signaux avec PnL et fermés:",T.length);const R=T.reduce((A,O)=>A+mt(O.pnl),0);return console.log("💰 [ADMIN] Total PnL calculé:",R),R},Tt=()=>{console.log("🔍 [ADMIN] calculateWinRate - allSignalsForStats:",Ut.length);const T=Rn().filter(O=>O.status!=="ACTIVE");if(console.log("🔍 [ADMIN] Signaux fermés:",T.length),T.length===0)return 0;const R=T.filter(O=>O.status==="WIN").length,A=Math.round(R/T.length*100);return console.log("🏆 [ADMIN] Win Rate calculé:",A+"%"),A},Fn=()=>{console.log("🔍 [ADMIN] calculateAvgWin - allSignalsForStats:",Ut.length);const T=Rn().filter(O=>O.status==="WIN"&&O.pnl);if(console.log("🔍 [ADMIN] Signaux gagnants avec PnL:",T.length),T.length===0)return 0;const R=T.reduce((O,H)=>O+mt(H.pnl),0),A=Math.round(R/T.length);return console.log("💚 [ADMIN] Moyenne gains calculée:",A),A},Vi=()=>{console.log("🔍 [ADMIN] calculateAvgLoss - allSignalsForStats:",Ut.length);const T=Rn().filter(O=>O.status==="LOSS"&&O.pnl);if(console.log("🔍 [ADMIN] Signaux perdants avec PnL:",T.length),T.length===0)return 0;const R=T.reduce((O,H)=>O+Math.abs(mt(H.pnl)),0),A=Math.round(R/T.length);return console.log("💔 [ADMIN] Moyenne pertes calculée:",A),A},Lr=()=>{console.log("🔍 [ADMIN] getTodaySignals - allSignalsForStats:",Ut.length),console.log("📅 [ADMIN] Date sélectionnée:",$e.toDateString());const p=Ut.filter(T=>{const R=new Date(T.originalTimestamp||T.timestamp);return isNaN(R.getTime())?!1:R.getDate()===$e.getDate()&&R.getMonth()===$e.getMonth()&&R.getFullYear()===$e.getFullYear()});return console.log("📅 [ADMIN] Signaux pour la date sélectionnée:",p.length),p},Rn=()=>{console.log("🔍 [ADMIN] getThisMonthSignals - allSignalsForStats:",Ut.length),console.log("📅 [ADMIN] Mois sélectionné:",$e.getMonth()+1,$e.getFullYear());const p=Ut.filter(T=>{const R=new Date(T.originalTimestamp||T.timestamp);return isNaN(R.getTime())?!1:R.getMonth()===$e.getMonth()&&R.getFullYear()===$e.getFullYear()});return console.log("📅 [ADMIN] Signaux pour le mois sélectionné:",p.length),p},xr=()=>Ht.filter(T=>{const R=new Date(T.date),A=R.getMonth()===$e.getMonth()&&R.getFullYear()===$e.getFullYear(),H=(T.account||"Compte Principal")===z;return A&&H}).reduce((T,R)=>T+mt(R.pnl),0),Ns=()=>{const p=Ht.filter(R=>{const A=new Date(R.date),O=A.getMonth()===$e.getMonth()&&A.getFullYear()===$e.getFullYear(),ie=(R.account||"Compte Principal")===z;return O&&ie});if(p.length===0)return 0;const T=p.filter(R=>R.status==="WIN").length;return Math.round(T/p.length*100)},Us=()=>{const T=Ht.filter(A=>{const O=new Date(A.date),H=O.getMonth()===$e.getMonth()&&O.getFullYear()===$e.getFullYear(),ve=(A.account||"Compte Principal")===z;return H&&ve}).filter(A=>A.status==="WIN");if(T.length===0)return 0;const R=T.reduce((A,O)=>A+mt(O.pnl),0);return Math.round(R/T.length)},Pr=()=>{const T=Ht.filter(A=>{const O=new Date(A.date),H=O.getMonth()===$e.getMonth()&&O.getFullYear()===$e.getFullYear(),ve=(A.account||"Compte Principal")===z;return H&&ve}).filter(A=>A.status==="LOSS");if(T.length===0)return 0;const R=T.reduce((A,O)=>A+Math.abs(mt(O.pnl)),0);return Math.round(R/T.length)},ri=()=>{const T=Ht.filter(O=>(O.account||"Compte Principal")===z).filter(O=>O.status==="LOSS"),R={};T.forEach(O=>{const H=O.lossReason||"non_specifiee";R[H]||(R[H]={count:0,totalPnl:0,trades:[]}),R[H].count++,R[H].totalPnl+=mt(O.pnl),R[H].trades.push(O)});const A=Object.entries(R).filter(([O])=>O!=="non_specifiee").map(([O,H])=>({reason:O,count:H.count,totalPnl:H.totalPnl,avgPnl:Math.round(H.totalPnl/H.count),percentage:Math.round(H.count/T.length*100)})).sort((O,H)=>H.count-O.count);return{totalLosses:T.length,totalLossPnl:T.reduce((O,H)=>O+mt(H.pnl),0),reasons:A}},Ur=p=>{const T=Ot.find(R=>R.value===p);return T?`${T.emoji} ${T.label}`:Jj(p)},ii=()=>{const p=$e.toISOString().split("T")[0];return Ht.filter(T=>T.date===p&&(T.account||"Compte Principal")===z)},ai=()=>Ht.filter(p=>{const T=new Date(p.date),R=T.getMonth()===$e.getMonth()&&T.getFullYear()===$e.getFullYear(),O=(p.account||"Compte Principal")===z;return R&&O}),vn=(p,T,R)=>{const A=parseFloat(p),O=parseFloat(T),H=parseFloat(R);if(isNaN(A)||isNaN(O)||isNaN(H))return"N/A";const ie=Math.abs(A-H),ve=Math.abs(O-A);return ie===0?"N/A":(ve/ie).toFixed(2)},er=()=>{const p=$e.getMonth(),T=$e.getFullYear(),R=new Date(T,p+1,0),A=Math.ceil(R.getDate()/7);console.log(`🔍 [ADMIN] Mois ${p+1}/${T} - ${R.getDate()} jours - ${A} semaines`);const O=[];for(let H=1;H<=A;H++){const ie=new Date(T,p,(H-1)*7+1),ve=new Date(T,p,Math.min(H*7,R.getDate()));console.log(`🔍 [ADMIN] Week ${H} - Début:`,ie.toDateString(),"Fin:",ve.toDateString());const _e=Ut.filter(qe=>{const Me=new Date(qe.originalTimestamp||qe.timestamp);if(isNaN(Me.getTime()))return console.log("🔍 [ADMIN] Weekly - Date invalide, signal ignoré"),!1;const Le=Me>=ie&&Me<=ve&&Me.getMonth()===p&&Me.getFullYear()===T;return H===4&&console.log("🔍 [ADMIN] Week 4 - Signal:",qe.symbol,"Date:",Me.toDateString(),"Dans semaine 4?",Le),console.log("🔍 [ADMIN] Weekly - Signal date:",Me.toDateString(),"Dans semaine",H,"?",Le),Le}),je=_e.filter(qe=>qe.status!=="ACTIVE");je.reduce((qe,Me)=>qe+mt(Me.pnl||"0"),0);const Ge=je.filter(qe=>qe.status==="WIN").length,et=je.filter(qe=>qe.status==="LOSS").length,ct=Math.ceil($e.getDate()/7),Pe=H===ct;O.push({week:`Week ${H}`,weekNum:H,trades:_e.length,pnl:0,wins:Ge,losses:et,isCurrentWeek:Pe})}return O},li=()=>{const p=$e.getMonth(),T=$e.getFullYear(),R=new Date(T,p+1,0),A=Math.ceil(R.getDate()/7),O=[];for(let H=1;H<=A;H++){const ie=new Date(T,p,(H-1)*7+1),ve=new Date(T,p,Math.min(H*7,R.getDate())),_e=Ht.filter(qe=>{const Me=new Date(qe.date),Le=Me>=ie&&Me<=ve&&Me.getMonth()===p&&Me.getFullYear()===T,lt=(qe.account||"Compte Principal")===z;return Le&&lt}),je=_e.reduce((qe,Me)=>qe+mt(Me.pnl),0),Ge=_e.filter(qe=>qe.status==="WIN").length,et=_e.filter(qe=>qe.status==="LOSS").length,ct=Math.ceil($e.getDate()/7),Pe=H===ct;O.push({week:`Week ${H}`,weekNum:H,trades:_e.length,pnl:je,wins:Ge,losses:et,isCurrentWeek:Pe})}return O},$n=async(p,T)=>{rs(R=>R.map(A=>{if(A.id===p){const O=A.reactions||[];if(O.includes(T)){const ie=O.filter(ve=>ve!==T);return cp(p,ie),{...A,reactions:ie}}else{const ie=[...O,T];return cp(p,ie),{...A,reactions:ie}}}return A}))},va=async(p,T)=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce message ?"))try{console.log("🗑️ [DEBUG] Début suppression message:",{messageId:p,channelId:T}),console.log("🗑️ [DEBUG] Chemin Firebase correct:",`messages/${p}`),await W_(p)?(console.log("✅ [DEBUG] Message supprimé de Firebase avec succès"),await new Promise(A=>setTimeout(A,300)),console.log("🔄 [DEBUG] Rechargement des messages depuis Firebase..."),await Os(T),console.log("✅ [DEBUG] Messages rechargés depuis Firebase")):alert("Erreur lors de la suppression du message")}catch(R){console.error("❌ [DEBUG] Erreur suppression message:",R),alert("Erreur lors de la suppression du message: "+R)}},yr=()=>{Pt.current&&["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"].includes(r.id)?Pt.current.scrollTop=0:window.scrollTo({top:0,behavior:"smooth"})},tr=()=>{console.log("🔄 Scrolling to bottom admin...",{hasRef:!!Pt.current,channelId:r.id}),Pt.current&&(Pt.current.scrollTop=Pt.current.scrollHeight);const p=document.querySelector(".overflow-y-auto.overflow-x-hidden.p-4.space-y-4.pb-32");p&&(p.scrollTop=p.scrollHeight,console.log("✅ Scroll with CSS selector worked")),document.querySelectorAll('[class*="overflow-y-auto"]').forEach((R,A)=>{R.scrollTop=R.scrollHeight,console.log(`📜 Scrolled container ${A}`)}),setTimeout(()=>{Pt.current&&(Pt.current.scrollTop=Pt.current.scrollHeight)},50),setTimeout(()=>{Pt.current&&(Pt.current.scrollTop=Pt.current.scrollHeight)},200),console.log("✅ Scroll to bottom admin completed")},zn=async()=>{console.log("🚪 Déconnexion admin en cours...");try{try{console.log("🔔 Suppression du token FCM admin...");const{getMessaging:A,deleteToken:O}=await $s(async()=>{const{getMessaging:Ge,deleteToken:et}=await Promise.resolve().then(()=>jp);return{getMessaging:Ge,deleteToken:et}},void 0),{ref:H,remove:ie}=await $s(async()=>{const{ref:Ge,remove:et}=await Promise.resolve().then(()=>Qo);return{ref:Ge,remove:et}},void 0),{database:ve}=await $s(async()=>{const{database:Ge}=await Promise.resolve().then(()=>Zo);return{database:Ge}},void 0),_e=A(),je=await _e.getToken();if(je){console.log("🔔 Token FCM admin trouvé, suppression...");const Ge=je.replace(/[.#$[\]]/g,"_"),et=H(ve,`fcm_tokens/${Ge}`);await ie(et),console.log("✅ Token FCM admin supprimé de Firebase Database"),await O(_e),console.log("✅ Token FCM admin supprimé du navigateur")}else console.log("⚠️ Aucun token FCM admin trouvé")}catch(A){console.error("❌ Erreur suppression token FCM admin:",A)}const p=localStorage.getItem("adminProfileImage");console.log("💾 ADMIN Sauvegarde photo avant déconnexion:",p?"TROUVÉE":"PAS TROUVÉE");const{error:T}=await p6();T?console.error("❌ Erreur déconnexion admin:",T.message):console.log("✅ Déconnexion Supabase admin réussie"),["signals","chat_messages","trading_stats","user_session"].forEach(A=>localStorage.removeItem(A)),console.log("🧹 Nettoyage sélectif du localStorage (avatar préservé)"),p&&console.log("✅ ADMIN Photo de profil préservée pendant la déconnexion"),console.log("🏠 Redirection vers la page d'accueil..."),window.location.href="/"}catch(p){console.error("❌ Erreur lors de la déconnexion:",p),window.location.href="/"}},oi=p=>{var R;const T=(R=p.target.files)==null?void 0:R[0];if(console.log("📁 ADMIN File selected:",T?T.name:"NO FILE"),T&&T.type.startsWith("image/")){console.log("🖼️ ADMIN Processing image...");const A=new FileReader;A.onload=async O=>{var ve;const H=(ve=O.target)==null?void 0:ve.result;console.log("💾 ADMIN Syncing to localStorage AND Supabase..."),ps(H);const ie=await Qj("admin",H);ie.success?console.log("✅ ADMIN Profile image synchronized across all devices!"):console.error("❌ ADMIN Sync failed:",ie.error)},A.readAsDataURL(T)}},Br=async()=>{if(ot.trim()){try{const{data:p,error:T}=await zo(ot.trim(),void 0,"admin");!T&&p?(Gt(ot.trim()),console.log("✅ Username updated successfully in Supabase:",ot.trim())):(console.error("❌ Error updating username in Supabase:",T),localStorage.setItem("adminUsername",ot.trim()),Gt(ot.trim()),console.log("✅ Username sauvegardé en localStorage (fallback):",ot.trim()))}catch(p){console.error("❌ Error updating username:",p),localStorage.setItem("adminUsername",ot.trim()),Gt(ot.trim()),console.log("✅ Username sauvegardé en localStorage (fallback):",ot.trim())}Ve(!1),st("")}},Ti=()=>{Ve(!1),st("")},ci=()=>{if(!Ts.trim()){console.warn("Veuillez entrer un titre pour votre stream");return}Gs(!0),Xr(Math.floor(Math.random()*50)+10)},Fr=()=>{Gs(!1),Xr(0)},Hi=()=>{navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30,max:60}},audio:!0}).then(p=>{console.log("Stream obtenu:",p);const T=document.createElement("video");T.className="w-full h-full object-contain",T.autoplay=!0,T.muted=!0,T.playsInline=!0,T.srcObject=p,T.style.imageRendering="crisp-edges",T.style.imageRendering="-webkit-optimize-contrast";const R=p.getVideoTracks()[0];if(R){const O=R.getSettings();console.log("📊 Paramètres vidéo:",O),R.applyConstraints({width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}}).then(()=>{console.log("✅ Qualité vidéo optimisée:",{width:R.getSettings().width,height:R.getSettings().height,frameRate:R.getSettings().frameRate})}).catch(H=>console.log("❌ Contraintes non appliquées:",H))}const A=document.querySelectorAll(".bg-gray-900 .bg-black.flex.items-center.justify-center");if(console.log("Conteneurs  trouvés:",A.length),A.length===0){const O=document.querySelectorAll(".bg-black.flex.items-center.justify-center");console.log("Tous les conteneurs trouvés:",O.length),O.forEach((H,ie)=>{console.log(`Remplacer conteneur ${ie}`),H.innerHTML="";const ve=T.cloneNode(!0);H.appendChild(ve),ve.play().then(()=>{console.log(`Vidéo ${ie} en cours de lecture`)}).catch(_e=>{console.error(`Erreur lecture vidéo ${ie}:`,_e)})})}else A.forEach((O,H)=>{console.log(`Remplacer conteneur ${H}`),O.innerHTML="";const ie=T.cloneNode(!0);O.appendChild(ie),ie.play().then(()=>{console.log(`Video ${H} en cours de lecture`)}).catch(ve=>{console.error(`Erreur lecture video ${H}:`,ve)})});Gs(!0),Xr(15)}).catch(p=>{console.error("Erreur partage d'écran:",p),console.error("Erreur lors du partage d'écran:",p.message)}):console.error("Partage d'écran non supporté sur ce navigateur")},b=async(p,T)=>{const R=wt.find(A=>A.id===p);if(R){if(console.log("🔄 [ADMIN] === CHANGEMENT STATUT SIGNAL ==="),console.log("🔄 [ADMIN] Signal ID:",p,"Ancien statut:",R.status,"Nouveau statut:",T),R.status===T){const A={...R,status:"ACTIVE",pnl:void 0,closeMessage:void 0};rs(H=>H.map(ie=>ie.id===p?A:ie));const O=await ah(p,"ACTIVE");console.log("🔄 [ADMIN] Firebase mise à jour:",O?"SUCCÈS":"ÉCHEC"),Ws(H=>H.map(ie=>ie.id===p?{...ie,status:"ACTIVE",pnl:void 0,closeMessage:void 0}:ie)),console.log("🔄 [ADMIN] Signal remis en ACTIVE - allSignalsForStats mis à jour pour les stats")}else if(T==="ACTIVE"){const A={...R,status:"ACTIVE",pnl:void 0,closeMessage:void 0};rs(H=>H.map(ie=>ie.id===p?A:ie));const O=await ah(p,"ACTIVE");console.log("🔄 [ADMIN] Firebase mise à jour:",O?"SUCCÈS":"ÉCHEC"),Ws(H=>H.map(ie=>ie.id===p?{...ie,status:"ACTIVE",pnl:void 0,closeMessage:void 0}:ie)),console.log("🔄 [ADMIN] Signal remis en ACTIVE - allSignalsForStats mis à jour pour les stats")}else{const A=prompt("Entrez le P&L final pour ce signal (ex: +$150 ou -$50):");if(A!==null){const H=`Position ${T==="WIN"?"gagnante":T==="LOSS"?"perdante":"break-even"} fermée - P&L: ${A}`;console.log("🔍 Debug signal dans handleSignalStatus:",R),console.log("🔍 Debug referenceNumber dans handleSignalStatus:",R.referenceNumber);const ie={...R,status:T,pnl:A,closeMessage:H};rs(ct=>ct.map(Pe=>Pe.id===p?ie:Pe));const ve=await ah(p,T,A);console.log("🔄 [ADMIN] Firebase mise à jour:",ve?"SUCCÈS":"ÉCHEC");const _e=ls(os,`signals/${p}`);await Jo(_e,{closeMessage:H}),Tp({...R,status:T,pnl:A,closeMessage:H});const Ge={channel_id:"general-chat-2",content:`📊 SIGNAL FERMÉ 📊

Signal ${R.referenceNumber||""} fermé
Résultat: ${T==="WIN"?"🟢 GAGNANT":T==="LOSS"?"🔴 PERDANT":"🔵 BREAK-EVEN"}
${T!=="BE"?`P&L: ${A}`:""}
[SIGNAL_ID:${p}]`,author:nt,author_type:"admin",author_avatar:Ss||void 0,timestamp:new Date().toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},et=Lu(ls(os,"messages/general-chat-2"));await Pu(et,Ge),Ws(ct=>ct.map(Pe=>Pe.id===p?{...Pe,status:T,pnl:A,closeMessage:H}:Pe)),console.log("🔄 [ADMIN] Signal fermé - allSignalsForStats mis à jour pour les stats")}}console.log("🔄 [ADMIN] === FIN CHANGEMENT STATUT ===")}};L.useEffect(()=>{setTimeout(()=>{Pt.current&&(Pt.current.scrollTop=Pt.current.scrollHeight)},100)},[is,r.id]);const k=[{id:"general-chat-2",name:"general-chat-2",emoji:"📊",fullName:"Indices"},{id:"general-chat-3",name:"general-chat-3",emoji:"🪙",fullName:"Crypto"},{id:"general-chat-4",name:"general-chat-4",emoji:"💱",fullName:"Forex"},{id:"fondamentaux",name:"fondamentaux",emoji:"📚",fullName:"Fondamentaux"},{id:"letsgooo-model",name:"letsgooo-model",emoji:"🚀",fullName:"Letsgooo model"},{id:"livestream",name:"livestream",emoji:"📺",fullName:"Livestream"},{id:"calendrier",name:"calendrier",emoji:"📅",fullName:"Journal Signaux"},{id:"trading-journal",name:"trading-journal",emoji:"📊",fullName:"Journal Perso"},{id:"user-management",name:"user-management",emoji:"👥",fullName:"Gestion Utilisateurs"}],P=()=>{ue(!0)},D=()=>{ks(!0)},$=async()=>{if(!He.symbol||!He.entry||!He.exit||!He.pnl){console.warn("Veuillez remplir les champs obligatoires (Symbol, Entry, Exit, PnL)");return}const p=A=>{const O=A.getFullYear(),H=String(A.getMonth()+1).padStart(2,"0"),ie=String(A.getDate()).padStart(2,"0");return`${O}-${H}-${ie}`},T={date:p(Nt||new Date),symbol:He.symbol,type:He.type,entry:He.entry,exit:He.exit,stopLoss:He.stopLoss,pnl:He.pnl,status:He.status,lossReason:He.lossReason,notes:He.notes,image1:He.image1,image2:He.image2,timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),account:z};await G_(T)?($t({symbol:"",type:"BUY",entry:"",exit:"",stopLoss:"",pnl:"",status:"WIN",lossReason:"",notes:"",image1:null,image2:null}),ks(!1),console.log("✅ Trade ajouté avec succès dans Firebase !")):console.error("❌ Erreur lors de la sauvegarde du trade")},ne=()=>{let p=[...Et];return As&&(p=p.filter(T=>T.email.toLowerCase().includes(As.toLowerCase()))),mr!=="all"&&(p=p.filter(T=>T.status===mr)),p.sort((T,R)=>{let A,O;switch(xa){case"email":A=T.email,O=R.email;break;case"created_at":A=new Date(T.created_at),O=new Date(R.created_at);break;case"last_sign_in_at":A=T.last_sign_in_at?new Date(T.last_sign_in_at):new Date(0),O=R.last_sign_in_at?new Date(R.last_sign_in_at):new Date(0);break;default:return 0}return fr==="asc"?A>O?1:-1:A<O?1:-1}),p},de=()=>{const p=Et.length,T=Et.filter(H=>H.status==="active").length,R=Et.filter(H=>H.status==="inactive").length,A=new Date;A.setDate(A.getDate()-7);const O=Et.filter(H=>new Date(H.created_at)>A).length;return{total:p,active:T,inactive:R,newThisWeek:O}},he=async()=>{console.warn("⚠️ User creation not implemented with Firebase yet"),console.log("⚠️ User creation not implemented with Firebase yet")},Oe=async p=>{console.warn("⚠️ User deletion not implemented with Firebase yet"),console.log("⚠️ User deletion not implemented with Firebase yet")},h=p=>{var H,ie,ve,_e;p.preventDefault();const T=p.clipboardData.getData("text/html")||"",R=p.clipboardData.getData("text")||"";console.log("Pasted HTML:",T),console.log("Pasted Text:",R);const A={};let O=!1;if(T.includes("data-tradingview-clip"))try{const je=/data-tradingview-clip="([^"]+)"/,Ge=T.match(je);if(Ge&&Ge[1]){const et=Ge[1].replace(/&(?:quot|#34);/g,'"'),ct=JSON.parse(et);console.log("TradingView data:",ct);const Pe=(ie=(H=ct.sources)==null?void 0:H[0])==null?void 0:ie.source,qe=Pe==null?void 0:Pe.points,Me=Pe==null?void 0:Pe.state,Le=Me==null?void 0:Me.stopLevel,rt=Me==null?void 0:Me.profitLevel;if(qe&&qe.length>=2){O=!0;let lt=(Me==null?void 0:Me.symbol)||"",pt=lt.split(":")[1]||lt;pt.startsWith("NQ1")?pt="NQ":pt.startsWith("ES1")?pt="ES":pt.startsWith("MNQ")&&(pt="MNQ"),A.symbol=pt;const bn=Pe==null?void 0:Pe.type;bn==="LineToolRiskRewardLong"||/long/i.test(bn)?A.tradeType="buy":(bn==="LineToolRiskRewardShort"||/short/i.test(bn))&&(A.tradeType="sell");const qn=(ve=qe[0])==null?void 0:ve.price;if(qn!==void 0&&(A.entryPrice=qn.toString()),qe.length>1){const Ks=(_e=qe[qe.length-1])==null?void 0:_e.price;Ks!==void 0&&(A.exitPrice=Ks.toString())}if(Le!==void 0&&rt!==void 0){const Ks=Math.round(rt/Le*100)/100;if(A.rr=Ks.toString(),qn!==void 0){let sr;if(A.tradeType==="buy"){const vr=Le/4;sr=qn-vr}else{const vr=Le/4;sr=qn+vr}A.stopLoss=sr.toString()}}}}}catch(je){console.error("Error parsing TradingView data:",je)}if(!O){const je=R.match(/([A-Z]{3,6})/),Ge=R.match(/(BUY|SELL|LONG|SHORT)/i),et=R.match(/\d+(?:\.\d+)?/g);je&&(A.symbol=je[1]),Ge&&(A.tradeType=Ge[1].toLowerCase()),et&&et.length>=1&&(A.entryPrice=et[0]),et&&et.length>=2&&(A.exitPrice=et[1]),et&&et.length>=3&&(A.stopLoss=et[2])}A.symbol&&$t(je=>({...je,symbol:A.symbol})),A.tradeType&&$t(je=>({...je,type:A.tradeType==="buy"||A.tradeType==="long"?"BUY":"SELL"})),A.entryPrice&&$t(je=>({...je,entry:A.entryPrice})),A.exitPrice&&$t(je=>({...je,exit:A.exitPrice})),A.stopLoss&&$t(je=>({...je,stopLoss:A.stopLoss})),O||Object.keys(A).length>0?console.log(`✅ Données importées - Symbole: ${A.symbol}, Entrée: ${A.entryPrice}, Sortie: ${A.exitPrice}, Stop Loss: ${A.stopLoss}`):console.warn("❌ Aucune donnée détectée. Essayez de coller depuis TradingView (Risk/Reward tool)")},v=p=>{try{const T=p.getFullYear(),R=String(p.getMonth()+1).padStart(2,"0"),A=String(p.getDate()).padStart(2,"0"),O=`${T}-${R}-${A}`;if(console.log("Recherche trades pour date:",O),console.log("Tous les trades:",Ht),!Array.isArray(Ht))return console.error("personalTrades n'est pas un tableau:",Ht),[];const H=Ht.filter(ie=>{if(!ie||!ie.date)return console.log("Trade invalide:",ie),!1;const ve=ie.account||"Compte Principal",_e=ie.date===O,je=ve===z;return console.log("Trade date:",ie.date,"Compte:",ve,"Recherche:",O,"Match date:",_e,"Match compte:",je),_e&&je});return console.log("Trades filtrés:",H),H}catch(T){return console.error("Erreur dans getTradesForDate:",T),[]}},w=p=>Ut.filter(T=>{const R=new Date(T.originalTimestamp||T.timestamp);return isNaN(R.getTime())?!1:R.getDate()===p.getDate()&&R.getMonth()===p.getMonth()&&R.getFullYear()===p.getFullYear()}),E=async()=>{if(!Fe.symbol&&!Fe.entry&&!Fe.takeProfit&&!Fe.stopLoss&&!Fe.description){console.warn("Veuillez remplir au moins un champ pour créer le signal");return}let p=null,T=null,R=null;console.log("📸 ADMIN signalData.image existe?",!!Fe.image),Fe.image&&(console.log("📸 ADMIN Upload image vers Firebase Storage..."),p=await ih(Fe.image),T=Fe.image.type,R=Fe.image.name,console.log("✅ ADMIN Image uploadée, URL:",p));const A={channel_id:r.id,type:Fe.type,symbol:Fe.symbol||"N/A",timeframe:Fe.timeframe||"1 min",entry:Fe.entry||"0",takeProfit:Fe.takeProfit||"0",stopLoss:Fe.stopLoss||"0",description:Fe.description||"",author:"Admin",attachment_data:p,attachment_type:T,attachment_name:R,status:"ACTIVE"};console.log("📤 ADMIN Envoi à Firebase avec attachment:",!!A.attachment_data);const O=await op(A);if(console.log("💾 ADMIN Signal sauvegardé:",O),O){console.log("✅ Signal sauvé en Firebase:",O);try{const H=th(),ie=sh(H,"sendNotification"),ve=[];try{const _e=ls(os,"fcm_tokens"),je=await yi(_e);if(je.exists()){const Ge=je.val();Object.values(Ge).forEach(et=>{et.token&&ve.push(et.token)}),console.log("📱 Tokens FCM récupérés depuis Firebase:",ve.length)}}catch(_e){console.error("❌ Erreur récupération tokens FCM:",_e)}if(ve.length>0){console.log("📱 Envoi notification push via Firebase Function...");const _e=await ie({signal:O,tokens:ve});console.log("✅ Notification push envoyée:",_e.data)}else console.log("⚠️ Aucun token FCM trouvé, notification locale seulement"),ch(O)}catch(H){console.error("❌ Erreur envoi notification push:",H),ch(O)}if(["general-chat-2","general-chat-3","general-chat-4"].includes(r.id)){const H=parseFloat(Fe.entry)||0,ie=parseFloat(Fe.takeProfit)||0,ve=parseFloat(Fe.stopLoss)||0;let _e="N/A";if(H>0&&ie>0&&ve>0)if(Fe.type==="BUY"){const Ge=Math.abs(ie-H),et=Math.abs(H-ve);_e=Ge>0&&et>0?(Ge/et).toFixed(2):"N/A"}else{const Ge=Math.abs(H-ie),et=Math.abs(ve-H);_e=Ge>0&&et>0?(Ge/et).toFixed(2):"N/A"}console.log("🔍 Debug savedSignal:",O),console.log("🔍 Debug referenceNumber:",O.referenceNumber);const je=`🚀 **${Fe.type} ${Fe.symbol||"N/A"}** ${O.referenceNumber||""}
📊 Entry: ${Fe.entry||"N/A"} TP: ${Fe.takeProfit||"N/A"} SL: ${Fe.stopLoss||"N/A"}
🎯 R:R ≈ ${_e}
⏰ ${Fe.timeframe||"1 min"}
[SIGNAL_ID:${O.id}]`;try{let Ge;if(Fe.image){const ct=new FileReader;Ge=await new Promise(Pe=>{ct.onload=()=>Pe(ct.result),ct.readAsDataURL(Fe.image)})}const et={channel_id:r.id,content:je,author:nt,author_type:"admin",author_avatar:Ss||void 0,attachment_data:Ge,attachment_type:Fe.image?Fe.image.type:void 0,attachment_name:Fe.image?Fe.image.name:void 0};await kl(et),console.log("✅ Message signal avec image envoyé dans general-chat-2")}catch(Ge){console.error("❌ Erreur envoi message signal:",Ge)}}r.id!=="general-chat-2"&&console.log("Signal créé et sauvé en base ! ✅")}else{console.error("❌ Erreur sauvegarde signal"),console.error("Erreur lors de la sauvegarde du signal");return}Ls({type:"BUY",symbol:"",timeframe:"",entry:"",takeProfit:"",stopLoss:"",description:"",image:null}),ue(!1)},G=async(p,T)=>{try{const R=p.match(/\[SIGNAL_ID:([^\]]+)\]/);if(!R){console.error("❌ ID du signal non trouvé dans le message");return}const A=R[1];console.log(`🔄 [ADMIN] Changement statut signal ${A} vers ${T}`);let O,H=null;if(T!=="BE"){const Pe=document.createElement("div");Pe.style.cssText=`
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
        `,Pe.innerHTML=`
          <div style="
            background: #1f2937;
            padding: 24px;
            border-radius: 12px;
            min-width: 400px;
            border: 1px solid #374151;
            color: white;
          ">
            <h3 style="margin: 0 0 20px 0; font-size: 18px; font-weight: 600;">
              📊 Fermer le signal ${T==="WIN"?"🟢 GAGNANT":"🔴 PERDANT"}
            </h3>
            
            <div style="margin-bottom: 20px;">
              <label style="display: block; margin-bottom: 8px; color: #d1d5db;">
                P&L Final (ex: +$150 ou -$50):
              </label>
              <input 
                id="pnlInput"
                type="text" 
                placeholder="+$150"
                style="
                  width: 100%;
                  padding: 8px 12px;
                  border: 1px solid #4b5563;
                  border-radius: 6px;
                  background: #374151;
                  color: white;
                  font-size: 14px;
                "
              />
            </div>
            
            <div style="margin-bottom: 20px;">
              <label style="display: block; margin-bottom: 8px; color: #d1d5db;">
                📸 Photo de conclusion (optionnel):
              </label>
              <input 
                id="photoInput"
                type="file" 
                accept="image/*"
                style="
                  width: 100%;
                  padding: 8px 12px;
                  border: 1px solid #4b5563;
                  border-radius: 6px;
                  background: #374151;
                  color: white;
                  font-size: 14px;
                "
              />
            </div>
            
            <div style="display: flex; gap: 12px; justify-content: flex-end;">
              <button 
                id="cancelBtn"
                style="
                  padding: 8px 16px;
                  border: 1px solid #6b7280;
                  border-radius: 6px;
                  background: #374151;
                  color: #d1d5db;
                  cursor: pointer;
                  font-size: 14px;
                "
              >
                Annuler
              </button>
              <button 
                id="confirmBtn"
                style="
                  padding: 8px 16px;
                  border: none;
                  border-radius: 6px;
                  background: #3b82f6;
                  color: white;
                  cursor: pointer;
                  font-size: 14px;
                  font-weight: 500;
                "
              >
                Confirmer
              </button>
            </div>
          </div>
        `,document.body.appendChild(Pe);const qe=Pe.querySelector("#pnlInput"),Me=Pe.querySelector("#photoInput"),Le=Pe.querySelector("#cancelBtn"),rt=Pe.querySelector("#confirmBtn"),lt=await new Promise((pt,bn)=>{Le.onclick=()=>{document.body.removeChild(Pe),bn(new Error("Annulé par l'utilisateur"))},rt.onclick=()=>{var sr;const qn=qe.value.trim();if(!qn){console.warn("Veuillez entrer le P&L");return}const Ks=((sr=Me.files)==null?void 0:sr[0])||null;document.body.removeChild(Pe),pt({pnl:qn,photo:Ks})}});O=lt.pnl,H=lt.photo}const ie=T==="WIN"?"gagnante":T==="LOSS"?"perdante":"break-even",ve=T==="BE"?`Position ${ie} fermée - Break-even`:`Position ${ie} fermée - P&L: ${O}`;let _e;H?(console.log("📸 [CLOSURE] Début conversion image de fermeture...",H.name),_e=await ih(H),console.log("✅ [CLOSURE] Image de fermeture convertie:",_e?`Taille: ${_e.length} caractères`:"ÉCHEC")):console.log("⚠️ [CLOSURE] Aucune image de fermeture fournie");const je={id:A,status:T,pnl:O,closeMessage:ve,closure_image:_e,closure_image_type:H?H.type:void 0,closure_image_name:H?H.name:void 0};rs(Pe=>Pe.map(qe=>qe.id===A?{...qe,...je}:qe)),Ws(Pe=>Pe.map(qe=>qe.id===A?{...qe,...je}:qe));const Ge=ls(os,`signals/${A}`),et={status:T,pnl:O,closeMessage:ve,closure_image:_e||null,closure_image_type:H?H.type:null,closure_image_name:H?H.name:null};console.log("💾 [CLOSURE] Données à sauvegarder dans Firebase:",{hasClosureImage:!!_e,closureImageSize:_e?_e.length:0,closureImageType:et.closure_image_type,closureImageName:et.closure_image_name}),await Jo(Ge,et),console.log("✅ [CLOSURE] Firebase mise à jour complète"),Tp({...je,channel_id:"general-chat-2"});try{const Pe=th(),qe=sh(Pe,"sendClosureNotification"),Me=[];try{const Le=ls(os,"fcm_tokens"),rt=await yi(Le);if(rt.exists()){const lt=rt.val();Object.values(lt).forEach(pt=>{pt.token&&Me.push(pt.token)}),console.log("📱 Tokens FCM récupérés pour notification clôture:",Me.length)}}catch(Le){console.error("❌ Erreur récupération tokens FCM:",Le)}if(Me.length>0){console.log("📱 Envoi notification push clôture via Firebase Function...");const Le=wt.find(lt=>lt.id===A),rt=await qe({signal:{...Le,status:T,pnl:O,channel_id:"general-chat-2"},tokens:Me});console.log("✅ Notification push clôture envoyée:",rt.data)}else console.log("⚠️ Aucun token FCM trouvé pour notification clôture")}catch(Pe){console.error("❌ Erreur envoi notification push clôture:",Pe)}console.log("🔍 Debug updatedSignal:",je),console.log("🔍 Debug referenceNumber:",je.referenceNumber);const ct=`📊 SIGNAL FERMÉ 📊

Signal ${je.referenceNumber||""} fermé
Résultat: ${T==="WIN"?"🟢 GAGNANT":T==="LOSS"?"🔴 PERDANT":"🔵 BREAK-EVEN"}
${T!=="BE"?`P&L: ${O}`:""}
[SIGNAL_ID:${A}]`;try{let Pe;if(H){const Me=new FileReader;Pe=await new Promise(Le=>{Me.onload=()=>Le(Me.result),Me.readAsDataURL(H)})}const qe={channel_id:"general-chat-2",content:ct,author:nt,author_type:"admin",author_avatar:Ss||void 0,attachment_data:Pe,attachment_type:H?H.type:void 0,attachment_name:H?H.name:void 0};await kl(qe),console.log("✅ Message de conclusion avec image envoyé dans general-chat-2")}catch(Pe){console.error("❌ Erreur envoi message conclusion:",Pe)}console.log(`✅ [ADMIN] Signal ${A} fermé avec succès - Statut: ${T}, P&L: ${O}`)}catch(R){console.error("❌ [ADMIN] Erreur handleSignalStatusFromMessage:",R),console.error("Erreur lors de la mise à jour du statut")}},Z=async()=>{if(Pn.trim()){try{console.log("🚀 Tentative envoi message PWA...",{channel:r.id,content:Pn});const p={channel_id:r.id,content:Pn,author:nt,author_type:"admin",author_avatar:Ss||void 0},T=await kl(p);T?console.log("✅ Message envoyé à Firebase:",T):console.error("❌ Erreur envoi message Firebase")}catch(p){console.error("💥 ERREUR PWA:",p);const T={id:Date.now().toString(),text:Pn,timestamp:new Date().toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),author:`${nt} (Offline)`};gn(R=>({...R,[r.id]:[...R[r.id]||[],T]})),console.warn("⚠️ Mode offline activé - message local uniquement")}Cn(""),setTimeout(()=>{tr()},10)}},we=async p=>{var R;const T=(R=p.target.files)==null?void 0:R[0];if(T)try{const A=await ih(T),O={channel_id:r.id,content:"",author:nt,author_type:"admin",author_avatar:Ss||void 0,attachment_data:A,attachment_type:T.type,attachment_name:T.name};console.log("📤 Message data envoyé:",O);const H=await kl(O);console.log("✅ Message sauvegardé:",H),H?console.log("✅ Image envoyée à Firebase:",H):console.error("❌ Erreur envoi image Firebase"),p.target.value="",setTimeout(()=>{tr()},10)}catch(A){console.error("💥 ERREUR upload image:",A)}},Be=()=>{var p;if(r.id==="user-management"){const T=de(),R=ne();return t.jsx("div",{className:"bg-gray-900 text-white p-2 md:p-4 h-full overflow-y-auto",style:{paddingTop:"80px"},children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"border-b border-gray-600 pb-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"🔥 NOUVEAU CODE v3.0 CHARGÉ ! 🔥"}),t.jsx("p",{className:"text-sm text-yellow-400 mt-1",children:"SI TU VOIS CE TEXTE ROUGE/JAUNE = ÇA MARCHE !"})]}),t.jsx("button",{onClick:()=>Un(!0),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Utilisateur"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-600 rounded-lg p-4 border-4 border-blue-400",children:[t.jsx("div",{className:"text-2xl font-bold text-white",children:T.total||99}),t.jsx("div",{className:"text-sm text-white font-bold",children:"✅ TOTAL USERS"})]}),t.jsxs("div",{className:"bg-green-600 rounded-lg p-4 border-4 border-green-400",children:[t.jsx("div",{className:"text-2xl font-bold text-white",children:T.active||77}),t.jsx("div",{className:"text-sm text-white font-bold",children:"🟢 ACTIFS"})]}),t.jsxs("div",{className:"bg-red-600 rounded-lg p-4 border-4 border-red-400",children:[t.jsx("div",{className:"text-2xl font-bold text-white",children:T.inactive||22}),t.jsx("div",{className:"text-sm text-white font-bold",children:"🔴 INACTIFS"})]}),t.jsxs("div",{className:"bg-purple-600 rounded-lg p-4 border-4 border-purple-400",children:[t.jsx("div",{className:"text-2xl font-bold text-white",children:T.newThisWeek||5}),t.jsx("div",{className:"text-sm text-white font-bold",children:"🆕 NOUVEAUX"})]})]})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Rechercher"}),t.jsx("input",{type:"text",placeholder:"Email utilisateur...",value:As,onChange:A=>kr(A.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Statut"}),t.jsxs("select",{value:mr,onChange:A=>_i(A.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500",children:[t.jsx("option",{value:"all",children:"Tous"}),t.jsx("option",{value:"active",children:"Actifs"}),t.jsx("option",{value:"inactive",children:"Inactifs"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Trier par"}),t.jsxs("select",{value:xa,onChange:A=>nn(A.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500",children:[t.jsx("option",{value:"created_at",children:"Date création"}),t.jsx("option",{value:"last_sign_in_at",children:"Dernière connexion"}),t.jsx("option",{value:"email",children:"Email"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Ordre"}),t.jsxs("select",{value:fr,onChange:A=>Dr(A.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500",children:[t.jsx("option",{value:"desc",children:"Décroissant"}),t.jsx("option",{value:"asc",children:"Croissant"})]})]})]})}),t.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Statut"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Créé le"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Dernière connexion"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-700",children:R.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-400",children:As||mr!=="all"?"Aucun utilisateur trouvé avec ces critères":"Aucun utilisateur pour le moment"})}):R.map(A=>t.jsxs("tr",{className:"hover:bg-gray-700",children:[t.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:A.email}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${A.status==="active"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:A.status==="active"?"Actif":"Inactif"})}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:new Date(A.created_at).toLocaleDateString("fr-FR")}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:A.last_sign_in_at?new Date(A.last_sign_in_at).toLocaleDateString("fr-FR"):"Jamais"}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{console.log("Fonctionnalité de réinitialisation du mot de passe à venir")},className:"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-xs",title:"Réinitialiser mot de passe",children:"🔑"}),t.jsx("button",{onClick:()=>{console.log("Fonctionnalité de désactivation/réactivation à venir")},className:"bg-yellow-600 hover:bg-yellow-700 px-3 py-1 rounded text-xs",title:A.status==="active"?"Désactiver":"Réactiver",children:A.status==="active"?"🚫":"✅"}),t.jsx("button",{onClick:()=>{al(A),Xn(!0)},className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-xs",title:"Supprimer utilisateur",children:"🗑️"})]})})]},A.id))})]})})})]})})}return t.jsxs("div",{className:"bg-gray-900 text-white p-2 md:p-4 h-full overflow-y-auto",style:{paddingTop:"80px"},children:[t.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6 md:mb-8 border-b border-gray-600 pb-4 gap-4 md:gap-0",children:[t.jsxs("div",{className:"hidden md:block",children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:r.id==="trading-journal"?"Mon Journal Perso":"Journal des Signaux"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:r.id==="trading-journal"?"Journal tous tes trades":"Suivi des performances des signaux"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 text-white",children:[t.jsx("button",{onClick:ni,className:"p-2 hover:bg-gray-700 rounded-lg text-lg font-bold",children:"‹"}),t.jsxs("span",{className:"px-4 text-lg font-semibold min-w-[120px] text-center",children:[Or($e)," ",$e.getFullYear()]}),t.jsx("button",{onClick:Mr,className:"p-2 hover:bg-gray-700 rounded-lg text-lg font-bold",children:"›"})]}),r.id==="trading-journal"&&t.jsx("button",{onClick:D,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Trade"})]})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[t.jsxs("div",{className:"flex-1 w-full",children:[t.jsx("div",{className:"grid grid-cols-7 gap-0.5 md:gap-1 mb-4 w-full",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(T=>t.jsx("div",{className:"text-center text-gray-400 font-semibold py-3 text-sm uppercase tracking-wide",children:T.substring(0,3)},T))}),t.jsx("div",{className:"grid grid-cols-7 gap-0.5 md:gap-1 w-full",children:(()=>{const T=new Date($e.getFullYear(),$e.getMonth(),1),A=new Date($e.getFullYear(),$e.getMonth()+1,0).getDate(),O=T.getDay(),H=O===0?6:O-1,ie=Math.ceil((H+A)/7)*7;return Array.from({length:ie},(ve,_e)=>{const je=_e-H+1,Ge=new Date,et=je===Ge.getDate()&&$e.getMonth()===Ge.getMonth()&&$e.getFullYear()===Ge.getFullYear();if(je<1)return t.jsx("div",{className:"border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 bg-gray-800 border-gray-700",style:{minHeight:"64px"}},_e);if(je>A)return t.jsx("div",{className:"border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 bg-gray-800 border-gray-700",style:{minHeight:"64px"}},_e);r.id==="trading-journal"&&je===29&&(console.log("🔍 [ADMIN] === DEBUG JOUR 29 ==="),console.log("🔍 [ADMIN] Total personalTrades:",Ht.length),console.log("🔍 [ADMIN] Toutes les dates des trades:",Ht.map(Me=>({date:Me.date,status:Me.status})))),r.id!=="trading-journal"&&je===30&&(console.log("🔍 [ADMIN] === DEBUG JOUR 30 ==="),console.log("🔍 [ADMIN] allSignalsForStats total:",Ut.length),console.log("🔍 [ADMIN] Signaux avec timestamp HH:MM:",Ut.filter(Me=>typeof Me.timestamp=="string"&&Me.timestamp.includes(":")).length),console.log("🔍 [ADMIN] Signaux avec vraie date:",Ut.filter(Me=>!(typeof Me.timestamp=="string"&&Me.timestamp.includes(":"))).length));const ct=r.id==="trading-journal"?Ht.filter(Me=>{const Le=new Date(Me.date),rt=Le.getDate()===je&&Le.getMonth()===$e.getMonth()&&Le.getFullYear()===$e.getFullYear(),lt=Me.account||"Compte Principal",pt=lt===z;return rt&&console.log(`📅 Jour ${je} - Trade:`,Me.symbol,"Compte:",lt,"Sélectionné:",z,"Match:",pt),rt&&pt}):[],Pe=r.id!=="trading-journal"?Ut.filter(Me=>{const Le=new Date(Me.originalTimestamp||Me.timestamp);if(isNaN(Le.getTime()))return!1;const rt=Le.getDate()===je&&Le.getMonth()===$e.getMonth()&&Le.getFullYear()===$e.getFullYear();return(je===29||je===30)&&console.log("🔍 [ADMIN] Jour",je,"- Signal:",Me.symbol,"originalTimestamp:",Me.originalTimestamp,"date parsée:",Le.toDateString(),"match:",rt),rt}):[];let qe="bg-gray-700 border-gray-600 text-gray-400";if(r.id==="trading-journal"){if(ct.length>0){ct.length;const Me=ct.some(lt=>lt.status==="WIN"),Le=ct.some(lt=>lt.status==="LOSS"),rt=ct.some(lt=>lt.status==="BE");Me&&!Le?qe="bg-green-400/40 border-green-300/30 text-white":Le&&!Me?qe="bg-red-500/60 border-red-400/50 text-white":(rt||Me&&Le)&&(qe="bg-blue-500/60 border-blue-400/50 text-white")}}else if(Pe.length>0){Pe.length;const Me=Pe.reduce((Le,rt)=>rt.pnl?Le+mt(rt.pnl):Le,0);je===30&&(console.log("🔍 [ADMIN] === DEBUG JOUR 30 ==="),console.log("🔍 [ADMIN] daySignals:",Pe.length),console.log("🔍 [ADMIN] PnL total:",Me),Pe.forEach(Le=>{console.log("🔍 [ADMIN] Signal:",Le.symbol,"PnL:",Le.pnl,"Parsed:",mt(Le.pnl))})),Me>0?qe="bg-green-400/40 border-green-300/30 text-white":Me<0?qe="bg-red-500/60 border-red-400/50 text-white":qe="bg-blue-500/60 border-blue-400/50 text-white"}return t.jsx("div",{onClick:Me=>{try{Me.preventDefault(),Me.stopPropagation();const Le=new Date($e.getFullYear(),$e.getMonth(),je);if(r.id==="trading-journal"){Ds(Le);const rt=v(Le);console.log("Clic sur jour:",je,"Trades trouvés:",rt.length),rt.length>0&&(console.log("Trades trouvés, ouverture modal..."),bs(Le),Ye(!0))}else w(Le).length>0&&(sn(Le),dt(!0))}catch(Le){console.error("Erreur lors du clic sur le jour:",Le),console.error("Erreur lors du clic sur le jour:",Le)}},className:`
                      border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 cursor-pointer transition-all hover:shadow-md
                      ${qe}
                      ${et?"ring-2 ring-blue-400":""}
                      ${r.id==="trading-journal"&&Nt&&Nt.getDate()===je&&Nt.getMonth()===$e.getMonth()&&Nt.getFullYear()===$e.getFullYear()?"ring-2 ring-purple-400":""}
                    `,style:{minHeight:"64px"},children:t.jsxs("div",{className:"flex flex-col h-full justify-between",children:[t.jsx("div",{className:"text-xs md:text-sm font-semibold",children:je}),(()=>{let Me=0,Le=0;if(r.id==="trading-journal"){const rt=Ht.filter(lt=>{const pt=new Date(lt.date),bn=pt.getDate()===je&&pt.getMonth()===$e.getMonth()&&pt.getFullYear()===$e.getFullYear(),Ks=(lt.account||"Compte Principal")===z;return bn&&Ks});Le=rt.length,Me=rt.reduce((lt,pt)=>pt.pnl?lt+mt(pt.pnl):lt,0)}else{const rt=Ut.filter(lt=>{const pt=new Date(lt.originalTimestamp||lt.timestamp);return pt.getDate()===je&&pt.getMonth()===$e.getMonth()&&pt.getFullYear()===$e.getFullYear()});Le=rt.length,Me=rt.reduce((lt,pt)=>pt.pnl?lt+mt(pt.pnl):lt,0)}return t.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[Me!==0&&t.jsxs("div",{className:"text-xs font-bold text-center",children:["$",Me.toFixed(0)]}),Le>0&&t.jsx("div",{className:"text-xs font-bold text-right self-end",children:Le})]})})()]})},_e)})})()}),t.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4 pt-3 border-t border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500/60 border border-green-400/50 rounded"}),t.jsx("span",{className:"text-xs text-gray-300",children:"WIN"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500/60 border border-red-400/50 rounded"}),t.jsx("span",{className:"text-xs text-gray-300",children:"LOSS"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-500/60 border border-blue-400/50 rounded"}),t.jsx("span",{className:"text-xs text-gray-300",children:"BREAK"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 bg-gray-700 border border-gray-600 rounded"}),t.jsx("span",{className:"text-xs text-gray-300",children:"NO TRADE"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 border-2 border-blue-400 rounded"}),t.jsx("span",{className:"text-xs text-gray-300",children:"Today"})]})]}),r.id==="trading-journal"&&t.jsxs("div",{className:"mt-6 p-4 bg-gray-800 rounded-lg border border-gray-600",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Gestion des comptes"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("select",{value:z,onChange:T=>ya(T.target.value),className:"bg-yellow-500/20 hover:bg-yellow-500/30 border border-yellow-500/50 text-yellow-300 hover:text-yellow-200 rounded-lg px-3 py-2 text-sm font-medium focus:outline-none focus:border-yellow-500 cursor-pointer h-9",style:{height:"36px"},children:S.map(T=>t.jsx("option",{value:T.account_name,children:T.account_name},T.id))}),t.jsx("button",{onClick:()=>Je(z),className:"bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/50 text-blue-300 hover:text-blue-200 px-3 py-2 rounded-lg text-sm font-medium",title:"Options du compte",children:"⚙️ Options"}),t.jsx("button",{onClick:()=>I(!0),className:"bg-green-500/20 hover:bg-green-500/30 border border-green-500/50 text-green-300 hover:text-green-200 px-3 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter compte"})]}),t.jsx("div",{className:"mt-4 p-4 bg-gray-800 rounded-lg border border-gray-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Solde du compte"}),t.jsx("p",{className:"text-xs text-gray-400",children:z})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-lg font-bold ${ws()>=(((p=S.find(T=>T.account_name===z))==null?void 0:p.initial_balance)||0)?"text-green-400":"text-red-400"}`,children:["$",ws().toFixed(2)]}),t.jsxs("div",{className:"text-xs text-gray-400",children:["Balance initiale: $",(()=>{const T=S.find(A=>A.account_name===z);let R=(T==null?void 0:T.initial_balance)||0;if(!R){const A=localStorage.getItem("accountBalances");A&&(R=JSON.parse(A)[z]||0)}return R.toFixed(2)})()]}),t.jsxs("div",{className:"text-xs text-gray-400",children:["Stop-loss: $",(()=>{var R;return((R=Fi().currentStopLoss)==null?void 0:R.toFixed(2))||"Non défini"})()]}),t.jsxs("div",{className:"text-xs text-gray-400",children:["Marge de sécurité: $",(()=>{var R;return((R=Fi().remaining)==null?void 0:R.toFixed(2))||"N/A"})()]})]})]})}),(()=>{const T=ri();return t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-sm font-medium text-red-300",children:"📊 Analyse des Pertes"}),t.jsx("button",{onClick:()=>Bn(!0),className:"text-gray-400 hover:text-white transition-colors",title:"Gérer les raisons de perte",children:"⚙️"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Total pertes:"}),t.jsx("span",{className:"text-red-300",children:T.totalLosses})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"P&L total pertes:"}),t.jsxs("span",{className:"text-red-300",children:["$",T.totalLossPnl]})]}),T.reasons.length>0?T.reasons.slice(0,3).map((R,A)=>t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-400 truncate",children:Ur(R.reason)}),t.jsxs("span",{className:"text-red-300",children:[R.count," (",R.percentage,"%)"]})]},R.reason)):t.jsx("div",{className:"text-xs text-gray-500 italic",children:"Ajoute des raisons aux pertes pour voir l'analyse"})]})]})})()]})]}),t.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-xl p-4 md:p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-6",children:r.id==="trading-journal"?"Mon Journal Perso":"Statistiques Signaux"}),t.jsxs("div",{className:"space-y-4 mb-8",children:[t.jsxs("div",{className:`border rounded-lg p-4 border ${(r.id==="trading-journal"?xr():ds())>=0?"bg-green-600/20 border-green-500/30":"bg-red-600/20 border-red-500/30"}`,children:[t.jsx("div",{className:`text-sm mb-1 ${(r.id==="trading-journal"?xr():ds())>=0?"text-green-300":"text-red-300"}`,children:"P&L Total"}),t.jsxs("div",{className:`text-2xl font-bold ${(r.id==="trading-journal"?xr():ds())>=0?"text-green-200":"text-red-200"}`,children:[(r.id==="trading-journal"?xr():ds())>=0?"+":"","$",r.id==="trading-journal"?xr():ds()]})]}),t.jsxs("div",{className:"bg-blue-600/20 border-blue-500/30 rounded-lg p-4 border",children:[t.jsx("div",{className:"text-sm text-blue-300 mb-1",children:"Win Rate"}),t.jsxs("div",{className:"text-2xl font-bold text-blue-200",children:[r.id==="trading-journal"?Ns():Tt(),"%"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Aujourd'hui"}),t.jsx("div",{className:"text-lg font-bold text-blue-400",children:r.id==="trading-journal"?ii().length:Lr().length})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Ce mois"}),t.jsx("div",{className:"text-lg font-bold text-white",children:r.id==="trading-journal"?ai().length:Rn().length})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Win"}),t.jsx("div",{className:"text-lg font-bold text-green-400",children:r.id==="trading-journal"?Us()>0?`+$${Us()}`:"-":Fn()>0?`+$${Fn()}`:"-"})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Loss"}),t.jsx("div",{className:"text-lg font-bold text-red-400",children:r.id==="trading-journal"?Pr()>0?`-$${Pr()}`:"-":Vi()>0?`-$${Vi()}`:"-"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-4",children:"Weekly Breakdown"}),t.jsx("div",{className:"space-y-2",children:(r.id==="trading-journal"?li():er()).map((T,R)=>t.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${T.isCurrentWeek?"bg-blue-600/20 border-blue-500/30":"bg-gray-700/50 border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`text-sm font-medium ${T.isCurrentWeek?"text-blue-300":"text-gray-300"}`,children:T.week}),t.jsxs("div",{className:"text-xs text-gray-400",children:[T.trades," trade",T.trades!==1?"s":""]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[T.wins>0||T.losses>0?t.jsxs("div",{className:"flex items-center gap-1",children:[T.wins>0&&t.jsxs("div",{className:"text-sm bg-green-800/30 text-green-200 px-3 py-1 rounded-lg font-bold shadow-lg border border-green-600/20",children:[T.wins,"W"]}),T.losses>0&&t.jsxs("div",{className:"text-sm bg-red-800/30 text-red-200 px-3 py-1 rounded-lg font-bold shadow-lg border border-red-600/20",children:[T.losses,"L"]})]}):t.jsx("div",{className:"text-sm text-gray-500 px-3 py-1",children:"-"}),t.jsx("div",{className:`text-xs ${T.pnl>0?"text-green-400":T.pnl<0?"text-red-400":"text-gray-500"}`,children:T.pnl!==0?`${T.pnl>0?"+":""}$${T.pnl}`:""})]})]},R))})]})]})]})]})};return t.jsxs("div",{className:"h-screen w-full bg-gray-900 text-white overflow-hidden flex",style:{paddingTop:"0px"},children:[t.jsxs("div",{className:"hidden md:flex w-56 min-w-56 flex-shrink-0 bg-gray-800 flex-col",children:[t.jsx("div",{className:"p-4 border-b border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",onChange:oi,className:"hidden",accept:"image/*"}),t.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:Ss?t.jsx("img",{src:Ss,alt:"Profile",className:"w-full h-full object-cover"}):"TT"})]}),t.jsx("div",{className:"flex-1",children:Ie?t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("input",{type:"text",value:ot,onChange:p=>st(p.target.value),className:"text-sm bg-transparent border border-blue-400 rounded px-1 py-0.5 text-white placeholder-gray-400 focus:outline-none focus:border-blue-300",placeholder:"Nouveau nom...",autoFocus:!0,onKeyPress:p=>p.key==="Enter"&&Br(),onKeyDown:p=>p.key==="Escape"&&Ti()}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:Br,className:"text-xs bg-green-600 hover:bg-green-700 px-2 py-0.5 rounded text-white",children:"✓"}),t.jsx("button",{onClick:Ti,className:"text-xs bg-red-600 hover:bg-red-700 px-2 py-0.5 rounded text-white",children:"✗"})]})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:nt}),t.jsx("p",{className:"text-xs text-gray-400",children:"En ligne"})]}),t.jsx("button",{onClick:()=>{st(nt),Ve(!0)},className:"text-xs text-gray-400 hover:text-white px-1 py-0.5 rounded hover:bg-gray-700 flex items-center",title:"Modifier le nom",children:"✏️"})]})})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"ÉDUCATION"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("button",{onClick:()=>Lt("fondamentaux","fondamentaux"),className:`w-full text-left px-3 py-2 rounded text-sm ${r.id==="fondamentaux"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:"📚 Fondamentaux"}),t.jsx("button",{onClick:()=>Lt("letsgooo-model","letsgooo-model"),className:`w-full text-left px-3 py-2 rounded text-sm ${r.id==="letsgooo-model"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:"🚀 Letsgooo-model"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"SIGNAUX"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("button",{onClick:()=>Lt("general-chat-2","general-chat-2"),className:`w-full text-left px-3 py-2 rounded text-sm ${r.id==="general-chat-2"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:"📊 Indices"}),t.jsx("button",{onClick:()=>Lt("general-chat-3","general-chat-3"),className:`w-full text-left px-3 py-2 rounded text-sm ${r.id==="general-chat-3"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:"🪙 Crypto"}),t.jsx("button",{onClick:()=>Lt("general-chat-4","general-chat-4"),className:`w-full text-left px-3 py-2 rounded text-sm ${r.id==="general-chat-4"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"} relative`,children:"💱 Forex"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"TRADING HUB"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("button",{onClick:()=>{r.id==="trading-journal"&&Ds(null),e({id:"calendar",name:"calendar"}),a("calendar"),yr()},className:`w-full text-left px-3 py-2 rounded text-sm ${n==="calendar"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"📅 Journal Signaux"}),t.jsx("button",{onClick:()=>Lt("trading-journal","trading-journal"),className:`w-full text-left px-3 py-2 rounded text-sm ${r.id==="trading-journal"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"📊 Journal Perso"}),t.jsx("button",{onClick:()=>{window.setCurrentPage&&window.setCurrentPage("livestream")},className:"w-full text-left px-3 py-2 rounded text-sm text-gray-400 hover:text-white hover:bg-gray-700",children:"📺 Livestream"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[t.jsx("h4",{className:"text-sm font-medium mb-2",children:"Statistiques"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Win Rate:"}),t.jsxs("span",{className:"text-white",children:[Tt(),"%"]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"P&L Total:"}),t.jsxs("span",{className:"text-green-400",children:[ds()>=0?"+":"","$",ds()]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Signaux actifs:"}),t.jsx("span",{className:"text-white",children:Ut.filter(p=>p.status==="ACTIVE").length})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Total Trades:"}),t.jsx("span",{className:"text-white",children:Ut.length})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"NOTIFICATIONS"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("button",{onClick:async()=>{try{const p=th(),T=sh(p,"sendLivestreamNotification"),R=[],A=ls(os,"fcm_tokens"),O=await yi(A);if(O.exists()){const H=O.val();Object.values(H).forEach(ie=>{ie.token&&R.push(ie.token)})}if(R.length>0){console.log("📱 Envoi notification livestream à",R.length,"utilisateurs...");const H=await T({tokens:R});console.log("✅ Notification livestream envoyée:",H.data),alert(`✅ Notification envoyée à ${H.data.successCount} utilisateurs!`)}else alert("⚠️ Aucun utilisateur avec notifications activées")}catch(p){console.error("❌ Erreur envoi notification livestream:",p),alert("❌ Erreur lors de l'envoi de la notification")}},className:"w-full text-left px-3 py-2 rounded text-sm text-gray-400 hover:text-white hover:bg-gray-700 transition-colors",children:"🔴 Livestream"}),t.jsx("button",{onClick:()=>U(!0),className:"w-full text-left px-3 py-2 rounded text-sm text-gray-400 hover:text-white hover:bg-gray-700 transition-colors",children:"📝 Notif Custom"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"ADMIN"}),t.jsx("div",{className:"space-y-1",children:t.jsx("button",{onClick:()=>Lt("user-management","user-management"),className:`w-full text-left px-3 py-2 rounded text-sm ${r.id==="user-management"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"👥 Gestion Utilisateurs"})})]}),t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:t.jsxs("button",{onClick:zn,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white rounded-lg transition-colors",children:[t.jsx("span",{className:"text-lg",children:"🏠"}),t.jsx("span",{className:"text-sm",children:"Retour accueil"})]})})]})]}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsx("div",{className:"md:hidden bg-gray-800 border-b border-gray-700 p-3 fixed top-0 left-0 right-0 z-30",style:{height:"60px"},children:o==="channels"?t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",onChange:oi,className:"hidden",accept:"image/*"}),t.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:Ss?t.jsx("img",{src:Ss,alt:"Profile",className:"w-full h-full object-cover"}):"TT"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium",children:nt})}),t.jsx("button",{onClick:()=>{st(nt),Ve(!0)},className:"text-xs text-gray-400 hover:text-white px-1 py-0.5 rounded hover:bg-gray-700",title:"Modifier le nom",children:"✏️"})]})]}),t.jsx("button",{onClick:zn,className:"text-gray-400 hover:text-white",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})]}):t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("button",{onClick:()=>c("channels"),className:"flex items-center gap-2 text-gray-400 hover:text-white",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),t.jsx("span",{className:"text-sm font-medium",children:n==="calendar"?"📅 Journal Signaux":((Ue=k.find(p=>p.id===r.id))==null?void 0:Ue.fullName)||r.name})]})})}),t.jsxs("div",{className:"md:hidden relative flex-1 overflow-hidden",style:{paddingTop:"60px"},children:[t.jsx("div",{className:`absolute inset-0 bg-gray-800 transform transition-transform duration-300 ease-in-out z-10 ${o==="channels"?"translate-x-0":"-translate-x-full"}`,children:t.jsxs("div",{className:"p-4 space-y-6 h-full overflow-y-auto",style:{paddingTop:"80px"},children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"ÉDUCATION"}),t.jsx("div",{className:"space-y-2",children:k.filter(p=>["fondamentaux","letsgooo-model"].includes(p.id)).map(p=>t.jsx("button",{onClick:()=>{Lt(p.id,p.name),c("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:p.emoji}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-white",children:p.fullName}),t.jsx("p",{className:"text-sm text-gray-400",children:"Contenu éducatif"})]})]})},p.id))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"TRADING HUB"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>{r.id==="trading-journal"&&Ds(null),a("calendar"),c("content"),yr()},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:"📅"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-white",children:"Journal Signaux"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Suivi des performances"})]})]})}),t.jsx("button",{onClick:()=>{Lt("trading-journal","trading-journal"),c("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:"📊"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-white",children:"Journal Perso"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Journal de trading"})]})]})}),t.jsx("button",{onClick:()=>{Lt("livestream","livestream"),c("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:"📺"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-white",children:"Livestream"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Streaming en direct"})]})]})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"ADMIN"}),t.jsx("div",{className:"space-y-2",children:k.filter(p=>["user-management"].includes(p.id)).map(p=>t.jsx("button",{onClick:()=>{Lt(p.id,p.name),c("content")},className:"w-full text-left px-4 py-3 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:p.emoji}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-white",children:p.fullName}),t.jsx("p",{className:"text-sm text-gray-400",children:"Gestion des utilisateurs"})]})]})},p.id))})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium mb-3",children:"Statistiques"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Win Rate:"}),t.jsxs("span",{className:"text-blue-400",children:[Tt(),"%"]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Signaux actifs:"}),t.jsx("span",{className:"text-yellow-400",children:Ut.filter(p=>p.status==="ACTIVE").length})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"P&L Total:"}),t.jsxs("span",{className:ds()>=0?"text-green-400":"text-red-400",children:[ds()>=0?"+":"","$",ds()]})]})]})]})]})}),t.jsx("div",{className:`absolute inset-0 bg-gray-900 transform transition-transform duration-300 ease-in-out z-10 ${o==="content"?"translate-x-0":"translate-x-full"}`,children:n==="calendar"||r.id==="trading-journal"||r.id==="user-management"?t.jsxs("div",{className:"bg-gray-900 text-white p-2 md:p-4 h-full overflow-y-auto",style:{paddingTop:"0px"},children:[r.id==="trading-journal"&&t.jsxs("div",{className:"hidden md:flex justify-between items-center mb-6 border-b border-gray-600 pb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Mon Journal Perso"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Journal tous tes trades"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:async()=>{console.log("🔄 Rechargement des trades...");const p=await Y_();rn(p),console.log(`✅ ${p.length} trades rechargés depuis Firebase`)},className:"bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded-lg text-sm font-medium",title:"Recharger les trades depuis Firebase",children:"🔄 Recharger"}),t.jsx("button",{onClick:()=>{const p=localStorage.getItem("user_id");navigator.clipboard.writeText(p||""),alert(`ID copié dans le presse-papier: ${p||"Aucun ID trouvé"}`)},className:"bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-lg text-sm font-medium",title:"Copier ton ID utilisateur",children:"📋 Copier ID"}),t.jsx("button",{onClick:async()=>{console.log("🔍 DEBUG: Vérification Firebase...");const p=localStorage.getItem("user_id");console.log("🔍 ID utilisateur:",p);const{ref:T,get:R,query:A,orderByChild:O,limitToLast:H}=await $s(async()=>{const{ref:ve,get:_e,query:je,orderByChild:Ge,limitToLast:et}=await Promise.resolve().then(()=>Qo);return{ref:ve,get:_e,query:je,orderByChild:Ge,limitToLast:et}},void 0),{database:ie}=await $s(async()=>{const{database:ve}=await Promise.resolve().then(()=>Zo);return{database:ve}},void 0);try{const ve=T(ie,`personal_trades/${p}`),_e=A(ve,O("created_at"),H(10)),je=await R(_e);console.log("🔍 Snapshot existe:",je.exists()),console.log("🔍 Nombre de trades:",je.exists()?Object.keys(je.val()||{}).length:0),je.exists()&&je.forEach(Ge=>{console.log("📋 Trade trouvé:",Ge.key,Ge.val())})}catch(ve){console.error("❌ Erreur Firebase:",ve)}},className:"bg-green-600 hover:bg-green-500 px-4 py-2 rounded-lg text-sm font-medium",title:"Debug Firebase",children:"🔍 Debug Firebase"}),t.jsx("button",{onClick:D,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Trade"})]})]}),n==="calendar"&&r.id!=="trading-journal"&&t.jsx("div",{className:"flex justify-between items-center mb-6 border-b border-gray-600 pb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Journal des Signaux"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Suivi des performances des signaux"})]})}),r.id==="user-management"?t.jsxs("div",{className:"space-y-6",style:{paddingTop:"80px"},children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-gray-600 pb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Gestion Utilisateurs"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Gérer tous les utilisateurs de la plateforme"})]}),t.jsx("button",{onClick:()=>Un(!0),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-sm font-medium",children:"+ Ajouter Utilisateur"})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Statut"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Créé le"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Dernière connexion"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-700",children:Et.map(p=>t.jsxs("tr",{className:"hover:bg-gray-700",children:[t.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:p.email}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${p.status==="active"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:p.status==="active"?"Actif":"Inactif"})}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:new Date(p.created_at).toLocaleDateString("fr-FR")}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-300",children:p.last_sign_in_at?new Date(p.last_sign_in_at).toLocaleDateString("fr-FR"):"Jamais"}),t.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:t.jsx("button",{onClick:()=>{al(p),Xn(!0)},className:"text-red-400 hover:text-red-300",children:"🗑️"})})]},p.id))})]})})})]}):Be(),(console.log("Vérification affichage trades:",{channel:r.id,selectedDate:Nt,shouldShow:r.id==="trading-journal"&&Nt,tradesCount:Nt?v(Nt).length:0}),r.id==="trading-journal"&&Nt)&&t.jsxs("div",{className:"mt-8 border-t border-gray-600 pt-6",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Trades du ",Nt.toLocaleDateString("fr-FR")]}),v(Nt).length===0?t.jsx("div",{className:"text-center py-8 text-gray-400",children:"Aucun trade pour cette date"}):t.jsx("div",{className:"space-y-4",children:v(Nt).map(p=>t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${p.status==="WIN"?"bg-green-500 text-white":p.status==="LOSS"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:p.status}),t.jsx("span",{className:"text-white font-semibold",children:p.symbol}),t.jsx("span",{className:"text-gray-400",children:p.type})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:`text-lg font-bold ${parseFloat(p.pnl)>=0?"text-green-400":"text-red-400"}`,children:[parseFloat(p.pnl)>=0?"+":"",p.pnl,"$"]}),t.jsx("button",{onClick:async()=>{confirm("Supprimer ce trade ?")&&await lh(p.id)&&rn(R=>R.filter(A=>A.id!==p.id))},className:"text-red-400 hover:text-red-300 transition-colors",title:"Supprimer ce trade",children:"❌"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Entry:"}),t.jsx("span",{className:"text-white ml-2",children:p.entry})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Exit:"}),t.jsx("span",{className:"text-white ml-2",children:p.exit})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Stop Loss:"}),t.jsx("span",{className:"text-white ml-2",children:p.stopLoss||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-400",children:"Time:"}),t.jsx("span",{className:"text-white ml-2",children:p.timestamp})]})]}),p.notes&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[t.jsx("span",{className:"text-gray-400 text-sm",children:"Notes:"}),t.jsx("p",{className:"text-white text-sm mt-1",children:p.notes})]}),(p.image1||p.image2)&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[t.jsx("span",{className:"text-gray-400 text-sm",children:"Images:"}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[p.image1&&t.jsx("img",{src:p.image1,alt:"Trade screenshot 1",className:"w-20 h-20 object-cover rounded border border-gray-600"}),p.image2&&t.jsx("img",{src:p.image2,alt:"Trade screenshot 2",className:"w-20 h-20 object-cover rounded border border-gray-600"})]})]})]},p.id))})]})]}):t.jsx("div",{className:"p-4 md:p-6 space-y-4 w-full h-full overflow-y-auto",style:{paddingTop:"80px",paddingBottom:"100px"},children:n==="signals"&&!["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4","profit-loss","chatzone",""].includes(r.id)?t.jsx("div",{className:"space-y-4",children:wt.filter(p=>p.channel_id===r.id).length===0?t.jsx("div",{}):wt.filter(p=>p.channel_id===r.id).map(p=>{var T,R,A,O;return t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:Ss?t.jsx("img",{src:Ss,alt:"Profile",className:"w-full h-full object-cover"}):"A"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-white",children:"Admin"}),t.jsx("span",{className:"text-xs text-gray-400",children:p.timestamp})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 max-w-2xl md:max-w-2xl max-w-full",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${p.status==="ACTIVE"?"bg-green-500":"bg-gray-500"}`}),t.jsxs("h3",{className:"font-bold text-white text-lg",children:["Signal ",p.type," ",p.symbol," ",p.referenceNumber||""," – ",p.timeframe]})]}),t.jsxs("div",{className:"space-y-2",children:[p.entry!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Entrée : ",p.entry," USD"]})]}),p.stopLoss!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Stop Loss : ",p.stopLoss," USD"]})]}),p.takeProfit!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Take Profit : ",p.takeProfit," USD"]})]})]}),p.entry!=="N/A"&&p.takeProfit!=="N/A"&&p.stopLoss!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-red-400 text-sm",children:"🎯"}),t.jsxs("span",{className:"text-white text-sm",children:["Ratio R:R : ≈ ",vn(p.entry,p.takeProfit,p.stopLoss)]})]}),p.closeMessage&&t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-yellow-400 text-sm",children:"🔒"}),t.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:p.closeMessage})]})]})}),p.image&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:URL.createObjectURL(p.image),alt:"Signal screenshot",className:"max-w-full md:max-w-2xl rounded-lg border border-gray-600"})}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[t.jsx("button",{onClick:()=>b(p.id,p.status==="WIN"?"ACTIVE":"WIN"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${p.status==="WIN"?"bg-green-500 text-white shadow-lg shadow-green-500/20":"bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white"}`,children:"✅ WIN"}),t.jsx("button",{onClick:()=>b(p.id,p.status==="LOSS"?"ACTIVE":"LOSS"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${p.status==="LOSS"?"bg-red-500 text-white shadow-lg shadow-red-500/20":"bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white"}`,children:"❌ LOSS"}),t.jsx("button",{onClick:()=>b(p.id,p.status==="BE"?"ACTIVE":"BE"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${p.status==="BE"?"bg-blue-500 text-white shadow-lg shadow-blue-500/20":"bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white"}`,children:"⚖️ BE"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[t.jsxs("button",{onClick:()=>$n(p.id,"🔥"),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:["🔥 ",((T=p.reactions)==null?void 0:T.filter(H=>H==="🔥").length)||0]}),t.jsxs("button",{onClick:()=>$n(p.id,"💎"),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:["💎 ",((R=p.reactions)==null?void 0:R.filter(H=>H==="💎").length)||0]}),t.jsxs("button",{onClick:()=>$n(p.id,"🚀"),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:["🚀 ",((A=p.reactions)==null?void 0:A.filter(H=>H==="🚀").length)||0]}),t.jsxs("button",{onClick:()=>$n(p.id,"👏"),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:["👏 ",((O=p.reactions)==null?void 0:O.filter(H=>H==="👏").length)||0]})]})]})]},p.id)})}):r.id==="profit-loss"?t.jsx("div",{className:"flex flex-col h-full w-full",children:t.jsx(Lh,{channelId:"profit-loss",currentUserId:"admin"})}):r.id==="chatzone"?t.jsx("div",{className:"flex flex-col h-full w-full",children:t.jsx(Bg,{onUnreadCountChange:()=>{},isActive:!0})}):["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"].includes(r.id)?t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{ref:Pt,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4 pb-32",children:[r.id==="fondamentaux"&&t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[t.jsxs("div",{className:"text-center mb-8 p-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl text-white",children:[t.jsx("div",{className:"flex justify-center mb-0",children:t.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-48 w-auto object-cover",style:{clipPath:"inset(10% 5% 15% 5%)"}})}),t.jsx("p",{className:"text-xl opacity-90 -mt-3",children:"Guide complet des concepts fondamentaux et stratégies avancées"})]}),t.jsxs("div",{className:"space-y-6 text-gray-300",children:[t.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4",children:t.jsxs("p",{className:"text-yellow-200",children:[t.jsx("strong",{children:"📖 Avertissement :"})," Ce guide présente un ensemble de concepts appris et expérimentés sur les marchés financiers. Il ne s'agit pas d'inventions originales, mais d'un setup personnel basé sur l'observation et l'expérience pratique."]})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"1. 📚 Introduction"}),t.jsx("p",{children:"Ce document vous présente les fondamentaux essentiels pour comprendre comment les charts évoluent et ce qui influence leurs mouvements. L'objectif est de construire une base solide avant d'aborder les stratégies avancées."})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"2. 🧠 Fondamentaux des Charts"}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"📈 Qu'est-ce qu'une Chart ?"}),t.jsx("p",{className:"mb-3",children:"Une chart (ou graphique) est une représentation visuelle du prix d'un actif financier dans le temps (Bitcoin, or, actions, etc.)."}),t.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[t.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Elle permet de :"}),t.jsxs("ul",{className:"space-y-1 text-sm",children:[t.jsx("li",{children:"→ Voir comment le prix évolue"}),t.jsx("li",{children:"→ Trouver des points d'entrée/sortie"}),t.jsx("li",{children:"→ Comprendre le comportement du marché"})]})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"🕯️ Comprendre les Bougies"}),t.jsx("p",{className:"mb-3",children:"Chaque bougie montre l'évolution du prix sur une période donnée (1 min, 1h, 1 jour, etc.)"}),t.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[t.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Composition d'une bougie :"}),t.jsxs("ul",{className:"space-y-1 text-sm",children:[t.jsxs("li",{children:["→ ",t.jsx("strong",{children:"Le corps (body) :"})," différence entre ouverture et clôture"]}),t.jsxs("li",{children:["→ ",t.jsx("strong",{children:"Les mèches (wicks) :"})," les plus hauts et plus bas atteints"]}),t.jsxs("li",{children:["→ ",t.jsx("strong",{children:"Couleur :"})," verte/blanche si clôture > ouverture, rouge/noire si clôture < ouverture"]})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"3. 🧠 Mouvement des Prix (Modèle AMD)"}),t.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 mb-4",children:t.jsxs("p",{children:[t.jsx("strong",{children:"🚗💨 Analogie :"})," Le prix, c'est comme un voyage de A à B. Pour avancer, il a besoin de liquidité, comme une voiture a besoin d'essence."]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"1️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Accumulation"}),t.jsx("p",{className:"text-sm",children:"Le prix se prépare 🛑⛽"})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"2️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),t.jsx("p",{className:"text-sm",children:"Il piège les traders 🎯🪤"})]}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"3️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),t.jsx("p",{className:"text-sm",children:"Le vrai mouvement 🚀📈"})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"4. 📈 Support et Résistance"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[t.jsx("strong",{className:"text-green-300",children:"🔹 Support"}),t.jsx("br",{}),t.jsx("span",{className:"text-sm",children:"Zone où le prix rebondit vers le haut 🔼"})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[t.jsx("strong",{className:"text-red-300",children:"🔹 Résistance"}),t.jsx("br",{}),t.jsx("span",{className:"text-sm",children:"Zone où le prix bloque et redescend 🔽"})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"5. 🔬 Concepts Avancés"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"🧱 ORDER BLOCK (OB)"}),t.jsx("p",{className:"mb-2",children:"Un Order Block représente la dernière bougie haussière (ou baissière) avant un mouvement impulsif majeur dans la direction opposée."}),t.jsxs("div",{className:"text-sm text-blue-300",children:["→ Ces zones deviennent des repères de liquidité",t.jsx("br",{}),"→ Souvent retestées par le prix",t.jsx("br",{}),"→ Offrent des points d'entrée à fort potentiel"]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"⚡📉📈 FVG – Fair Value Gap"}),t.jsx("p",{className:"mb-2",children:"Un FVG est une zone de déséquilibre créée lors d'un mouvement rapide et violent du marché 🚀."}),t.jsxs("div",{className:"text-sm text-blue-300",children:["→ Le prix revient fréquemment combler ces gaps",t.jsx("br",{}),"→ Zones intéressantes pour entrer ou sortir d'une position"]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"🦄 Unicorn"}),t.jsx("p",{className:"mb-2",children:"C'est un setup formé par l'association d'un Breaker (BRKR) ⚡ et d'un Fair Value Gap (FVG) 📉."}),t.jsxs("div",{className:"text-sm text-blue-300",children:["→ Zone à forte probabilité de réaction du prix",t.jsx("br",{}),"→ Rassemble deux zones institutionnelles clés",t.jsx("br",{}),"→ Point d'entrée ou de prise de profit idéal"]})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"6. 🕵️ CRT – Candle Range Theory"}),t.jsx("p",{className:"mb-4",children:"La Candle Range Theory (CRT) est une méthode d'analyse basée sur 3 bougies consécutives."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"1️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"La Range"}),t.jsxs("p",{className:"text-sm",children:["Bougie avec grand corps",t.jsx("br",{}),"Zone de stagnation"]})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"2️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),t.jsxs("p",{className:"text-sm",children:["Va chercher la liquidité",t.jsx("br",{}),"Piège les traders"]})]}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"3️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),t.jsxs("p",{className:"text-sm",children:["Bougie directionnelle",t.jsx("br",{}),"Zone d'entrée"]})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:'7. 📌 Le Setup "A+"'}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 mb-4",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"PRINCIPE DU MODÈLE"}),t.jsx("p",{className:"mb-2",children:"Le principe du modèle, c'est de prendre position après la phase de manipulation ⏸️, sur la timeframe basse (LTF) du contexte défini sur la timeframe haute (HTF) 📊."}),t.jsx("p",{children:"🎯 Cela permet d'éviter les pièges des faux breakouts 🚫 et de s'aligner avec la vraie direction du mouvement ➡️."})]})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold mb-2",children:"⚠️ Avertissement Légal"}),t.jsx("p",{className:"text-sm",children:"Ce document est fourni à des fins éducatives uniquement. Le trading comporte des risques significatifs de perte financière. Il est essentiel de bien comprendre les risques avant de trader et ne jamais risquer plus que ce que vous pouvez vous permettre de perdre."})]})]})]}),(is[r.id]||[]).length>0&&(is[r.id]||[]).map(p=>{var T,R;return t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:p.author_avatar?t.jsx("img",{src:p.author_avatar,alt:"Profile",className:"w-full h-full object-cover"}):p.author===nt?"A":"TT"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-semibold text-white",children:p.author}),t.jsx("span",{className:"text-xs text-gray-400",children:p.timestamp})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 hover:shadow-lg hover:shadow-gray-900/50 transition-shadow duration-200 max-w-full break-words",children:[p.text&&t.jsx("div",{className:"text-white",children:p.text.includes("🎥 **Session Trading Live")?t.jsxs("div",{className:"bg-purple-900/30 border border-purple-500 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-purple-400",children:"🎥"}),t.jsx("span",{className:"font-semibold text-purple-300",children:"Session Trading Live - QUALITÉ HAUTE"})]}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔗"}),t.jsx("a",{href:"https://admintrading.app.100ms.live/meeting/kor-inbw-yiz",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"Rejoignez la room"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"⏱️"}),t.jsx("span",{className:"text-green-300",children:"Latence: ~100ms"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-orange-400",children:"📊"}),t.jsx("span",{className:"text-orange-300",children:"Partage d'écran 1080p activé"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-yellow-400",children:"🎯"}),t.jsx("span",{className:"text-yellow-300",children:"Qualité optimisée pour le trading"})]})]}),t.jsx("button",{onClick:()=>window.open("https://admintrading.app.100ms.live/meeting/kor-inbw-yiz","_blank"),className:"mt-3 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-white text-sm font-medium w-full",children:"👆 Cliquez pour rejoindre instantanément"})]}):t.jsx("p",{children:p.text})}),p.attachment_data&&t.jsx("div",{className:"mt-2",children:t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:p.attachment_data,alt:"Attachment",className:"mt-2 max-w-xs max-h-48 rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{const A=window.open();A.document.write(`<img src="${p.attachment_data}" style="max-width: 100%; height: auto;" />`),A.document.title="Image en grand"}}),t.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Cliquez pour agrandir"})]})})]}),t.jsx("div",{className:"mt-2 flex items-center gap-2",children:t.jsxs("button",{onClick:()=>Ar(p.id),className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs transition-all duration-200 ${(((T=Jn[p.id])==null?void 0:T.users)||[]).includes("Admin")?"bg-orange-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300 hover:text-white"}`,children:["🔥",t.jsx("span",{className:"ml-1",children:((R=Jn[p.id])==null?void 0:R.fire)||0})]})})]})]},p.id)}),t.jsx("div",{ref:Si})]}),t.jsx("div",{className:"border-t border-gray-700 p-4 fixed bottom-0 left-0 right-0 bg-gray-800 z-30 md:left-64",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:Pn,onChange:p=>Cn(p.target.value),onKeyPress:p=>p.key==="Enter"&&Z(),placeholder:"Tapez votre message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",onChange:we,className:"hidden",accept:"image/*,.pdf,.doc,.docx"}),t.jsx("span",{className:"bg-gray-600 hover:bg-gray-500 p-2 rounded-lg text-gray-300 hover:text-white",children:"📎"})]}),t.jsx("button",{onClick:P,className:"bg-green-600 hover:bg-green-700 px-3 py-2 rounded-lg text-white text-sm font-medium",children:"+ Signal"}),t.jsx("button",{onClick:Z,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white",children:"Envoyer"})]})})]}):r.id==="chat-communaute"?t.jsx(KR,{}):r.id==="livestream"?t.jsx("div",{className:"flex flex-col h-full bg-gray-900",children:t.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 p-4",children:[t.jsx("div",{className:"flex-1 bg-gray-900 rounded-lg overflow-hidden",children:t.jsx("div",{className:"h-full flex flex-col items-center justify-center p-8",children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto",children:t.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M8 5v14l11-7z"})})}),t.jsx("h2",{className:"text-xl font-bold text-white",children:"Livestream Trading"}),t.jsx("p",{className:"text-gray-400",children:"Session de trading en direct"}),t.jsxs("div",{className:"w-full max-w-7xl relative",children:[t.jsx("button",{onClick:()=>{const p=document.querySelector('iframe[src*="100ms.live"]');p&&p.requestFullscreen&&p.requestFullscreen()},className:"absolute top-4 right-4 z-10 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"📺 Plein écran"}),t.jsx("iframe",{src:"https://admintrading.app.100ms.live/meeting/kor-inbw-yiz",width:"100%",height:"1200px",style:{border:"none",borderRadius:"8px"},allow:"camera; microphone; display-capture; fullscreen",allowFullScreen:!0})]})]})})}),t.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-lg flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-gray-700",children:[t.jsx("h3",{className:"font-semibold text-white",children:"💬 Chat Live"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Commentaires en direct"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:(is.livestream||[]).length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-sm",children:"Aucun message"}),t.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Soyez le premier à commenter !"})]}):(is.livestream||[]).map(p=>t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{className:"h-6 w-6 bg-blue-500 rounded-full flex items-center justify-center text-xs",children:"T"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-medium text-white text-sm",children:p.author}),t.jsx("span",{className:"text-xs text-gray-400",children:p.timestamp})]}),t.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:t.jsx("p",{className:"text-white text-sm",children:p.text})})]})]},p.id))}),t.jsx("div",{className:"p-4 border-t border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:Pn,onChange:p=>Cn(p.target.value),onKeyPress:p=>p.key==="Enter"&&Z(),placeholder:"Commenter le stream...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 text-sm"}),t.jsx("button",{onClick:Z,className:"bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-white text-sm",children:"Envoyer"})]})})]})]})}):r.id==="chatzone"?t.jsx("div",{className:"flex flex-col h-full w-full",children:t.jsx(Bg,{onUnreadCountChange:()=>{},isActive:!0})}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-sm",children:"Bienvenue sur Admin"}),t.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Plateforme de trading en cours de développement"})]})})})]}),t.jsx("div",{className:"hidden md:block flex-1 overflow-y-auto overflow-x-hidden",children:n==="calendar"||r.id==="trading-journal"||r.id==="user-management"?Be():t.jsx("div",{className:"p-4 md:p-6 space-y-4 w-full",style:{paddingTop:"80px"},children:n==="signals"&&!["fondamentaux","letsgooo-model","general-chat","general-chat-2","general-chat-3","general-chat-4","chatzone",""].includes(r.id)?t.jsx("div",{className:"space-y-4",children:wt.filter(p=>p.channel_id===r.id).length===0?t.jsx("div",{}):wt.filter(p=>p.channel_id===r.id).reverse().map(p=>{var T,R,A,O;return t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-white",children:"Admin"}),t.jsx("span",{className:"text-xs text-gray-400",children:p.timestamp})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 max-w-full md:max-w-2xl",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${p.status==="ACTIVE"?"bg-green-500":"bg-gray-500"}`}),t.jsxs("h3",{className:"font-bold text-white text-lg",children:["Signal ",p.type," ",p.symbol," ",p.referenceNumber||""," – ",p.timeframe]})]}),t.jsxs("div",{className:"space-y-2",children:[p.entry!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Entrée : ",p.entry," USD"]})]}),p.stopLoss!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Stop Loss : ",p.stopLoss," USD"]})]}),p.takeProfit!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsxs("span",{className:"text-white",children:["Take Profit : ",p.takeProfit," USD"]})]})]}),p.entry!=="N/A"&&p.takeProfit!=="N/A"&&p.stopLoss!=="N/A"&&t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-red-400 text-sm",children:"🎯"}),t.jsxs("span",{className:"text-white text-sm",children:["Ratio R:R : ≈ ",vn(p.entry,p.takeProfit,p.stopLoss)]})]}),p.closeMessage&&t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-yellow-400 text-sm",children:"🔒"}),t.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:p.closeMessage})]})]})}),p.image&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:URL.createObjectURL(p.image),alt:"Signal screenshot",className:"max-w-full md:max-w-2xl rounded-lg border border-gray-600"})}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[t.jsx("button",{onClick:()=>b(p.id,p.status==="WIN"?"ACTIVE":"WIN"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${p.status==="WIN"?"bg-green-500 text-white shadow-lg shadow-green-500/20":"bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white"}`,children:"✅ WIN"}),t.jsx("button",{onClick:()=>b(p.id,p.status==="LOSS"?"ACTIVE":"LOSS"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${p.status==="LOSS"?"bg-red-500 text-white shadow-lg shadow-red-500/20":"bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white"}`,children:"❌ LOSS"}),t.jsx("button",{onClick:()=>b(p.id,p.status==="BE"?"ACTIVE":"BE"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1 ${p.status==="BE"?"bg-blue-500 text-white shadow-lg shadow-blue-500/20":"bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white"}`,children:"⚖️ BE"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[t.jsxs("button",{onClick:()=>$n(p.id,"🔥"),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:["🔥 ",((T=p.reactions)==null?void 0:T.filter(H=>H==="🔥").length)||0]}),t.jsxs("button",{onClick:()=>$n(p.id,"💎"),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:["💎 ",((R=p.reactions)==null?void 0:R.filter(H=>H==="💎").length)||0]}),t.jsxs("button",{onClick:()=>$n(p.id,"🚀"),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:["🚀 ",((A=p.reactions)==null?void 0:A.filter(H=>H==="🚀").length)||0]}),t.jsxs("button",{onClick:()=>$n(p.id,"👏"),className:"px-3 py-1.5 rounded-full text-sm transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white",children:["👏 ",((O=p.reactions)==null?void 0:O.filter(H=>H==="👏").length)||0]})]})]})]},p.id)})}):r.id===""?t.jsx("div",{className:"flex flex-col h-full",children:t.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 p-4",children:[t.jsx("div",{className:"flex-1 bg-gray-900 rounded-lg overflow-hidden",children:Qn?t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsx("div",{className:"bg-gray-800 p-4 border-b border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:Ts}),t.jsx("p",{className:"text-sm text-gray-400",children:fn})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[t.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm font-medium",children:"EN DIRECT"})]}),t.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),t.jsxs("span",{className:"text-sm",children:[us," spectateurs"]})]}),t.jsx("button",{onClick:Fr,className:"bg-gray-600 hover:bg-gray-500 px-3 py-1 rounded text-sm text-white",children:"Arrêter"})]})]})}),t.jsx("div",{className:"flex-1 bg-black flex items-center justify-center",children:t.jsxs("div",{className:"text-center text-gray-400",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-lg flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})})}),t.jsx("p",{className:"text-sm",children:"Stream en cours..."}),t.jsx("p",{className:"text-xs mt-1",children:"Partagez votre écran TradingView"})]})})]}):t.jsx("div",{className:"h-full flex flex-col items-center justify-center p-8",children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto",children:t.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M8 5v14l11-7z"})})}),t.jsx("h2",{className:"text-xl font-bold text-white",children:"Aucun stream en cours"}),t.jsx("p",{className:"text-gray-400",children:"Commencez votre session de trading en direct"}),t.jsxs("div",{className:"space-y-3 max-w-md mx-auto",children:[t.jsx("input",{type:"text",placeholder:"Titre du stream (ex: Session TradingView - EURUSD)",value:Ts,onChange:p=>Xt(p.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),t.jsx("textarea",{placeholder:"Description (optionnel)",value:fn,onChange:p=>Es(p.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500",rows:2}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:ci,className:"flex-1 bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-white font-medium",children:"🎥 Démarrer Stream"}),t.jsx("button",{onClick:Hi,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white",children:"📺 Partager Écran"})]})]})]})})}),t.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-lg flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-gray-700",children:[t.jsx("h3",{className:"font-semibold text-white",children:"💬 Chat Live"}),t.jsxs("p",{className:"text-xs text-gray-400",children:[us," spectateurs en ligne"]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:(is[""]||[]).length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-sm",children:"Aucun message"}),t.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Soyez le premier à commenter !"})]}):(is[""]||[]).map(p=>t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{className:"h-6 w-6 bg-blue-500 rounded-full flex items-center justify-center text-xs",children:"T"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-medium text-white text-sm",children:p.author}),t.jsx("span",{className:"text-xs text-gray-400",children:p.timestamp})]}),t.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:t.jsx("p",{className:"text-white text-sm",children:p.text})})]})]},p.id))}),t.jsx("div",{className:"p-4 border-t border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:Pn,onChange:p=>Cn(p.target.value),onKeyPress:p=>p.key==="Enter"&&Z(),placeholder:"Commenter le stream...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 text-sm"}),t.jsx("button",{onClick:Z,className:"bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-white text-sm",children:"Envoyer"})]})})]})]})}):r.id==="profit-loss"?t.jsx("div",{className:"flex flex-col h-full w-full",children:t.jsx(Lh,{channelId:"profit-loss",currentUserId:"admin"})}):["fondamentaux","letsgooo-model","general-chat-2","general-chat-3","general-chat-4"].includes(r.id)?t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{ref:Pt,className:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4 pb-32",children:[(is[r.id]||[]).length>0&&(is[r.id]||[]).map(p=>{var T,R,A;return t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm overflow-hidden",children:p.author===nt&&Ss?t.jsx("img",{src:Ss,alt:"Profile",className:"w-full h-full object-cover"}):p.author_avatar?t.jsx("img",{src:p.author_avatar,alt:"Profile",className:"w-full h-full object-cover"}):"A"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-semibold text-white",children:p.author}),t.jsx("span",{className:"text-xs text-gray-400",children:p.timestamp}),t.jsx("button",{onClick:()=>va(p.id,r.id),className:"ml-auto text-red-400 hover:text-red-300 transition-colors",title:"Supprimer ce message",children:"🗑️"})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 hover:shadow-lg hover:shadow-gray-900/50 transition-shadow duration-200 max-w-full break-words","data-signal-id":p.text.includes("[SIGNAL_ID:")?(T=p.text.match(/\[SIGNAL_ID:([^\]]+)\]/))==null?void 0:T[1]:void 0,children:[t.jsx("div",{className:"text-white",children:p.text.includes("[SIGNAL_ID:")?t.jsxs(t.Fragment,{children:[p.text.split("[SIGNAL_ID:")[0],t.jsxs("span",{className:"text-gray-700 text-xs",children:["[SIGNAL_ID:",p.text.split("[SIGNAL_ID:")[1].split("]")[0],"]"]}),p.text.split("]").slice(1).join("]"),(()=>{const O=p.text.includes("SIGNAL FERMÉ");return console.log("🔍 Debug flèche - message.text:",p.text),console.log("🔍 Debug flèche - isClosureMessage:",O),O})()&&t.jsx("span",{className:"ml-2 text-blue-400 hover:text-blue-300 cursor-pointer text-lg transition-colors inline-block",onClick:()=>{const O=p.text.match(/\[SIGNAL_ID:([^\]]+)\]/),H=O?O[1]:"";console.log("🔍 Debug flèche - signalId extrait:",H),console.log("🔍 Debug flèche - message.text:",p.text);const ie=document.querySelector(`[data-signal-id="${H}"]`);console.log("🔍 Debug flèche - élément trouvé:",ie),ie?(ie.scrollIntoView({behavior:"smooth",block:"center"}),ie.classList.add("ring-2","ring-blue-400","ring-opacity-50"),setTimeout(()=>{ie.classList.remove("ring-2","ring-blue-400","ring-opacity-50")},3e3),console.log("✅ Navigation vers le signal original réussie")):console.log("❌ Signal original non trouvé")},title:"Aller au signal original",children:"⬆️"})]}):p.text}),p.attachment_data&&t.jsx("div",{className:"mt-2",children:t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:p.attachment_data,alt:"Attachment",className:"mt-2 max-w-xs max-h-48 rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Te(p.attachment_data)}),t.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Cliquez pour agrandir"})]})}),p.text.includes("[SIGNAL_ID:")&&!p.text.includes("SIGNAL FERMÉ")&&(()=>{const O=p.text.match(/\[SIGNAL_ID:([^\]]+)\]/),H=O?O[1]:"",ie=wt.find(_e=>_e.id===H),ve=ie&&["WIN","LOSS","BE"].includes(ie.status);return t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-400",children:"Résultat du signal:"}),t.jsx("button",{onClick:()=>G(p.text,"WIN"),disabled:ve,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${ve&&(ie==null?void 0:ie.status)==="WIN"?"bg-green-500 text-white border-2 border-green-400 shadow-lg scale-105":ve?"bg-gray-500/30 text-gray-400 border border-gray-500/30 cursor-not-allowed opacity-50":"bg-green-400/20 hover:bg-green-400/30 text-green-300 border border-green-400/30 hover:scale-105"}`,children:"🟢 WIN"}),t.jsx("button",{onClick:()=>G(p.text,"LOSS"),disabled:ve,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${ve&&(ie==null?void 0:ie.status)==="LOSS"?"bg-red-500 text-white border-2 border-red-400 shadow-lg scale-105":ve?"bg-gray-500/30 text-gray-400 border border-gray-500/30 cursor-not-allowed opacity-50":"bg-red-400/20 hover:bg-red-400/30 text-red-300 border border-red-400/30 hover:scale-105"}`,children:"🔴 LOSS"}),t.jsx("button",{onClick:()=>G(p.text,"BE"),disabled:ve,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${ve&&(ie==null?void 0:ie.status)==="BE"?"bg-blue-500 text-white border-2 border-blue-400 shadow-lg scale-105":ve?"bg-gray-500/30 text-gray-400 border border-gray-500/30 cursor-not-allowed opacity-50":"bg-blue-400/20 hover:bg-blue-400/30 text-blue-300 border border-blue-400/30 hover:scale-105"}`,children:"🔵 BE"})]}),ve&&t.jsx("div",{className:"mt-2 text-xs text-gray-400",children:t.jsxs("span",{className:"cursor-pointer text-blue-400 hover:text-blue-300 underline",onClick:()=>{const _e=document.querySelector(`[data-signal-id="${H}"]`);_e&&(_e.scrollIntoView({behavior:"smooth",block:"center"}),_e.classList.add("ring-2","ring-blue-400","ring-opacity-50"),setTimeout(()=>{_e.classList.remove("ring-2","ring-blue-400","ring-opacity-50")},3e3))},children:["Signal ",(ie==null?void 0:ie.referenceNumber)||""," fermé avec ",ie!=null&&ie.pnl?`P&L: ${ie.pnl}`:"aucun P&L"]})})]})})()]}),t.jsx("div",{className:"mt-2 flex items-center gap-2",children:t.jsxs("button",{onClick:()=>Ar(p.id),className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs transition-all duration-200 ${(((R=Jn[p.id])==null?void 0:R.users)||[]).includes("Admin")?"bg-orange-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300 hover:text-white"}`,children:["🔥",t.jsx("span",{className:"ml-1",children:((A=Jn[p.id])==null?void 0:A.fire)||0})]})})]})]},p.id)}),t.jsx("div",{ref:Si})]}),t.jsx("div",{className:"border-t border-gray-700 p-4 fixed bottom-0 left-0 right-0 bg-gray-800 z-10 md:left-64 md:right-0",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:Pn,onChange:p=>Cn(p.target.value),onKeyPress:p=>p.key==="Enter"&&Z(),placeholder:"Tapez votre message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",onChange:we,className:"hidden",accept:"image/*,.pdf,.doc,.docx"}),t.jsx("span",{className:"bg-gray-600 hover:bg-gray-500 p-2 rounded-lg text-gray-300 hover:text-white",children:"📎"})]}),t.jsx("button",{onClick:P,className:"bg-green-600 hover:bg-green-700 px-3 py-2 rounded-lg text-white text-sm font-medium",children:"+ Signal"}),t.jsx("button",{onClick:Z,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white",children:"Envoyer"})]})})]}):r.id==="chatzone"?t.jsx("div",{className:"flex flex-col h-full w-full",children:t.jsx(Bg,{})}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-sm",children:"Bienvenue sur Admin"}),t.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Plateforme de trading en cours de développement"})]})})})]}),De&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Créer un signal"}),t.jsx("button",{onClick:()=>ue(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"📋 Coller données TradingView"}),t.jsx("button",{onClick:()=>Ke(!gr),className:`text-xs px-2 py-1 rounded ${gr?"bg-blue-600 text-white":"bg-gray-600 text-gray-300"}`,children:gr?"🔧 Debug ON":"🔧 Debug OFF"})]}),t.jsx("div",{className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 min-h-[80px] flex items-center justify-center cursor-pointer",onPaste:si,onDrop:p=>{p.preventDefault();const T=p.dataTransfer.getData("text");T&&si({preventDefault:()=>{},clipboardData:{getData:A=>A==="text/html"?"":A==="text"?T:""}})},onDragOver:p=>p.preventDefault(),children:xn?t.jsx("div",{className:"text-blue-400",children:"🔄 Traitement en cours..."}):t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"📋 Cliquez ici et collez (Ctrl+V)"}),t.jsx("div",{className:"text-xs text-gray-500",children:"ou glissez-déposez du texte"})]})}),ti&&t.jsx("p",{className:"text-xs text-red-400 mt-1",children:ti}),gr&&an&&t.jsxs("div",{className:"text-xs text-gray-400 mt-1 bg-gray-900 p-2 rounded",children:[t.jsx("div",{className:"font-semibold",children:"Debug:"}),t.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:an})]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Collez directement depuis TradingView (Risk/Reward tool)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Ls({...Fe,type:"BUY"}),className:`px-3 py-2 rounded text-sm ${Fe.type==="BUY"?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:"📈 BUY"}),t.jsx("button",{onClick:()=>Ls({...Fe,type:"SELL"}),className:`px-3 py-2 rounded text-sm ${Fe.type==="SELL"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:"📉 SELL"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Symbole"}),t.jsx("input",{type:"text",value:Fe.symbol,onChange:p=>Ls({...Fe,symbol:p.target.value}),placeholder:"BTCUSD, EURUSD, etc.",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Timeframe"}),t.jsx("input",{type:"text",value:Fe.timeframe,onChange:p=>Ls({...Fe,timeframe:p.target.value}),placeholder:"1 min, 5 min, 1H, etc.",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix d'entrée"}),t.jsx("input",{type:"text",value:Fe.entry,onChange:p=>Ls({...Fe,entry:p.target.value}),placeholder:"103474.00 USD",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Take Profit"}),t.jsx("input",{type:"text",value:Fe.takeProfit,onChange:p=>Ls({...Fe,takeProfit:p.target.value}),placeholder:"104626.00 USD",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stop Loss"}),t.jsx("input",{type:"text",value:Fe.stopLoss,onChange:p=>Ls({...Fe,stopLoss:p.target.value}),placeholder:"102862.00 USD",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),t.jsx("textarea",{value:Fe.description,onChange:p=>Ls({...Fe,description:p.target.value}),placeholder:"Notes supplémentaires...",rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Capture d'écran"}),t.jsx("input",{type:"file",accept:"image/*",onChange:p=>{var R;const T=(R=p.target.files)==null?void 0:R[0];T&&Ls({...Fe,image:T})},className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:()=>ue(!1),className:"flex-1 bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Annuler"}),t.jsx("button",{onClick:E,className:"flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white",children:"Créer le signal"})]})]})]})})}),hr&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Ajouter un utilisateur"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:kn.email,onChange:p=>xs({...kn,email:p.target.value}),className:"w-full p-3 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500",placeholder:"email@exemple.com"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mot de passe"}),t.jsx("input",{type:"password",value:kn.password,onChange:p=>xs({...kn,password:p.target.value}),className:"w-full p-3 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500",placeholder:"Mot de passe"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>Un(!1),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Annuler"}),t.jsx("button",{onClick:he,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Créer"})]})]})}),Cr&&Zn&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Confirmer la suppression"}),t.jsxs("p",{className:"text-gray-300 mb-6",children:["Êtes-vous sûr de vouloir supprimer l'utilisateur ",t.jsx("strong",{children:Zn.email})," ? Cette action est irréversible."]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>Xn(!1),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Annuler"}),t.jsx("button",{onClick:()=>Oe(Zn.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Supprimer"})]})]})}),Cs&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Ajouter un trade"}),t.jsx("button",{onClick:()=>ks(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"📋 Coller données TradingView"}),t.jsx("div",{className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 min-h-[80px] flex items-center justify-center cursor-pointer",onPaste:h,onDrop:p=>{p.preventDefault();const T=p.dataTransfer.getData("text");T&&h({preventDefault:()=>{},clipboardData:{getData:A=>A==="text/html"?"":A==="text"?T:""}})},onDragOver:p=>p.preventDefault(),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"📋 Cliquez ici et collez (Ctrl+V)"}),t.jsx("div",{className:"text-xs text-gray-500",children:"ou glissez-déposez du texte"})]})}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Collez directement depuis TradingView"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>$t({...He,type:"BUY"}),className:`px-3 py-2 rounded text-sm ${He.type==="BUY"?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:"📈 BUY"}),t.jsx("button",{onClick:()=>$t({...He,type:"SELL"}),className:`px-3 py-2 rounded text-sm ${He.type==="SELL"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:"📉 SELL"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Symbole *"}),t.jsx("input",{type:"text",value:He.symbol,onChange:p=>$t({...He,symbol:p.target.value}),placeholder:"BTC, ETH, NQ1!, etc.",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix d'entrée *"}),t.jsx("input",{type:"text",value:He.entry,onChange:p=>$t({...He,entry:p.target.value}),placeholder:"45000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix de sortie *"}),t.jsx("input",{type:"text",value:He.exit,onChange:p=>$t({...He,exit:p.target.value}),placeholder:"46000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stop Loss"}),t.jsx("input",{type:"text",value:He.stopLoss,onChange:p=>$t({...He,stopLoss:p.target.value}),placeholder:"44000",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"P&L *"}),t.jsx("input",{type:"text",value:He.pnl,onChange:p=>$t({...He,pnl:p.target.value}),placeholder:"+500 ou -200",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Résultat"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>$t({...He,status:"WIN"}),className:`px-3 py-2 rounded text-sm ${He.status==="WIN"?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:"✅ WIN"}),t.jsx("button",{onClick:()=>$t({...He,status:"LOSS"}),className:`px-3 py-2 rounded text-sm ${He.status==="LOSS"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:"❌ LOSS"}),t.jsx("button",{onClick:()=>$t({...He,status:"BE"}),className:`px-3 py-2 rounded text-sm ${He.status==="BE"?"bg-blue-600 text-white":"bg-gray-600 text-gray-300"}`,children:"⚖️ BE"})]})]}),He.status==="LOSS"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Raison du Stop-Loss"}),t.jsxs("select",{value:He.lossReason,onChange:p=>$t({...He,lossReason:p.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:[t.jsx("option",{value:"",children:"Sélectionner une raison..."}),Ot.map(p=>t.jsxs("option",{value:p.value,children:[p.emoji," ",p.label]},p.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),t.jsx("textarea",{value:He.notes,onChange:p=>$t({...He,notes:p.target.value}),placeholder:"Notes sur le trade...",rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Image 1"}),t.jsx("input",{type:"file",accept:"image/*",onChange:p=>{var R;const T=(R=p.target.files)==null?void 0:R[0];T&&$t({...He,image1:T})},className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Image 2"}),t.jsx("input",{type:"file",accept:"image/*",onChange:p=>{var R;const T=(R=p.target.files)==null?void 0:R[0];T&&$t({...He,image2:T})},className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:()=>ks(!1),className:"flex-1 bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Annuler"}),t.jsx("button",{onClick:$,className:"flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white",children:"Ajouter le trade"})]})]})]})})}),Ne&&Qe&&v(Qe).length>0&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-white",children:["Trades du ",Qe.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),t.jsx("button",{onClick:()=>Ye(!1),className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),t.jsx("div",{className:"space-y-4",children:v(Qe).map(p=>t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${p.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:p.type}),t.jsx("span",{className:"text-lg font-bold text-white",children:p.symbol})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:`text-lg font-bold ${p.pnl&&parseFloat(p.pnl)>=0?"text-green-400":"text-red-400"}`,children:[p.pnl&&parseFloat(p.pnl)>=0?"+":"",p.pnl||"0","$"]}),t.jsx("button",{onClick:async()=>{confirm("Supprimer ce trade ?")&&await lh(p.id)&&rn(R=>R.filter(A=>A.id!==p.id))},className:"text-red-400 hover:text-red-300 text-xl font-bold",title:"Supprimer ce trade",children:"×"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),t.jsx("span",{className:"text-white ml-2",children:p.entry})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Exit:"}),t.jsx("span",{className:"text-white ml-2",children:p.exit})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),t.jsx("span",{className:"text-white ml-2",children:p.stopLoss})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Status:"}),t.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${p.status==="WIN"?"bg-green-600 text-white":p.status==="LOSS"?"bg-red-600 text-white":"bg-blue-600 text-white"}`,children:p.status})]})]}),p.notes&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Notes:"}),t.jsx("p",{className:"text-white mt-1",children:p.notes})]}),(p.image1||p.image2)&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Images:"}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[p.image1&&t.jsx("div",{className:"relative",children:t.jsx("img",{src:p.image1 instanceof File?URL.createObjectURL(p.image1):p.image1,alt:"Trade image 1",className:"w-20 h-20 object-cover rounded border border-gray-600"})}),p.image2&&t.jsx("div",{className:"relative",children:t.jsx("img",{src:p.image2 instanceof File?URL.createObjectURL(p.image2):p.image2,alt:"Trade image 2",className:"w-20 h-20 object-cover rounded border border-gray-600"})})]})]}),t.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400",children:t.jsxs("span",{children:["Ajouté le ",p.timestamp]})})]},p.id))}),t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:t.jsx("button",{onClick:()=>Ye(!1),className:"w-full bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Fermer"})})]})})}),Re&&An&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-white",children:["Signaux du ",An.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),t.jsx("button",{onClick:()=>dt(!1),className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),t.jsx("div",{className:"space-y-4",children:(()=>{const p=w(An);return console.log("🔍 [POPUP ADMIN] Signaux trouvés:",p.length),p.forEach(T=>{console.log("🔍 [POPUP ADMIN] Signal individuel:",{id:T.id,symbol:T.symbol,image:T.image,attachment_data:T.attachment_data,closure_image:T.closure_image,closure_image_type:T.closure_image_type,closure_image_name:T.closure_image_name,ALL_KEYS:Object.keys(T)})}),p})().map(p=>{var T;return t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600 relative",children:[t.jsx("button",{onClick:async()=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce signal ?"))try{const R=ls(os,`signals/${p.id}`);await cm(R),Ws(A=>A.filter(O=>O.id!==p.id)),rs(A=>A.filter(O=>O.id!==p.id)),console.log("✅ Signal supprimé:",p.id)}catch(R){console.error("❌ Erreur suppression signal:",R),alert("Erreur lors de la suppression")}},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-red-600 hover:bg-red-700 text-white rounded-full text-xs font-bold transition-colors",children:"×"}),t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${p.type==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:p.type}),t.jsx("span",{className:"text-lg font-bold text-white",children:p.symbol}),t.jsx("span",{className:"text-sm text-gray-400",children:p.timeframe})]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${p.status==="WIN"?"bg-green-600 text-white":p.status==="LOSS"?"bg-red-600 text-white":p.status==="BE"?"bg-blue-600 text-white":"bg-yellow-600 text-white"}`,children:p.status})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Entry:"}),t.jsx("span",{className:"text-white ml-2",children:p.entry})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Take Profit:"}),t.jsx("span",{className:"text-white ml-2",children:p.takeProfit})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Stop Loss:"}),t.jsx("span",{className:"text-white ml-2",children:p.stopLoss})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Channel:"}),t.jsx("span",{className:"text-white ml-2",children:((T=k.find(R=>R.id===p.channel_id))==null?void 0:T.fullName)||p.channel_id})]})]}),p.pnl&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"P&L:"}),t.jsx("span",{className:`ml-2 font-bold ${p.pnl.includes("+")||p.pnl.includes("GAGNANT")?"text-green-400":p.pnl.includes("-")||p.pnl.includes("PERDANT")?"text-red-400":"text-yellow-400"}`,children:p.pnl})]}),p.description&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Description:"}),t.jsx("p",{className:"text-white mt-1",children:p.description})]}),(p.attachment_data||p.closure_image)&&t.jsxs("div",{className:"mb-3",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Images du signal:"}),t.jsxs("div",{className:"mt-2 space-y-3 flex flex-col items-center",children:[p.attachment_data&&t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"📸 Image de création:"}),t.jsx("div",{className:"mt-1",children:t.jsx("img",{src:p.attachment_data,alt:"Signal screenshot",className:"max-w-2xl rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Te(p.attachment_data)})})]}),p.closure_image&&t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"📸 Image de fermeture:"}),t.jsx("div",{className:"mt-1",children:t.jsx("img",{src:p.closure_image,alt:"Signal closure screenshot",className:"max-w-2xl rounded-lg border border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Te(p.closure_image)})})]})]})]}),t.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400",children:t.jsxs("span",{children:["Créé le ",p.timestamp]})})]},p.id)})}),t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:t.jsx("button",{onClick:()=>dt(!1),className:"w-full bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-white",children:"Fermer"})})]})})}),ur&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>Te(null),children:t.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[t.jsx("img",{src:ur,alt:"Image agrandie",className:"max-w-full max-h-full object-contain rounded-lg",onClick:p=>p.stopPropagation()}),t.jsx("button",{onClick:()=>Te(null),className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white rounded-full w-10 h-10 flex items-center justify-center text-xl",children:"×"})]})}),ce&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Ajouter un nouveau compte"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Nom du compte"}),t.jsx("input",{type:"text",value:Ee,onChange:p=>te(p.target.value),placeholder:"Ex: Compte Demo",className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 focus:outline-none focus:border-blue-500",onKeyPress:p=>p.key==="Enter"&&Ys()})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Balance initiale ($)"}),t.jsx("input",{type:"number",value:be,onChange:p=>Se(p.target.value),placeholder:"Ex: 10000",className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 focus:outline-none focus:border-blue-500",onKeyPress:p=>p.key==="Enter"&&Ys()})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Balance minimum ($)"}),t.jsx("input",{type:"number",value:Ae,onChange:p=>B(p.target.value),placeholder:"Ex: 5000 (seuil d'arrêt)",className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 focus:outline-none focus:border-blue-500",onKeyPress:p=>p.key==="Enter"&&Ys()})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:Ys,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium",children:"Créer le compte"}),t.jsx("button",{onClick:()=>{I(!1),te(""),Se(""),B("")},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium",children:"Annuler"})]})]})}),M&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"📢 Envoyer une notification"}),t.jsx("button",{onClick:()=>{F(!1),Y("")},className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Message à envoyer"}),t.jsx("textarea",{value:K,onChange:p=>Y(p.target.value),placeholder:"Tapez votre message ici...",className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 h-24 resize-none focus:outline-none focus:border-blue-500",maxLength:200}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[K.length,"/200 caractères"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:Ct,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"Envoyer"}),t.jsx("button",{onClick:()=>{F(!1),Y("")},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium",children:"Annuler"})]})]})}),Q&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"🔴 Notification Livestream"}),t.jsx("button",{onClick:()=>{U(!1),xe("")},className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Message de notification"}),t.jsx("textarea",{value:gt,onChange:p=>xe(p.target.value),placeholder:"Exemple: 📈 Nouveau signal BTC en cours ! Entrée à 45,000$ - TP: 47,500$ - SL: 43,500$",className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 h-24 resize-none focus:outline-none focus:border-red-500 placeholder-gray-400",maxLength:200}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[gt.length,"/200 caractères"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:ei,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium",children:"Envoyer"}),t.jsx("button",{onClick:()=>{U(!1),xe("")},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium",children:"Annuler"})]})]})}),Vt&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-gray-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-white",children:"⚙️ Gérer les raisons de perte"}),t.jsx("button",{onClick:()=>{Bn(!1),zs(null),Zt({value:"",emoji:"",label:""})},className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),t.jsxs("div",{className:"mb-6 p-4 bg-gray-700 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:Yt!==null?"✏️ Modifier la raison":"➕ Ajouter une raison"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[t.jsx("input",{type:"text",placeholder:"Emoji",value:ys.emoji,onChange:p=>Zt({...ys,emoji:p.target.value}),className:"bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white text-center text-2xl",maxLength:2,disabled:Yt!==null}),t.jsx("input",{type:"text",placeholder:"Nom",value:ys.label,onChange:p=>{const T=p.target.value,R=T.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");Zt({...ys,label:T,value:R})},className:"flex-1 bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{if(!ys.label.trim()){alert("Entre un nom");return}if(Yt!==null){if(!ys.label.trim()){alert("Entre un nom");return}const p=[...Ot];p[Yt]=ys,pn(p),localStorage.setItem("customLossReasons",JSON.stringify(p)),zs(null)}else{if(!ys.value||!ys.emoji||!ys.label){alert("Remplis tous les champs");return}const p=[...Ot,ys];pn(p),localStorage.setItem("customLossReasons",JSON.stringify(p))}Zt({value:"",emoji:"",label:""})},className:"flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white font-medium",children:Yt!==null?"✓ Modifier":"+ Ajouter"}),Yt!==null&&t.jsx("button",{onClick:()=>{zs(null),Zt({value:"",emoji:"",label:""})},className:"bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded text-white",children:"Annuler"})]})]}),t.jsxs("div",{className:"space-y-2 mb-6",children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:["Raisons actuelles (",Ot.length,") :"]}),Ot.map((p,T)=>t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors",children:[t.jsx("span",{className:"text-2xl",children:p.emoji}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-white font-medium",children:p.label}),t.jsx("div",{className:"text-xs text-gray-400 font-mono",children:p.value})]}),t.jsx("button",{onClick:()=>{Zt(p),zs(T)},className:"text-blue-400 hover:text-blue-300 px-3 py-1 text-sm",title:"Modifier le nom",children:"✏️"})]},T))]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{confirm("Réinitialiser aux raisons par défaut ?")&&(pn(Pl),localStorage.setItem("customLossReasons",JSON.stringify(Pl)),zs(null),Zt({value:"",emoji:"",label:""}))},className:"flex-1 bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded text-white font-medium",children:"🔄 Réinitialiser"}),t.jsx("button",{onClick:()=>{Bn(!1),zs(null),Zt({value:"",emoji:"",label:""})},className:"flex-1 bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded text-white font-medium",children:"Fermer"})]})]})})})]})}const y6=({channelId:r="chatzone"})=>{const[e,n]=L.useState([]),[a,o]=L.useState(""),[c,d]=L.useState(null),[f,y]=L.useState(null),[x,N]=L.useState(""),[_,S]=L.useState(null),[V,z]=L.useState(null),[re,ce]=L.useState(!0),[I,Ee]=L.useState(!1),te=L.useRef(null),[be,Se]=L.useState(null),[Ae,B]=L.useState(null),[M,F]=L.useState(""),[K,Y]=L.useState(!1);L.useEffect(()=>{(async()=>{try{console.log("🔄 Initialisation Supabase UserChat..."),n([]),console.log("🧹 Messages de démo forcément éliminés");const Ne=await Kn();if(Ne){Se(Ne),console.log("✅ Utilisateur Supabase chargé:",Ne.email);const{data:Re}=await zu("user");Re&&(B(Re),console.log("✅ Profil utilisateur chargé:",Re));const dt=await kx(Ne.id);Y(dt),console.log("👑 Status admin côté user:",dt)}else console.log("❌ Aucun utilisateur Supabase connecté côté user");const{data:Ye}=await cs.from("chat_channels").select("id").eq("name",r).single();if(Ye){F(Ye.id),console.log("✅ Canal trouvé côté user:",Ye.id);const{data:Re}=await xj(Ye.id);if(Re&&Re.length>0){const dt=Re.map(Qe=>{var bs,An;return{id:Qe.id,text:Qe.content,user:((bs=Qe.author)==null?void 0:bs.name)||Qe.author_name||((An=Qe.author)==null?void 0:An.email)||"Utilisateur",userId:Qe.author_id,time:new Date(Qe.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),timestamp:Qe.created_at,reactions:{}}});n(dt),console.log("✅ Messages SUPABASE chargés côté user:",dt.length)}else n([]),console.log("✅ AUCUN message - ChatZone vide par design")}else n([]),console.log("✅ Aucun canal - ChatZone vide par design")}catch(Ne){console.error("❌ Erreur initialisation Supabase côté user:",Ne)}finally{ce(!1),console.log("✅ Initialisation UserChat terminée")}})()},[r]),L.useEffect(()=>{if(!M)return;console.log("🔔 UserChat - Abonnement temps réel pour canal:",M);const ue=yj(M,Ne=>{var Re,dt;console.log("📨 UserChat - Nouveau message reçu:",Ne);const Ye={id:Ne.id,text:Ne.content,user:((Re=Ne.author)==null?void 0:Re.name)||Ne.author_name||((dt=Ne.author)==null?void 0:dt.email)||"Utilisateur",userId:Ne.author_id,time:new Date(Ne.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),timestamp:Ne.created_at,reactions:{}};n(Qe=>[...Qe,Ye])});return()=>{ue&&(ue.unsubscribe(),console.log("🔕 UserChat - Désabonnement temps réel"))}},[M]),L.useEffect(()=>{var ue;(ue=te.current)==null||ue.scrollIntoView({behavior:"smooth"})},[e]);const Q=async()=>{if(!(!a.trim()||I||!be||!M)){Ee(!0);try{console.log("📤 UserChat - Envoi message vers Supabase...",{content:a.trim(),channelId:M});const{data:ue,error:Ne}=await pj(M,a.trim());Ne?console.error("❌ UserChat - Erreur envoi message Supabase:",Ne):console.log("✅ UserChat - Message envoyé via Supabase:",ue),o(""),d(null)}catch(ue){console.error("❌ UserChat - Erreur envoi message:",ue)}finally{Ee(!1)}}},U=ue=>{console.log("⚠️ startEdit désactivé pour le moment"),S(null)},gt=()=>{console.log("⚠️ saveEdit désactivé pour le moment"),y(null),N("")},xe=async ue=>{console.log("⚠️ deleteMsg désactivé pour le moment"),S(null)},le=(ue,Ne)=>{ue.preventDefault(),S({x:ue.clientX,y:ue.clientY,msg:Ne})},fe=(ue,Ne)=>{const Ye=setTimeout(()=>{const Re=ue.touches[0];S({x:Re.clientX,y:Re.clientY,msg:Ne})},500);z(Ye)},ke=()=>{V&&(clearTimeout(V),z(null))},at=()=>S(null),W=(ue,Ne)=>{ue==="reply"&&d(Ne),ue==="edit"&&U(),ue==="delete"&&xe(Ne.id),at()},ge=ue=>ue.senderId==="user_1",De=ue=>e.find(Ne=>Ne.id===ue.replyTo);return t.jsxs("div",{style:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",fontFamily:"Arial, sans-serif",background:"#1a202c"},onClick:at,children:[t.jsxs("div",{style:{flex:1,overflowY:"auto",background:"#2d3748",padding:"15px"},children:[re&&t.jsx("div",{style:{textAlign:"center",color:"#a0aec0",padding:"20px",fontSize:"14px"},children:"🔄 Chargement des messages..."}),e.map(ue=>{const Ne=ge(ue),Ye=De(ue);return t.jsx("div",{style:{display:"flex",justifyContent:Ne?"flex-end":"flex-start",marginBottom:"8px"},children:t.jsxs("div",{style:{maxWidth:"70%",padding:"8px 12px",borderRadius:"18px",background:Ne?"#4299e1":"#4a5568",color:Ne?"#ffffff":"#e2e8f0",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)",fontSize:"14px",cursor:"pointer",userSelect:"none"},onContextMenu:Re=>le(Re,ue),onTouchStart:Re=>fe(Re,ue),onTouchEnd:ke,onTouchMove:ke,children:[!Ne&&t.jsx("div",{style:{fontWeight:"bold",color:"#4299e1",fontSize:"13px",marginBottom:"3px"},children:ue.sender}),Ye&&t.jsxs("div",{style:{fontSize:"12px",color:"#a0aec0",borderLeft:"3px solid #4299e1",margin:"4px 0 8px 0",background:"rgba(66, 153, 225, 0.1)",padding:"8px 10px",borderRadius:"8px",minHeight:"auto"},children:[t.jsxs("div",{style:{fontWeight:"bold",fontSize:"11px",marginBottom:"3px"},children:["↪ ",Ye.sender]}),t.jsx("div",{style:{wordWrap:"break-word",lineHeight:"1.3"},children:Ye.text})]}),t.jsx("div",{children:ue.deleted?t.jsx("span",{style:{color:"#718096",fontStyle:"italic"},children:"🚫 Message supprimé"}):f===ue.id?t.jsxs("div",{children:[t.jsx("input",{value:x,onChange:Re=>N(Re.target.value),onKeyDown:Re=>{Re.key==="Enter"&&gt(),Re.key==="Escape"&&(y(null),N(""))},onBlur:gt,autoFocus:!0,style:{width:"100%",padding:"6px",border:"1px solid #4299e1",borderRadius:"4px",fontSize:"14px",outline:"none",background:"#2d3748",color:"#e2e8f0"}}),t.jsx("div",{style:{fontSize:"11px",color:"#a0aec0",marginTop:"2px"},children:"Entrée = sauver, Échap = annuler"})]}):ue.text}),t.jsxs("div",{style:{fontSize:"11px",color:"#a0aec0",textAlign:"right",marginTop:"4px"},children:[ue.time,ue.edited&&t.jsx("span",{style:{color:"#4299e1"},children:" ✏️"})]})]})},ue.id)}),t.jsx("div",{ref:te})]}),_&&t.jsxs("div",{style:{position:"fixed",left:_.x,top:_.y,background:"#4a5568",border:"1px solid #2d3748",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e3,minWidth:"140px",overflow:"hidden"},onClick:ue=>ue.stopPropagation(),children:[t.jsx("div",{style:{padding:"10px 15px",cursor:"pointer",fontSize:"14px",color:"#4299e1",fontWeight:"500",borderBottom:"1px solid #2d3748"},onClick:()=>W("reply",_.msg),children:"↩️ Répondre"}),_.msg.senderId==="user_1"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{padding:"10px 15px",cursor:"pointer",fontSize:"14px",color:"#ed8936",fontWeight:"500",borderBottom:"1px solid #2d3748"},onClick:()=>W("edit",_.msg),children:"✏️ Modifier"}),t.jsx("div",{style:{padding:"10px 15px",cursor:"pointer",fontSize:"14px",color:"#f56565",fontWeight:"500"},onClick:()=>W("delete",_.msg),children:"🗑️ Supprimer"})]})]}),t.jsxs("div",{style:{padding:"15px",background:"#1a202c",borderTop:"1px solid #2d3748"},children:[c&&t.jsx("div",{style:{marginBottom:"8px",background:"#2d3748",padding:"8px 12px",borderRadius:"8px",fontSize:"13px",borderLeft:"3px solid #ed8936"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("div",{children:[t.jsxs("strong",{style:{color:"#e2e8f0"},children:["Réponse à ",c.sender,":"]}),t.jsx("div",{style:{color:"#a0aec0",marginTop:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:c.text})]}),t.jsx("span",{style:{cursor:"pointer",color:"#f56565",fontSize:"16px"},onClick:()=>d(null),children:"❌"})]})}),t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("input",{style:{flex:1,padding:"12px 16px",borderRadius:"25px",border:"1px solid #4a5568",fontSize:"14px",outline:"none",background:"#2d3748",color:"#e2e8f0"},value:a,onChange:ue=>o(ue.target.value),onKeyDown:ue=>ue.key==="Enter"&&Q(),placeholder:"Écrire un message..."}),t.jsx("button",{style:{padding:"12px 20px",borderRadius:"25px",backgroundColor:I?"#718096":"#4299e1",color:"#fff",border:"none",fontSize:"14px",cursor:I?"not-allowed":"pointer",fontWeight:"bold",opacity:I?.7:1},onClick:Q,disabled:!a.trim()||I,children:I?"⏳ Envoi...":"📤 Envoyer"})]})]})]})};function v6(){const[r,e]=L.useState(!1);return t.jsxs("div",{style:{padding:"20px"},children:[t.jsx("h1",{children:"Livestream Trading"}),t.jsx("button",{onClick:()=>e(!r),children:r?"Arrêter Live":"Démarrer Live"}),r&&t.jsx("iframe",{src:"https://tote-livestream-033.app.100ms.live/streaming/meeting/hzs-ukns-nts",width:"100%",height:"600px",style:{marginTop:"20px",border:"none"}})]})}function b6(){const[r,e]=L.useState(!1);return t.jsxs("div",{style:{padding:"20px"},children:[t.jsx("h1",{children:"Livestream Trading"}),t.jsx("button",{onClick:()=>e(!r),children:r?"Arrêter Live":"Démarrer Live"}),r&&t.jsx("iframe",{src:"https://tote-livestream-033.app.100ms.live/streaming/meeting/hzs-ukns-nts",width:"100%",height:"600px",style:{marginTop:"20px",border:"none"}})]})}const w6=()=>{const[r,e]=L.useState("default"),[n,a]=L.useState(null);L.useEffect(()=>{"Notification"in window&&e(Notification.permission)},[]);const o=async()=>{if(!("Notification"in window))return console.log("Ce navigateur ne supporte pas les notifications"),!1;try{const f=await Notification.requestPermission();return e(f),f==="granted"}catch(f){return console.error("Erreur lors de la demande de permission:",f),!1}};return{permission:r,subscription:n,requestPermission:o,subscribeToPush:async()=>{if(r!=="granted"&&!await o())return null;try{const y=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BEl62iUYgUivxIkv69yViEuiBIa1l9aTvkV8AGjfHXgBxGXGNzrKzJULdJDHNVpDBiGFjJSqXr6cHgDmu7QN4rE"});return a(y),console.log("Abonnement push créé:",y),y}catch(f){return console.error("Erreur lors de l'abonnement push:",f),null}},sendTestNotification:async()=>{if(r!=="granted"){console.log("Permission non accordée");return}try{await(await navigator.serviceWorker.ready).showNotification("Test TheTheTrader",{body:"Ceci est un test de notification !",icon:"/FAVICON.png",badge:"/FAVICON.png"})}catch(f){console.error("Erreur lors de l'envoi de notification:",f)}}}},N6=()=>{const[r,e]=L.useState(!1);return L.useEffect(()=>{const n=()=>{const o=window.matchMedia("(display-mode: standalone)").matches,c=window.navigator.standalone===!0||!1,d=document.fullscreenElement!==null;try{e(o||c||d)}catch{e(!1)}};n();const a=window.matchMedia("(display-mode: standalone)");return a.addEventListener("change",n),()=>{a.removeEventListener("change",n)}},[]),{isPWA:r}},_6=()=>{var Y,Q,U,gt;const[r,e]=L.useState(null),[n,a]=L.useState(!1),[o,c]=L.useState("home");L.useEffect(()=>{window.setCurrentPage=c,window.getCurrentPage=()=>o},[o]),L.useEffect(()=>{window.location.pathname==="/admin"&&(c("admin"),console.log("🔍 Admin auth check:",localStorage.getItem("adminAuthenticated")))},[]),L.useEffect(()=>{const xe=()=>{window.location.hash.substring(1)==="livestream"&&c("livestream")};return xe(),window.addEventListener("hashchange",xe),()=>{window.removeEventListener("hashchange",xe)}},[]),L.useEffect(()=>{const xe=document.querySelector('link[rel="manifest"]');xe&&(o==="admin"?xe.href="/manifest-admin.json":xe.href="/manifest.json")},[o]);const[d,f]=L.useState(""),[y,x]=L.useState(""),[N,_]=L.useState("crypto"),[S,V]=L.useState("crypto"),[z,re]=L.useState(null),[ce,I]=L.useState(!1),[Ee,te]=L.useState({fondamentaux:[{type:"FORMATION",symbol:"ANALYSE",entry:"Module 1: Bases du trading",takeProfit:"Support/Résistance",stopLoss:"Théorie + pratique",rr:"Éducation",status:"ACTIVE",pnl:""},{type:"FORMATION",symbol:"STRATÉGIE",entry:"Module 2: Stratégies avancées",takeProfit:"Risk Management",stopLoss:"Psychologie trading",rr:"Formation",status:"ACTIVE",pnl:""}],"letsgooo-model":[{type:"MODÈLE",symbol:"SETUP",entry:"Configuration modèle pro",takeProfit:"Validation setup",stopLoss:"Optimisation paramètres",rr:"Pro",status:"WIN",pnl:"+$850"},{type:"MODÈLE",symbol:"BACKTEST",entry:"Résultats backtest",takeProfit:"Performance validée",stopLoss:"Analyse historique",rr:"Modèle",status:"ACTIVE",pnl:""}],crypto:[],futur:[],forex:[],chatzone:[],"profit-loss":[],calendar:[],"trading-journal":[]}),[be,Se]=L.useState({beginners:0,analyses:0,generated:0});w6();const{isPWA:Ae}=N6();L.useEffect(()=>(Ae&&r?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height=""}),[Ae,r]),L.useEffect(()=>{const xe=new Image;xe.src="/images/tradingview-chart.png"},[]),L.useEffect(()=>{const xe=le=>{le.preventDefault(),window.deferredPrompt=le};return window.addEventListener("beforeinstallprompt",xe),()=>{window.removeEventListener("beforeinstallprompt",xe)}},[]),L.useEffect(()=>{const xe={beginners:1e3,analyses:300,generated:5e4},le=2e3,fe=60,ke=le/fe,W=setTimeout(()=>{let ge=0;const De=setInterval(()=>{ge++;const ue=ge/fe;Se({beginners:Math.floor(xe.beginners*ue),analyses:Math.floor(xe.analyses*ue),generated:Math.floor(xe.generated*ue)}),ge>=fe&&(clearInterval(De),Se(xe))},ke)},500);return()=>{clearTimeout(W)}},[]);const B={fondamentaux:{title:"#fondamentaux",messages:[{id:1,user:"TheTheTrader",time:"09:15:30",type:"formation",content:{title:"📚 Module 1: Les bases du trading",image:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400&h=250&fit=crop",description:"Introduction complète aux marchés financiers",duration:"45 min",progress:"100%",topics:["Types de marchés","Ordres de base","Gestion du risque"]}},{id:2,user:"TheTheTrader",time:"10:30:45",type:"formation",content:{title:"📊 Module 2: Analyse technique",image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=250&fit=crop",description:"Maîtrisez les indicateurs techniques",duration:"1h20",progress:"75%",topics:["Support/Résistance","Indicateurs","Patterns"]}},{id:3,user:"TheTheTrader",time:"11:45:20",type:"formation",content:{title:"🎯 Module 3: Psychologie du trader",image:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=250&fit=crop",description:"Développez votre mindset de trader",duration:"55 min",progress:"60%",topics:["Gestion émotionnelle","Discipline","Patience"]}}]},"letsgooo-model":{title:"#letsgooo-model",messages:[{id:1,user:"TheTheTrader",time:"14:20:15",type:"formation",content:{title:"🚀 Stratégie Letsgooo - Partie 1",image:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400&h=250&fit=crop",description:"Découvrez notre stratégie exclusive",duration:"1h30",progress:"100%",topics:["Setup d'entrée","Timing parfait","Gestion"]}},{id:2,user:"TheTheTrader",time:"15:45:30",type:"formation",content:{title:"⚡ Letsgooo - Applications pratiques",image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=250&fit=crop",description:"Exemples concrets en temps réel",duration:"2h15",progress:"80%",topics:["Cas d'étude","Backtesting","Optimisation"]}}]},crypto:{title:"#crypto",messages:[{id:1,user:"TheTheTrader",time:"02:03:22",type:"signal",status:"ACTIVE",content:{title:"🟢 Signal BUY BTCUSD Futures – 1 min",details:[{icon:"🔹",label:"Entrée",value:"103474.00 USD"},{icon:"🔹",label:"Stop Loss",value:"102862.00 USD"},{icon:"🔹",label:"Take Profit",value:"104626.00 USD"},{icon:"🎯",label:"Ratio R:R",value:"≈ 1.88"}],reactions:[{emoji:"🔥",count:12},{emoji:"💎",count:8},{emoji:"🚀",count:15}]}},{id:2,user:"TheTheTrader",time:"02:06:33",type:"update",content:`Signal précédent: Objectif 1 atteint ! 🎯

+1.2% en 3 minutes - félicitations à tous les membres qui ont suivi 🔥`,reactions:[{emoji:"🎉",count:24},{emoji:"💰",count:18},{emoji:"🚀",count:12}]},{id:3,user:"TheTheTrader",time:"02:15:45",type:"signal",status:"ACTIVE",content:{title:"🔴 Signal SELL ETHUSD Futures – 5 min",details:[{icon:"🔹",label:"Entrée",value:"2845.50 USD"},{icon:"🔹",label:"Stop Loss",value:"2875.20 USD"},{icon:"🔹",label:"Take Profit",value:"2815.80 USD"},{icon:"🎯",label:"Ratio R:R",value:"≈ 1.65"}],reactions:[{emoji:"⚡",count:9},{emoji:"📉",count:6},{emoji:"💎",count:11}]}}]},forex:{title:"#forex",messages:[{id:1,user:"TheTheTrader",time:"01:45:12",type:"signal",status:"ACTIVE",content:{title:"🟢 Signal BUY EURUSD – 15 min",details:[{icon:"🔹",label:"Entrée",value:"1.0845 EUR"},{icon:"🔹",label:"Stop Loss",value:"1.0820 EUR"},{icon:"🔹",label:"Take Profit",value:"1.0895 EUR"},{icon:"🎯",label:"Ratio R:R",value:"≈ 2.00"}],reactions:[{emoji:"💶",count:15},{emoji:"🚀",count:9}]}},{id:2,user:"TheTheTrader",time:"01:52:30",type:"update",content:`✅ Signal GBPUSD fermé en profit +45 pips
📈 Excellent momentum sur les paires EUR today`,reactions:[{emoji:"💸",count:21},{emoji:"🎯",count:12}]},{id:3,user:"TheTheTrader",time:"02:10:15",type:"signal",status:"ACTIVE",content:{title:"🔴 Signal SELL USDJPY – 30 min",details:[{icon:"🔹",label:"Entrée",value:"148.25 JPY"},{icon:"🔹",label:"Stop Loss",value:"148.85 JPY"},{icon:"🔹",label:"Take Profit",value:"147.45 JPY"},{icon:"🎯",label:"Ratio R:R",value:"≈ 1.75"}],reactions:[{emoji:"🇯🇵",count:8},{emoji:"📉",count:12},{emoji:"💎",count:6}]}}]},futur:{title:"#futur",messages:[{id:1,user:"TheTheTrader",time:"01:30:45",type:"signal",status:"ACTIVE",content:{title:"🟡 Signal BUY GOLD Futures – 1H",details:[{icon:"🔹",label:"Entrée",value:"2045.50 USD"},{icon:"🔹",label:"Stop Loss",value:"2038.20 USD"},{icon:"🔹",label:"Take Profit",value:"2058.80 USD"},{icon:"🎯",label:"Ratio R:R",value:"≈ 1.85"}],reactions:[{emoji:"🥇",count:18},{emoji:"📈",count:11}]}},{id:2,user:"TheTheTrader",time:"02:05:20",type:"signal",status:"ACTIVE",content:{title:"🟢 Signal BUY SP500 Futures – 4H",details:[{icon:"🔹",label:"Entrée",value:"4850.25 USD"},{icon:"🔹",label:"Stop Loss",value:"4835.80 USD"},{icon:"🔹",label:"Take Profit",value:"4880.50 USD"},{icon:"🎯",label:"Ratio R:R",value:"≈ 2.10"}],reactions:[{emoji:"📊",count:14},{emoji:"🚀",count:9},{emoji:"💎",count:7}]}}]},education:{title:"#education",messages:[{id:1,user:"TheTheTrader",time:"09:00:00",type:"message",content:`📚 Cours du jour: Les bases du Money Management

🎯 Règle #1: Ne jamais risquer plus de 2% par trade
💰 Règle #2: Toujours définir votre SL avant d'entrer`,reactions:[{emoji:"📖",count:45},{emoji:"💡",count:32},{emoji:"🎓",count:28}]},{id:2,user:"TheTheTrader",time:"09:15:30",type:"message",content:`📊 Exercice pratique: Calculez votre position size

Compte: 10,000€
Risque max: 2%
Distance SL: 50 pips

Quelle lot size utilisez-vous? 🤔`,reactions:[{emoji:"🧮",count:23},{emoji:"🤔",count:15}]},{id:3,user:"TheTheTrader",time:"10:30:00",type:"message",content:`📈 Analyse technique: Les 3 niveaux clés

🔹 Support: Zone où le prix rebondit
🔹 Résistance: Zone où le prix recule
🔹 Breakout: Rupture d'un niveau

Quel niveau surveillez-vous aujourd'hui? 📊`,reactions:[{emoji:"📊",count:31},{emoji:"🎯",count:18},{emoji:"💡",count:12}]}]},calendar:{title:"📅 Journal Signaux",messages:[{id:1,user:"TheTheTrader",time:"08:00:00",type:"calendar",content:"📊 Performance Trading - Janvier 2025",calendarData:{stats:{winRate:"78",totalPnL:"+2,450€",totalTrades:28,bestDay:"+156€",worstDay:"-89€"},days:[{date:1,trades:2,pnl:"+45€",status:"win"},{date:2,trades:1,pnl:"+12€",status:"win"},{date:3,trades:3,pnl:"-23€",status:"loss"},{date:4,trades:0,pnl:"0€",status:"none"},{date:5,trades:0,pnl:"0€",status:"none"},{date:6,trades:2,pnl:"+67€",status:"win"},{date:7,trades:1,pnl:"0€",status:"be"},{date:8,trades:2,pnl:"+89€",status:"win"},{date:9,trades:3,pnl:"+156€",status:"win"},{date:10,trades:1,pnl:"-45€",status:"loss"},{date:11,trades:0,pnl:"0€",status:"none"},{date:12,trades:0,pnl:"0€",status:"none"},{date:13,trades:2,pnl:"+34€",status:"win"},{date:14,trades:1,pnl:"0€",status:"be"},{date:15,trades:2,pnl:"+78€",status:"win"}]},reactions:[{emoji:"📈",count:34},{emoji:"💰",count:28},{emoji:"🔥",count:19}]}]},chatzone:{title:"#chatzone",messages:[]},"profit-loss":{title:"#profit-loss",messages:[{id:1,user:"Crypto_Trader_23",time:"08:00:00",type:"message",content:`📊 Mes résultats de la semaine:

💰 P&L Total: +$847
📈 Win Rate: 85.7%
🎯 Meilleur trade: +$156 (BTC)
📉 Pire trade: -$45 (ETH)

🔥 Première semaine positive !`,reactions:[{emoji:"💰",count:25},{emoji:"🔥",count:18}]},{id:2,user:"Forex_Master",time:"09:15:30",type:"message",content:`📈 Mes stats détaillées:

• Trades gagnants: 12/15
• Trades perdants: 3/15
• Ratio moyen: 1.8:1
• Drawdown max: 2.1%

🎯 Objectif: Maintenir >80% win rate`,reactions:[{emoji:"📈",count:22},{emoji:"🎯",count:15}]},{id:3,user:"Futures_Pro",time:"10:30:45",type:"message",content:`💎 Résultats exceptionnels cette semaine:

💰 P&L: +$2,156
📈 Win Rate: 92.3%
🎯 15 trades gagnants sur 16
📉 Seulement 1 trade perdant

🚀 La stratégie Letsgooo fonctionne parfaitement !`,reactions:[{emoji:"💎",count:38},{emoji:"🚀",count:29}]},{id:4,user:"Beginner_Trader",time:"11:45:20",type:"message",content:`📚 Mes premiers résultats:

💰 P&L: +$89
📈 Win Rate: 75%
🎯 3 trades gagnants sur 4
📉 1 trade perdant: -$23

💡 Merci pour la formation, ça marche !`,reactions:[{emoji:"📚",count:12},{emoji:"💡",count:8}]},{id:5,user:"Scalping_King",time:"12:20:15",type:"message",content:`⚡ Session de scalping réussie:

💰 P&L: +$456
📈 Win Rate: 88.9%
🎯 8 trades gagnants sur 9
⏱️ Session de 2h

🔥 Le scalping avec les signaux crypto est incroyable !`,reactions:[{emoji:"⚡",count:31},{emoji:"🔥",count:24}]}]}};(Y=B[N])!=null&&Y.messages;const M=async()=>{if(d&&y)try{const{data:xe,error:le}=await cs.auth.signInWithPassword({email:d,password:y});if(le){console.error("Erreur de connexion:",le.message),alert("Identifiants incorrects. Veuillez vérifier votre email et mot de passe.");return}xe.user&&(console.log("Connexion réussie:",xe.user.email),e({id:xe.user.id,email:xe.user.email||d}),a(!1))}catch(xe){console.error("Erreur de connexion:",xe),alert("Erreur de connexion. Veuillez réessayer.")}},F=async()=>{try{await cs.auth.signOut(),e(null),f(""),x(""),c("home"),console.log("Déconnexion réussie")}catch(xe){console.error("Erreur de déconnexion:",xe)}},K=()=>{const xe={"mentions-legales":{title:"Mentions légales",content:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Mentions légales"}),t.jsxs("div",{className:"space-y-4 text-gray-300",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Dénomination sociale :"})," TheTheTrader"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Activité :"})," Plateforme éducative de trading et signaux financiers"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Hébergeur :"})," Netlify, Inc. - 2325 3rd Street, Suite 296, San Francisco, CA 94107"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Directeur de publication :"})," TheTheTrader"]}),t.jsx("p",{className:"text-sm text-gray-400",children:"Dernière mise à jour : Janvier 2025"})]})]})},"politique-confidentialite":{title:"Politique de confidentialité",content:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Politique de confidentialité"}),t.jsxs("div",{className:"space-y-4 text-gray-300",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Collecte des données"}),t.jsx("p",{children:"Nous collectons uniquement les données nécessaires au fonctionnement de notre service : adresse email pour la création de compte."}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Utilisation des données"}),t.jsx("p",{children:"Vos données sont utilisées pour vous fournir l'accès à nos signaux de trading et contenus éducatifs."}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Protection des données"}),t.jsx("p",{children:"Nous mettons en place toutes les mesures techniques et organisationnelles pour protéger vos données personnelles."}),t.jsx("p",{className:"text-sm text-gray-400",children:"Conformément au RGPD. Dernière mise à jour : Janvier 2025"})]})]})},"conditions-utilisation":{title:"Conditions d'utilisation",content:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Conditions d'utilisation"}),t.jsxs("div",{className:"space-y-4 text-gray-300",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Acceptation des conditions"}),t.jsx("p",{children:"En utilisant TheTheTrader, vous acceptez ces conditions d'utilisation."}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Services fournis"}),t.jsx("p",{children:"Nous fournissons des signaux de trading, du contenu éducatif et des outils d'analyse à des fins informatives uniquement."}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Responsabilités"}),t.jsx("p",{children:"Vous êtes seul responsable de vos décisions de trading. Nos services ne constituent pas des conseils financiers personnalisés."}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Limitation de responsabilité"}),t.jsx("p",{children:"TheTheTrader ne peut être tenu responsable des pertes financières résultant de l'utilisation de nos services."}),t.jsx("p",{className:"text-sm text-gray-400",children:"Dernière mise à jour : Janvier 2025"})]})]})},"avertissement-risques":{title:"Avertissement sur les risques",content:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Avertissement sur les risques"}),t.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6 mb-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-red-400 text-xl flex-shrink-0 mt-1",children:"⚠️"}),t.jsxs("div",{className:"space-y-4 text-gray-300",children:[t.jsx("p",{children:t.jsx("strong",{className:"text-red-400",children:"RISQUE ÉLEVÉ DE PERTE EN CAPITAL"})}),t.jsx("p",{children:"Le trading de produits financiers comporte un risque élevé de perte en capital. Vous pourriez perdre tout ou partie de votre investissement initial."}),t.jsxs("p",{children:[t.jsx("strong",{children:"Les performances passées ne garantissent pas les résultats futurs."})," Les signaux et analyses présentés sur cette plateforme ne constituent pas des conseils en investissement personnalisés."]}),t.jsx("p",{children:t.jsx("strong",{children:"Ne tradez qu'avec des fonds que vous pouvez vous permettre de perdre."})}),t.jsx("p",{children:"Les produits dérivés (CFD, Forex, Futures) sont particulièrement risqués en raison de l'effet de levier."}),t.jsxs("p",{children:[t.jsx("strong",{children:"Consultez un conseiller financier professionnel"})," avant toute décision d'investissement importante."]})]})]})})]})},"conflits-interets":{title:"Conflits d'intérêts",content:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Conflits d'intérêts"}),t.jsxs("div",{className:"space-y-4 text-gray-300",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Transparence"}),t.jsx("p",{children:"TheTheTrader s'engage à une transparence totale concernant les potentiels conflits d'intérêts."}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Partenariats"}),t.jsx("p",{children:"Nous pouvons recevoir des commissions de la part de brokers partenaires. Ces partenariats n'influencent pas nos analyses."}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Positions personnelles"}),t.jsx("p",{children:"Nos analystes peuvent détenir des positions sur les instruments analysés. Cela sera mentionné le cas échéant."}),t.jsx("p",{className:"text-sm text-gray-400",children:"Dernière mise à jour : Janvier 2025"})]})]})},"cookies-traceurs":{title:"Cookies et traceurs",content:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Cookies et traceurs"}),t.jsxs("div",{className:"space-y-4 text-gray-300",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Utilisation des cookies"}),t.jsx("p",{children:"Nous utilisons des cookies pour améliorer votre expérience utilisateur et analyser l'utilisation de notre site."}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Types de cookies"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Cookies techniques :"})," Nécessaires au fonctionnement du site"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Cookies analytiques :"})," Pour comprendre l'utilisation du site"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Cookies de préférences :"})," Pour mémoriser vos choix"]})]}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Gestion des cookies"}),t.jsx("p",{children:"Vous pouvez gérer vos préférences de cookies dans les paramètres de votre navigateur."}),t.jsx("p",{className:"text-sm text-gray-400",children:"Dernière mise à jour : Janvier 2025"})]})]})},"support-client":{title:"Support client",content:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Support client"}),t.jsxs("div",{className:"space-y-4 text-gray-300",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Comment nous contacter"}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-6",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Email :"})," support@tradingpourlesnuls.com"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Heures d'ouverture :"})," Lundi - Vendredi, 9h00 - 18h00 (CET)"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Temps de réponse moyen :"})," 24-48 heures"]})]})}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Questions fréquentes"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[t.jsx("p",{children:t.jsx("strong",{children:"Q: Comment accéder aux signaux ?"})}),t.jsx("p",{children:"R: Créez un compte et connectez-vous pour accéder à tous nos signaux en temps réel."})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[t.jsx("p",{children:t.jsx("strong",{children:"Q: Les signaux sont-ils gratuits ?"})}),t.jsx("p",{children:"R: Oui, notre service est actuellement gratuit pour tous les utilisateurs inscrits."})]})]})]})]})},"signalement-incident":{title:"Signalement d'incident",content:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Signalement d'incident"}),t.jsxs("div",{className:"space-y-4 text-gray-300",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Signaler un problème"}),t.jsx("p",{children:"Si vous rencontrez un problème technique ou souhaitez signaler un incident, contactez-nous immédiatement."}),t.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-6",children:[t.jsx("h4",{className:"text-yellow-400 font-semibold mb-3",children:"🚨 Signalement d'urgence"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Email prioritaire :"})," incident@tradingpourlesnuls.com"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Objet :"})," [URGENT] - Description du problème"]})]})]}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Types d'incidents à signaler"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[t.jsx("li",{children:"Problèmes de sécurité"}),t.jsx("li",{children:"Bugs critiques de la plateforme"}),t.jsx("li",{children:"Erreurs dans les signaux"}),t.jsx("li",{children:"Problèmes d'accès au compte"})]})]})]})},"nous-contacter":{title:"Nous contacter",content:t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Nous contacter"}),t.jsxs("div",{className:"space-y-4 text-gray-300",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Informations de contact"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[t.jsx("h4",{className:"text-white font-semibold mb-3",children:"📧 Contact général"}),t.jsx("p",{children:"contact@tradingpourlesnuls.com"})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[t.jsx("h4",{className:"text-white font-semibold mb-3",children:"🛠️ Support technique"}),t.jsx("p",{children:"support@tradingpourlesnuls.com"})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[t.jsx("h4",{className:"text-white font-semibold mb-3",children:"📈 Partenariats"}),t.jsx("p",{children:"business@tradingpourlesnuls.com"})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[t.jsx("h4",{className:"text-white font-semibold mb-3",children:"⚖️ Questions légales"}),t.jsx("p",{children:"legal@tradingpourlesnuls.com"})]})]}),t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Horaires d'ouverture"}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-6",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Lundi - Vendredi :"})," 9h00 - 18h00 (CET)"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Week-end :"})," Fermé"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Jours fériés :"})," Fermé"]})]})})]})]})},livestream:{title:"Livestream Trading",content:r?t.jsx(v6,{}):t.jsx(b6,{})}};if(o==="home"||!xe[o])return null;const le=xe[o];return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[t.jsxs("nav",{className:"flex items-center justify-between p-4 sm:p-6 relative z-50 border-b border-purple-700/50",children:[t.jsxs("button",{onClick:()=>c("home"),className:"flex items-center gap-2 text-gray-300 hover:text-white transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Retour"]}),t.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:le.title}),t.jsx("div",{className:"w-20"})]}),t.jsx("div",{className:"max-w-4xl mx-auto p-6 sm:p-8",children:le.content})]})};return o==="admin"?localStorage.getItem("adminAuthenticated")==="true"?t.jsx(x6,{}):t.jsx(vR,{onLogin:le=>{console.log("✅ Admin connecté dans App.tsx:",le.user.email),localStorage.setItem("adminAuthenticated","true"),localStorage.setItem("adminUser",JSON.stringify(le.user)),c("temp"),setTimeout(()=>c("admin"),100)}}):r?t.jsxs("div",{className:"relative",children:[t.jsx(yR,{}),t.jsx("button",{onClick:F,className:"hidden md:block fixed bottom-4 left-4 bg-gray-700/80 text-gray-300 p-2 rounded-full hover:bg-gray-600/80 hover:text-white transition-all duration-200 shadow-lg z-50 backdrop-blur-sm",title:"Retour accueil",children:"🏠"})]}):o!=="home"?K():t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[!Ae&&t.jsxs("nav",{className:"flex items-center justify-between p-4 sm:p-6 relative z-50",children:[t.jsx("div",{className:"flex items-center",children:t.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-8 sm:h-10 md:h-32 w-auto"})}),t.jsxs("div",{className:"hidden md:flex space-x-8",children:[t.jsx("a",{href:"#services",className:"text-gray-300 hover:text-white transition-all duration-200",children:"Services"}),t.jsx("a",{href:"#about-thethetrader",className:"text-gray-300 hover:text-white transition-all duration-200",children:"À propos"}),t.jsx("a",{href:"#interface",className:"text-gray-300 hover:text-white transition-all duration-200",children:"La plateforme"}),t.jsx("a",{href:"#pricing",className:"text-gray-300 hover:text-white transition-all duration-200",children:"Prix"})]}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsxs("button",{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 sm:px-6 sm:py-3 rounded-lg font-semibold hover:opacity-90 text-sm sm:text-base",children:[t.jsx("span",{className:"hidden sm:inline",children:"Se connecter"}),t.jsx("span",{className:"sm:hidden",children:"Login"})]})})]}),Ae?t.jsx("div",{className:"h-screen w-screen flex flex-col justify-center items-center overflow-hidden bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:t.jsxs("div",{className:"text-center flex-1 flex flex-col justify-center px-4 sm:px-6 max-w-full",children:[t.jsx("div",{className:"mb-0 flex justify-center hover:scale-105 transition-transform duration-300",children:t.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-80 sm:h-96 w-auto object-cover",style:{clipPath:"inset(10% 5% 15% 5%)"}})}),t.jsx("p",{className:"text-xl sm:text-3xl text-gray-300 mb-10 sm:mb-12 max-w-4xl mx-auto px-2 -mt-12",children:"Un setup très simple, des signaux expliqués, un journal de performance. Rejoins la communauté et trade en confiance."}),t.jsx("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 justify-center mb-8 sm:mb-12 px-4",children:t.jsx("button",{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-10 sm:px-12 py-5 sm:py-6 rounded-lg text-xl sm:text-2xl font-semibold hover:opacity-90 w-full sm:w-auto",children:"Se connecter"})}),t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 sm:py-6 overflow-hidden relative w-full max-w-full rounded-lg mx-auto",children:t.jsxs("div",{className:"whitespace-nowrap animate-scroll",children:[t.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-6 sm:mx-24",children:"EASY SETUP EASY TRADING"})]})})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center pt-20 sm:pt-32 pb-0 px-4 sm:px-6",children:[t.jsx("div",{className:"mb-4 sm:mb-6 md:mb-0 flex justify-center hover:scale-105 transition-transform duration-300",children:t.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-64 sm:h-80 md:h-[32rem] lg:h-[40rem] w-auto object-cover",style:{clipPath:"inset(10% 5% 15% 5%)"}})}),t.jsx("p",{className:"text-xl sm:text-3xl text-gray-300 mb-10 sm:mb-12 max-w-4xl mx-auto px-2 mt-4 md:-mt-40",children:"Un setup très simple, des signaux expliqués, un journal de performance. Rejoins la communauté et trade en confiance."}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 justify-center mb-12 sm:mb-28 px-4",children:[t.jsx("button",{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-10 sm:px-12 py-5 sm:py-6 rounded-lg text-xl sm:text-2xl font-semibold hover:opacity-90 w-full sm:w-auto",children:"Se connecter"}),t.jsxs("button",{onClick:xe=>{xe.preventDefault(),"serviceWorker"in navigator&&(/iPad|iPhone|iPod/.test(navigator.userAgent)?console.log(`Pour installer l'app: Appuyez sur le bouton Partager 📤, puis "Sur l'écran d'accueil"`):window.deferredPrompt?window.deferredPrompt.prompt():console.log(`Utilisez le menu de votre navigateur pour "Ajouter à l'écran d'accueil" ou "Installer l'application"`))},className:"bg-black/80 border-2 border-gray-600 text-white px-10 sm:px-12 py-5 sm:py-6 rounded-lg text-xl sm:text-2xl font-semibold hover:bg-black/90 hover:border-white transition-all duration-300 w-full sm:w-auto flex items-center justify-center gap-3",children:[t.jsx("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M12 2L3 7l9 5 9-5-9-5zM3 17l9 5 9-5M3 12l9 5 9-5"})}),"Installer l'app"]})]}),t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-6 sm:py-10 overflow-hidden relative mb-10 sm:mb-16 w-screen -mx-4 sm:-mx-6",children:t.jsxs("div",{className:"whitespace-nowrap animate-scroll",children:[t.jsx("span",{className:"text-lg sm:text-3xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"}),t.jsx("span",{className:"text-sm sm:text-2xl font-bold mx-4 sm:mx-16",children:"EASY SETUP EASY TRADING"})]})}),t.jsxs("div",{id:"services",className:"max-w-7xl mx-auto mb-10 sm:mb-16 px-4 sm:px-6",children:[t.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-12 sm:mb-20",children:"Les Services"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 sm:gap-8",children:[t.jsxs("div",{className:"bg-gray-800/50 p-4 sm:p-6 rounded-xl border border-gray-600/50 backdrop-blur-sm hover:bg-gray-800/70 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 hover:border-purple-500/50 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:"📊"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-purple-400 transition-colors duration-300",children:"Signaux de Trading"}),t.jsx("p",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Recevez des signaux de trading précis avec des points d'entrée, de sortie et de stop-loss clairement définis."})]}),t.jsxs("div",{className:"bg-gray-800/50 p-4 sm:p-6 rounded-xl border border-gray-600/50 backdrop-blur-sm hover:bg-gray-800/70 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/25 hover:border-blue-500/50 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:"📚"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-blue-400 transition-colors duration-300",children:"Formation Complète"}),t.jsx("p",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Apprenez les bases du trading avec nos cours structurés et nos stratégies éprouvées. Apprentissage de mon setup ultra simple."})]}),t.jsxs("div",{className:"bg-gray-800/50 p-4 sm:p-6 rounded-xl border border-gray-600/50 backdrop-blur-sm hover:bg-gray-800/70 hover:scale-105 hover:shadow-2xl hover:shadow-green-500/25 hover:border-green-500/50 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:"📈"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-green-400 transition-colors duration-300",children:"Suivi Performance"}),t.jsx("p",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Suivez vos performances avec notre calendrier de trading et nos analyses détaillées. Journal de trading personnalisé pour optimiser votre stratégie."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-pink-600/20 p-4 sm:p-6 rounded-xl border border-purple-500/50 backdrop-blur-sm hover:from-purple-600/30 hover:to-pink-600/30 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 hover:border-purple-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:"📱"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-purple-400 transition-colors duration-300",children:"App Ludique"}),t.jsxs("p",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:[t.jsx("strong",{children:"App mobile native iOS"})," avec notifications push instantanées, suivi des signaux en temps réel, sessions live trading et interface ultra-intuitive. ",t.jsx("strong",{children:"Tradez partout, tout le temps !"})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-red-600/20 to-orange-600/20 p-4 sm:p-6 rounded-xl border border-red-500/50 backdrop-blur-sm hover:from-red-600/30 hover:to-orange-600/30 hover:scale-105 hover:shadow-2xl hover:shadow-red-500/25 hover:border-red-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300",children:"🎥"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-red-400 transition-colors duration-300",children:"Live Trading"}),t.jsx("p",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Regardez nos sessions de trading en direct 3 fois par semaine et apprenez en temps réel."})]})]})]}),t.jsx("div",{id:"about-thethetrader",className:"max-w-7xl mx-auto mb-6 sm:mb-10 px-4 sm:px-6",children:t.jsxs("div",{className:"bg-gray-800/50 p-6 sm:p-8 rounded-xl border border-gray-600/50 backdrop-blur-sm",children:[t.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-6 sm:mb-8",children:"À propos de TheTheTrader"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[t.jsx("div",{children:t.jsx("p",{className:"text-gray-300 text-sm sm:text-base leading-relaxed",children:"Trader depuis 3 ans, j'ai développé une approche simple, rapide et efficace. J'ai compris qu'on a tendance à trop compliquer le marché, alors qu'en réalité, il suffit de le simplifier pour mieux le maîtriser. Mon setup va à l'essentiel : lecture claire, exécution rapide, résultats concrets."})}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:"🚀"}),t.jsx("p",{className:"text-gray-300 text-sm sm:text-base",children:"Plus de 1000+ membres actifs"})]})]})]})}),t.jsxs("div",{className:"max-w-7xl mx-auto mb-6 sm:mb-10 px-4 sm:px-6",children:[t.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-8 sm:mb-12",children:"Pourquoi choisir TheTheTrader ?"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 hover:border-purple-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-4xl text-purple-600 mb-4 group-hover:scale-110 transition-transform duration-300",children:"⚡"}),t.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-purple-400 transition-colors duration-300",children:"Simplicité"}),t.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Approche simple et efficace. Pas de jargon compliqué, juste des résultats concrets."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/25 hover:border-blue-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-4xl text-purple-600 mb-4 group-hover:scale-110 transition-transform duration-300",children:"🎯"}),t.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-blue-400 transition-colors duration-300",children:"Résultats"}),t.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Signaux précis et formation qui transforme les débutants en traders confirmés."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-green-500/25 hover:border-green-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-4xl text-purple-600 mb-4 group-hover:scale-110 transition-transform duration-300",children:"🤝"}),t.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-green-400 transition-colors duration-300",children:"Communauté"}),t.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Rejoignez une communauté active de traders qui partagent et s'entraident."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-yellow-500/25 hover:border-yellow-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-4xl text-purple-600 mb-4 group-hover:scale-110 transition-transform duration-300",children:"📔"}),t.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-yellow-400 transition-colors duration-300",children:"Journal Personnel"}),t.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Chacun a son propre journal de trading pour suivre ses trades et analyser ses performances."})]})]}),t.jsx("div",{className:"text-center mt-8",children:t.jsx("button",{onClick:()=>{const xe=document.getElementById("pricing");xe&&xe.scrollIntoView({behavior:"smooth"})},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-10 sm:px-12 py-5 sm:py-6 rounded-lg text-xl sm:text-2xl font-semibold hover:opacity-90",children:"Se connecter"})})]}),t.jsxs("div",{className:"block md:hidden max-w-7xl mx-auto mb-6 sm:mb-10 px-4 sm:px-6",children:[t.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-8 sm:mb-12",children:"Aperçu de la plateforme"}),t.jsx("div",{className:"bg-gray-800/50 rounded-xl border border-gray-600/50 backdrop-blur-sm p-4",children:t.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden relative",style:{height:"700px"},children:[t.jsx("div",{className:"bg-slate-700 p-3 border-b border-gray-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[ce&&t.jsx("button",{onClick:()=>I(!1),className:"text-gray-400 hover:text-white",children:"←"}),t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:"TT"}),t.jsx("span",{className:"text-white font-medium",children:ce?z==="fondamentaux"?"📚 Fondamentaux":z==="letsgooo-model"?"🚀 Letsgooo model":z==="crypto"?"🪙 Crypto":z==="futur"?"📈 Futur":z==="forex"?"💱 Forex":z==="chatzone"?"💬 ChatZone":z==="profit-loss"?"💰 Profit-loss":z==="calendar"?"📅 Journal Signaux":z==="trading-journal"?"📊 Journal Perso":"TheTheTrader":"TheTheTrader"})]}),t.jsx("div",{className:"text-gray-400",children:"🏠"})]})}),t.jsxs("div",{className:`absolute inset-0 top-12 p-4 space-y-4 overflow-y-auto bg-gray-900 transition-transform duration-300 ${ce?"-translate-x-full":"translate-x-0"}`,style:{height:"640px"},children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 rounded-lg p-3 border border-blue-500/30",children:[t.jsx("h3",{className:"text-white font-bold text-sm mb-2",children:"📊 Aperçu Rapide"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[t.jsx("div",{className:"text-green-400 font-bold",children:"+$3,285"}),t.jsx("div",{className:"text-gray-400",children:"P&L Total"})]}),t.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[t.jsx("div",{className:"text-blue-400 font-bold",children:"74%"}),t.jsx("div",{className:"text-gray-400",children:"Win Rate"})]}),t.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[t.jsx("div",{className:"text-white font-bold",children:"23"}),t.jsx("div",{className:"text-gray-400",children:"Ce mois"})]}),t.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[t.jsx("div",{className:"text-yellow-400 font-bold",children:"5"}),t.jsx("div",{className:"text-gray-400",children:"Signaux actifs"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-gray-400 text-xs uppercase tracking-wide mb-3 font-medium",children:"EDUCATION"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{re("fondamentaux"),I(!0)},children:[t.jsx("div",{className:"text-xl",children:"📚"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium text-sm",children:"Fondamentaux"}),t.jsx("div",{className:"text-gray-400 text-xs",children:"Contenu éducatif"})]})]}),t.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{re("letsgooo-model"),I(!0)},children:[t.jsx("div",{className:"text-xl",children:"🚀"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium text-sm",children:"Letsgooo model"}),t.jsx("div",{className:"text-gray-400 text-xs",children:"Contenu éducatif"})]})]}),t.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{re("formation"),I(!0)},children:[t.jsx("div",{className:"text-xl",children:"🎓"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium text-sm",children:"Formation"}),t.jsx("div",{className:"text-gray-400 text-xs",children:"Cours complet scalping"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-gray-400 text-xs uppercase tracking-wide mb-3 font-medium",children:"SIGNAUX"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{re("crypto"),I(!0)},children:[t.jsx("div",{className:"text-xl",children:"🪙"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium text-sm",children:"Crypto"}),t.jsx("div",{className:"text-gray-400 text-xs",children:"Canal de signaux"})]})]}),t.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{re("futur"),I(!0)},children:[t.jsx("div",{className:"text-xl",children:"📈"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium text-sm",children:"Futur"}),t.jsx("div",{className:"text-gray-400 text-xs",children:"Canal de signaux"})]})]}),t.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{re("forex"),I(!0)},children:[t.jsx("div",{className:"text-xl",children:"💱"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium text-sm",children:"Forex"}),t.jsx("div",{className:"text-gray-400 text-xs",children:"Canal de signaux"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-gray-400 text-xs uppercase tracking-wide mb-3 font-medium",children:"TRADING HUB"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{re("chatzone"),I(!0)},children:[t.jsx("div",{className:"text-xl",children:"💬"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium text-sm",children:"ChatZone"}),t.jsx("div",{className:"text-gray-400 text-xs",children:"Discussion générale"})]})]}),t.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{re("profit-loss"),I(!0)},children:[t.jsx("div",{className:"text-xl",children:"💰"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium text-sm",children:"Profit-loss"}),t.jsx("div",{className:"text-gray-400 text-xs",children:"Partage P&L"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-gray-400 text-xs uppercase tracking-wide mb-3 font-medium",children:"JOURNAUX"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{re("calendar"),I(!0)},children:[t.jsx("div",{className:"text-xl",children:"📅"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium text-sm",children:"Journal Signaux"}),t.jsx("div",{className:"text-gray-400 text-xs",children:"Calendrier économique"})]})]}),t.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 flex items-center gap-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>{re("trading-journal"),I(!0)},children:[t.jsx("div",{className:"text-xl",children:"📊"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium text-sm",children:"Journal Perso"}),t.jsx("div",{className:"text-gray-400 text-xs",children:"Trading personnel"})]})]})]})]})]}),t.jsx("div",{className:`absolute inset-0 top-12 bg-gray-900 transition-transform duration-300 ${ce?"translate-x-0":"translate-x-full"}`,children:t.jsx("div",{className:"h-full flex flex-col",children:t.jsxs("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",style:{paddingTop:"100px",paddingBottom:"80px"},children:[z==="crypto"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),t.jsx("span",{className:"text-xs text-gray-400",children:"22:30"})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),t.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal BUY BTC – 1 min"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white text-xs",children:"Entrée : 45000 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white text-xs",children:"SL : 44000 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white text-xs",children:"TP : 46000 USD"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-red-400 text-sm",children:"🎯"}),t.jsx("span",{className:"text-white text-xs",children:"Ratio R:R : ≈ 1:1"})]})]})}),t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"✅ WIN"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"❌ LOSS"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"⚖️ BE"})]})]})]}),t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),t.jsx("span",{className:"text-xs text-gray-400",children:"22:35"})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),t.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal SELL ETH – 5 min"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"Entrée : 2800 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"SL : 2850 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"TP : 2750 USD"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-red-400 text-sm",children:"🎯"}),t.jsx("span",{className:"text-white text-xs",children:"Ratio R:R : ≈ 1:1"})]})]})}),t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"✅ WIN"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"❌ LOSS"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"⚖️ BE"})]})]})]})]}),z==="futur"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),t.jsx("span",{className:"text-xs text-gray-400",children:"14:20"})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),t.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal SELL NAS100 Futures – 1H"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"Entrée : 15800 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"SL : 15900 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"TP : 15650 USD"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-red-400 text-sm",children:"🎯"}),t.jsx("span",{className:"text-white text-xs",children:"Ratio R:R : ≈ 1.5:1"})]})]})}),t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-green-500 text-white shadow-lg shadow-green-500/20 transition-all duration-200 flex items-center gap-1",children:"✅ WIN"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"❌ LOSS"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"⚖️ BE"})]})]})]}),t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),t.jsx("span",{className:"text-xs text-gray-400",children:"16:45"})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),t.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal BUY SPX500 Futures – 4H"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"Entrée : 4450 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"SL : 4400 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"TP : 4520 USD"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-red-400 text-sm",children:"🎯"}),t.jsx("span",{className:"text-white text-xs",children:"Ratio R:R : ≈ 1.4:1"})]})]})}),t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"✅ WIN"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"❌ LOSS"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"⚖️ BE"})]})]})]})]}),z==="forex"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),t.jsx("span",{className:"text-xs text-gray-400",children:"09:15"})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),t.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal BUY EURUSD – 1H"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"Entrée : 1.0850 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"SL : 1.0800 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"TP : 1.0920 USD"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-red-400 text-sm",children:"🎯"}),t.jsx("span",{className:"text-white text-xs",children:"Ratio R:R : ≈ 1.4:1"})]})]})}),t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-green-500 text-white shadow-lg shadow-green-500/20 transition-all duration-200 flex items-center gap-1",children:"✅ WIN"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"❌ LOSS"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"⚖️ BE"})]})]})]}),t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-sm",children:"T"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-white",children:"TheTheTrader"}),t.jsx("span",{className:"text-xs text-gray-400",children:"11:30"})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),t.jsx("h3",{className:"font-bold text-white text-xs",children:"Signal SELL GBPJPY – 30m"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"Entrée : 185.50 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"SL : 186.00 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400 text-sm",children:"🔹"}),t.jsx("span",{className:"text-white",children:"TP : 184.80 USD"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-600",children:[t.jsx("span",{className:"text-red-400 text-sm",children:"🎯"}),t.jsx("span",{className:"text-white text-xs",children:"Ratio R:R : ≈ 1.4:1"})]})]})}),t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:"/images/tradingview-chart.png",alt:"Signal screenshot",className:"w-full rounded-lg border border-gray-600"})}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-green-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"✅ WIN"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-red-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"❌ LOSS"}),t.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-600 hover:bg-blue-500 text-gray-300 hover:text-white transition-all duration-200 flex items-center gap-1",children:"⚖️ BE"})]})]})]})]}),z==="fondamentaux"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold",children:"COURS"}),t.jsx("span",{className:"text-white font-bold text-sm",children:"Les bases du trading"})]}),t.jsx("div",{className:"text-gray-400 text-xs mb-2",children:"📚 Durée: 2h30 | 🎯 Niveau: Débutant"}),t.jsx("div",{className:"text-gray-300 text-xs mb-2",children:"Apprenez les fondamentaux du trading et l'analyse technique."})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"bg-purple-600 text-white px-2 py-1 rounded text-xs font-bold",children:"COURS"}),t.jsx("span",{className:"text-white font-bold text-sm",children:"Psychologie du trader"})]}),t.jsx("div",{className:"text-gray-400 text-xs mb-2",children:"📚 Durée: 1h45 | 🎯 Niveau: Intermédiaire"}),t.jsx("div",{className:"text-gray-300 text-xs mb-2",children:"Maîtrisez vos émotions et développez un mental gagnant."})]})]}),z==="letsgooo-model"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"bg-orange-600 text-white px-2 py-1 rounded text-xs font-bold",children:"PREMIUM"}),t.jsx("span",{className:"text-white font-bold text-sm",children:"Stratégie Letsgooo"})]}),t.jsx("div",{className:"text-gray-400 text-xs mb-2",children:"🚀 Performance: +89% | 📈 Win Rate: 76%"}),t.jsx("div",{className:"text-gray-300 text-xs mb-2",children:"Formation avancée sur la stratégie exclusive Letsgooo model."})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"bg-red-600 text-white px-2 py-1 rounded text-xs font-bold",children:"LIVE"}),t.jsx("span",{className:"text-white font-bold text-sm",children:"Backtesting avancé"})]}),t.jsx("div",{className:"text-gray-400 text-xs mb-2",children:"🎯 Résultats: +156% | 📊 Sharpe: 2.4"}),t.jsx("div",{className:"text-gray-300 text-xs mb-2",children:"Techniques de backtesting et optimisation de stratégies."})]})]}),z==="formation"&&t.jsx("div",{className:"overflow-x-hidden max-w-full min-w-0",children:t.jsx("div",{className:"space-y-4 overflow-x-hidden",children:t.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-4 overflow-x-hidden",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold",children:"COURS COMPLET"}),t.jsx("span",{className:"text-white font-bold text-sm",children:"🎓 Formation Scalping"})]}),t.jsx("div",{className:"text-blue-300 text-xs mb-2",children:"📚 Guide complet | 🎯 Setup A+ | ⚡ CRT & AMD | 🦄 Concepts avancés"}),t.jsx("div",{className:"text-gray-300 text-xs mb-3",children:"Formation complète aux concepts fondamentaux et stratégies avancées de scalping trading."}),t.jsx("div",{className:"text-center",children:t.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded text-xs font-medium hover:bg-blue-700 transition-colors",children:"📖 Accéder au cours complet"})})]})})}),z==="chatzone"&&t.jsx(y6,{channelId:"chatzone"}),z==="profit-loss"&&t.jsx(Lh,{channelId:"profit-loss",currentUserId:"user"}),z==="calendar"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 overflow-x-hidden",children:[t.jsx("h3",{className:"text-white font-bold text-sm mb-3",children:"Calendrier Économique"}),t.jsxs("div",{className:"grid grid-cols-7 gap-1 text-xs min-w-0 max-w-full",children:[t.jsx("div",{className:"text-gray-400 text-center p-1",children:"L"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"M"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"M"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"J"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"V"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"S"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"D"}),t.jsx("div",{className:"text-gray-500 text-center p-1",children:"26"}),t.jsx("div",{className:"text-gray-500 text-center p-1",children:"27"}),t.jsx("div",{className:"text-gray-500 text-center p-1",children:"28"}),t.jsx("div",{className:"text-gray-500 text-center p-1",children:"29"}),t.jsx("div",{className:"text-gray-500 text-center p-1",children:"30"}),t.jsx("div",{className:"text-white text-center p-1",children:"1"}),t.jsx("div",{className:"text-white text-center p-1",children:"2"}),t.jsx("div",{className:"bg-red-600 text-white text-center p-1 rounded",children:"3"}),t.jsx("div",{className:"text-white text-center p-1",children:"4"}),t.jsx("div",{className:"bg-yellow-600 text-white text-center p-1 rounded",children:"5"}),t.jsx("div",{className:"text-white text-center p-1",children:"6"}),t.jsx("div",{className:"text-white text-center p-1",children:"7"}),t.jsx("div",{className:"text-white text-center p-1",children:"8"}),t.jsx("div",{className:"text-white text-center p-1",children:"9"}),t.jsx("div",{className:"text-white text-center p-1",children:"10"}),t.jsx("div",{className:"text-white text-center p-1",children:"11"}),t.jsx("div",{className:"bg-green-600 text-white text-center p-1 rounded",children:"12"}),t.jsx("div",{className:"text-white text-center p-1",children:"13"}),t.jsx("div",{className:"text-white text-center p-1",children:"14"}),t.jsx("div",{className:"bg-red-600 text-white text-center p-1 rounded",children:"15"}),t.jsx("div",{className:"text-white text-center p-1",children:"16"})]}),t.jsxs("div",{className:"flex justify-center gap-3 mt-3 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-green-600 rounded"}),t.jsx("span",{className:"text-white",children:"WIN"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-red-600 rounded"}),t.jsx("span",{className:"text-white",children:"LOSS"})]})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[t.jsx("h3",{className:"text-white font-bold text-sm mb-3",children:"Statistiques Signaux"}),t.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-3 mb-2",children:[t.jsx("div",{className:"text-green-300 text-xs mb-1",children:"P&L Total"}),t.jsx("div",{className:"text-lg font-bold text-white",children:"+$2,485"})]}),t.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-3 mb-3",children:[t.jsx("div",{className:"text-blue-300 text-xs mb-1",children:"Win Rate"}),t.jsx("div",{className:"text-lg font-bold text-white",children:"89%"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"Aujourd'hui"}),t.jsx("div",{className:"text-orange-400 font-bold",children:"4"})]}),t.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"Ce mois"}),t.jsx("div",{className:"text-white font-bold",children:"31"})]}),t.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"Avg Impact"}),t.jsx("div",{className:"text-green-400 font-bold",children:"+59 pips"})]}),t.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"Max Impact"}),t.jsx("div",{className:"text-yellow-400 font-bold",children:"+240 pips"})]})]})]})]}),z==="trading-journal"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 mb-3",children:[t.jsx("h3",{className:"text-white font-bold text-sm mb-3",children:"Statistiques Trades"}),t.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-3 mb-2",children:[t.jsx("div",{className:"text-green-300 text-xs mb-1",children:"P&L Total"}),t.jsx("div",{className:"text-lg font-bold text-white",children:"+$3,285"})]}),t.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-3 mb-3",children:[t.jsx("div",{className:"text-blue-300 text-xs mb-1",children:"Win Rate"}),t.jsx("div",{className:"text-lg font-bold text-white",children:"74%"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"Aujourd'hui"}),t.jsx("div",{className:"text-blue-400 font-bold",children:"2"})]}),t.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"Ce mois"}),t.jsx("div",{className:"text-white font-bold",children:"23"})]}),t.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"Avg Win"}),t.jsx("div",{className:"text-green-400 font-bold",children:"+$195"})]}),t.jsxs("div",{className:"bg-gray-600/50 rounded p-2",children:[t.jsx("div",{className:"text-gray-400 mb-1",children:"Avg Loss"}),t.jsx("div",{className:"text-red-400 font-bold",children:"-$85"})]})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 overflow-x-hidden",children:[t.jsx("h3",{className:"text-white font-bold text-sm mb-3",children:"Calendrier Trading"}),t.jsxs("div",{className:"grid grid-cols-7 gap-1 text-xs min-w-0 max-w-full",children:[t.jsx("div",{className:"text-gray-400 text-center p-1",children:"L"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"M"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"M"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"J"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"V"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"S"}),t.jsx("div",{className:"text-gray-400 text-center p-1",children:"D"}),t.jsx("div",{className:"text-gray-500 text-center p-1",children:"26"}),t.jsx("div",{className:"text-gray-500 text-center p-1",children:"27"}),t.jsx("div",{className:"text-gray-500 text-center p-1",children:"28"}),t.jsx("div",{className:"text-gray-500 text-center p-1",children:"29"}),t.jsx("div",{className:"text-gray-500 text-center p-1",children:"30"}),t.jsx("div",{className:"text-white text-center p-1",children:"1"}),t.jsx("div",{className:"bg-green-600 text-white text-center p-1 rounded",children:"2"}),t.jsx("div",{className:"text-white text-center p-1",children:"3"}),t.jsx("div",{className:"text-white text-center p-1",children:"4"}),t.jsx("div",{className:"bg-red-600 text-white text-center p-1 rounded",children:"5"}),t.jsx("div",{className:"text-white text-center p-1",children:"6"}),t.jsx("div",{className:"text-white text-center p-1",children:"7"}),t.jsx("div",{className:"bg-green-600 text-white text-center p-1 rounded",children:"8"}),t.jsx("div",{className:"text-white text-center p-1",children:"9"}),t.jsx("div",{className:"text-white text-center p-1",children:"10"}),t.jsx("div",{className:"bg-blue-600 text-white text-center p-1 rounded",children:"11"}),t.jsx("div",{className:"text-white text-center p-1",children:"12"}),t.jsx("div",{className:"text-white text-center p-1",children:"13"}),t.jsx("div",{className:"bg-green-600 text-white text-center p-1 rounded",children:"14"}),t.jsx("div",{className:"text-white text-center p-1",children:"15"}),t.jsx("div",{className:"text-white text-center p-1",children:"16"})]}),t.jsxs("div",{className:"flex justify-center gap-3 mt-3 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-green-600 rounded"}),t.jsx("span",{className:"text-white",children:"WIN"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-red-600 rounded"}),t.jsx("span",{className:"text-white",children:"LOSS"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded"}),t.jsx("span",{className:"text-white",children:"BE"})]})]})]})]})]})})})]})})]}),t.jsxs("div",{id:"interface",className:"hidden md:block max-w-7xl mx-auto mb-6 sm:mb-10 px-4 sm:px-6",children:[t.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-8 sm:mb-12",children:"Aperçu de la plateforme"}),t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"bg-gray-800/50 p-6 sm:p-8 rounded-xl border border-gray-600/50 backdrop-blur-sm w-full max-w-6xl",children:t.jsxs("div",{className:"bg-gray-900 rounded-lg p-0 mx-auto h-screen max-h-[900px] flex",style:{width:"100%"},children:[t.jsxs("div",{className:"w-56 bg-gray-800 flex flex-col",children:[t.jsx("div",{className:"p-4 border-b border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-8 w-8 bg-blue-500 rounded-full flex items-center justify-center text-sm text-white",children:"TT"}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm font-medium text-white",children:"TheTheTrader"})})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"ÉDUCATION"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${S==="fondamentaux"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>V("fondamentaux"),children:"📚 Fondamentaux"}),t.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${S==="letsgooo-model"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>V("letsgooo-model"),children:"🚀 Letsgooo-model"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"SIGNAUX"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${S==="crypto"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>V("crypto"),children:"🪙 Crypto"}),t.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${S==="futur"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>V("futur"),children:"📈 Futur"}),t.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${S==="forex"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>V("forex"),children:"💱 Forex"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"TRADING HUB"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${S==="chatzone"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>V("chatzone"),children:"💬 ChatZone"}),t.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${S==="profit-loss"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>V("profit-loss"),children:"💰 Profit-loss"}),t.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${S==="calendar"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>V("calendar"),children:"📅 Journal Signaux"}),t.jsx("button",{className:`w-full text-left px-3 py-2 rounded text-sm ${S==="trading-journal"?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,onClick:()=>V("trading-journal"),children:"📊 Journal Perso"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[t.jsx("h4",{className:"text-sm font-medium mb-2 text-white",children:"Statistiques"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Win Rate:"}),t.jsx("span",{className:"text-blue-400",children:"75%"})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Signaux actifs:"}),t.jsx("span",{className:"text-yellow-400",children:"3"})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"P&L Total:"}),t.jsx("span",{className:"text-green-400",children:"+$2,480"})]})]})]})]})]}),t.jsxs("div",{className:"flex-1 flex flex-col bg-gray-900",children:[t.jsx("div",{className:"p-4 border-b border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:S==="crypto"?"# crypto":S==="futur"?"# futur":S==="forex"?"# forex":S==="fondamentaux"?"📚 Fondamentaux":S==="letsgooo-model"?"🚀 Letsgooo-model":S==="chatzone"?"💬 ChatZone":S==="profit-loss"?"💰 Profit-loss":S==="calendar"?"📅 Journal Signaux":S==="trading-journal"?"📊 Journal Perso":"# crypto"}),t.jsx("span",{className:"text-green-400 text-sm flex items-center gap-1",children:"🟢 Live"})]})}),t.jsxs("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:[S==="crypto"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY BTCUSD – 15m"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 45000 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 44000 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 46000 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 2.0"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"⚡ 24"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🔥 18"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💎 31"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL ETHUSD – 5m"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 2800 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 2850 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 2750 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.75"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"⚡ 16"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"📉 12"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💎 8"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY SOLUSD – 15m"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 95.50 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 93.80 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 98.20 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.8"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"🔥 42"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🚀 28"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💎 15"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL ADAUSD – 1H"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 0.485 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 0.495 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 0.475 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.5"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"📉 23"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🔻 18"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💎 9"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-xs text-white",children:"TT"}),t.jsx("span",{className:"text-white font-medium text-sm",children:"TheTheTrader"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"22:45"})]}),t.jsx("p",{className:"text-gray-300 text-sm",children:"📈 Excellente session aujourd'hui ! BTC breakout confirmé, on surveille la zone 46k pour la suite."})]})]}),S==="futur"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL NAS100 – 1H"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 16850 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 16950 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 16700 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.5"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"📉 31"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🔻 22"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🎯 15"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY SPX500 – 4H"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 4720 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 4650 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 4850 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.85"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"📈 28"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🚀 19"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💪 12"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY GOLD – 4H"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 2045.50 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 2038.20 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 2058.80 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.85"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"🥇 38"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"📈 25"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💎 12"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL OIL – 1H"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 78.50 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 79.80 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 77.20 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.4"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"🛢️ 19"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"📉 14"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💎 7"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-xs text-white",children:"TT"}),t.jsx("span",{className:"text-white font-medium text-sm",children:"TheTheTrader"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"21:30"})]}),t.jsx("p",{className:"text-gray-300 text-sm",children:"📊 Les indices US montrent une belle dynamique. NAS100 en profit, SPX500 en cours !"})]})]}),S==="forex"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY EURUSD – 30m"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 1.0850 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 1.0825 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 1.0890 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.6"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"💶 42"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"📊 28"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🎯 33"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL GBPJPY – 15m"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 189.50 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 190.00 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 188.80 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.4"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"🇬🇧 24"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🇯🇵 18"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"📉 14"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal BUY USDJPY – 1H"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 148.25 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 147.85 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 148.85 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.7"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"🇯🇵 34"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"📈 22"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💎 16"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Signal SELL AUDUSD – 30m"})]}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"Entrée : 0.6650 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"SL : 0.6680 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-400",children:"🔹"}),t.jsx("span",{children:"TP : 0.6620 USD"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"🎯"}),t.jsx("span",{children:"Ratio R:R : ≈ 1.5"})]})]}),t.jsx("img",{src:"/signal.png",alt:"Signal Chart",className:"w-full h-72 object-contain rounded mb-3"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"🇦🇺 19"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"📉 15"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💎 8"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-xs text-white",children:"TT"}),t.jsx("span",{className:"text-white font-medium text-sm",children:"TheTheTrader"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"20:15"})]}),t.jsx("p",{className:"text-gray-300 text-sm",children:"💱 Session forex active ! EUR/USD en profit, on surveille GBP/JPY de près."})]})]}),S==="fondamentaux"&&t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[t.jsxs("div",{className:"text-center mb-8 p-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl text-white",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-12 w-auto",style:{filter:"drop-shadow(0 0 0 transparent)",mixBlendMode:"screen"}})}),t.jsx("p",{className:"text-xl opacity-90",children:"Guide complet des concepts fondamentaux et stratégies avancées"})]}),t.jsxs("div",{className:"space-y-6 text-gray-300",children:[t.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4",children:t.jsxs("p",{className:"text-yellow-200",children:[t.jsx("strong",{children:"📖 Avertissement :"})," Ce guide présente un ensemble de concepts appris et expérimentés sur les marchés financiers. Il ne s'agit pas d'inventions originales, mais d'un setup personnel basé sur l'observation et l'expérience pratique."]})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"1. 📚 Introduction"}),t.jsx("p",{children:"Ce document vous présente les fondamentaux essentiels pour comprendre comment les charts évoluent et ce qui influence leurs mouvements. L'objectif est de construire une base solide avant d'aborder les stratégies avancées."})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"2. 🧠 Fondamentaux des Charts"}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"📈 Qu'est-ce qu'une Chart ?"}),t.jsx("p",{className:"mb-3",children:"Une chart (ou graphique) est une représentation visuelle du prix d'un actif financier dans le temps (Bitcoin, or, actions, etc.)."}),t.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[t.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Elle permet de :"}),t.jsxs("ul",{className:"space-y-1 text-sm",children:[t.jsx("li",{children:"→ Voir comment le prix évolue"}),t.jsx("li",{children:"→ Trouver des points d'entrée/sortie"}),t.jsx("li",{children:"→ Comprendre le comportement du marché"})]})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"🕯️ Comprendre les Bougies"}),t.jsx("p",{className:"mb-3",children:"Chaque bougie montre l'évolution du prix sur une période donnée (1 min, 1h, 1 jour, etc.)"}),t.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[t.jsx("h4",{className:"font-semibold text-blue-300 mb-2",children:"Composition d'une bougie :"}),t.jsxs("ul",{className:"space-y-1 text-sm",children:[t.jsxs("li",{children:["→ ",t.jsx("strong",{children:"Le corps (body) :"})," différence entre ouverture et clôture"]}),t.jsxs("li",{children:["→ ",t.jsx("strong",{children:"Les mèches (wicks) :"})," les plus hauts et plus bas atteints"]}),t.jsxs("li",{children:["→ ",t.jsx("strong",{children:"Couleur :"})," verte/blanche si clôture > ouverture, rouge/noire si clôture < ouverture"]})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"3. 🧠 Mouvement des Prix (Modèle AMD)"}),t.jsx("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 mb-4",children:t.jsxs("p",{children:[t.jsx("strong",{children:"🚗💨 Analogie :"})," Le prix, c'est comme un voyage de A à B. Pour avancer, il a besoin de liquidité, comme une voiture a besoin d'essence."]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"1️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Accumulation"}),t.jsx("p",{className:"text-sm",children:"Le prix se prépare 🛑⛽"})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"2️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),t.jsx("p",{className:"text-sm",children:"Il piège les traders 🎯🪤"})]}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"3️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),t.jsx("p",{className:"text-sm",children:"Le vrai mouvement 🚀📈"})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"4. 📈 Support et Résistance"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[t.jsx("strong",{className:"text-green-300",children:"🔹 Support"}),t.jsx("br",{}),t.jsx("span",{className:"text-sm",children:"Zone où le prix rebondit vers le haut 🔼"})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[t.jsx("strong",{className:"text-red-300",children:"🔹 Résistance"}),t.jsx("br",{}),t.jsx("span",{className:"text-sm",children:"Zone où le prix bloque et redescend 🔽"})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"5. 🔬 Concepts Avancés"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"🧱 ORDER BLOCK (OB)"}),t.jsx("p",{className:"mb-2",children:"Un Order Block représente la dernière bougie haussière (ou baissière) avant un mouvement impulsif majeur dans la direction opposée."}),t.jsxs("div",{className:"text-sm text-blue-300",children:["→ Ces zones deviennent des repères de liquidité",t.jsx("br",{}),"→ Souvent retestées par le prix",t.jsx("br",{}),"→ Offrent des points d'entrée à fort potentiel"]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"⚡📉📈 FVG – Fair Value Gap"}),t.jsx("p",{className:"mb-2",children:"Un FVG est une zone de déséquilibre créée lors d'un mouvement rapide et violent du marché 🚀."}),t.jsxs("div",{className:"text-sm text-blue-300",children:["→ Le prix revient fréquemment combler ces gaps",t.jsx("br",{}),"→ Zones intéressantes pour entrer ou sortir d'une position"]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"🦄 Unicorn"}),t.jsx("p",{className:"mb-2",children:"C'est un setup formé par l'association d'un Breaker (BRKR) ⚡ et d'un Fair Value Gap (FVG) 📉."}),t.jsxs("div",{className:"text-sm text-blue-300",children:["→ Zone à forte probabilité de réaction du prix",t.jsx("br",{}),"→ Rassemble deux zones institutionnelles clés",t.jsx("br",{}),"→ Point d'entrée ou de prise de profit idéal"]})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:"6. 🕵️ CRT – Candle Range Theory"}),t.jsx("p",{className:"mb-4",children:"La Candle Range Theory (CRT) est une méthode d'analyse basée sur 3 bougies consécutives."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"1️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"La Range"}),t.jsxs("p",{className:"text-sm",children:["Bougie avec grand corps",t.jsx("br",{}),"Zone de stagnation"]})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"2️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Manipulation"}),t.jsxs("p",{className:"text-sm",children:["Va chercher la liquidité",t.jsx("br",{}),"Piège les traders"]})]}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold mb-2",children:"3️⃣"}),t.jsx("div",{className:"font-semibold mb-2",children:"Distribution"}),t.jsxs("p",{className:"text-sm",children:["Bougie directionnelle",t.jsx("br",{}),"Zone d'entrée"]})]})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-4 border-l-4 border-blue-400 pl-4",children:'7. 📌 Le Setup "A+"'}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 mb-4",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"PRINCIPE DU MODÈLE"}),t.jsx("p",{className:"mb-2",children:"Le principe du modèle, c'est de prendre position après la phase de manipulation ⏸️, sur la timeframe basse (LTF) du contexte défini sur la timeframe haute (HTF) 📊."}),t.jsx("p",{children:"🎯 Cela permet d'éviter les pièges des faux breakouts 🚫 et de s'aligner avec la vraie direction du mouvement ➡️."})]})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/30 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold mb-2",children:"⚠️ Avertissement Légal"}),t.jsx("p",{className:"text-sm",children:"Ce document est fourni à des fins éducatives uniquement. Le trading comporte des risques significatifs de perte financière. Il est essentiel de bien comprendre les risques avant de trader et ne jamais risquer plus que ce que vous pouvez vous permettre de perdre."})]})]})]}),S==="letsgooo-model"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"bg-orange-600 text-white px-3 py-1 rounded text-sm font-bold",children:"PREMIUM"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Stratégie Letsgooo"}),t.jsx("span",{className:"text-gray-400 text-sm",children:"Expert"})]}),t.jsx("span",{className:"text-orange-400 font-bold",children:"2h 15min"})]}),t.jsx("div",{className:"text-gray-400 text-sm mb-4",children:"La stratégie exclusive TheTheTrader ! Système complet de trading avec backtests, règles précises et gestion du risque optimisée."}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm text-gray-300 mb-3",children:[t.jsx("div",{children:"🚀 Win Rate 85%"}),t.jsx("div",{children:"📈 R:R 1:3"}),t.jsx("div",{children:"⚡ Signaux rapides"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"👥 156 étudiants"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"⭐ 5.0/5"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🔒 Accès VIP"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"bg-green-600 text-white px-3 py-1 rounded text-sm font-bold",children:"LIVE"}),t.jsx("span",{className:"text-white font-bold text-lg",children:"Backtesting avancé"}),t.jsx("span",{className:"text-gray-400 text-sm",children:"Expert"})]}),t.jsx("span",{className:"text-green-400 font-bold",children:"1h 30min"})]}),t.jsx("div",{className:"text-gray-400 text-sm mb-4",children:"Maîtrisez l'art du backtesting ! Testez vos stratégies sur données historiques et optimisez vos performances avec des outils professionnels."}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm text-gray-300 mb-3",children:[t.jsx("div",{children:"📊 TradingView"}),t.jsx("div",{children:"🔍 Analyse data"}),t.jsx("div",{children:"⚙️ Optimisation"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"👥 203 étudiants"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"⭐ 4.7/5"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🎥 Session live"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-xs text-white",children:"TT"}),t.jsx("span",{className:"text-white font-medium text-sm",children:"TheTheTrader"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"18:45"})]}),t.jsx("p",{className:"text-gray-300 text-sm",children:"🚀 Session live backtesting demain à 20h ! On teste la stratégie Letsgooo sur 2 ans de données."})]})]}),S==="chatzone"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-sm text-white",children:"M"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-white font-medium text-sm",children:"Mike_Trader"}),t.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 5 min"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm",children:"Salut la team ! Quelqu'un a des infos sur l'ouverture de Londres demain ? 🇬🇧"}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"👍 3"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💬 Répondre"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-sm text-white",children:"S"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-white font-medium text-sm",children:"Sarah_FX"}),t.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 8 min"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm",children:"Les NFP de vendredi étaient 🔥 ! Qui a pris le trade sur EUR/USD ?"}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"🚀 5"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💶 2"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💬 Répondre"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center text-sm text-white",children:"A"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-white font-medium text-sm",children:"Alex_Crypto"}),t.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 12 min"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm",children:"BTC qui teste les 45k encore... Cette fois c'est la bonne ? 📈"}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"⚡ 8"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🎯 4"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💬 Répondre"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-sm text-white",children:"TT"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-white font-medium text-sm",children:"TheTheTrader"}),t.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 15 min"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm",children:"💬 N'hésitez pas à partager vos analyses et poser vos questions ! La communauté est là pour s'entraider 🚀"}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"❤️ 15"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🔥 8"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💬 Répondre"})]})]})]}),S==="profit-loss"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-sm text-white",children:"J"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-white font-medium text-sm",children:"Jordan_Pro"}),t.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 2h"})]})]}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/50 rounded-lg p-3 mb-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-white font-bold text-lg",children:"EURUSD"}),t.jsx("span",{className:"text-green-400 font-bold text-xl",children:"+$2,450"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-gray-300",children:[t.jsx("div",{children:"Entry: 1.0832"}),t.jsx("div",{children:"Exit: 1.0891"}),t.jsx("div",{children:"Risk: $500"}),t.jsx("div",{children:"R:R: 4.9"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"🔥 Excellent trade sur EUR/USD ! Merci TT pour l'analyse, signal parfait ! 🚀"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"🔥 12"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💰 8"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🎯 6"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-sm text-white",children:"L"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-white font-medium text-sm",children:"Lisa_Scalp"}),t.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 4h"})]})]}),t.jsxs("div",{className:"bg-green-600/20 border border-green-600/50 rounded-lg p-3 mb-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-white font-bold text-lg",children:"BTCUSD"}),t.jsx("span",{className:"text-green-400 font-bold text-xl",children:"+$680"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-gray-300",children:[t.jsx("div",{children:"Entry: 44,890"}),t.jsx("div",{children:"Exit: 45,120"}),t.jsx("div",{children:"Risk: $300"}),t.jsx("div",{children:"R:R: 2.3"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"⚡ Scalp rapide sur BTC ! 15 minutes de trade, clean !"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"⚡ 7"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"💎 4"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🎯 3"})]})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-sm text-white",children:"M"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-white font-medium text-sm",children:"Max_Learning"}),t.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"Il y a 6h"})]})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-600/50 rounded-lg p-3 mb-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-white font-bold text-lg",children:"GBPJPY"}),t.jsx("span",{className:"text-red-400 font-bold text-xl",children:"-$180"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-gray-300",children:[t.jsx("div",{children:"Entry: 189.45"}),t.jsx("div",{children:"Exit: 189.09"}),t.jsx("div",{children:"Risk: $180"}),t.jsx("div",{children:"SL hit"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"💪 SL hit mais respecté ! On continue, le trading c'est ça aussi 📚"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400 text-xs",children:"💪 5"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"📚 3"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"🎯 2"})]})]})]}),S==="calendar"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-600",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsx("h2",{className:"text-xl font-bold text-white",children:"Calendrier Économique - Décembre 2024"})}),t.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2 mb-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(xe=>t.jsx("div",{className:"text-center text-gray-400 font-semibold py-3 text-sm uppercase tracking-wide",children:xe.substring(0,3)},xe))}),t.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:(()=>{const xe=[{date:1,hasEvent:!1},{date:2,hasEvent:!1},{date:3,hasEvent:!0,impact:"high"},{date:4,hasEvent:!0,impact:"high"},{date:5,hasEvent:!1},{date:6,hasEvent:!0,impact:"medium"},{date:7,hasEvent:!1},{date:8,hasEvent:!1},{date:9,hasEvent:!1},{date:10,hasEvent:!0,impact:"low"},{date:11,hasEvent:!0,impact:"medium"},{date:12,hasEvent:!1},{date:13,hasEvent:!0,impact:"high"},{date:14,hasEvent:!1},{date:15,hasEvent:!1},{date:16,hasEvent:!1},{date:17,hasEvent:!0,impact:"medium"},{date:18,hasEvent:!0,impact:"high"},{date:19,hasEvent:!1},{date:20,hasEvent:!0,impact:"low"},{date:21,hasEvent:!1},{date:22,hasEvent:!1},{date:23,hasEvent:!1},{date:24,hasEvent:!1},{date:25,hasEvent:!1},{date:26,hasEvent:!1},{date:27,hasEvent:!0,impact:"medium"},{date:28,hasEvent:!1},{date:29,hasEvent:!1},{date:30,hasEvent:!1},{date:31,hasEvent:!1}],le=fe=>{const ke="h-12 rounded flex items-center justify-center text-white font-semibold text-sm cursor-pointer hover:opacity-80 transition-opacity";if(!fe.hasEvent)return`${ke} bg-gray-700`;switch(fe.impact){case"high":return`${ke} bg-red-600`;case"medium":return`${ke} bg-yellow-600 text-black`;case"low":return`${ke} bg-green-600`;default:return`${ke} bg-gray-700`}};return xe.map(fe=>t.jsx("div",{className:le(fe),children:fe.date},fe.date))})()}),t.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm mt-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-green-600 rounded"}),t.jsx("span",{className:"text-white",children:"WIN"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-red-600 rounded"}),t.jsx("span",{className:"text-white",children:"LOSS"})]})]})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Statistiques Signaux"}),t.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-6 mb-4",children:[t.jsx("div",{className:"text-green-300 text-sm mb-2",children:"P&L Total"}),t.jsx("div",{className:"text-4xl font-bold text-white",children:"+$2,485"})]}),t.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-xl p-6",children:[t.jsx("div",{className:"text-blue-300 text-sm mb-2",children:"Win Rate"}),t.jsx("div",{className:"text-4xl font-bold text-white",children:"89%"})]})]})]}),S==="trading-journal"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-600",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsx("h2",{className:"text-xl font-bold text-white",children:"Trading Journal - Décembre 2024"})}),t.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2 mb-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(xe=>t.jsx("div",{className:"text-center text-gray-400 font-semibold py-3 text-sm uppercase tracking-wide",children:xe.substring(0,3)},xe))}),t.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:(()=>{const xe=[{date:1,status:"win"},{date:2,status:"win"},{date:3,status:"loss"},{date:4,status:"win"},{date:5,status:"be"},{date:6,status:"win"},{date:7,status:"win"},{date:8,status:"win"},{date:9,status:"loss"},{date:10,status:"win"},{date:11,status:"win"},{date:12,status:"be"},{date:13,status:"win"},{date:14,status:"win"},{date:15,status:"win"},{date:16,status:"loss"},{date:17,status:"win"},{date:18,status:"win"},{date:19,status:"win"},{date:20,status:"be"},{date:21,status:"win"},{date:22,status:"win"},{date:23,status:"loss"},{date:24,status:"win"},{date:25,status:"win"},{date:26,status:"win"},{date:27,status:"win"},{date:28,status:"be"},{date:29,status:"win"},{date:30,status:"win"},{date:31,status:"win"}],le=fe=>{const ke="h-12 rounded flex items-center justify-center text-white font-semibold text-sm cursor-pointer hover:opacity-80 transition-opacity";switch(fe.status){case"win":return`${ke} bg-green-500`;case"be":return`${ke} bg-yellow-500 text-black`;case"loss":return`${ke} bg-red-500`;default:return`${ke} bg-gray-700`}};return xe.map(fe=>t.jsx("div",{className:le(fe),children:fe.date},fe.date))})()}),t.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm mt-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),t.jsx("span",{className:"text-white",children:"Win"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),t.jsx("span",{className:"text-white",children:"BE"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),t.jsx("span",{className:"text-white",children:"Loss"})]})]})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Statistiques Trades"}),t.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-6 mb-4",children:[t.jsx("div",{className:"text-green-300 text-sm mb-2",children:"P&L Total"}),t.jsx("div",{className:"text-4xl font-bold text-white",children:"+$3,285"})]}),t.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-xl p-6 mb-6",children:[t.jsx("div",{className:"text-blue-300 text-sm mb-2",children:"Win Rate"}),t.jsx("div",{className:"text-4xl font-bold text-white",children:"74%"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Aujourd'hui"}),t.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"2"})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Ce mois"}),t.jsx("div",{className:"text-2xl font-bold text-white",children:"23"})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Avg Win"}),t.jsx("div",{className:"text-2xl font-bold text-green-400",children:"+$195"})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Avg Loss"}),t.jsx("div",{className:"text-2xl font-bold text-red-400",children:"-$85"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"Weekly Breakdown"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-4 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium",children:"Week 1"}),t.jsx("div",{className:"text-gray-400 text-sm",children:"6 trades"})]}),t.jsx("div",{className:"text-green-400 text-xl font-bold",children:"+$840"})]}),t.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-4 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium",children:"Week 2"}),t.jsx("div",{className:"text-gray-400 text-sm",children:"5 trades"})]}),t.jsx("div",{className:"text-green-400 text-xl font-bold",children:"+$1,120"})]}),t.jsxs("div",{className:"bg-red-600/20 border border-red-500/30 rounded-lg p-4 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium",children:"Week 3"}),t.jsx("div",{className:"text-gray-400 text-sm",children:"7 trades"})]}),t.jsx("div",{className:"text-red-400 text-xl font-bold",children:"-$275"})]}),t.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-4 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-white font-medium",children:"Week 4"}),t.jsx("div",{className:"text-gray-400 text-sm",children:"5 trades"})]}),t.jsx("div",{className:"text-green-400 text-xl font-bold",children:"+$1,600"})]})]})]})]})]})]}),(S==="chatzone"||S==="profit-loss")&&t.jsx("div",{className:"p-4 border-t border-gray-700",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",placeholder:"Tapez votre message...",className:"flex-1 bg-gray-700 text-white px-3 py-2 rounded text-sm placeholder-gray-400"}),t.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded text-sm font-bold hover:bg-blue-700",children:"Envoyer"})]})})]})]})})})]}),t.jsx("div",{className:"text-center mt-8 mb-12",children:t.jsx("button",{onClick:()=>{const xe=document.getElementById("pricing");xe&&xe.scrollIntoView({behavior:"smooth"})},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-10 sm:px-12 py-5 sm:py-6 rounded-lg text-xl sm:text-2xl font-semibold hover:opacity-90",children:"Se connecter"})}),t.jsxs("div",{className:"max-w-7xl mx-auto mb-10 px-4 sm:px-6",children:[t.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-4",children:"Ce qu'ils en pensent"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8 sm:mb-12",children:[t.jsx("img",{src:"https://cdn.trustpilot.net/brand-assets/4.1.0/logo-white.svg",alt:"Trustpilot",className:"h-8"}),t.jsx("span",{className:"text-gray-300 text-lg",children:"Vérifié par Trustpilot"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 hover:border-purple-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:"⭐⭐⭐⭐⭐"}),t.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-purple-400 transition-colors duration-300",children:"CryptoWolf"}),t.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Interface ultra simple ! Tout est à portée de main, pas besoin d'être expert pour s'y retrouver."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/25 hover:border-blue-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:"⭐⭐⭐⭐⭐"}),t.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-blue-400 transition-colors duration-300",children:"iOSTrader"}),t.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"L'app iOS est parfaite ! Notifications instantanées pour les signaux, interface fluide. Je ne rate plus jamais un live !"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-green-500/25 hover:border-green-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:"⭐⭐⭐⭐⭐"}),t.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-green-400 transition-colors duration-300",children:"ForexMaster"}),t.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Les lives sont incroyables ! TheThe explique tout clairement, même les concepts complexes deviennent simples."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 hover:border-purple-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:"⭐⭐⭐⭐⭐"}),t.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-purple-400 transition-colors duration-300",children:"TraderPro23"}),t.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"J'apprécie vraiment la proximité avec TheThe. Il répond à nos questions et nous guide personnellement."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/25 hover:border-blue-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:"⭐⭐⭐⭐⭐"}),t.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-blue-400 transition-colors duration-300",children:"PipHunter"}),t.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Setup ultra simple ! En 5 minutes j'étais connecté et je recevais déjà les signaux. Parfait pour débuter."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-xl p-6 sm:p-8 text-center shadow-lg border border-purple-500/50 hover:scale-105 hover:shadow-2xl hover:shadow-green-500/25 hover:border-green-400 transition-all duration-300 transform cursor-pointer group",children:[t.jsx("div",{className:"text-2xl text-yellow-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:"⭐⭐⭐⭐⭐"}),t.jsx("div",{className:"text-xl font-bold text-white mb-2 group-hover:text-green-400 transition-colors duration-300",children:"BullRunner"}),t.jsx("div",{className:"text-gray-300 text-sm sm:text-base group-hover:text-gray-200 transition-colors duration-300",children:"Grâce à TheThe, j'ai enfin une approche structurée du trading. Interface claire, explications parfaites !"})]})]})]}),t.jsxs("div",{id:"pricing",className:"max-w-7xl mx-auto mb-6 sm:mb-10 px-4 sm:px-6",children:[t.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white text-center mb-8 sm:mb-12",children:"Choisissez votre plan"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 sm:gap-12 max-w-6xl mx-auto",children:[t.jsx("div",{className:"bg-gradient-to-br from-purple-600/20 to-blue-600/20 p-8 sm:p-12 rounded-xl border border-purple-500/50 backdrop-blur-sm hover:from-purple-600/30 hover:to-blue-600/30 transition-all duration-300 min-h-[600px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"Starter"}),t.jsxs("div",{className:"text-4xl font-bold text-blue-400 mb-6",children:["15€",t.jsx("span",{className:"text-sm text-gray-400",children:"/mois"})]}),t.jsx("div",{className:"text-green-400 text-sm mb-4",children:"🎯 Parfait pour débuter"}),t.jsxs("ul",{className:"text-gray-300 text-base space-y-4 mb-8 text-left",children:[t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Tous les signaux (Crypto, Forex, Futures)"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Formation complète (10h de vidéos)"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Accès au chat communautaire"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Calendrier de performance"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"✗"}),t.jsx("span",{children:"Live Trading"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"✗"}),t.jsx("span",{children:"Support prioritaire"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-400",children:"✗"}),t.jsx("span",{children:"Journal de trading personnalisé"})]})]}),t.jsx("button",{className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-4 px-6 rounded-lg font-semibold text-lg transition-colors",children:"Se connecter"})]})}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-purple-600/20 p-8 sm:p-12 rounded-xl border border-blue-500/50 backdrop-blur-sm hover:from-blue-600/30 hover:to-purple-600/30 transition-all duration-300 relative min-h-[600px]",children:[t.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-1 rounded-full text-sm font-semibold",children:"RECOMMANDÉ"}),t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"Pro"}),t.jsxs("div",{className:"text-4xl font-bold text-blue-400 mb-6",children:["25€",t.jsx("span",{className:"text-sm text-gray-400",children:"/mois"})]}),t.jsx("div",{className:"text-green-400 text-sm mb-4",children:"🚀 Pour trader comme un pro"}),t.jsxs("ul",{className:"text-gray-300 text-base space-y-4 mb-8 text-left",children:[t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Tous les signaux (Crypto, Forex, Futures)"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Formation complète + stratégies avancées"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Live Trading en direct (3x/semaine)"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Calendrier avancé avec analytics"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Support prioritaire 24/7"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Signaux exclusifs VIP"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-400",children:"✓"}),t.jsx("span",{children:"Journal de trading personnalisé"})]})]}),t.jsx("button",{className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-4 px-6 rounded-lg font-semibold text-lg transition-colors",children:"Devenir Pro"})]})]})]})]}),t.jsx("div",{className:"max-w-7xl mx-auto mb-6 sm:mb-10 px-2 sm:px-4",style:{display:"none"},children:t.jsx("div",{className:"bg-gray-800/50 p-2 sm:p-6 rounded-xl border border-gray-600/50 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden shadow-2xl",children:[t.jsxs("div",{className:"bg-gray-800 p-3 sm:p-4 flex items-center justify-between border-b border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-3 min-w-0",children:[t.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm",children:"TT"}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[t.jsx("span",{className:"text-white font-semibold text-sm sm:text-base",children:"TheTheTrader"}),t.jsx("span",{className:"text-gray-400 text-xs sm:text-sm hidden sm:inline",children:"En ligne"})]})]}),t.jsx("div",{className:"text-blue-400 font-semibold text-sm sm:text-base text-center",children:((Q=B[N])==null?void 0:Q.title)||"#crypto-signaux"}),t.jsx("div",{})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row h-[750px] sm:h-[750px]",children:[t.jsxs("div",{className:"w-full sm:w-60 bg-gray-800 p-3 sm:p-4 border-b sm:border-b-0 sm:border-r border-gray-700 sm:h-full overflow-x-auto sm:overflow-x-visible",children:[t.jsxs("div",{className:"sm:hidden flex gap-3 mb-4 overflow-x-auto pl-2 pr-4 pt-4 pb-6",children:[t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[100px] ${N==="fondamentaux"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("fondamentaux"),children:"📚 Fondamentaux"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[100px] ${N==="letsgooo-model"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("letsgooo-model"),children:"🚀 Letsgooo-model"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[90px] ${N==="crypto"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("crypto"),children:"🪙 Crypto"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[90px] ${N==="futur"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("futur"),children:"📈 Futur"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[90px] ${N==="forex"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("forex"),children:"💱 Forex"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[100px] ${N==="chatzone"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("chatzone"),children:"💬 ChatZone"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[100px] ${N==="profit-loss"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("profit-loss"),children:"💰 Profit-loss"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors whitespace-nowrap text-sm font-medium min-w-[100px] ${N==="calendar"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("calendar"),children:"📅 Journal Signaux"})]}),t.jsxs("div",{className:"hidden sm:block space-y-2",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-4",children:"ÉDUCATION"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${N==="fondamentaux"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("fondamentaux"),children:"📚 Fondamentaux"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${N==="letsgooo-model"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("letsgooo-model"),children:"🚀 Letsgooo-model"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-4",children:"SIGNAUX"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${N==="crypto"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("crypto"),children:"🪙 Crypto"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${N==="futur"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("futur"),children:"📈 Futur"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${N==="forex"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("forex"),children:"💱 Forex"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-4",children:"TRADING HUB"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${N==="chatzone"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("chatzone"),children:"💬 ChatZone"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${N==="profit-loss"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("profit-loss"),children:"💰 Profit-loss"}),t.jsx("div",{className:`px-4 py-3 rounded-lg cursor-pointer transition-colors text-sm font-medium ${N==="calendar"?"text-white bg-blue-600":"text-gray-300 bg-gray-700 hover:text-white hover:bg-gray-600"}`,onClick:()=>_("calendar"),children:"📅 Journal Signaux"})]})]})]})]}),t.jsxs("div",{className:"flex-1 bg-gray-900 flex flex-col",children:[t.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:(gt=(U=B[N])==null?void 0:U.messages)==null?void 0:gt.map((xe,le)=>t.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:"TT"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-white font-semibold",children:xe.user}),t.jsx("span",{className:"text-gray-400 text-sm",children:xe.time})]}),xe.type==="signal"?t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[t.jsx("div",{className:"text-white font-semibold mb-2",children:xe.content.title}),t.jsx("div",{className:"space-y-1",children:xe.content.details.map((fe,ke)=>t.jsxs("div",{className:"text-gray-300 text-sm",children:[fe.icon," ",fe.label,": ",fe.value]},ke))}),t.jsx("div",{className:"flex gap-2 mt-3",children:xe.content.reactions.map((fe,ke)=>t.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 px-2 py-1 rounded text-sm text-white",children:[fe.emoji," ",fe.count]},ke))})]}):xe.type==="formation"?t.jsx("div",{className:"bg-gray-700 rounded-lg p-6",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[t.jsx("div",{className:"lg:w-1/3",children:t.jsx("img",{src:xe.content.image,alt:xe.content.title,className:"w-full h-48 lg:h-64 object-cover rounded-lg shadow-lg"})}),t.jsxs("div",{className:"lg:w-2/3",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:xe.content.title}),t.jsx("p",{className:"text-gray-300 mb-4",children:xe.content.description}),t.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm",children:[t.jsxs("span",{className:"text-blue-400",children:["⏱️ ",xe.content.duration]}),t.jsxs("span",{className:"text-green-400",children:["📊 ",xe.content.progress]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"text-white font-semibold mb-2",children:"Contenu:"}),t.jsx("ul",{className:"space-y-1",children:xe.content.topics.map((fe,ke)=>t.jsxs("li",{className:"flex items-center gap-2 text-gray-300",children:[t.jsx("span",{className:"text-blue-400",children:"•"}),t.jsx("span",{children:fe})]},ke))})]}),t.jsx("button",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200",children:"Se connecter"})]})]})}):xe.type==="calendar"?t.jsxs("div",{className:"bg-gray-700 rounded-lg p-6",children:[t.jsx("div",{className:"text-white font-semibold mb-6 text-lg",children:xe.content}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2 mb-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(fe=>t.jsx("div",{className:"text-center text-gray-400 font-semibold py-3 text-sm uppercase tracking-wide",children:fe.substring(0,3)},fe))}),t.jsx("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:xe.calendarData.days.map((fe,ke)=>t.jsx("div",{className:`border-2 rounded-lg h-16 md:h-24 p-1 md:p-2 cursor-pointer transition-all hover:shadow-md ${fe.status==="win"?"bg-green-500/60 border-green-400/50 text-white":fe.status==="loss"?"bg-red-500/60 border-red-400/50 text-white":fe.status==="be"?"bg-blue-500/60 border-blue-400/50 text-white":"bg-gray-700 border-gray-600 text-gray-400"}`,children:t.jsxs("div",{className:"flex flex-col h-full justify-between",children:[t.jsx("div",{className:"text-xs md:text-sm font-semibold",children:fe.date}),fe.trades>0&&t.jsxs("div",{className:"text-xs font-bold text-center hidden md:block",children:[fe.trades," signal",fe.trades>1?"s":""]}),t.jsx("div",{className:"text-xs font-bold",children:fe.pnl})]})},ke))}),t.jsxs("div",{className:"flex items-center justify-center gap-6 mt-8 pt-6 border-t border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-green-500/60 border border-green-400/50 rounded"}),t.jsx("span",{className:"text-sm text-gray-300",children:"WIN"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-red-500/60 border border-red-400/50 rounded"}),t.jsx("span",{className:"text-sm text-gray-300",children:"LOSS"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-blue-500/60 border border-blue-400/50 rounded"}),t.jsx("span",{className:"text-sm text-gray-300",children:"BREAK EVEN"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-gray-700 border border-gray-600 rounded"}),t.jsx("span",{className:"text-sm text-gray-300",children:"NO TRADE"})]})]})]}),t.jsxs("div",{className:"w-full lg:w-80 bg-gray-800 rounded-xl p-4 md:p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-6",children:"Statistiques Signaux"}),t.jsxs("div",{className:"space-y-4 mb-8",children:[t.jsxs("div",{className:"bg-green-600/20 border-green-500/30 border rounded-lg p-4",children:[t.jsx("div",{className:"text-sm text-green-300 mb-1",children:"P&L Total"}),t.jsx("div",{className:"text-2xl font-bold text-green-200",children:xe.calendarData.stats.totalPnL})]}),t.jsxs("div",{className:"bg-blue-600/20 border-blue-500/30 rounded-lg p-4 border",children:[t.jsx("div",{className:"text-sm text-blue-300 mb-1",children:"Win Rate"}),t.jsxs("div",{className:"text-2xl font-bold text-blue-200",children:[xe.calendarData.stats.winRate,"%"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Aujourd'hui"}),t.jsx("div",{className:"text-lg font-bold text-blue-400",children:"3"})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Ce mois"}),t.jsx("div",{className:"text-lg font-bold text-white",children:xe.calendarData.stats.totalTrades})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Win"}),t.jsx("div",{className:"text-lg font-bold text-green-400",children:"+$89"})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 border border-gray-600",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Avg Loss"}),t.jsx("div",{className:"text-lg font-bold text-red-400",children:"-$34"})]})]})]})]})]})]}):t.jsx("div",{className:"text-gray-300 whitespace-pre-line",children:xe.content}),xe.reactions&&t.jsx("div",{className:"flex gap-2 mt-2",children:xe.reactions.map((fe,ke)=>t.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 px-2 py-1 rounded text-sm text-white",children:[fe.emoji," ",fe.count]},ke))})]})]})},le))}),(S==="chatzone"||S==="profit-loss")&&t.jsx("div",{className:"p-4 border-t border-gray-700",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",placeholder:"Tapez votre message...",className:"flex-1 bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg",children:"Envoyer"})]})})]})]})]})})})]}),!Ae&&t.jsx("footer",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-12 sm:py-20 px-4 sm:px-6 mt-0",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wide",children:"Informations Légales"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>c("mentions-legales"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Mentions légales"}),t.jsx("button",{onClick:()=>c("politique-confidentialite"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Politique de confidentialité"}),t.jsx("button",{onClick:()=>c("conditions-utilisation"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Conditions d'utilisation"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wide",children:"Conformité"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>c("avertissement-risques"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Avertissement sur les risques"}),t.jsx("button",{onClick:()=>c("conflits-interets"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Conflits d'intérêts"}),t.jsx("button",{onClick:()=>c("cookies-traceurs"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Cookies et traceurs"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wide",children:"Contact"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>c("support-client"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Support client"}),t.jsx("button",{onClick:()=>c("signalement-incident"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Signalement d'incident"}),t.jsx("button",{onClick:()=>c("nous-contacter"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Nous contacter"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wide",children:"Services"}),t.jsx("div",{className:"space-y-3",children:t.jsx("button",{onClick:()=>c("livestream"),className:"block text-gray-300 hover:text-white transition-colors text-sm text-left",children:"Livestream Trading"})})]})]}),t.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6 mt-12 mb-8",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-red-400 text-xl flex-shrink-0 mt-1",children:"⚠️"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-red-400 font-bold text-lg mb-3",children:"Avertissement sur les risques"}),t.jsxs("div",{className:"text-gray-300 text-sm leading-relaxed space-y-2",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Le trading comporte des risques importants de perte en capital."})," Vous pourriez perdre tout ou partie de votre investissement initial."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Les performances passées ne garantissent pas les résultats futurs."})," Les signaux et analyses présentés ne constituent pas des conseils en investissement personnalisés."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Tradez uniquement avec des fonds que vous pouvez vous permettre de perdre."})," TheTheTrader ne saurait être tenu responsable des pertes encourues suite à l'utilisation de nos services."]}),t.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Ce service est destiné à des fins éducatives et d'information. Consultez un conseiller financier professionnel avant toute décision d'investissement."})]})]})]})}),t.jsx("div",{className:"border-t border-purple-700/50 mt-16 pt-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("img",{src:"/logo-removebg-preview.png",alt:"Trading pour les nuls",className:"h-20 md:h-64 lg:h-80 w-auto"})}),t.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"© 2025 TheTheTrader. Trading avec simplicité."})]})})]})})]}),n&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Connexion"}),t.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700 transition-colors duration-200",children:"✕"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:d,onChange:xe=>f(xe.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"votre@email.com"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 mb-2",children:"Mot de passe"}),t.jsx("input",{type:"password",value:y,onChange:xe=>x(xe.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"••••••••"})]}),t.jsx("button",{onClick:M,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:opacity-90",children:"Se connecter"})]})]})})]})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js",{updateViaCache:"none"}).then(r=>{console.log("SW registered: ",r),r.update(),r.addEventListener("updatefound",()=>{console.log("Service worker update found");const e=r.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&window.location.reload()})})}).catch(r=>{console.log("SW registration failed: ",r)})});R1.createRoot(document.getElementById("root")).render(t.jsx(L.StrictMode,{children:t.jsx(_6,{})}));
